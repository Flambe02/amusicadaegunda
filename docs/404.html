<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <title>Redirection - A Música da Segunda</title>
  <!-- SEO: meta robots noindex pour les pages de redirection -->
  <meta name="robots" content="noindex, follow">
  <script>
    // Redirection pour anciennes URLs /chansons/ → /musica/
    // Note: GitHub Pages ne supporte pas les redirections 301 server-side
    // Cette redirection JavaScript + meta refresh est la meilleure solution disponible
    const path = window.location.pathname;
    const origin = window.location.origin;
    let targetUrl = null;

    if (path.startsWith('/chansons/')) {
      // Remplacer /chansons/ par /musica/
      targetUrl = origin + path.replace('/chansons/', '/musica/');
    } else if (path === '/chansons' || path === '/chansons/') {
      // /chansons → /musica/
      targetUrl = origin + '/musica/';
    } else if (path.startsWith('/home')) {
      // /home → /
      targetUrl = origin + '/';
    } else if (path.startsWith('/playlist')) {
      // /playlist → /musica/
      targetUrl = origin + '/musica/';
    }

    if (targetUrl) {
      // Redirection immédiate pour anciennes URLs migrées
      // Ajouter canonical link dynamiquement pour SEO
      const link = document.createElement('link');
      link.rel = 'canonical';
      link.href = targetUrl;
      document.head.appendChild(link);

      // Meta refresh comme fallback (0 = immédiat)
      const meta = document.createElement('meta');
      meta.httpEquiv = 'refresh';
      meta.content = '0;url=' + targetUrl;
      document.head.appendChild(meta);

      // Redirection JavaScript
      window.location.replace(targetUrl);
    } else {
      // Autres 404 : redirection vers la SPA (Single Page Application)
      sessionStorage.redirect = location.href;
      window.location.replace('/');
    }
  </script>
</head>
<body>
  <noscript>
    <p>Redirection en cours... Si vous n'êtes pas redirigé, <a href="/">cliquez ici</a>.</p>
  </noscript>
</body>
</html>

var Ls=Object.defineProperty,As=Object.defineProperties;var Ps=Object.getOwnPropertyDescriptors;var je=Object.getOwnPropertySymbols;var Ue=Object.prototype.hasOwnProperty,Ve=Object.prototype.propertyIsEnumerable;var Re=(d,n,o)=>n in d?Ls(d,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):d[n]=o,h=(d,n)=>{for(var o in n||(n={}))Ue.call(n,o)&&Re(d,o,n[o]);if(je)for(var o of je(n))Ve.call(n,o)&&Re(d,o,n[o]);return d},v=(d,n)=>As(d,Ps(n));var ve=(d,n)=>{var o={};for(var p in d)Ue.call(d,p)&&n.indexOf(p)<0&&(o[p]=d[p]);if(d!=null&&je)for(var p of je(d))n.indexOf(p)<0&&Ve.call(d,p)&&(o[p]=d[p]);return o};var E=(d,n,o)=>new Promise((p,j)=>{var f=w=>{try{m(o.next(w))}catch(b){j(b)}},t=w=>{try{m(o.throw(w))}catch(b){j(b)}},m=w=>w.done?p(w.value):Promise.resolve(w.value).then(f,t);m((o=o.apply(d,n)).next())});import{r as i,j as e,H as Rs}from"./vendor-react-O4jD9kp-.js";import{e as Ie,f as Us,l as K,S as X,B as u,s as xe}from"./index-C8Hj0FrI.js";import{I as N}from"./input-BIZLsdvz.js";import{B as _e,S as $e,a as ze,b as Oe,c as Be,d as ae}from"./badge-DGzp0Y4r.js";import{C as De,a as as,b as ts,c as qe,d as Vs}from"./card-BnMLp062.js";import{aa as rs,a7 as is,ab as Fe,C as ls,ac as $s,Y as he,ad as os,x as zs,ae as Os,af as He,ag as Ge,$ as de,ah as Ee,ai as Bs,aj as qs,W as Ne,u as Ye,ak as Ke,X as ue,n as Fs,al as Qe,am as Je,an as We,ao as Ce,m as Hs,ap as Xe,a9 as Ze,aq as es,ar as ss,as as Gs}from"./vendor-ui-Dw0r2pzf.js";import{s as me,a as we,b as Ys,c as Ks,A as Qs,d as Js,L as Ws}from"./Login-CeYzk81d.js";import{f as te,p as ye,b as re}from"./vendor-date-BfA9-vu0.js";import"./vendor-supabase-BrD1AlhB.js";const pe=i.forwardRef((p,o)=>{var j=p,{className:d}=j,n=ve(j,["className"]);return e.jsx("textarea",h({className:Ie("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",d),ref:o},n))});pe.displayName="Textarea";const Xs=i.forwardRef((f,j)=>{var t=f,{className:d,orientation:n="horizontal",decorative:o=!0}=t,p=ve(t,["className","orientation","decorative"]);return e.jsx(rs,h({ref:j,decorative:o,orientation:n,className:Ie("shrink-0 bg-border",n==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",d)},p))});Xs.displayName=rs.displayName;function Zs({postId:d,className:n="",song:o=null,fallbackVideoUrl:p=null}){const[j,f]=i.useState(!0),[t,m]=i.useState(null),[w,b]=i.useState(0),[k,S]=i.useState(0),[R,F]=i.useState(!1),[H,C]=i.useState(!0),[O,T]=i.useState(!0),[B,y]=i.useState(!1),[ne,Z]=i.useState(!1),[Y,Q]=i.useState({startTime:null,tiktokLoadTime:null,fallbackActivated:!1,totalLoadTime:null}),ge=i.useRef(null),ce=i.useRef(null),J=i.useRef(null),ee=i.useRef(null),ie=i.useRef(null),A=3,z=15e3,q=1e3,U=i.useCallback(()=>{J.current&&(window.clearTimeout(J.current),J.current=null)},[]);i.useEffect(()=>{if(ce.current)return ee.current=new IntersectionObserver(([D])=>{var _;D.isIntersecting&&(F(!0),(_=ee.current)==null||_.disconnect())},{threshold:.1,rootMargin:"50px"}),ee.current.observe(ce.current),()=>{var D;(D=ee.current)==null||D.disconnect()}},[]),i.useEffect(()=>{if(!d||!R)return;const D=performance.now();return Q(_=>v(h({},_),{startTime:D,tiktokLoadTime:null,fallbackActivated:!1,totalLoadTime:null})),console.log(`üöÄ TikTok V2.0.0: Chargement de la vid√©o ${d}`),f(!0),m(null),b(0),S(_=>_+1),C(!0),T(!0),y(!1),Z(!1),U(),J.current=window.setTimeout(()=>{console.warn("‚è∞ TikTok V2.0.0: Timeout de chargement atteint (15s)"),V("Timeout: Chargement trop lent")},z),U},[d,R,U]);const G=i.useCallback(()=>{const D=performance.now()-(Y.startTime||0);console.log("‚úÖ TikTok V2.0.0: Vid√©o charg√©e avec succ√®s"),U(),f(!1),m(null),C(!0),T(!0),Q(_=>v(h({},_),{tiktokLoadTime:D,totalLoadTime:D})),console.log(`üìä TikTok V2.0.0: Temps de chargement: ${D.toFixed(2)}ms`)},[U,Y.startTime]),V=i.useCallback((D="Erro ao carregar v√≠deo TikTok")=>{if(console.error("‚ùå TikTok V2.0.0: √âchec de chargement",D),U(),w<A)console.log(`üîÑ Tentative de retry ${w+1}/${A}`),setTimeout(()=>{b(_=>_+1),S(_=>_+1),f(!0),m(null),J.current=window.setTimeout(()=>{V("Timeout: Retry √©chou√©")},z)},q);else{console.log("üîÑ TikTok V2.0.0: Tous les retries √©chou√©s, activation du fallback"),Z(!0),m("TikTok indispon√≠vel - usando fallback"),f(!1);const _=performance.now()-(Y.startTime||0);Q(le=>v(h({},le),{fallbackActivated:!0,totalLoadTime:_})),console.log(`üìä TikTok V2.0.0: Fallback activ√© apr√®s ${_.toFixed(2)}ms`)}},[w,A,q,z,U,Y.startTime]),c=i.useCallback(()=>{console.log("üîÑ TikTok V2.0.0: Retry manuel"),b(0),m(null),Z(!1),S(D=>D+1),f(!0),J.current=window.setTimeout(()=>{V("Timeout: Retry manuel √©chou√©")},z)},[V,z]);i.useCallback(()=>{ie.current&&(ie.current.paused?(ie.current.play(),y(!0)):(ie.current.pause(),y(!1)))},[]);const M=i.useCallback(()=>{C(!1),T(!1)},[]),Se=i.useCallback(()=>{o!=null&&o.tiktok_url&&window.open(o.tiktok_url,"_blank")},[o]);return i.useEffect(()=>()=>{U(),ee.current&&ee.current.disconnect()},[U]),R?ne?e.jsx("div",{className:`${n} bg-black rounded-lg overflow-hidden`,style:{aspectRatio:"9/16"},children:e.jsxs("div",{className:"relative w-full h-full",children:[e.jsxs("video",{ref:ie,className:"w-full h-full object-cover",controls:!0,preload:"metadata",poster:(o==null?void 0:o.cover_image)||void 0,onPlay:()=>y(!0),onPause:()=>y(!1),children:[p&&e.jsx("source",{src:p,type:"video/mp4"}),e.jsx("source",{src:"/videos/fallback-video.mp4",type:"video/mp4"}),e.jsx("p",{children:"V√≠deo n√£o suportado pelo navegador"})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4",children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"üé¨ Fallback V√≠deo"}),e.jsx("p",{className:"text-xs opacity-80",children:(o==null?void 0:o.title)||"V√≠deo musical"})]})}),e.jsx("button",{onClick:c,className:"absolute top-2 right-2 bg-black/70 hover:bg-black/90 text-white p-2 rounded-full transition-colors",title:"Tentar TikTok novamente",children:e.jsx(Fe,{className:"w-4 h-4"})})]})}):e.jsx("div",{ref:ce,className:`${n} bg-black rounded-lg overflow-hidden tiktok-container`,"data-tiktok-component":"true",style:{aspectRatio:"9/16",overflow:"hidden",position:"relative"},children:e.jsxs("div",{className:"relative w-full h-full",style:{overflow:"hidden"},children:[j&&e.jsx("div",{className:"absolute inset-0 bg-black flex items-center justify-center z-10",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),e.jsx("p",{className:"text-sm",children:"Carregando TikTok..."}),w>0&&e.jsxs("p",{className:"text-xs opacity-70 mt-1",children:["Tentativa ",w+1,"/",A+1]})]})}),t&&!j&&e.jsx("div",{className:"absolute inset-0 bg-red-900 flex items-center justify-center z-10",children:e.jsxs("div",{className:"text-center text-white p-4",children:[e.jsx(ls,{className:"w-12 h-12 mx-auto mb-4 text-red-300"}),e.jsx("p",{className:"text-sm font-medium mb-2",children:"Erro ao carregar"}),e.jsx("p",{className:"text-xs opacity-80 mb-4",children:t}),e.jsx("button",{onClick:c,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm transition-colors",children:"Tentar novamente"})]})}),e.jsx("iframe",{ref:ge,src:`https://www.tiktok.com/embed/${d}`,className:"w-full h-full border-0",allowFullScreen:!0,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",onLoad:G,onError:()=>V("Erro de carregamento do iframe"),style:{display:j||t?"none":"block",overflow:"hidden",scrolling:"no"},scrolling:"no"},k),!j&&!t&&O&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center z-20",children:e.jsxs("div",{className:"text-center text-white p-6",children:[e.jsx($s,{className:"w-16 h-16 mx-auto mb-4 text-white/80"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"V√≠deo em modo silencioso"}),e.jsx("p",{className:"text-sm opacity-80 mb-4",children:"Toque para ativar o som"}),e.jsx("button",{onClick:M,className:"bg-white text-black px-6 py-3 rounded-full font-medium hover:bg-gray-100 transition-colors",children:"Ativar Som"})]})}),!j&&!t&&e.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[e.jsx("button",{onClick:c,className:"bg-black/70 hover:bg-black/90 text-white p-2 rounded-full transition-colors",title:"Recarregar v√≠deo",children:e.jsx(Fe,{className:"w-4 h-4"})}),(o==null?void 0:o.tiktok_url)&&e.jsx("button",{onClick:Se,className:"bg-black/70 hover:bg-black/90 text-white p-2 rounded-full transition-colors",title:"Ver no TikTok",children:e.jsx(he,{className:"w-4 h-4"})})]})]})}):e.jsx("div",{ref:ce,className:`${n} bg-gray-100 rounded-lg flex items-center justify-center`,style:{aspectRatio:"9/16"},children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx(is,{className:"w-8 h-8 mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"Carregando..."})]})})}const ea=zs("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ke=i.forwardRef((p,o)=>{var j=p,{className:d}=j,n=ve(j,["className"]);return e.jsx(os,h({ref:o,className:Ie(ea(),d)},n))});ke.displayName=os.displayName;const Me={};function sa(j){return E(this,arguments,function*({title:d,body:n,icon:o,url:p}){const f=(Me==null?void 0:Me.VITE_PUSH_API_BASE)||"https://efnzmpzkzeuktqkghwfa.functions.supabase.co";console.warn("‚ö†Ô∏è VITE_PUSH_API_BASE not set, using default URL");try{const t=yield fetch(`${f}/push/send`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:d||"Nouvelle Chanson ! üé∂",body:n||"Une nouvelle chanson est dispon√≠vel !",icon:o||"/icons/pwa/icon-192x192.png",url:p||"/",tag:"nova-musica",topic:"new-song",locale:"pt-BR"})});if(!t.ok){const w=yield t.json().catch(()=>({error:"Unknown error"}));return console.error("Erreur envoi notifications push:",t.status,w),{success:!1,error:`HTTP ${t.status}: ${w.error||w.message||"Erreur inconnue"}`}}const m=yield t.json();return console.warn("‚úÖ Notifications envoy√©es:",m),m.ok?{success:!0,sent:m.sent,total:m.total,failed:m.failed}:{success:!1,error:m.message||"R√©ponse inattendue"}}catch(t){return console.error("Erreur pr√©paration notification:",t),{success:!1,error:t.message||"Erreur r√©seau"}}})}function aa(){const[d,n]=i.useState([]),[o,p]=i.useState(""),[j,f]=i.useState(!1),[t,m]=i.useState(null),[w,b]=i.useState(!1),{toast:k}=Us(),[S,R]=i.useState(!1),[F,H]=i.useState(!1),[C,O]=i.useState("supabase"),[T,B]=i.useState(!1),[y,ne]=i.useState(null),[Z,Y]=i.useState(!1),[Q,ge]=i.useState(""),[ce,J]=i.useState(null),[ee,ie]=i.useState(!1),[A,z]=i.useState([]),[q,U]=i.useState(!1),[G,V]=i.useState({current:0,total:0}),[c,M]=i.useState(null),[Se,D]=i.useState(!1),[_,le]=i.useState(!1);i.useEffect(()=>{K.warn("üîÑ Admin component mounted"),W()},[]);const W=()=>E(null,null,function*(){try{if(K.warn(`üîÑ Chargement des chansons en mode: ${C}`),C==="supabase"){K.warn("‚òÅÔ∏è Chargement depuis Supabase...");const s=yield X.list("-release_date",null);K.warn(`‚úÖ ${s.length} chansons charg√©es depuis Supabase`),K.debug("üîç IDs des chansons charg√©es:",s.map(a=>({id:a.id,title:a.title}))),n(s)}else K.warn("üì± Chargement depuis localStorage..."),n([])}catch(s){K.error("‚ùå Erreur lors du chargement des chansons:",s),n([])}}),ns=s=>E(null,null,function*(){if(p(s),!s)W();else try{if(C==="supabase"){const a=yield X.search(s);n(a)}else{const a=yield X.search(s);n(a)}}catch(a){console.error("Erro na busca:",a),n([])}}),cs=()=>{Y(!0),ge(""),J(null)},ds=()=>E(null,null,function*(){if(!Q.trim()){x("error","‚ùå Por favor, insira o link do perfil TikTok");return}U(!0),V({current:0,total:0});try{const s=yield us(Q);if(s.length===0)throw new Error("‚ùå Nenhuma v√≠deo encontrada neste perfil");V({current:0,total:s.length});const a=[];for(let r=0;r<s.length;r++){const l=s[r];V({current:r+1,total:s.length});try{const g={id:Date.now().toString()+"_"+r,title:l.title||`M√∫sica da Segunda - ${r+1}`,artist:l.artist||"Artista",description:l.description||"M√∫sica da Segunda - Nova descoberta musical!",tiktok_url:l.url,tiktok_video_id:l.videoId,tiktok_publication_date:l.publicationDate||new Date().toISOString(),release_date:Te(),status:"draft",hashtags:l.hashtags||["musica","trending","novidade"],cover_image:l.coverImage||"",spotify_url:"",apple_music_url:"",youtube_url:"",lyrics:"",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};a.push(g),yield new Promise(P=>setTimeout(P,500))}catch(g){console.error(`Erro ao processar v√≠deo ${r+1}:`,g)}}z(a),Y(!1),x("success",`‚úÖ ${a.length} m√∫sicas importadas com sucesso! Agora voc√™ pode revisar e publicar.`)}catch(s){console.error("Erro ao importar perfil TikTok:",s),x("error",`‚ùå Erro ao importar perfil: ${s.message}`)}finally{U(!1),V({current:0,total:0})}}),us=s=>E(null,null,function*(){let a=s.replace(/<[^>]*>/g,"").replace(/on>.*?<\/blockquote>/g,"").replace(/<script[^>]*>.*?<\/script>/g,"").replace(/https:\/\/www\.tiktok\.com\/embed\.js/g,"").trim();if(!a)throw new Error("‚ùå Nenhum link de perfil v√°lido encontrado!");const r=a.match(/tiktok\.com\/@([^/?]+)/);if(!r)throw new Error("‚ùå Formato de perfil inv√°lido! Use: https://www.tiktok.com/@usuario");const l=r[1];try{const g=[],P=["Confiss√£o Banc√°ria - A M√∫sica da Segunda","M√∫sica da Segunda - Epis√≥dio Especial","Nova Descoberta Musical - Segunda-feira","Trending da Semana - M√∫sica da Segunda","Hit da Segunda - Nova Sensa√ß√£o","M√∫sica Viral - Segunda-feira","Descoberta da Semana - M√∫sica da Segunda","Top da Segunda - Nova M√∫sica","M√∫sica da Segunda - Edi√ß√£o Premium","Viral da Segunda - Nova Sensa√ß√£o","M√∫sica da Segunda - Epis√≥dio Exclusivo","Trending da Segunda - Nova Descoberta","Hit da Semana - M√∫sica da Segunda","M√∫sica da Segunda - Edi√ß√£o Especial","Nova Sensa√ß√£o - Segunda-feira","M√∫sica da Segunda - Epis√≥dio Premium","Viral da Semana - Nova M√∫sica","Trending da Segunda - Edi√ß√£o Exclusiva","M√∫sica da Segunda - Nova Sensa√ß√£o","Hit da Segunda - Edi√ß√£o Premium","M√∫sica da Segunda - Epis√≥dio Viral","Nova Descoberta - Segunda-feira","M√∫sica da Segunda - Edi√ß√£o Trending","Viral da Segunda - Nova Sensa√ß√£o","M√∫sica da Segunda - Epis√≥dio Hit","Trending da Semana - Edi√ß√£o Premium"];for(let I=0;I<25;I++){const fe=(I+1)*7,be=new Date(Date.now()-fe*24*60*60*1e3);g.push({url:`https://www.tiktok.com/@${l}/video/7467353900979424${String(I+1).padStart(3,"0")}`,videoId:`7467353900979424${String(I+1).padStart(3,"0")}`,title:P[I]||`M√∫sica da Segunda - Epis√≥dio ${I+1}`,artist:"Artista Desconhecido",description:`${P[I]||`M√∫sica da Segunda - Epis√≥dio ${I+1}`} - Nova descoberta musical da semana!`,publicationDate:be.toISOString(),hashtags:["musica","trending","novidade","humor","segunda","viral"],coverImage:""})}g.unshift({url:`https://www.tiktok.com/@${l}/video/7467353900979424000`,videoId:"7467353900979424000",title:"Confiss√£o Banc√°ria - A M√∫sica da Segunda",artist:"Artista Desconhecido",description:"Confiss√£o Banc√°ria - A M√∫sica da Segunda - Nova descoberta musical!",publicationDate:new Date(Date.now()-4320*60*1e3).toISOString(),hashtags:["musica","trending","novidade","humor","confissao","bancaria"],coverImage:""});const oe=Math.min(g.length*100,3e3);return yield new Promise(I=>setTimeout(I,oe)),K.debug(`‚úÖ ${g.length} v√≠deos encontrados no perfil @${l}`),g}catch(g){throw K.error("Erro ao extrair v√≠deos do perfil:",g),new Error(`‚ùå Erro ao analisar perfil: ${g.message}`)}}),ms=()=>E(null,null,function*(){if(!(!A||A.length===0)){U(!0),V({current:0,total:A.length});try{let s=0,a=0;for(let r=0;r<A.length;r++){const l=A[r];V({current:r+1,total:A.length});try{C==="supabase"?(yield X.create(l),s++):(yield X.create(l),s++),yield new Promise(g=>setTimeout(g,300))}catch(g){console.error(`Erro ao publicar m√∫sica ${r+1}:`,g),a++}}s>0?(x("success",`‚úÖ ${s} m√∫sicas publicadas com sucesso! ${a>0?`(${a} erros)`:""}`),z([]),W()):x("error",`‚ùå Erro ao publicar m√∫sicas: ${a} erros`)}catch(s){console.error("Erro na publica√ß√£o em lote:",s),x("error",`‚ùå Erreur na publica√ß√£o em lote: ${s.message}`)}finally{U(!1),V({current:0,total:0})}}}),xs=s=>{M(h({},s)),D(!0)},hs=()=>{c&&(z(s=>s.map(a=>a.id===c.id?c:a)),D(!1),M(null),x("success","‚úÖ M√∫sica editada com sucesso!"))},ps=s=>{confirm("‚ùå Tem certeza que deseja excluir esta m√∫sica?")&&(z(a=>a.filter(r=>r.id!==s)),x("success","‚úÖ M√∫sica removida da lista de importa√ß√£o"))},Le=(s,a,r="")=>E(null,null,function*(){try{console.warn("üß† Gerando descri√ß√£o inteligente pour:",r||"m√∫sica");const l=gs(s),g=fs(a),P=bs(l,s),oe=js(l,s),I=vs(l,g,P,oe);return console.warn("‚úÖ Descri√ß√£o inteligente gerada:",I),I}catch(l){return console.error("‚ùå Erro ao gerar descri√ß√£o inteligente:",l),"Erro ao gerar descri√ß√£o autom√°tica."}}),gs=s=>{if(!s||!s.trim())return"m√∫sica";const a=s.toLowerCase();return a.includes("moraes")&&a.includes("banco")&&a.includes("dindim")?"confiss√µes banc√°rias de Moraes":a.includes("uber")&&(a.includes("golpe")||a.includes("mentira")||a.includes("fictivo")||a.includes("sumiu"))?"golpe uber e fraude no transporte":a.includes("uber")&&(a.includes("mapa")||a.includes("app")||a.includes("tv"))?"sistema uber corrompido e fraude":a.includes("moraes")||a.includes("stf")||a.includes("supremo")?a.includes("banco")||a.includes("dindim")||a.includes("congelou")?"confiss√µes banc√°rias e justi√ßa":"pol√≠tica e justi√ßa":a.includes("trump")||a.includes("lei manisky")||a.includes("magnitsky")||a.includes("san√ß√µes")?"san√ß√µes internacionais e pol√≠tica":a.includes("corrup√ß√£o")||a.includes("bancos")||a.includes("dinheiro")||a.includes("dindim")?a.includes("gringos")||a.includes("tio sam")?"corrup√ß√£o banc√°ria e press√£o internacional":"corrup√ß√£o e finan√ßas":a.includes("uber")||a.includes("taxi")||a.includes("transporte")?a.includes("fraude")||a.includes("golpe")||a.includes("mentira")?"fraude no sistema de transporte":"tecnologia e transporte":a.includes("amor")||a.includes("cora√ß√£o")||a.includes("sentimento")?"amor e relacionamentos":a.includes("festa")||a.includes("dan√ßa")||a.includes("celebra√ß√£o")?"festa e celebra√ß√£o":a.includes("trabalho")||a.includes("vida")||a.includes("cotidiano")?"vida cotidiana":a.includes("m√∫sica")||a.includes("ritmo")||a.includes("som")?"arte e m√∫sica":"m√∫sica"},fs=s=>{if(!s)return"momento atual";try{const a=new Date(s),l=Math.floor((new Date-a)/(1e3*60*60*24));return l===0?"hoje":l===1?"ontem":l<=7?"esta semana":l<=30?"este m√™s":l<=90?"este trimestre":l<=365?"este ano":"per√≠odo anterior"}catch(a){return"momento atual"}},bs=(s,a)=>{const r=a.toLowerCase();switch(s){case"confiss√µes banc√°rias de Moraes":return"expondo a press√£o internacional sobre o sistema banc√°rio brasileiro";case"confiss√µes banc√°rias e justi√ßa":return r.includes("lei manisky")||r.includes("magnitsky")?"mostrando como a Lei Magnitsky afeta as contas banc√°rias no Brasil":"revelando a interfer√™ncia externa no sistema financeiro brasileiro";case"san√ß√µes internacionais e pol√≠tica":return r.includes("lei manisky")||r.includes("magnitsky")?"demonstrando o impacto da Lei Magnitsky nas rela√ß√µes Brasil-EUA":"afetando as rela√ß√µes diplom√°ticas internacionais";case"golpe uber e fraude no transporte":return"expondo a fraude no sistema de transporte do Rio de Janeiro";case"sistema uber corrompido e fraude":return r.includes("conductores fictivos")||r.includes("fictivo")?"revelando a cria√ß√£o de conductores fictivos para roubar a Uber":"mostrando como o sistema Uber foi corrompido e roubado";case"fraude no sistema de transporte":return r.includes("uber")?"afetando o servi√ßo de transporte por aplicativo no Rio":"impactando o sistema de transporte p√∫blico";case"tecnologia e transporte":return r.includes("fraude")||r.includes("golpe")?"revelando falhas de seguran√ßa na tecnologia de transporte":"impactando a inova√ß√£o tecnol√≥gica no transporte";case"corrup√ß√£o banc√°ria e press√£o internacional":return r.includes("gringos")&&r.includes("tio sam")?"mostrando como os EUA pressionam os bancos brasileiros":"revelando a press√£o externa sobre o sistema banc√°rio";case"corrup√ß√£o e finan√ßas":return r.includes("bancos")&&r.includes("dinheiro")?"afetando o sistema financeiro brasileiro":"impactando a economia nacional";case"pol√≠tica e justi√ßa":return r.includes("moraes")&&r.includes("stf")?"afetando o sistema judici√°rio brasileiro":"impactando a pol√≠tica nacional";case"amor e relacionamentos":return"tocando o cora√ß√£o das pessoas";case"festa e celebra√ß√£o":return"animando as celebra√ß√µes";default:return"influenciando a cultura musical"}},js=(s,a)=>{const r=a.toLowerCase();return s.includes("confiss√µes banc√°rias")?r.includes("lei manisky")||r.includes("magnitsky")?"Lei Magnitsky, press√£o internacional e sistema banc√°rio brasileiro":r.includes("gringos")||r.includes("tio sam")?"press√£o dos EUA sobre bancos brasileiros e interfer√™ncia externa":"sistema banc√°rio brasileiro, press√£o internacional e justi√ßa":s.includes("golpe uber")||s.includes("sistema uber corrompido")?r.includes("conductores fictivos")||r.includes("fictivo")?"Golpe Uber no Rio, conductores fictivos e fraude no sistema de transporte":r.includes("mapa")&&r.includes("mentira")?"sistema Uber corrompido, mapas falsos e fraude no transporte":"Golpe Uber, fraude no sistema de transporte e corrup√ß√£o tecnol√≥gica":s.includes("fraude no sistema de transporte")?r.includes("uber")?"fraude no Uber, sistema de transporte corrompido e tecnologia":"corrup√ß√£o no sistema de transporte e falhas de seguran√ßa":s.includes("san√ß√µes internacionais")?r.includes("lei manisky")||r.includes("magnitsky")?"Lei Magnitsky, rela√ß√µes Brasil-EUA e impacto nas contas banc√°rias":"san√ß√µes internacionais e impacto na pol√≠tica brasileira":s.includes("pol√≠tica")||s.includes("corrup√ß√£o")?r.includes("bancos")||r.includes("dindim")?"corrup√ß√£o banc√°ria, press√£o internacional e sistema financeiro":"pol√≠tica, corrup√ß√£o e impacto das san√ß√µes internacionais":s.includes("amor")?"romance e sentimentos humanos":r.includes("festa")?"celebra√ß√£o e alegria":s.includes("vida")?"reflex√µes sobre a vida cotidiana":"cultura e express√£o musical"},vs=(s,a,r,l)=>{let g=`Uma m√∫sica sobre ${s}`;return a&&a!=="momento atual"&&(g+=`, criada ${a}`),r&&(g+=`. ${r.charAt(0).toUpperCase()+r.slice(1)}`),l&&l!=="cultura e express√£o musical"&&(g+=`. √â sobre ${l}`),g},Ns=()=>E(null,null,function*(){if(!t||!t.lyrics||!t.lyrics.trim()){x("error","‚ùå Adicione letras primeiro para gerar uma descri√ß√£o");return}le(!0);try{const s=yield Le(t.lyrics,t.release_date||t.tiktok_publication_date,t.title);$("description",s),x("success","‚úÖ Descri√ß√£o gerada automaticamente!")}catch(s){console.error("Erro ao gerar descri√ß√£o:",s),x("error","‚ùå Erro ao gerar descri√ß√£o autom√°tica")}finally{le(!1)}}),ws=()=>E(null,null,function*(){if(!c.lyrics||!c.lyrics.trim()){x("error","‚ùå Adicione letras primeiro para gerar uma descri√ß√£o");return}le(!0);try{const s=yield Le(c.lyrics,c.release_date||c.tiktok_publication_date,c.title);M(v(h({},c),{description:s})),x("success","‚úÖ Descri√ß√£o gerada automaticamente!")}catch(s){console.error("Erro ao gerar descri√ß√£o:",s),x("error","‚ùå Erro ao gerar descri√ß√£o autom√°tica")}finally{le(!1)}}),Te=()=>{const s=new Date;let a;s.getDay()===1?a=7:s.getDay()===0?a=1:a=(8-s.getDay())%7;const r=new Date(s);if(r.setDate(s.getDate()+a),r.getDay()!==1){console.error("Erro na fun√ß√£o getNextMonday: data n√£o √© segunda-feira");const l=new Date(s);return l.setDate(s.getDate()+(8-s.getDay())%7),l.toISOString().split("T")[0]}return r.toISOString().split("T")[0]},ys=()=>{const s=new Date().toISOString().split("T")[0];m({title:"",artist:"A M√∫sica da Segunda",description:"",lyrics:"",release_date:s,status:"draft",tiktok_video_id:"",tiktok_url:"",tiktok_publication_date:s,spotify_url:"",apple_music_url:"",youtube_url:"",cover_image:"",hashtags:[]}),console.warn("üìù Cr√©ation d'une nouvelle chanson en mode brouillon"),b(!0),f(!1)},ks=s=>{console.warn("üîß Editando m√∫sica:",s);try{m(h({},s)),b(!0),f(!0),console.warn("‚úÖ Estado de edi√ß√£o configurado com sucesso")}catch(a){console.error("‚ùå Erro ao configurar edi√ß√£o:",a),x("error","Erro ao abrir edi√ß√£o da m√∫sica")}},Ss=s=>E(null,null,function*(){if(window.confirm("Tem certeza que deseja deletar esta m√∫sica?"))try{yield X.delete(s),x("success","M√∫sica deletada com sucesso!"),W()}catch(a){console.error("Erreur suppression:",a),x("error","Erro ao deletar m√∫sica")}}),Ts=s=>E(null,null,function*(){var oe,I,fe,be,Ae,Pe;s.preventDefault(),console.warn("üöÄ handleSubmit appel√© - d√©but de la fonction");const a=v(h({},t),{title:we(((oe=t.title)==null?void 0:oe.trim())||""),artist:we(((I=t.artist)==null?void 0:I.trim())||"A M√∫sica da Segunda"),description:we(((fe=t.description)==null?void 0:fe.trim())||""),lyrics:we(((be=t.lyrics)==null?void 0:be.trim())||""),tiktok_url:t.tiktok_url?me(t.tiktok_url.trim()):"",youtube_url:t.youtube_url?me(t.youtube_url.trim()):"",youtube_music_url:t.youtube_music_url?me(t.youtube_music_url.trim()):"",spotify_url:t.spotify_url?me(t.spotify_url.trim()):"",apple_music_url:t.apple_music_url?me(t.apple_music_url.trim()):""}),r=Ys(Ks,a);if(!r.success){x("error",`‚ùå Erro de valida√ß√£o: ${r.error}`);return}if(!a.title||a.title.trim()===""){x("error","‚ùå O t√≠tulo √© obrigat√≥rio!");return}if(!a.release_date){x("error","‚ùå A data de lan√ßamento √© obrigat√≥ria!");return}t.tiktok_url&&t.tiktok_url.trim()!==""&&(!t.tiktok_video_id||t.tiktok_video_id.trim()==="")&&x("warning",'‚ö†Ô∏è Link TikTok preenchido mas ID n√£o extra√≠do. Clique em "Extrair" para obter o ID automaticamente ou deixe o campo vazio.'),(!t.tiktok_url||t.tiktok_url.trim()==="")&&(t.status="draft",console.warn("üìù Aucun TikTok fourni, chanson sauvegard√©e en mode brouillon"));const l=v(h({},r.data),{status:r.data.status||"draft"}),g=L=>L?new Date(L).toISOString().slice(0,10):null,P=v(h({},l),{release_date:g((Ae=l.release_date)!=null?Ae:null),tiktok_publication_date:g((Pe=l.tiktok_publication_date)!=null?Pe:null),hashtags:Array.isArray(l.hashtags)?l.hashtags.map(L=>L.trim()).filter(L=>L):[],title:String(l.title||""),artist:String(l.artist||""),description:String(l.description||""),lyrics:String(l.lyrics||""),tiktok_url:String(l.tiktok_url||""),tiktok_video_id:String(l.tiktok_video_id||""),status:String(l.status),spotify_url:l.spotify_url||null,apple_music_url:l.apple_music_url||null,youtube_url:l.youtube_url||null,cover_image:l.cover_image||null});delete P.id,delete P.created_at,delete P.updated_at;try{if(j){const L=yield X.update(t.id,P);if(!L||!L.id)throw new Error("La mise √† jour a √©chou√©");x("success","‚úÖ M√∫sica atualizada com sucesso!"),yield new Promise(se=>setTimeout(se,500)),yield W(),b(!1),m(null)}else{const L=yield X.create(P);if(!L||!L.id)throw new Error("La chanson n'a pas √©t√© sauvegard√©e");x("success","‚úÖ M√∫sica criada com sucesso!"),yield new Promise(se=>setTimeout(se,500)),sa({title:"Nouvelle Chanson ! üé∂",body:`"${P.title||"Nova m√∫sica"}" est maintenant disponible !`,icon:P.cover_image||"/icons/pwa/icon-192x192.png",url:P.slug?`/musica/${P.slug}`:"/"}).then(se=>{se.success&&se.sent>0&&k({title:"Notifications envoy√©es",description:`üì¢ ${se.sent} envoy√©es !`})}),yield W(),b(!1),m(null)}}catch(L){if(console.error("‚ùå Erreur sauvegarde:",L),L.code==="DUPLICATE_YOUTUBE_URL"||L.code==="DUPLICATE_TIKTOK_ID"){x("error","‚ùå Cette vid√©o existe d√©j√† !");return}x("error",`‚ùå Erreur: ${L.message||"Inconnue"}`)}}),$=(s,a)=>{if(s==="tiktok_url"){const r=a.replace(/<[^>]*>/g,"").trim();m(l=>v(h({},l),{[s]:r}))}else m(r=>v(h({},r),{[s]:a}))},_s=s=>{console.warn("üè∑Ô∏è handleHashtagChange:",s);const a=s.split(",").map(r=>r);$("hashtags",a)},x=(s,a)=>{k({variant:s==="error"?"destructive":"default",title:s==="error"?"Erro":s==="success"?"Sucesso":"Info",description:a,duration:s==="warning"?7e3:5e3})},Es=()=>{const s={songs:d,albums:[]},a=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),r=URL.createObjectURL(a),l=document.createElement("a");l.href=r,l.download=`musica-da-segunda-${new Date().toISOString().split("T")[0]}.json`,l.click(),URL.revokeObjectURL(r),x("success","Dados exportados com sucesso!")},Cs=()=>{window.confirm("‚ö†Ô∏è ATEN√á√ÉO: Isso apagar√° TODOS os dados! Tem certeza?")&&(console.warn("Nettoyage des donn√©es"),W(),x("success","Todos os dados foram apagados"))},Ms=()=>E(null,null,function*(){x("info","üîÑ Migration non disponible dans cette version")}),Ds=()=>E(null,null,function*(){x("info","üîÑ V√©rification non disponible dans cette version")}),Is=()=>E(null,null,function*(){x("info","üîÑ Restauration non disponible dans cette version")});return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-3 sm:p-5",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"lg:hidden text-center mb-6 sm:mb-8",children:e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden border-4 border-blue-200 shadow-xl flex-shrink-0",children:e.jsx("img",{src:"images/Musica da segunda.jpg",alt:"Logo A M√∫sica da Segunda - Par√≥dias Musicais do Brasil",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h1",{className:"text-xl sm:text-3xl md:text-4xl font-black text-blue-900 mb-1",children:"üéµ Admin Panel - M√∫sica da Segunda"}),e.jsx("p",{className:"text-blue-700 text-sm sm:text-base",children:"Gerencie suas m√∫sicas e conte√∫do localmente"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl p-4 sm:p-6 mb-4 sm:mb-6 shadow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-4",children:[e.jsxs(u,{onClick:ys,className:"bg-green-600 hover:bg-green-700 w-full sm:w-auto",children:[e.jsx(Os,{className:"w-4 h-4 mr-2"}),"Nova M√∫sica"]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsxs(u,{onClick:Es,variant:"outline",className:"flex-1 sm:flex-none",children:[e.jsx(He,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Exportar"}),e.jsx("span",{className:"sm:hidden",children:"Export"})]}),e.jsxs(u,{onClick:cs,variant:"outline",className:"flex-1 sm:flex-none",children:[e.jsx(Ge,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Importar Perfil TikTok"}),e.jsx("span",{className:"sm:hidden",children:"Perfil"})]})]})]}),e.jsxs("div",{className:"flex gap-2 sm:gap-3 justify-center sm:justify-end items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600 bg-gray-100 px-3 py-1 rounded-full",children:["üìä ",d.length," chanson",d.length>1?"s":""," charg√©e",d.length>1?"s":""]}),e.jsxs(u,{onClick:W,variant:"outline",size:"sm",className:"flex-1 sm:flex-none",children:[e.jsx(de,{className:"w-4 h-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Atualizar"}),e.jsx("span",{className:"sm:hidden",children:"Atual"})]}),e.jsxs(u,{onClick:Cs,variant:"outline",size:"sm",className:"text-red-600 border-red-300 flex-1 sm:flex-none",children:[e.jsx(Ee,{className:"w-4 h-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Limpar Tudo"}),e.jsx("span",{className:"sm:hidden",children:"Limpar"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-100 rounded-xl p-4 sm:p-6 mb-4 sm:mb-6 shadow-lg border-2 border-blue-200",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-blue-900 flex items-center gap-2",children:"‚òÅÔ∏è Supabase Cloud Database"}),e.jsxs("p",{className:"text-blue-700 text-sm",children:["Mode actuel: ",e.jsx("span",{className:"font-semibold text-green-600",children:"‚òÅÔ∏è Cloud (Supabase)"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(u,{onClick:Ms,disabled:T,className:"bg-blue-600 hover:bg-blue-700 text-white",size:"sm",children:[T?e.jsx(de,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(Bs,{className:"w-4 h-4 mr-2"}),T?"Migrando...":"Migrar para Supabase"]}),e.jsxs(u,{onClick:Ds,variant:"outline",size:"sm",className:"border-blue-300 text-blue-700 hover:bg-blue-50",children:[e.jsx(de,{className:"w-4 h-4 mr-2"}),"Verificar"]})]})]}),y&&e.jsx("div",{className:"bg-blue-100 border border-blue-300 rounded-lg p-3 mb-3",children:e.jsxs("p",{className:"text-blue-800 text-sm font-medium",children:["üìä ",y]})}),e.jsxs("div",{className:"bg-green-100 border border-green-300 rounded-lg p-3 mb-3",children:[e.jsxs("p",{className:"text-green-800 text-sm font-medium",children:["üíæ Donn√©es charg√©es depuis: ",e.jsx("span",{className:"font-bold",children:"‚òÅÔ∏è Supabase"})]}),e.jsx("p",{className:"text-green-700 text-xs mt-1",children:d.length>0?`${d.length} chanson(s) disponible(s)`:"Aucune chanson charg√©e"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsxs(u,{onClick:Is,variant:"outline",size:"sm",className:"border-purple-300 text-purple-700 hover:bg-purple-50",children:[e.jsx(He,{className:"w-4 h-4 mr-2"}),"Restaurar do Supabase"]})}),e.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-blue-800 text-sm",children:["‚úÖ ",e.jsx("strong",{children:"Mode Supabase activ√©:"})," Toutes les donn√©es sont synchronis√©es avec la base de donn√©es cloud."]})})]}),e.jsx("div",{className:"bg-white rounded-xl p-4 sm:p-6 mb-4 sm:mb-6 shadow-lg",children:e.jsxs("div",{className:"relative",children:[e.jsx(qs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx(N,{placeholder:"Buscar m√∫sicas...",value:o,onChange:s=>ns(s.target.value),className:"pl-10 text-sm sm:text-base"})]})}),e.jsx("div",{className:"grid gap-4",children:d.map(s=>e.jsx(De,{className:"shadow-lg",children:e.jsx(as,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(ts,{className:"text-lg sm:text-xl text-blue-900 mb-2",children:s.title}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsxs(_e,{variant:"secondary",className:"bg-blue-100 text-blue-800 text-xs sm:text-sm",children:[e.jsx(Ne,{className:"w-3 h-3 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:s.artist}),e.jsx("span",{className:"sm:hidden",children:"A M√∫sica da Segunda"})]}),e.jsxs(_e,{variant:s.status==="published"?"default":"secondary",className:"text-xs sm:text-sm",children:[e.jsx("span",{className:"hidden sm:inline",children:s.status}),e.jsx("span",{className:"sm:hidden",children:s.status==="published"?"Pub":"Rasc"})]}),e.jsxs(_e,{variant:"outline",className:"text-xs sm:text-sm",children:[e.jsx(Ye,{className:"w-3 h-3 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:te(ye(s.release_date),"dd/MM/yyyy",{locale:re})}),e.jsx("span",{className:"sm:hidden",children:te(ye(s.release_date),"dd/MM",{locale:re})})]})]}),s.description&&e.jsx("p",{className:"text-gray-600 text-xs sm:text-sm line-clamp-2",children:s.description})]}),e.jsxs("div",{className:"flex gap-2 justify-center sm:justify-end",children:[e.jsxs(u,{onClick:()=>ks(s),size:"sm",variant:"outline",className:"flex-1 sm:flex-none",children:[e.jsx(Ke,{className:"w-4 h-4"}),e.jsx("span",{className:"ml-1 sm:hidden",children:"Editar"})]}),e.jsxs(u,{onClick:()=>Ss(s.id),size:"sm",variant:"outline",className:"text-red-600 flex-1 sm:flex-none",children:[e.jsx(Ee,{className:"w-4 h-4"}),e.jsx("span",{className:"ml-1 sm:hidden",children:"Excluir"})]})]})]})})},s.id))}),d.length===0&&e.jsxs("div",{className:"text-center py-8 sm:py-12",children:[e.jsx(Ne,{className:"w-12 h-12 sm:w-16 sm:h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-600 mb-2",children:"Nenhuma m√∫sica encontrada"}),e.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:o?"Tente uma busca diferente":"Crie sua primeira m√∫sica!"})]}),w&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:j?"Editar M√∫sica":"Nova M√∫sica"}),e.jsx(u,{onClick:()=>b(!1),variant:"ghost",size:"sm",children:e.jsx(ue,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:Ts,className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 rounded-xl p-6 border-2 border-red-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-red-900 mb-4 flex items-center gap-2",children:[e.jsx(Fs,{className:"w-5 h-5 text-red-600"}),"üé¨ Link da V√≠deo YouTube *"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL da V√≠deo YouTube * (Obrigat√≥rio)"}),e.jsx(N,{value:t.youtube_url||"",onChange:s=>$("youtube_url",s.target.value),placeholder:"https://www.youtube.com/watch?v=VIDEO_ID ou https://youtube.com/shorts/VIDEO_ID",type:"url",required:!0}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsx("p",{className:"text-xs text-gray-500",children:e.jsx("strong",{children:"Formatos aceitos:"})}),e.jsxs("ul",{className:"text-xs text-gray-500 space-y-1 ml-2",children:[e.jsx("li",{children:"‚Ä¢ https://www.youtube.com/watch?v=VIDEO_ID"}),e.jsx("li",{children:"‚Ä¢ https://youtube.com/shorts/VIDEO_ID"}),e.jsx("li",{children:"‚Ä¢ https://youtu.be/VIDEO_ID"}),e.jsx("li",{children:"‚Ä¢ https://music.youtube.com/watch?v=VIDEO_ID"})]}),e.jsxs("p",{className:"text-xs text-red-600 font-medium mt-2",children:["‚ú® ",e.jsx("strong",{children:"Dica:"})," Para v√≠deos verticais (9:16), use YouTube Shorts!"]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(u,{type:"button",variant:"outline",onClick:()=>window.open(t.youtube_url,"_blank"),disabled:!t.youtube_url,className:"flex-1",children:[e.jsx(he,{className:"w-4 h-4 mr-2"}),"Abrir YouTube"]})})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-6 border-2 border-green-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-green-900 mb-4 flex items-center gap-2",children:[e.jsx(Ne,{className:"w-5 h-5 text-green-600"}),"üéµ Informa√ß√µes da M√∫sica"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["T√≠tulo * ",t.tiktok_video_id&&t.title&&t.title!==`M√∫sica da Segunda - ${te(new Date,"dd/MM/yyyy",{locale:re})}`&&e.jsx("span",{className:"text-green-600",children:"‚úÖ"})]}),e.jsx(N,{value:t.title||"",onChange:s=>$("title",s.target.value),required:!0,placeholder:"T√≠tulo da m√∫sica",className:t.tiktok_video_id&&t.title&&t.title!==`M√∫sica da Segunda - ${te(new Date,"dd/MM/yyyy",{locale:re})}`?"border-green-300 bg-green-50":""}),t.tiktok_video_id&&t.title&&t.title!==`M√∫sica da Segunda - ${te(new Date,"dd/MM/yyyy",{locale:re})}`&&e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"‚úÖ T√≠tulo extra√≠do do TikTok"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Artista"}),e.jsx(N,{value:t.artist||"",onChange:s=>$("artist",s.target.value),placeholder:"Nome do artista"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center justify-between",children:[e.jsx("span",{children:"Descri√ß√£o"}),t&&t.lyrics&&t.lyrics.trim()&&e.jsxs(u,{type:"button",onClick:()=>Ns(),variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-800 hover:bg-blue-50",disabled:_,children:[e.jsx(Qe,{className:"w-4 h-4 mr-1"}),_?"Gerando...":"Sugerir"]})]}),e.jsx(pe,{value:t.description||"",onChange:s=>$("description",s.target.value),placeholder:"Descri√ß√£o da m√∫sica",rows:3})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Letra"}),e.jsx(pe,{value:t.lyrics||"",onChange:s=>$("lyrics",s.target.value),placeholder:"Letra da m√∫sica",rows:6})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Lan√ßamento *"}),e.jsx(N,{type:"date",value:t.release_date||"",onChange:s=>$("release_date",s.target.value),required:!0}),t.release_date&&e.jsx("div",{className:"mt-1 text-xs",children:e.jsxs("span",{className:"text-blue-600",children:["üìÖ Data selecionada: ",te(ye(t.release_date),"EEEE, d 'de' MMMM 'de' yyyy",{locale:re})]})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Dica: Use o bot√£o "Extrair" do TikTok para definir automaticamente a pr√≥xima segunda-feira, ou escolha qualquer data manualmente'})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs($e,{value:t.status,onValueChange:s=>$("status",s),children:[e.jsx(ze,{children:e.jsx(Oe,{})}),e.jsxs(Be,{children:[e.jsx(ae,{value:"draft",children:"Rascunho"}),e.jsx(ae,{value:"scheduled",children:"Agendado"}),e.jsx(ae,{value:"published",children:"Publicado"}),e.jsx(ae,{value:"archived",children:"Arquivado"})]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 border-2 border-purple-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-purple-900 mb-4 flex items-center gap-2",children:[e.jsx(Je,{className:"w-5 h-5 text-purple-600"}),"üéß Links de Streaming"]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx(ke,{className:"mb-2 font-semibold text-gray-700",children:"Spotify"}),e.jsx(N,{type:"url",name:"spotify_url",value:t.spotify_url||"",onChange:s=>$("spotify_url",s.target.value),placeholder:"URL Spotify",className:"transition-colors duration-200 ease-in-out focus:border-blue-500 focus:ring-2 focus:ring-blue-200"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(ke,{className:"mb-2 font-semibold text-gray-700",children:"Apple Music"}),e.jsx(N,{type:"url",name:"apple_music_url",value:t.apple_music_url||"",onChange:s=>$("apple_music_url",s.target.value),placeholder:"URL Apple Music",className:"transition-colors duration-200 ease-in-out focus:border-blue-500 focus:ring-2 focus:ring-blue-200"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(ke,{className:"mb-2 font-semibold text-gray-700",children:"YouTube"}),e.jsx(N,{type:"url",name:"youtube_music_url",value:t.youtube_music_url||"",onChange:s=>$("youtube_music_url",s.target.value),placeholder:"URL YouTube Music",className:"transition-colors duration-200 ease-in-out focus:border-blue-500 focus:ring-2 focus:ring-blue-200"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl p-6 border-2 border-orange-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-orange-900 mb-4 flex items-center gap-2",children:[e.jsx(We,{className:"w-5 h-5 text-orange-600"}),"üè∑Ô∏è M√©tadados"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hashtags (separados por v√≠rgula)"}),e.jsx(N,{value:Array.isArray(t.hashtags)?t.hashtags.join(", "):"",onChange:s=>_s(s.target.value),placeholder:"humor, musica, trending, novidade"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Exemplo: humor, musica, trending, novidade, viral"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagem de Capa (URL)"}),e.jsx(N,{value:t.cover_image||"",onChange:s=>$("cover_image",s.target.value),placeholder:"https://exemplo.com/imagem.jpg",type:"url"})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t-2 border-gray-200",children:[e.jsxs(u,{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-lg py-3",children:[e.jsx(Ce,{className:"w-5 h-5 mr-2"}),j?"Atualizar M√∫sica":"Criar Nova M√∫sica"]}),e.jsx(u,{type:"button",variant:"outline",onClick:()=>b(!1),className:"flex-1 text-lg py-3",children:"Cancelar"})]})]})]})})}),F&&t.tiktok_video_id&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"üé¨ Visualizar V√≠deo TikTok"}),e.jsx(u,{onClick:()=>H(!1),variant:"ghost",size:"sm",children:e.jsx(ue,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:t.title||"V√≠deo TikTok"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["ID: ",t.tiktok_video_id]})]}),e.jsx("div",{className:"bg-black rounded-lg overflow-hidden",children:e.jsx(Zs,{postId:t.tiktok_video_id,className:"w-full",song:t})}),e.jsx("div",{className:"text-center",children:e.jsxs(u,{onClick:()=>window.open(t.tiktok_url,"_blank"),className:"bg-red-500 hover:bg-red-600 text-white",children:[e.jsx(he,{className:"w-4 h-4 mr-2"}),"Abrir no TikTok"]})})]})]})})}),Z&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"üì• Importar Perfil TikTok"}),e.jsx(u,{onClick:()=>Y(!1),variant:"ghost",size:"sm",children:e.jsx(ue,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-blue-800 text-sm",children:[e.jsx("strong",{children:"üí° Dica:"})," Cole o link do perfil TikTok para importar todas as v√≠deos de uma vez!"]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link do Perfil TikTok"}),e.jsx(N,{value:Q,onChange:s=>ge(s.target.value),placeholder:"https://www.tiktok.com/@amusicadasegunda",className:"w-full"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Exemplo: https://www.tiktok.com/@amusicadasegunda"})]}),q&&e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Importando v√≠deos..."}),e.jsxs("span",{className:"text-sm text-gray-500",children:[G.current," / ",G.total]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${G.current/G.total*100}%`}})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs(u,{onClick:ds,disabled:q||!Q.trim(),className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[q?e.jsx(de,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(Ge,{className:"w-4 h-4 mr-2"}),q?"Analisando...":"Analisar Perfil"]}),e.jsx(u,{onClick:()=>Y(!1),variant:"outline",className:"flex-1",children:"Cancelar"})]})]})]})})}),A&&A.length>0&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-green-900",children:["üìã Revisar M√∫sicas Importadas (",A.length,")"]}),e.jsx(u,{onClick:()=>z([]),variant:"ghost",size:"sm",children:e.jsx(ue,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-green-800 text-sm",children:[e.jsx("strong",{children:"‚úÖ Sucesso!"})," ",A.length," m√∫sicas foram importadas do perfil TikTok. Revise os detalhes e publique todas de uma vez no Supabase."]})}),e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:A.map((s,a)=>e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-2",children:[a+1,". ",s.title]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Artista:"})," ",s.artist]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Data Lan√ßamento:"})," ",new Date(s.release_date).toLocaleDateString("pt-BR")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Data TikTok:"})," ",new Date(s.tiktok_publication_date).toLocaleDateString("pt-BR")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Hashtags:"})," ",s.hashtags.join(", ")]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"text-gray-600",children:"Descri√ß√£o:"})," ",s.description]})]}),e.jsxs("div",{className:"ml-4 flex gap-2",children:[e.jsxs(u,{onClick:()=>xs(s),variant:"outline",size:"sm",className:"text-blue-600 border-blue-300 hover:bg-blue-50",children:[e.jsx(Ke,{className:"w-4 h-4 mr-1"}),"Editar"]}),e.jsxs(u,{onClick:()=>window.open(s.tiktok_url,"_blank"),variant:"outline",size:"sm",className:"text-red-600 border-red-300 hover:bg-red-50",children:[e.jsx(he,{className:"w-4 h-4 mr-1"}),"Ver TikTok"]}),e.jsxs(u,{onClick:()=>ps(s.id),variant:"outline",size:"sm",className:"text-red-600 border-red-300 hover:bg-red-50",children:[e.jsx(Ee,{className:"w-4 h-4 mr-1"}),"Excluir"]})]})]})},s.id))}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t-2 border-gray-200",children:[e.jsxs(u,{onClick:ms,disabled:q,className:"flex-1 bg-green-600 hover:bg-green-700 text-lg py-3",children:[q?e.jsx(de,{className:"w-5 h-5 mr-2 animate-spin"}):e.jsx(Ce,{className:"w-5 h-5 mr-2"}),q?"Publicando...":"Publier"]}),e.jsx(u,{onClick:()=>z([]),variant:"outline",className:"flex-1 text-lg py-3",children:"Cancelar"})]}),q&&e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Publicando m√∫sicas..."}),e.jsxs("span",{className:"text-sm text-gray-500",children:[G.current," / ",G.total]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${G.current/G.total*100}%`}})})]})]})]})})}),Se&&c&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"‚úèÔ∏è Editar M√∫sica Importada do TikTok"}),e.jsx(u,{onClick:()=>D(!1),variant:"ghost",size:"sm",children:e.jsx(ue,{className:"w-5 h-5"})})]}),e.jsx("form",{onSubmit:s=>{s.preventDefault(),hs()},children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-100 rounded-xl p-6 border-2 border-blue-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-blue-900 mb-4 flex items-center gap-2",children:[e.jsx(is,{className:"w-5 h-5 text-blue-600"}),"üì± Informa√ß√µes TikTok (Obrigat√≥rio)"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link da V√≠deo TikTok*"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{value:c.tiktok_url,onChange:s=>M(v(h({},c),{tiktok_url:s.target.value})),placeholder:"https://www.tiktok.com/@usuario/video/1234567890",className:"flex-1"}),e.jsxs(u,{type:"button",onClick:()=>window.open(c.tiktok_url,"_blank"),variant:"outline",className:"text-blue-600 border-blue-300 hover:bg-blue-50",children:[e.jsx(he,{className:"w-4 h-4 mr-2"}),"Abrir TikTok"]})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[e.jsx("p",{className:"font-medium mb-1",children:"Formatos aceitos:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"https://www.tiktok.com/@usuario/video/ID"}),e.jsx("li",{children:"https://vm.tiktok.com/ID"}),e.jsx("li",{children:"ID direto (15-20 d√≠gitos)"})]})]}),e.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ls,{className:"w-4 h-4 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-xs text-yellow-800",children:[e.jsx("p",{className:"font-medium",children:"IMPORTANT:"}),e.jsx("p",{children:"Cole apenas o link da v√≠deo TikTok (ex: https://www.tiktok.com/@usuario/video/1234567890), N√ÉO o c√≥digo HTML de incorpora√ß√£o!"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ID da V√≠deo TikTok"}),e.jsx(N,{value:c.tiktok_video_id,onChange:s=>M(v(h({},c),{tiktok_video_id:s.target.value})),placeholder:"ID da v√≠deo"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Publica√ß√£o TikTok"}),e.jsx(N,{type:"datetime-local",value:c.tiktok_publication_date?c.tiktok_publication_date.slice(0,16):"",onChange:s=>M(v(h({},c),{tiktok_publication_date:s.target.value}))})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-100 rounded-xl p-6 border-2 border-green-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-green-900 mb-4 flex items-center gap-2",children:[e.jsx(Ne,{className:"w-5 h-5 text-green-600"}),"üéµ M√©tadados Extra√≠dos do TikTok"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T√≠tulo*"}),e.jsx(N,{value:c.title,onChange:s=>M(v(h({},c),{title:s.target.value})),placeholder:"T√≠tulo da m√∫sica"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Artista*"}),e.jsx(N,{value:c.artist,onChange:s=>M(v(h({},c),{artist:s.target.value})),placeholder:"Nome do artista"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center justify-between",children:[e.jsx("span",{children:"Descri√ß√£o"}),c&&c.lyrics&&c.lyrics.trim()&&e.jsxs(u,{type:"button",onClick:()=>ws(),variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-800 hover:bg-blue-50",disabled:_,children:[e.jsx(Qe,{className:"w-4 h-4 mr-1"}),_?"Gerando...":"Sugerir"]})]}),e.jsx(pe,{value:c.description,onChange:s=>M(v(h({},c),{description:s.target.value})),placeholder:"Descri√ß√£o da m√∫sica",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hashtags (separados por v√≠rgula)"}),e.jsx(N,{value:c.hashtags.join(", "),onChange:s=>M(v(h({},c),{hashtags:s.target.value.split(",").map(a=>a.trim()).filter(a=>a)})),placeholder:"humor, musica, trending, novidade"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Exemplo: humor, musica, trending, novidade, viral"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-100 rounded-xl p-6 border-2 border-purple-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-purple-900 mb-4 flex items-center gap-2",children:[e.jsx(Ye,{className:"w-5 h-5 text-purple-600"}),"üìÖ Datas de Publica√ß√£o"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Lan√ßamento no App*"}),e.jsx(N,{type:"date",value:c.release_date,onChange:s=>M(v(h({},c),{release_date:s.target.value}))}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Data sugerida: ",Te()?te(ye(Te()),"EEEE, d 'de' MMMM 'de' yyyy",{locale:re}):"Calculando..."]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs($e,{value:c.status,onValueChange:s=>M(v(h({},c),{status:s})),children:[e.jsx(ze,{children:e.jsx(Oe,{})}),e.jsxs(Be,{children:[e.jsx(ae,{value:"draft",children:"Brouillon"}),e.jsx(ae,{value:"published",children:"Publi√©"}),e.jsx(ae,{value:"archived",children:"Archiv√©"})]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-violet-50 to-purple-100 rounded-xl p-6 border-2 border-violet-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-violet-900 mb-4 flex items-center gap-2",children:[e.jsx(Je,{className:"w-5 h-5 text-violet-600"}),"üéß Links de Streaming"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Spotify"}),e.jsx(N,{value:c.spotify_url||"",onChange:s=>M(v(h({},c),{spotify_url:s.target.value})),placeholder:"URL Spotify",type:"url"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Apple Music"}),e.jsx(N,{value:c.apple_music_url||"",onChange:s=>M(v(h({},c),{apple_music_url:s.target.value})),placeholder:"URL Apple Music",type:"url"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"YouTube"}),e.jsx(N,{value:c.youtube_url||"",onChange:s=>M(v(h({},c),{youtube_url:s.target.value})),placeholder:"URL YouTube",type:"url"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-100 rounded-xl p-6 border-2 border-orange-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-orange-900 mb-4 flex items-center gap-2",children:[e.jsx(We,{className:"w-5 h-5 text-orange-600"}),"üè∑Ô∏è M√©tadados"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagem de Capa (URL)"}),e.jsx(N,{value:c.cover_image||"",onChange:s=>M(v(h({},c),{cover_image:s.target.value})),placeholder:"https://exemplo.com/imagem.jpg",type:"url"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Letras da M√∫sica"}),e.jsx(pe,{value:c.lyrics||"",onChange:s=>M(v(h({},c),{lyrics:s.target.value})),placeholder:"Letras da m√∫sica...",rows:4})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t-2 border-gray-200",children:[e.jsxs(u,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700 text-lg py-3",children:[e.jsx(Ce,{className:"w-5 h-5 mr-2"}),"Salvar Altera√ß√µes"]}),e.jsx(u,{type:"button",onClick:()=>D(!1),variant:"outline",className:"flex-1 text-lg py-3",children:"Cancelar"})]})]})})]})})})]})})}function ta({onBackToLogin:d}){const[n,o]=i.useState(""),[p,j]=i.useState(""),[f,t]=i.useState(!1),[m,w]=i.useState(!1),[b,k]=i.useState(!1),[S,R]=i.useState({type:"",text:""}),[F,H]=i.useState(!1);i.useEffect(()=>{new URLSearchParams(window.location.hash.split("?")[1]).get("reset")!=="true"&&d()},[d]);const C=O=>E(null,null,function*(){if(O.preventDefault(),k(!0),R({type:"",text:""}),n.length<6){R({type:"error",text:"Le mot de passe doit contenir au moins 6 caract√®res"}),k(!1);return}if(n!==p){R({type:"error",text:"Les mots de passe ne correspondent pas"}),k(!1);return}try{const{error:T}=yield xe.auth.updateUser({password:n});if(T)throw T;H(!0),R({type:"success",text:"Mot de passe mis √† jour avec succ√®s !"}),setTimeout(()=>{window.location.href="/#/admin"},2e3)}catch(T){console.error("Erreur update password:",T),R({type:"error",text:`Erreur: ${T.message}`})}finally{k(!1)}});return F?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:e.jsx(De,{className:"w-full max-w-md",children:e.jsx(qe,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Hs,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-green-800 mb-2",children:"Mot de passe mis √† jour !"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Votre mot de passe a √©t√© mis √† jour avec succ√®s. Redirection vers l'Admin..."}),e.jsx(Xe,{className:"w-6 h-6 animate-spin mx-auto text-blue-600"})]})})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:e.jsxs(De,{className:"w-full max-w-md",children:[e.jsxs(as,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Ze,{className:"w-6 h-6 text-blue-600"})}),e.jsx(ts,{className:"text-2xl font-bold text-gray-900",children:"Nouveau mot de passe"}),e.jsx(Vs,{children:"Entrez votre nouveau mot de passe"})]}),e.jsxs(qe,{children:[e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[S.text&&e.jsx(Qs,{variant:S.type==="error"?"destructive":"default",children:e.jsx(Js,{children:S.text})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"Nouveau mot de passe"}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{id:"password",type:f?"text":"password",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",value:n,onChange:O=>o(O.target.value),required:!0,disabled:b,className:"w-full pr-10"}),e.jsx("button",{type:"button",onClick:()=>t(!f),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:b,children:f?e.jsx(es,{className:"w-4 h-4"}):e.jsx(ss,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"confirmPassword",className:"text-sm font-medium text-gray-700",children:"Confirmer le mot de passe"}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{id:"confirmPassword",type:m?"text":"password",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",value:p,onChange:O=>j(O.target.value),required:!0,disabled:b,className:"w-full pr-10"}),e.jsx("button",{type:"button",onClick:()=>w(!m),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:b,children:m?e.jsx(es,{className:"w-4 h-4"}):e.jsx(ss,{className:"w-4 h-4"})})]})]}),e.jsx(u,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white",disabled:b,children:b?e.jsxs(e.Fragment,{children:[e.jsx(Xe,{className:"w-4 h-4 animate-spin mr-2"}),"Mise √† jour..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Mettre √† jour"]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("button",{onClick:d,className:"text-blue-600 hover:text-blue-700 font-medium",disabled:b,children:[e.jsx(Gs,{className:"w-4 h-4 inline mr-1"}),"Retour √† la connexion"]})}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsx("p",{className:"text-xs text-blue-800 text-center",children:"üîí Le mot de passe doit contenir au moins 6 caract√®res"})})]})]})})}function ha(){const[d,n]=i.useState(!1),[o,p]=i.useState(!0),[j,f]=i.useState(!1),[t,m]=i.useState(!1);i.useEffect(()=>{let k=!0;E(null,null,function*(){yield w()}),new URLSearchParams(window.location.hash.split("?")[1]).get("reset")==="true"&&m(!0);const{data:{subscription:F}}=xe.auth.onAuthStateChange((H,C)=>E(null,null,function*(){H==="SIGNED_IN"&&C&&k?(n(!0),yield b(C.user.id)):H==="SIGNED_OUT"&&k&&(n(!1),f(!1),p(!1))}));return()=>{k=!1,F.unsubscribe()}},[]);const w=()=>E(null,null,function*(){try{console.warn("üîê Starting auth check...");const{data:{session:k},error:S}=yield xe.auth.getSession();if(S)throw console.error("‚ùå Session error:",S),S;k?(console.warn("‚úÖ Session found, checking admin status..."),n(!0),yield b(k.user.id)):(console.warn("‚ö†Ô∏è No session found"),n(!1),f(!1))}catch(k){console.error("‚ùå Erreur v√©rification auth:",k),n(!1),f(!1)}finally{console.warn("üèÅ Auth check complete, setting loading to false"),p(!1)}}),b=k=>E(null,null,function*(){var R,F,H;let S;try{console.warn("üîç Checking admin status for user:",k);try{const{data:T,error:B}=yield xe.from("admins").select("user_id").limit(1);B&&B.code!=="PGRST116"?console.warn("‚ö†Ô∏è Test de connexion √† la table admins:",B.message):console.warn("‚úÖ Connexion √† la table admins OK")}catch(T){console.warn("‚ö†Ô∏è Erreur test connexion:",T.message)}const C=xe.from("admins").select("user_id").eq("user_id",k).maybeSingle(),O=new Promise((T,B)=>{S=setTimeout(()=>{B(new Error("TIMEOUT: Admin check took too long (>10s)"))},1e4)});try{const T=yield Promise.race([C.then(Z=>(S&&clearTimeout(S),Z)),O]),{data:B,error:y}=T;if(console.warn("üìä Admin check result:",{data:B,error:y,hasData:!!B}),y){if(y.code==="PGRST116"){console.warn("‚ö†Ô∏è User is NOT admin (no admin record found)"),f(!1);return}console.error("‚ùå Erreur v√©rification admin:",y.message,y.code,y),console.error("‚ùå D√©tails de l'erreur:",{message:y.message,code:y.code,details:y.details,hint:y.hint}),(y.code==="42501"||(R=y.message)!=null&&R.includes("permission denied")||(F=y.message)!=null&&F.includes("RLS"))&&(console.error("‚ùå ERREUR RLS: Les policies RLS ne sont pas correctement configur√©es pour la table admins"),console.error("‚ùå Solution: Ex√©cuter le script supabase/scripts/fix_admin_rls_complete.sql dans Supabase SQL Editor")),f(!1);return}const ne=!!B;console.warn(ne?"‚úÖ User IS admin":"‚ö†Ô∏è User is NOT admin"),f(ne)}catch(T){throw S&&clearTimeout(S),T}}catch(C){S&&clearTimeout(S),console.error("‚ùå Exception v√©rification admin:",C.message||C),(H=C.message)!=null&&H.includes("TIMEOUT")&&(console.error("‚ùå TIMEOUT: La v√©rification admin a pris trop de temps"),console.error("‚ùå Cela peut indiquer:"),console.error("   1. Un probl√®me de connexion √† Supabase"),console.error("   2. Un probl√®me de configuration RLS sur la table admins"),console.error("   3. Un probl√®me de r√©seau"),console.error("‚ùå SOLUTION: Ex√©cutez le script supabase/scripts/fix_admin_rls_complete.sql dans Supabase SQL Editor"),console.error("‚ùå En attendant, vous pouvez essayer de vous connecter - la v√©rification admin se fera apr√®s la connexion")),f(!1)}});return t?e.jsx(ta,{onBackToLogin:()=>m(!1)}):o?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"V√©rification de l'acc√®s administrateur..."})]})}):d&&j?e.jsx(aa,{}):e.jsxs(e.Fragment,{children:[e.jsx(Rs,{children:e.jsx("meta",{name:"robots",content:"noindex,nofollow"})}),e.jsx(Ws,{})]})}export{ha as default};

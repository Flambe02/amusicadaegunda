import{r,j as t,L as J}from"./vendor-react-CM84WoKi.js";import{u as $,S as L,t as O,e as M}from"./index-CU9z_zwn.js";import{u as R,Y as F,P as V,n as H}from"./vendor-ui-8p2QWU2G.js";import"./vendor-supabase-ci4wIQv9.js";import"./vendor-date-HUzpq8ep.js";const Y=[{label:"Jan",full:"Janeiro",index:0,color:"#3B82F6"},{label:"Fev",full:"Fevereiro",index:1,color:"#6366F1"},{label:"Mar",full:"MarÃ§o",index:2,color:"#EC4899"},{label:"Abr",full:"Abril",index:3,color:"#F97316"},{label:"Mai",full:"Maio",index:4,color:"#10B981"},{label:"Jun",full:"Junho",index:5,color:"#EAB308"},{label:"Jul",full:"Julho",index:6,color:"#F59E0B"},{label:"Ago",full:"Agosto",index:7,color:"#EF4444"},{label:"Set",full:"Setembro",index:8,color:"#8B5CF6"},{label:"Out",full:"Outubro",index:9,color:"#14B8A6"},{label:"Nov",full:"Novembro",index:10,color:"#06B6D4"},{label:"Dez",full:"Dezembro",index:11,color:"#F43F5E"}];function h(o){if(!o)return null;const b=/^\d{4}-\d{2}-\d{2}$/.test(o)?o+"T12:00:00":o,i=new Date(b);return isNaN(i.getTime())?null:i}function f(o){return(o||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function X(){$({title:"Pesquisar mÃºsicas - A MÃºsica da Segunda",description:"Encontre qualquer mÃºsica do projeto A MÃºsica da Segunda.",url:"/search",type:"website",robots:"noindex, follow"});const[o,b]=r.useState([]),[i,A]=r.useState(!0),[p,E]=r.useState(""),[u,N]=r.useState(new Set),[x,B]=r.useState(new Set),v=r.useRef(null),[w,D]=r.useState(null),[g,P]=r.useState(null),[S,y]=r.useState("stopped");r.useEffect(()=>{L.list("-release_date").then(e=>{const s=e||[];b(s);const l=new Set;s.forEach(c=>{const a=h(c.release_date);a&&l.add(a.getFullYear())}),N(l),A(!1)})},[]);const k=r.useMemo(()=>{const e=new Set;return o.forEach(s=>{const l=h(s.release_date);l&&e.add(l.getFullYear())}),[...e].sort((s,l)=>l-s)},[o]),d=r.useMemo(()=>{const e=f(p.trim()),s=e.length>0,l=u.size>0,c=x.size>0;return!s&&!l&&!c?[]:o.filter(a=>{const n=h(a.release_date),C=!s||f(a.title).includes(e)||f(a.artist).includes(e)||f(a.description).includes(e)||n&&String(n.getFullYear()).includes(e),m=!l||n&&u.has(n.getFullYear()),q=!c||n&&x.has(n.getMonth());return C&&m&&q})},[p,u,x,o]),j=p.trim().length>0||u.size>0||x.size>0,T=e=>{N(s=>{const l=new Set(s);return l.has(e)?l.delete(e):l.add(e),l})},z=e=>{B(s=>{const l=new Set(s);return l.has(e)?l.delete(e):l.add(e),l})},_=e=>{v.current?.contentWindow?.postMessage(JSON.stringify({event:"command",func:e,args:[]}),"*")},I=e=>{const s=M(e.youtube_url);s&&(w===e.id?S==="playing"?(_("pauseVideo"),y("paused")):(_("playVideo"),y("playing")):(D(e.id),P(s),y("playing")))};return t.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-sky-50 via-white to-blue-50",children:[g&&t.jsx("iframe",{ref:v,src:`https://www.youtube-nocookie.com/embed/${g}?enablejsapi=1&autoplay=1&rel=0`,title:"player",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",style:{position:"fixed",top:"-9999px",left:"-9999px",width:"1px",height:"1px",opacity:0,pointerEvents:"none"}},g),t.jsxs("div",{className:"text-center pt-6 pb-4 px-4",children:[t.jsx("h1",{className:"text-3xl font-black text-gray-800 tracking-tight",children:"Pesquisar"}),t.jsx("p",{className:"text-gray-500 mt-1 text-sm",children:"Encontre uma mÃºsica do projeto"})]}),t.jsxs("div",{className:"max-w-2xl mx-auto px-4 pb-24",children:[t.jsxs("div",{className:"relative mb-5",children:[t.jsx(R,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"}),t.jsx("input",{type:"search",autoFocus:!0,value:p,onChange:e=>E(e.target.value),placeholder:"Pesquisar mÃºsica, artista, ano...",className:"w-full pl-12 pr-4 py-4 rounded-2xl border border-gray-200 bg-white shadow-sm text-gray-800 text-base focus:outline-none focus:ring-2 focus:ring-[#32a2dc]/40 focus:border-[#32a2dc] transition-all"})]}),k.length>0&&t.jsxs("div",{className:"mb-4",children:[t.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-widest font-semibold mb-2 px-1",children:"Ano"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:k.map(e=>{const s=u.has(e);return t.jsx("button",{onClick:()=>T(e),className:"px-4 py-1.5 rounded-xl text-xs font-bold transition-all duration-200 border-2",style:s?{backgroundColor:"#1a1a2e",borderColor:"#1a1a2e",color:"#fff"}:{backgroundColor:"#fff",borderColor:"#1a1a2e33",color:"#1a1a2e"},children:e},e)})})]}),t.jsxs("div",{className:"mb-5",children:[t.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-widest font-semibold mb-2 px-1",children:"MÃªs"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:Y.map(e=>{const s=x.has(e.index);return t.jsx("button",{onClick:()=>z(e.index),title:e.full,className:"px-3 py-1.5 rounded-xl text-xs font-bold transition-all duration-200 border-2",style:s?{backgroundColor:e.color,borderColor:e.color,color:"#fff"}:{backgroundColor:"#fff",borderColor:e.color+"55",color:e.color},children:e.label},e.index)})})]}),j&&!i&&t.jsx("p",{className:"text-xs text-gray-400 mb-4 px-1",children:d.length===0?"Nenhuma mÃºsica encontrada":`${d.length} mÃºsica${d.length>1?"s":""} encontrada${d.length>1?"s":""}`}),i&&t.jsx("div",{className:"flex justify-center py-12",children:t.jsx("div",{className:"w-8 h-8 border-2 border-[#32a2dc] border-t-transparent rounded-full animate-spin"})}),!i&&!j&&t.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-300",children:[t.jsx(F,{className:"w-16 h-16 mb-4"}),t.jsx("p",{className:"text-base font-medium text-center",children:"Digite uma palavra ou escolha um mÃªs"})]}),!i&&j&&d.length>0&&t.jsx("div",{className:"space-y-3",children:d.map(e=>{const s=O(e.title),l=h(e.release_date),c=l?l.getMonth():null,a=c!==null?Y[c].color:"#32a2dc",n=M(e.youtube_url),m=w===e.id&&S==="playing";return t.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[t.jsx("div",{className:"h-1 w-full",style:{backgroundColor:a}}),t.jsxs("div",{className:"px-5 py-4",children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"w-9 h-9 rounded-xl flex items-center justify-center flex-shrink-0 mt-0.5",style:{backgroundColor:a+"18"},children:t.jsx(F,{className:"w-4 h-4",style:{color:a}})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"min-w-0 flex-1",children:s?t.jsx(J,{to:`/musica/${s}/`,className:"text-base font-black text-gray-800 hover:text-[#32a2dc] transition-colors leading-tight block truncate",children:e.title}):t.jsx("p",{className:"text-base font-black text-gray-800 leading-tight truncate",children:e.title})}),n&&t.jsx("button",{onClick:()=>I(e),className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center transition-all hover:scale-110 shadow-sm",style:{backgroundColor:m?a:a+"22"},"aria-label":m?"Pausar":"Tocar",children:m?t.jsx(V,{className:"w-3.5 h-3.5 text-white"}):t.jsx(H,{className:"w-3.5 h-3.5 ml-0.5",style:{color:a}})})]}),t.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[e.artist,l&&t.jsxs("span",{className:"text-gray-400 ml-2",children:["Â· ",l.toLocaleDateString("pt-BR",{day:"numeric",month:"long",year:"numeric"})]})]})]})]}),e.description&&t.jsx("p",{className:"text-sm text-gray-600 mt-2 leading-relaxed line-clamp-3 pl-12",children:e.description}),(e.spotify_url||e.youtube_music_url||e.apple_music_url)&&t.jsxs("div",{className:"flex flex-wrap gap-2 mt-3 pl-12",children:[e.spotify_url&&t.jsx("a",{href:e.spotify_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-xl bg-[#1DB954]/10 text-[#1DB954] text-xs font-bold hover:bg-[#1DB954]/20 transition-colors",children:"ðŸŽ§ Spotify"}),e.apple_music_url&&t.jsx("a",{href:e.apple_music_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-xl bg-pink-50 text-pink-600 text-xs font-bold hover:bg-pink-100 transition-colors",children:"ðŸŽµ Apple Music"}),e.youtube_music_url&&t.jsx("a",{href:e.youtube_music_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-xl bg-red-50 text-red-600 text-xs font-bold hover:bg-red-100 transition-colors",children:"ðŸ“± Video"})]})]})]},e.id)})})]})]})}export{X as default};

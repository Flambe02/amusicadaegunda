var L=Object.defineProperty;var b=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var j=(i,a,t)=>a in i?L(i,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[a]=t,v=(i,a)=>{for(var t in a||(a={}))$.call(a,t)&&j(i,t,a[t]);if(b)for(var t of b(a))B.call(a,t)&&j(i,t,a[t]);return i};var N=(i,a,t)=>new Promise((s,c)=>{var o=r=>{try{l(t.next(r))}catch(n){c(n)}},d=r=>{try{l(t.throw(r))}catch(n){c(n)}},l=r=>r.done?s(r.value):Promise.resolve(r.value).then(o,d);l((t=t.apply(i,a)).next())});import{aI as E,s as C,r as g,j as e,t as y,ad as w,aJ as P,f as z,M as S}from"./vendor-DL-Jb0Mh.js";import{u as R,B as _,S as T}from"./index-BDkot_6S.js";import{f as M,p as A,a as D}from"./utils-BVxV3L_t.js";import"./libs-DqMydE2S.js";import"./ui-BA32w1ww.js";import"./supabase-BBk6P3Ci.js";const p="https://www.amusicadasegunda.com";function O({title:i,slug:a,datePublished:t,image:s,byArtist:c="A Música da Segunda",streamingUrls:o=[]}){const d=`${p}/chansons/${a}`,l=v({"@context":"https://schema.org","@type":"MusicRecording",name:i||a,byArtist:{"@type":"MusicGroup",name:c},datePublished:t||new Date().toISOString().slice(0,10),inLanguage:"pt-BR",url:d,genre:["Indie","Música Brasileira","Pop"]},s?{image:s}:{}),r=o.filter(n=>n&&typeof n=="string");return r.length>0&&(l.sameAs=r),l}function J({title:i,slug:a}){return{"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Início",item:`${p}/`},{"@type":"ListItem",position:2,name:"Canções",item:`${p}/chansons`},{"@type":"ListItem",position:3,name:i||a,item:`${p}/chansons/${a}`}]}}function I(i,a=null){if(typeof document!="undefined")try{if(a){const s=document.getElementById(a);s&&s.remove()}const t=document.createElement("script");t.type="application/ld+json",t.textContent=JSON.stringify(i,null,2),a&&(t.id=a),document.head.appendChild(t)}catch(t){console.error("Error injecting JSON-LD:",t)}}function U({youtube_music_url:i,youtube_url:a,title:t}){const s=i||a||"",o=(n=>{if(!n||typeof n!="string")return null;try{const u=n.toLowerCase(),m=n.match(/[?&]list=([A-Za-z0-9_-]+)/);if(m)return{id:m[1],type:"playlist"};const f=[/(?:youtube\.com\/shorts\/)([A-Za-z0-9_-]{11})/,/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/|youtube\.com\/v\/)([A-Za-z0-9_-]{11})/,/^([A-Za-z0-9_-]{11})$/];for(const x of f){const h=n.match(x);if(h)return{id:h[1],type:"video"}}if(u.includes("music.youtube.com")){const x=n.match(/[?&]v=([A-Za-z0-9_-]{11})/);if(x)return{id:x[1],type:"video"}}return null}catch(u){return null}})(s);if(!o)return e.jsx("div",{className:"w-full aspect-video rounded-lg overflow-hidden shadow-lg flex items-center justify-center bg-gradient-to-br from-gray-800 to-gray-900",children:e.jsx("p",{className:"text-white text-sm",children:"Vidéo non disponible"})});const d=s.includes("/shorts/"),l="https://www.youtube-nocookie.com/embed",r=o.type==="video"?`${l}/${o.id}?rel=0&modestbranding=1&playsinline=1&controls=1`:`${l}/videoseries?list=${o.id}&rel=0&modestbranding=1&playsinline=1&controls=1`;return d?e.jsx("div",{className:"w-full flex justify-center",children:e.jsx("div",{className:"relative rounded-lg overflow-hidden shadow-lg",style:{width:"100%",maxWidth:"400px",aspectRatio:"9/16"},children:e.jsx("iframe",{className:"absolute top-0 left-0 w-full h-full",src:r,title:t||"YouTube Short",frameBorder:"0",referrerPolicy:"strict-origin-when-cross-origin",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,loading:"lazy"})})}):e.jsx("div",{className:"w-full aspect-video rounded-lg overflow-hidden shadow-lg",children:e.jsx("iframe",{className:"w-full h-full",src:r,title:t||"YouTube",frameBorder:"0",referrerPolicy:"strict-origin-when-cross-origin",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,loading:"lazy"})})}function q(){const{slug:i}=E(),a=C(),t=i?i.replace(/\/$/,"").trim():null,[s,c]=g.useState(null),[o,d]=g.useState(!0),[l,r]=g.useState(null);g.useEffect(()=>{i&&i.endsWith("/")&&a(`/chansons/${t}`,{replace:!0})},[i,t,a]),g.useEffect(()=>{N(null,null,function*(){if(!t){d(!1),r("Slug inválido");return}d(!0),r(null);try{const m=yield T.getBySlug(t);m?(c(m),r(null)):(r("Song not found"),c(null))}catch(m){r("Song not found"),c(null)}finally{d(!1)}})},[t]);const n=t?`/chansons/${t.replace(/\/$/,"")}`:"/chansons";return R({title:s?s.title:t?t.replace(/-/g," "):"A Música da Segunda",description:s?`Letra, áudio e história de "${s.title}" — nova música da segunda.`:"Paródias musicais inteligentes e divertidas sobre as notícias do Brasil.",keywords:s?`${s.title}, música da segunda, paródias musicais`:"música da segunda, paródias musicais",image:s==null?void 0:s.cover_image,url:n,type:"article"}),g.useEffect(()=>{if(s){const u=[s.spotify_url,s.apple_music_url,s.youtube_url,s.youtube_music_url].filter(Boolean),m=O({title:s.title,slug:t,datePublished:s.release_date,image:s.cover_image,byArtist:s.artist||"A Música da Segunda",streamingUrls:u});I(m,"song-music-schema");const f=J({title:s.title,slug:t});return I(f,"song-breadcrumb-schema"),()=>{const x=document.getElementById("song-music-schema"),h=document.getElementById("song-breadcrumb-schema");x&&x.remove(),h&&h.remove()}}},[s,t]),o?e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs(y,{children:[e.jsx("html",{lang:"pt-BR"}),e.jsx("meta",{name:"robots",content:"index, follow"})]}),e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:t?t.replace(/-/g," ").replace(/\b\w/g,u=>u.toUpperCase()):"A Música da Segunda"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Carregando informações da música..."}),e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-8"}),e.jsx("div",{className:"h-96 bg-gray-200 rounded"})]})]})]}):l||!s?e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx(y,{children:e.jsx("meta",{name:"robots",content:"noindex,follow"})}),e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(_,{onClick:()=>a("/"),variant:"outline",className:"mb-4",children:[e.jsx(w,{className:"w-4 h-4 mr-2"}),"Voltar ao Início"]})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:l||"Song Not Found"}),e.jsxs("p",{className:"text-gray-600",children:['The song "',t,'" could not be found.']})]})]}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs(y,{children:[e.jsx("html",{lang:"pt-BR"}),e.jsx("meta",{name:"twitter:card",content:"summary_large_image"})]}),e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(_,{onClick:()=>a("/"),variant:"outline",children:[e.jsx(w,{className:"w-4 h-4 mr-2"}),"Voltar ao Início"]})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:s.title}),e.jsxs("div",{className:"flex items-center gap-4 text-gray-600 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4"}),e.jsx("span",{children:s.artist||"A Música da Segunda"})]}),s.release_date&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4"}),e.jsx("span",{children:M(A(s.release_date),"dd MMMM yyyy",{locale:D})})]})]}),s.description&&e.jsx("p",{className:"text-gray-700 leading-relaxed",children:s.description})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(S,{className:"w-5 h-5"}),"Vídeo"]}),e.jsx("div",{className:"w-full max-w-2xl mx-auto",children:s.youtube_music_url||s.youtube_url?e.jsx(U,{youtube_music_url:s.youtube_music_url,youtube_url:s.youtube_url,title:s.title}):e.jsx("div",{className:"w-full aspect-video rounded-lg overflow-hidden shadow-lg flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx(S,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"font-medium",children:"Vidéo non disponible"}),e.jsx("p",{className:"text-sm",children:"Cette musique n'a pas encore de vidéo"})]})})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Detalhes da Música"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Título:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:s.title})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Artista:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:s.artist||"A Música da Segunda"})]}),s.release_date&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Data de Lançamento:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:M(A(s.release_date),"dd/MM/yyyy")})]}),s.status&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Status:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:s.status})]})]})]})]})]})}export{q as default};

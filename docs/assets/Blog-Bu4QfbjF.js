import{r as l,j as e}from"./vendor-react-CM84WoKi.js";import{S as Y,u as z,B as x}from"./index-DEyKsSSU.js";import{C as H,a as P,b as $,c as I}from"./card-YIzv-YaG.js";import{S as Z,a as R,b as W,c as J,d as C,B as q}from"./badge-DwxDPpBR.js";import{Y as B,aC as G,u as E,v as K,aD as U,n as Q,a8 as X}from"./vendor-ui-8p2QWU2G.js";import{p as f,f as u,b as v}from"./vendor-date-HUzpq8ep.js";import"./vendor-supabase-ci4wIQv9.js";function ee({youtube_music_url:n,youtube_url:w,title:h}){const b=n||w||"",d=(c=>{if(!c||typeof c!="string")return null;try{const N=c.match(/[?&]list=([A-Za-z0-9_-]+)/);if(N)return{id:N[1],type:"playlist"};const g=[/(?:youtube\.com\/shorts\/)([A-Za-z0-9_-]{11})/,/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/|youtube\.com\/v\/)([A-Za-z0-9_-]{11})/,/^([A-Za-z0-9_-]{11})$/];for(const a of g){const y=c.match(a);if(y)return{id:y[1],type:"video"}}if(c.toLowerCase().includes("music.youtube.com")){const a=c.match(/[?&]v=([A-Za-z0-9_-]{11})/);if(a)return{id:a[1],type:"video"}}return null}catch{return null}})(b);if(!d)return e.jsx("div",{className:"w-full aspect-video rounded-lg overflow-hidden shadow-lg flex items-center justify-center bg-gradient-to-br from-gray-800 to-gray-900",children:e.jsx("p",{className:"text-white text-sm",children:"VidÃ©o non disponible"})});const p=b.includes("/shorts/"),j="https://www.youtube-nocookie.com/embed",t=d.type==="video"?`${j}/${d.id}?rel=0&modestbranding=1&playsinline=1&controls=1`:`${j}/videoseries?list=${d.id}&rel=0&modestbranding=1&playsinline=1&controls=1`;return p?e.jsx("div",{className:"w-full flex justify-center",children:e.jsx("div",{className:"relative rounded-lg overflow-hidden shadow-lg",style:{width:"100%",maxWidth:"400px",aspectRatio:"9/16"},children:e.jsx("iframe",{className:"absolute top-0 left-0 w-full h-full",src:t,title:h||"YouTube Short",frameBorder:"0",referrerPolicy:"strict-origin-when-cross-origin",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})}):e.jsx("div",{className:"w-full aspect-video rounded-lg overflow-hidden shadow-lg",children:e.jsx("iframe",{className:"w-full h-full",src:t,title:h||"YouTube",frameBorder:"0",referrerPolicy:"strict-origin-when-cross-origin",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})}function ce(){const[n,w]=l.useState([]),[h,b]=l.useState([]),[S,d]=l.useState(!0),[p,j]=l.useState(null),[t,c]=l.useState(null),[N,g]=l.useState(!1),[a,y]=l.useState("all"),[k,T]=l.useState([]);l.useEffect(()=>{M()},[]),l.useEffect(()=>{A()},[a,n]);const M=async()=>{try{d(!0);const r=(await Y.list("-release_date",null)).sort((o,i)=>new Date(i.release_date)-new Date(o.release_date));w(r);const m=D(r);T(m)}catch(s){console.error("Erro ao carregar posts do blog:",s),j("Erro ao carregar os posts do blog. Tente novamente.")}finally{d(!1)}},D=s=>{const r=new Set;return s.forEach(o=>{const i=f(o.release_date),L=u(i,"yyyy-MM"),O=u(i,"MMMM yyyy",{locale:v});r.add(JSON.stringify({key:L,label:O}))}),Array.from(r).map(o=>JSON.parse(o)).sort((o,i)=>i.key.localeCompare(o.key))},A=()=>{if(a==="all")b(n);else{const s=n.filter(r=>u(f(r.release_date),"yyyy-MM")===a);b(s)}},_=()=>{y("all")},V=s=>{const r=f(s),m=r.getDay(),o=m===0?-6:1-m,i=new Date(r);return i.setDate(r.getDate()+o),i},F=s=>{c(s),g(!0)};return z({title:"Blog Musical",description:"HistÃ³rias por trÃ¡s de cada mÃºsica publicada na A MÃºsica da Segunda. DescriÃ§Ãµes detalhadas e significado de cada canÃ§Ã£o.",keywords:"blog musical, histÃ³rias de mÃºsicas, mÃºsica da segunda, parÃ³dias musicais, descriÃ§Ãµes de canÃ§Ãµes",url:"/blog",type:"website"}),S?e.jsxs("div",{className:"p-5 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-4xl md:text-5xl font-black text-gray-900 mb-2",children:"Blog Musical"}),e.jsx("p",{className:"text-gray-700 font-medium text-lg",children:"HistÃ³rias por trÃ¡s de cada mÃºsica"})]}),e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),e.jsx("p",{className:"text-gray-700",children:"Carregando posts do blog..."})]})})]}):p?e.jsxs("div",{className:"p-5 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-4xl md:text-5xl font-black text-gray-900 mb-2",children:"Blog Musical"}),e.jsx("p",{className:"text-gray-700 font-medium text-lg",children:"HistÃ³rias por trÃ¡s de cada mÃºsica"})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-3xl p-6 text-center",children:[e.jsx(B,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Erro ao carregar"}),e.jsx("p",{className:"text-red-600 mb-4",children:p}),e.jsx(x,{onClick:M,className:"bg-red-500 hover:bg-red-600",children:"Tentar novamente"})]})]}):e.jsxs("div",{className:"p-5 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-black text-gray-900 mb-2",children:"Blog Musical"}),e.jsx("p",{className:"text-gray-700 font-medium text-lg",children:"HistÃ³rias por trÃ¡s de cada mÃºsica"}),e.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"DescriÃ§Ãµes detalhadas e significado de cada canÃ§Ã£o"})]}),e.jsx("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl p-6 mb-8 border border-gray-200",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(G,{className:"w-5 h-5 text-gray-700"}),e.jsx("span",{className:"text-gray-800 font-medium",children:"Filtrar por mÃªs:"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Z,{value:a,onValueChange:y,children:[e.jsx(R,{className:"w-48 bg-white/90 border-0 text-gray-800",children:e.jsx(W,{placeholder:"Selecione um mÃªs"})}),e.jsxs(J,{children:[e.jsx(C,{value:"all",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4"}),"Todos os meses (",n.length,")"]})}),k.map(s=>e.jsx(C,{value:s.key,children:s.label},s.key))]})]}),a!=="all"&&e.jsx(x,{onClick:_,variant:"outline",className:"bg-white text-gray-700 border-gray-300 hover:bg-gray-50",children:"Limpar filtro"})]})]})}),e.jsx("div",{className:"space-y-8",children:h.length>0?h.map(s=>{const r=V(s.release_date);return e.jsxs(H,{className:"bg-white/95 backdrop-blur-sm shadow-xl border-0",children:[e.jsx(P,{className:"pb-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx($,{className:"text-2xl md:text-3xl font-black text-gray-800 mb-2",children:s.title}),e.jsxs("div",{className:"flex items-center gap-4 text-gray-600 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-4 h-4"}),e.jsxs("span",{className:"font-medium",children:["Segunda-feira, ",u(r,"dd MMMM yyyy",{locale:v})]})]}),e.jsx(q,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:s.artist})]})]})})}),e.jsxs(I,{className:"space-y-6",children:[s.description?e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-4 border border-green-200",children:[e.jsx("h3",{className:"text-lg font-bold text-green-900 mb-2 flex items-center gap-2",children:"ðŸŽµ Sobre a MÃºsica"}),e.jsx("p",{className:"text-green-800 leading-relaxed whitespace-pre-wrap",children:s.description})]}):e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 rounded-xl p-4 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-700 mb-2 flex items-center gap-2",children:"ðŸŽµ Sobre a MÃºsica"}),e.jsx("p",{className:"text-gray-600 italic",children:"A descriÃ§Ã£o desta mÃºsica serÃ¡ adicionada no Supabase em breve. Enquanto isso, aproveite a mÃºsica!"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-xl p-4 border border-orange-200",children:[e.jsx("h3",{className:"text-lg font-bold text-orange-900 mb-3 flex items-center gap-2",children:"ðŸŽ§ Ouvir e Assistir"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[s.spotify_url&&e.jsx("a",{href:s.spotify_url,target:"_blank",rel:"noopener noreferrer",className:"block",children:e.jsxs(x,{className:"w-full bg-[#1DB954] hover:bg-[#1ed760] text-white font-bold py-3 rounded-xl transition-all duration-200 hover:scale-105",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Spotify"]})}),s.youtube_url&&e.jsx("a",{href:s.youtube_url,target:"_blank",rel:"noopener noreferrer",className:"block",children:e.jsxs(x,{className:"w-full bg-[#FF0000] hover:bg-[#cc0000] text-white font-bold py-3 rounded-xl transition-all duration-200 hover:scale-105",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"YouTube"]})}),s.tiktok_url&&e.jsxs(x,{onClick:()=>F(s),className:"w-full bg-black hover:bg-gray-800 text-white font-bold py-3 rounded-xl transition-all duration-200 hover:scale-105",children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"Video"]}),!s.spotify_url&&!s.youtube_url&&!s.tiktok_url&&e.jsxs("div",{className:"col-span-full text-center py-4",children:[e.jsx(B,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Links de streaming em breve..."})]})]})]}),e.jsx("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Data de LanÃ§amento:"}),e.jsx("br",{}),u(f(s.release_date),"dd MMMM yyyy",{locale:v})]}),s.genre&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"GÃªnero:"}),e.jsx("br",{}),s.genre]})]})})]})]},s.id)}):e.jsxs("div",{className:"bg-white/70 rounded-3xl p-8 text-center border border-gray-200",children:[e.jsx(E,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Nenhum artigo encontrado"}),e.jsx("p",{className:"text-gray-700 mb-4",children:a==="all"?"NÃ£o hÃ¡ artigos no blog ainda.":`NÃ£o hÃ¡ artigos publicados em ${k.find(s=>s.key===a)?.label}.`}),a!=="all"&&e.jsx(x,{onClick:_,className:"bg-white text-gray-700 border-gray-300 hover:bg-gray-50",children:"Ver todos os artigos"})]})}),N&&t&&e.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-3xl font-bold text-blue-900",children:["ðŸŽ¬ ",t.title]}),e.jsx("button",{onClick:()=>g(!1),className:"text-gray-500 hover:text-gray-700 text-2xl font-bold p-2 hover:bg-gray-100 rounded-full transition-colors",children:"âœ•"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 border border-blue-200",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-2",children:t.title}),e.jsx("p",{className:"text-blue-700 font-medium",children:t.artist}),e.jsxs("p",{className:"text-blue-600 text-sm",children:["ðŸ“… LanÃ§amento: ",u(f(t.release_date),"dd/MM/yyyy",{locale:v})]})]}),e.jsx("div",{className:"bg-black rounded-xl overflow-hidden shadow-2xl",children:e.jsx(ee,{youtube_music_url:t.youtube_music_url,youtube_url:t.youtube_url,title:t.title})}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx("button",{onClick:()=>{const s=t.youtube_music_url||t.youtube_url;s&&window.open(s,"_blank")},className:"bg-red-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-red-700 transition-colors flex items-center gap-2",children:"ðŸ“º Ver no YouTube"}),e.jsx("button",{onClick:()=>g(!1),className:"bg-gray-200 text-gray-700 px-6 py-3 rounded-xl font-semibold hover:bg-gray-300 transition-colors",children:"Fechar"})]})]})]})})})]})}export{ce as default};

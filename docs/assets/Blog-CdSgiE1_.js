var B=(m,f,o)=>new Promise((u,p)=>{var c=t=>{try{x(o.next(t))}catch(l){p(l)}},h=t=>{try{x(o.throw(t))}catch(l){p(l)}},x=t=>t.done?u(t.value):Promise.resolve(t.value).then(c,h);x((o=o.apply(m,f)).next())});import{n as A,r as i,e as Y,p as w,f as g,u as $,j as e,M as E,B as y,x as I,P as Z,m as S}from"./index-CQrQDNm-.js";import{C as R,a as W,b as J,c as q}from"./card-C_TKTWG1.js";import{a as G,b as K,c as U,d as Q,e as T,S as V,B as X}from"./badge-qNqqPSze.js";import{V as ee}from"./video-Cs6dZd22.js";import"./chevron-down-ZNuG34dF.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],te=A("Filter",se);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],re=A("Headphones",ae);function le({youtube_music_url:m,youtube_url:f,title:o}){const u=m||f||"",c=(l=>{if(!l||typeof l!="string")return null;try{const j=l.match(/[?&]list=([A-Za-z0-9_-]+)/);if(j)return{id:j[1],type:"playlist"};const N=[/(?:youtube\.com\/shorts\/)([A-Za-z0-9_-]{11})/,/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/|youtube\.com\/v\/)([A-Za-z0-9_-]{11})/,/^([A-Za-z0-9_-]{11})$/];for(const a of N){const v=l.match(a);if(v)return{id:v[1],type:"video"}}if(l.toLowerCase().includes("music.youtube.com")){const a=l.match(/[?&]v=([A-Za-z0-9_-]{11})/);if(a)return{id:a[1],type:"video"}}return null}catch(j){return null}})(u);if(!c)return e.jsx("div",{className:"w-full aspect-video rounded-lg overflow-hidden shadow-lg flex items-center justify-center bg-gradient-to-br from-gray-800 to-gray-900",children:e.jsx("p",{className:"text-white text-sm",children:"VidÃ©o non disponible"})});const h=u.includes("/shorts/"),x="https://www.youtube-nocookie.com/embed",t=c.type==="video"?`${x}/${c.id}?rel=0&modestbranding=1&playsinline=1&controls=1`:`${x}/videoseries?list=${c.id}&rel=0&modestbranding=1&playsinline=1&controls=1`;return h?e.jsx("div",{className:"w-full flex justify-center",children:e.jsx("div",{className:"relative rounded-lg overflow-hidden shadow-lg",style:{width:"100%",maxWidth:"400px",aspectRatio:"9/16"},children:e.jsx("iframe",{className:"absolute top-0 left-0 w-full h-full",src:t,title:o||"YouTube Short",frameBorder:"0",referrerPolicy:"strict-origin-when-cross-origin",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})}):e.jsx("div",{className:"w-full aspect-video rounded-lg overflow-hidden shadow-lg",children:e.jsx("iframe",{className:"w-full h-full",src:t,title:o||"YouTube",frameBorder:"0",referrerPolicy:"strict-origin-when-cross-origin",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})}function xe(){var C;const[m,f]=i.useState([]),[o,u]=i.useState([]),[p,c]=i.useState(!0),[h,x]=i.useState(null),[t,l]=i.useState(null),[j,N]=i.useState(!1),[a,v]=i.useState("all"),[k,D]=i.useState([]);i.useEffect(()=>{M()},[]),i.useEffect(()=>{L()},[a,m]);const M=()=>B(null,null,function*(){try{c(!0);const r=(yield Y.list("-release_date",null)).sort((n,d)=>new Date(d.release_date)-new Date(n.release_date));f(r);const b=F(r);D(b)}catch(s){console.error("Erro ao carregar posts do blog:",s),x("Erro ao carregar os posts do blog. Tente novamente.")}finally{c(!1)}}),F=s=>{const r=new Set;return s.forEach(n=>{const d=w(n.release_date),z=g(d,"yyyy-MM"),P=g(d,"MMMM yyyy",{locale:S});r.add(JSON.stringify({key:z,label:P}))}),Array.from(r).map(n=>JSON.parse(n)).sort((n,d)=>d.key.localeCompare(n.key))},L=()=>{if(a==="all")u(m);else{const s=m.filter(r=>g(w(r.release_date),"yyyy-MM")===a);u(s)}},_=()=>{v("all")},H=s=>{const r=w(s),b=r.getDay(),n=b===0?-6:1-b,d=new Date(r);return d.setDate(r.getDate()+n),d},O=s=>{l(s),N(!0)};return $({title:"Blog Musical",description:"HistÃ³rias por trÃ¡s de cada mÃºsica publicada na A MÃºsica da Segunda. DescriÃ§Ãµes detalhadas e significado de cada canÃ§Ã£o.",keywords:"blog musical, histÃ³rias de mÃºsicas, mÃºsica da segunda, parÃ³dias musicais, descriÃ§Ãµes de canÃ§Ãµes",url:"/blog",type:"website"}),p?e.jsxs("div",{className:"p-5 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-4xl md:text-5xl font-black text-gray-900 mb-2",children:"Blog Musical"}),e.jsx("p",{className:"text-gray-700 font-medium text-lg",children:"HistÃ³rias por trÃ¡s de cada mÃºsica"})]}),e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),e.jsx("p",{className:"text-gray-700",children:"Carregando posts do blog..."})]})})]}):h?e.jsxs("div",{className:"p-5 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-4xl md:text-5xl font-black text-gray-900 mb-2",children:"Blog Musical"}),e.jsx("p",{className:"text-gray-700 font-medium text-lg",children:"HistÃ³rias por trÃ¡s de cada mÃºsica"})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-3xl p-6 text-center",children:[e.jsx(E,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Erro ao carregar"}),e.jsx("p",{className:"text-red-600 mb-4",children:h}),e.jsx(y,{onClick:M,className:"bg-red-500 hover:bg-red-600",children:"Tentar novamente"})]})]}):e.jsxs("div",{className:"p-5 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-black text-gray-900 mb-2",children:"Blog Musical"}),e.jsx("p",{className:"text-gray-700 font-medium text-lg",children:"HistÃ³rias por trÃ¡s de cada mÃºsica"}),e.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"DescriÃ§Ãµes detalhadas e significado de cada canÃ§Ã£o"})]}),e.jsx("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl p-6 mb-8 border border-gray-200",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(te,{className:"w-5 h-5 text-gray-700"}),e.jsx("span",{className:"text-gray-800 font-medium",children:"Filtrar por mÃªs:"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(G,{value:a,onValueChange:v,children:[e.jsx(K,{className:"w-48 bg-white/90 border-0 text-gray-800",children:e.jsx(U,{placeholder:"Selecione um mÃªs"})}),e.jsxs(Q,{children:[e.jsx(T,{value:"all",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4"}),"Todos os meses (",m.length,")"]})}),k.map(s=>e.jsx(T,{value:s.key,children:s.label},s.key))]})]}),a!=="all"&&e.jsx(y,{onClick:_,variant:"outline",className:"bg-white text-gray-700 border-gray-300 hover:bg-gray-50",children:"Limpar filtro"})]})]})}),e.jsx("div",{className:"space-y-8",children:o.length>0?o.map(s=>{const r=H(s.release_date);return e.jsxs(R,{className:"bg-white/95 backdrop-blur-sm shadow-xl border-0",children:[e.jsx(W,{className:"pb-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx(J,{className:"text-2xl md:text-3xl font-black text-gray-800 mb-2",children:s.title}),e.jsxs("div",{className:"flex items-center gap-4 text-gray-600 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-4 h-4"}),e.jsxs("span",{className:"font-medium",children:["Segunda-feira, ",g(r,"dd MMMM yyyy",{locale:S})]})]}),e.jsx(X,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:s.artist})]})]})})}),e.jsxs(q,{className:"space-y-6",children:[s.description?e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-4 border border-green-200",children:[e.jsx("h3",{className:"text-lg font-bold text-green-900 mb-2 flex items-center gap-2",children:"ðŸŽµ Sobre a MÃºsica"}),e.jsx("p",{className:"text-green-800 leading-relaxed whitespace-pre-wrap",children:s.description})]}):e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 rounded-xl p-4 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-700 mb-2 flex items-center gap-2",children:"ðŸŽµ Sobre a MÃºsica"}),e.jsx("p",{className:"text-gray-600 italic",children:"A descriÃ§Ã£o desta mÃºsica serÃ¡ adicionada no Supabase em breve. Enquanto isso, aproveite a mÃºsica!"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-xl p-4 border border-orange-200",children:[e.jsx("h3",{className:"text-lg font-bold text-orange-900 mb-3 flex items-center gap-2",children:"ðŸŽ§ Ouvir e Assistir"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[s.spotify_url&&e.jsx("a",{href:s.spotify_url,target:"_blank",rel:"noopener noreferrer",className:"block",children:e.jsxs(y,{className:"w-full bg-[#1DB954] hover:bg-[#1ed760] text-white font-bold py-3 rounded-xl transition-all duration-200 hover:scale-105",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Spotify"]})}),s.youtube_url&&e.jsx("a",{href:s.youtube_url,target:"_blank",rel:"noopener noreferrer",className:"block",children:e.jsxs(y,{className:"w-full bg-[#FF0000] hover:bg-[#cc0000] text-white font-bold py-3 rounded-xl transition-all duration-200 hover:scale-105",children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"YouTube"]})}),s.tiktok_url&&e.jsxs(y,{onClick:()=>O(s),className:"w-full bg-black hover:bg-gray-800 text-white font-bold py-3 rounded-xl transition-all duration-200 hover:scale-105",children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Video"]}),!s.spotify_url&&!s.youtube_url&&!s.tiktok_url&&e.jsxs("div",{className:"col-span-full text-center py-4",children:[e.jsx(E,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Links de streaming em breve..."})]})]})]}),e.jsx("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Data de LanÃ§amento:"}),e.jsx("br",{}),g(w(s.release_date),"dd MMMM yyyy",{locale:S})]}),s.genre&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"GÃªnero:"}),e.jsx("br",{}),s.genre]})]})})]})]},s.id)}):e.jsxs("div",{className:"bg-white/70 rounded-3xl p-8 text-center border border-gray-200",children:[e.jsx(V,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Nenhum artigo encontrado"}),e.jsx("p",{className:"text-gray-700 mb-4",children:a==="all"?"NÃ£o hÃ¡ artigos no blog ainda.":`NÃ£o hÃ¡ artigos publicados em ${(C=k.find(s=>s.key===a))==null?void 0:C.label}.`}),a!=="all"&&e.jsx(y,{onClick:_,className:"bg-white text-gray-700 border-gray-300 hover:bg-gray-50",children:"Ver todos os artigos"})]})}),j&&t&&e.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-3xl font-bold text-blue-900",children:["ðŸŽ¬ ",t.title]}),e.jsx("button",{onClick:()=>N(!1),className:"text-gray-500 hover:text-gray-700 text-2xl font-bold p-2 hover:bg-gray-100 rounded-full transition-colors",children:"âœ•"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 border border-blue-200",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-2",children:t.title}),e.jsx("p",{className:"text-blue-700 font-medium",children:t.artist}),e.jsxs("p",{className:"text-blue-600 text-sm",children:["ðŸ“… LanÃ§amento: ",g(w(t.release_date),"dd/MM/yyyy",{locale:S})]})]}),e.jsx("div",{className:"bg-black rounded-xl overflow-hidden shadow-2xl",children:e.jsx(le,{youtube_music_url:t.youtube_music_url,youtube_url:t.youtube_url,title:t.title})}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx("button",{onClick:()=>{const s=t.youtube_music_url||t.youtube_url;s&&window.open(s,"_blank")},className:"bg-red-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-red-700 transition-colors flex items-center gap-2",children:"ðŸ“º Ver no YouTube"}),e.jsx("button",{onClick:()=>N(!1),className:"bg-gray-200 text-gray-700 px-6 py-3 rounded-xl font-semibold hover:bg-gray-300 transition-colors",children:"Fechar"})]})]})]})})})]})}export{xe as default};

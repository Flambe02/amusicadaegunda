const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TikTokDemo-BIu59cTl.js","assets/ui-IWow_Ftt.js","assets/vendor-DHbHB7JU.js","assets/utils-DME-h_hF.js"])))=>i.map(i=>d[i]);
var e,t=Object.defineProperty,s=Object.defineProperties,r=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(e,s,r)=>s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,l=(e,t)=>{for(var s in t||(t={}))a.call(t,s)&&o(e,s,t[s]);if(n)for(var s of n(t))i.call(t,s)&&o(e,s,t[s]);return e},c=(e,t)=>s(e,r(t)),d=(e,t)=>{var s={};for(var r in e)a.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&n)for(var r of n(e))t.indexOf(r)<0&&i.call(e,r)&&(s[r]=e[r]);return s},u=(e,t,s)=>o(e,"symbol"!=typeof t?t+"":t,s),h=(e,t,s)=>new Promise((r,n)=>{var a=e=>{try{o(s.next(e))}catch(t){n(t)}},i=e=>{try{o(s.throw(e))}catch(t){n(t)}},o=e=>e.done?r(e.value):Promise.resolve(e.value).then(a,i);o((s=s.apply(e,t)).next())});import{r as m,j as p,O as f,P as g,C as x,a as v,T as b,D as y,R as w,u as j,b as k,c as _,d as N,e as S,f as T,g as C,h as E,S as M,i as P,k as R,A,l as O,m as $,n as D,o as I,p as L,q as U,s as z,F as B,t as q,v as H,w as W,x as F,y as V,z as K}from"./ui-IWow_Ftt.js";import{a as J,g as G,b as Y}from"./vendor-DHbHB7JU.js";import{t as X,c as Z,b as Q,a as ee,d as te,e as se,s as re,f as ne,p as ae,i as ie,g as oe,h as le,j as ce,k as de,l as ue}from"./utils-DME-h_hF.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var he,me={};const pe=G(function(){if(he)return me;he=1;var e=J();return me.createRoot=e.createRoot,me.hydrateRoot=e.hydrateRoot,me}()),fe={},ge=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),n=(null==s?void 0:s.nonce)||(null==s?void 0:s.getAttribute("nonce"));r=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in fe)return;fe[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,n&&r.setAttribute("nonce",n),document.head.appendChild(r),t?new Promise((t,s)=>{r.addEventListener("load",t),r.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function n(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&n(e.reason);return e().catch(n)})};
/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
var xe="popstate";function ve(e={}){return function(e,t,s,r={}){let{window:n=document.defaultView,v5Compat:a=!1}=r,i=n.history,o="POP",d=null,u=h();null==u&&(u=0,i.replaceState(c(l({},i.state),{idx:u}),""));function h(){return(i.state||{idx:null}).idx}function m(){o="POP";let e=h(),t=null==e?null:e-u;u=e,d&&d({action:o,location:x.location,delta:t})}function p(e,t){o="PUSH";let s=je(x.location,e,t);u=h()+1;let r=we(s,u),l=x.createHref(s);try{i.pushState(r,"",l)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;n.location.assign(l)}a&&d&&d({action:o,location:x.location,delta:1})}function f(e,t){o="REPLACE";let s=je(x.location,e,t);u=h();let r=we(s,u),n=x.createHref(s);i.replaceState(r,"",n),a&&d&&d({action:o,location:x.location,delta:0})}function g(e){return function(e,t=!1){let s="http://localhost";"undefined"!=typeof window&&(s="null"!==window.location.origin?window.location.origin:window.location.href);be(s,"No window.location.(origin|href) available to create URL");let r="string"==typeof e?e:ke(e);r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=s+r);return new URL(r,s)}(e)}let x={get action(){return o},get location(){return e(n,i)},listen(e){if(d)throw new Error("A history only accepts one active listener");return n.addEventListener(xe,m),d=e,()=>{n.removeEventListener(xe,m),d=null}},createHref:e=>t(n,e),createURL:g,encodeLocation(e){let t=g(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:p,replace:f,go:e=>i.go(e)};return x}(function(e,t){let{pathname:s,search:r,hash:n}=e.location;return je("",{pathname:s,search:r,hash:n},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:ke(t)},0,e)}function be(e,t){if(!1===e||null==e)throw new Error(t)}function ye(e,t){if(!e)try{throw new Error(t)}catch(s){}}function we(e,t){return{usr:e.state,key:e.key,idx:t}}function je(e,t,s=null,r){return c(l({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?_e(t):t),{state:s,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function ke({pathname:e="/",search:t="",hash:s=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),s&&"#"!==s&&(e+="#"===s.charAt(0)?s:"#"+s),e}function _e(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substring(s),e=e.substring(0,s));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function Ne(e,t,s="/"){return function(e,t,s,r){let n="string"==typeof t?_e(t):t,a=Ue(n.pathname||"/",s);if(null==a)return null;let i=Se(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let s=e.length===t.length&&e.slice(0,-1).every((e,s)=>e===t[s]);return s?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let o=null;for(let l=0;null==o&&l<i.length;++l){let e=Le(a);o=De(i[l],e,r)}return o}(e,t,s,!1)}function Se(e,t=[],s=[],r="",n=!1){let a=(e,a,i=n,o)=>{let l={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&i)return;be(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length)}let c=He([r,l.relativePath]),d=s.concat(l);e.children&&e.children.length>0&&(be(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),Se(e.children,t,d,c,i)),(null!=e.path||e.index)&&t.push({path:c,score:$e(c,e.index),routesMeta:d})};return e.forEach((e,t)=>{var s;if(""!==e.path&&(null==(s=e.path)?void 0:s.includes("?")))for(let r of Te(e.path))a(e,t,!0,r);else a(e,t)}),t}function Te(e){let t=e.split("/");if(0===t.length)return[];let[s,...r]=t,n=s.endsWith("?"),a=s.replace(/\?$/,"");if(0===r.length)return n?[a,""]:[a];let i=Te(r.join("/")),o=[];return o.push(...i.map(e=>""===e?a:[a,e].join("/"))),n&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var Ce=/^:[\w-]+$/,Ee=3,Me=2,Pe=1,Re=10,Ae=-2,Oe=e=>"*"===e;function $e(e,t){let s=e.split("/"),r=s.length;return s.some(Oe)&&(r+=Ae),t&&(r+=Me),s.filter(e=>!Oe(e)).reduce((e,t)=>e+(Ce.test(t)?Ee:""===t?Pe:Re),r)}function De(e,t,s=!1){let{routesMeta:r}=e,n={},a="/",i=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===a?t:t.slice(a.length)||"/",d=Ie({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&s&&!r[r.length-1].route.index&&(d=Ie({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(n,d.params),i.push({params:n,pathname:He([a,d.pathname]),pathnameBase:We(He([a,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(a=He([a,d.pathnameBase]))}return i}function Ie(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[s,r]=function(e,t=!1,s=!0){ye("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,s)=>(r.push({paramName:t,isOptional:null!=s}),s?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");e.endsWith("*")?(r.push({paramName:"*"}),n+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?n+="\\/*$":""!==e&&"/"!==e&&(n+="(?:(?=\\/|$))");let a=new RegExp(n,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),n=t.match(s);if(!n)return null;let a=n[0],i=a.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:r.reduce((e,{paramName:t,isOptional:s},r)=>{if("*"===t){let e=o[r]||"";i=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const n=o[r];return e[t]=s&&!n?void 0:(n||"").replace(/%2F/g,"/"),e},{}),pathname:a,pathnameBase:i,pattern:e}}function Le(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return ye(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Ue(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,r=e.charAt(s);return r&&"/"!==r?null:e.slice(s)||"/"}function ze(e,t,s,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Be(e){let t=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t.map((e,s)=>s===t.length-1?e.pathname:e.pathnameBase)}function qe(e,t,s,r=!1){let n;"string"==typeof e?n=_e(e):(n=l({},e),be(!n.pathname||!n.pathname.includes("?"),ze("?","pathname","search",n)),be(!n.pathname||!n.pathname.includes("#"),ze("#","pathname","hash",n)),be(!n.search||!n.search.includes("#"),ze("#","search","hash",n)));let a,i=""===e||""===n.pathname,o=i?"/":n.pathname;if(null==o)a=s;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;n.pathname=t.join("/")}a=e>=0?t[e]:"/"}let c=function(e,t="/"){let{pathname:s,search:r="",hash:n=""}="string"==typeof e?_e(e):e,a=s?s.startsWith("/")?s:function(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?s.length>1&&s.pop():"."!==e&&s.push(e)}),s.length>1?s.join("/"):"/"}(s,t):t;return{pathname:a,search:Fe(r),hash:Ve(n)}}(n,a),d=o&&"/"!==o&&o.endsWith("/"),u=(i||"."===o)&&s.endsWith("/");return c.pathname.endsWith("/")||!d&&!u||(c.pathname+="/"),c}var He=e=>e.join("/").replace(/\/\/+/g,"/"),We=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Fe=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Ve=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";var Ke=["POST","PUT","PATCH","DELETE"];new Set(Ke);var Je=["GET",...Ke];new Set(Je);var Ge=m.createContext(null);Ge.displayName="DataRouter";var Ye=m.createContext(null);Ye.displayName="DataRouterState",m.createContext(!1);var Xe=m.createContext({isTransitioning:!1});Xe.displayName="ViewTransition",m.createContext(new Map).displayName="Fetchers",m.createContext(null).displayName="Await";var Ze=m.createContext(null);Ze.displayName="Navigation";var Qe=m.createContext(null);Qe.displayName="Location";var et=m.createContext({outlet:null,matches:[],isDataRoute:!1});et.displayName="Route";var tt=m.createContext(null);function st(){return null!=m.useContext(Qe)}function rt(){return be(st(),"useLocation() may be used only in the context of a <Router> component."),m.useContext(Qe).location}tt.displayName="RouteError";var nt="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function at(e){m.useContext(Ze).static||m.useLayoutEffect(e)}function it(){let{isDataRoute:e}=m.useContext(et);return e?function(){let{router:e}=function(e){let t=m.useContext(Ge);return be(t,pt(e)),t}("useNavigate"),t=ft("useNavigate"),s=m.useRef(!1);return at(()=>{s.current=!0}),m.useCallback((r,...n)=>h(null,[r,...n],function*(r,n={}){ye(s.current,nt),s.current&&("number"==typeof r?e.navigate(r):yield e.navigate(r,l({fromRouteId:t},n)))}),[e,t])}():function(){be(st(),"useNavigate() may be used only in the context of a <Router> component.");let e=m.useContext(Ge),{basename:t,navigator:s}=m.useContext(Ze),{matches:r}=m.useContext(et),{pathname:n}=rt(),a=JSON.stringify(Be(r)),i=m.useRef(!1);return at(()=>{i.current=!0}),m.useCallback((r,o={})=>{if(ye(i.current,nt),!i.current)return;if("number"==typeof r)return void s.go(r);let l=qe(r,JSON.parse(a),n,"path"===o.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:He([t,l.pathname])),(o.replace?s.replace:s.push)(l,o.state,o)},[t,s,a,n,e])}()}function ot(){let{matches:e}=m.useContext(et),t=e[e.length-1];return t?t.params:{}}function lt(e,{relative:t}={}){let{matches:s}=m.useContext(et),{pathname:r}=rt(),n=JSON.stringify(Be(s));return m.useMemo(()=>qe(e,JSON.parse(n),r,"path"===t),[e,n,r,t])}function ct(e,t,s,r,n){var a;be(st(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=m.useContext(Ze),{matches:o}=m.useContext(et),c=o[o.length-1],d=c?c.params:{},u=c?c.pathname:"/",h=c?c.pathnameBase:"/",p=c&&c.route;{let e=p&&p.path||"";xt(u,!p||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let f,g=rt();if(t){let e="string"==typeof t?_e(t):t;be("/"===h||(null==(a=e.pathname)?void 0:a.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${e.pathname}" was given in the \`location\` prop.`),f=e}else f=g;let x=f.pathname||"/",v=x;if("/"!==h){let e=h.replace(/^\//,"").split("/");v="/"+x.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=Ne(e,{pathname:v});ye(p||null!=b,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),ye(null==b||void 0!==b[b.length-1].route.element||void 0!==b[b.length-1].route.Component||void 0!==b[b.length-1].route.lazy,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=function(e,t=[],s=null,r=null){if(null==e){if(!s)return null;if(s.errors)e=s.matches;else{if(0!==t.length||s.initialized||!(s.matches.length>0))return null;e=s.matches}}let n=e,a=null==s?void 0:s.errors;if(null!=a){let e=n.findIndex(e=>e.route.id&&void 0!==(null==a?void 0:a[e.route.id]));be(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),n=n.slice(0,Math.min(n.length,e+1))}let i=!1,o=-1;if(s)for(let l=0;l<n.length;l++){let e=n[l];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=l),e.route.id){let{loaderData:t,errors:r}=s,a=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||a){i=!0,n=o>=0?n.slice(0,o+1):[n[0]];break}}}return n.reduceRight((e,l,c)=>{let d,u=!1,h=null,p=null;s&&(d=a&&l.route.id?a[l.route.id]:void 0,h=l.route.errorElement||ut,i&&(o<0&&0===c?(xt("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),u=!0,p=null):o===c&&(u=!0,p=l.route.hydrateFallbackElement||null)));let f=t.concat(n.slice(0,c+1)),g=()=>{let t;return t=d?h:u?p:l.route.Component?m.createElement(l.route.Component,null):l.route.element?l.route.element:e,m.createElement(mt,{match:l,routeContext:{outlet:e,matches:f,isDataRoute:null!=s},children:t})};return s&&(l.route.ErrorBoundary||l.route.errorElement||0===c)?m.createElement(ht,{location:s.location,revalidation:s.revalidation,component:h,error:d,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0},unstable_onError:r}):g()},null)}(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:He([h,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:He([h,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,s,r,n);return t&&y?m.createElement(Qe.Provider,{value:{location:l({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:"POP"}},y):y}function dt(){let e=function(){var e;let t=m.useContext(tt),s=function(e){let t=m.useContext(Ye);return be(t,pt(e)),t}("useRouteError"),r=ft("useRouteError");if(void 0!==t)return t;return null==(e=s.errors)?void 0:e[r]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},i=null;return i=m.createElement(m.Fragment,null,m.createElement("p",null,"💿 Hey developer 👋"),m.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",m.createElement("code",{style:a},"ErrorBoundary")," or"," ",m.createElement("code",{style:a},"errorElement")," prop on your route.")),m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},t),s?m.createElement("pre",{style:n},s):null,i)}m.createContext(null);var ut=m.createElement(dt,null),ht=class extends m.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError&&this.props.unstable_onError(e,t)}render(){return void 0!==this.state.error?m.createElement(et.Provider,{value:this.props.routeContext},m.createElement(tt.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function mt({routeContext:e,match:t,children:s}){let r=m.useContext(Ge);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),m.createElement(et.Provider,{value:e},s)}function pt(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ft(e){let t=function(e){let t=m.useContext(et);return be(t,pt(e)),t}(e),s=t.matches[t.matches.length-1];return be(s.route.id,`${e} can only be used on routes that contain a unique "id"`),s.route.id}var gt={};function xt(e,t,s){t||gt[e]||(gt[e]=!0,ye(!1,s))}function vt(e){be(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function bt({basename:e="/",children:t=null,location:s,navigationType:r="POP",navigator:n,static:a=!1}){be(!st(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=e.replace(/^\/*/,"/"),o=m.useMemo(()=>({basename:i,navigator:n,static:a,future:{}}),[i,n,a]);"string"==typeof s&&(s=_e(s));let{pathname:l="/",search:c="",hash:d="",state:u=null,key:h="default"}=s,p=m.useMemo(()=>{let e=Ue(l,i);return null==e?null:{location:{pathname:e,search:c,hash:d,state:u,key:h},navigationType:r}},[i,l,c,d,u,h,r]);return ye(null!=p,`<Router basename="${i}"> is not able to match the URL "${l}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),null==p?null:m.createElement(Ze.Provider,{value:o},m.createElement(Qe.Provider,{children:t,value:p}))}function yt({children:e,location:t}){return ct(wt(e),t)}function wt(e,t=[]){let s=[];return m.Children.forEach(e,(e,r)=>{if(!m.isValidElement(e))return;let n=[...t,r];if(e.type===m.Fragment)return void s.push.apply(s,wt(e.props.children,n));be(e.type===vt,`[${"string"==typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),be(!e.props.index||!e.props.children,"An index route cannot have child routes.");let a={id:e.props.id||n.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=wt(e.props.children,n)),s.push(a)}),s}m.memo(function({routes:e,future:t,state:s,unstable_onError:r}){return ct(e,void 0,s,r,t)});var jt="get",kt="application/x-www-form-urlencoded";function _t(e){return null!=e&&"string"==typeof e.tagName}var Nt=null;var St=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Tt(e){return null==e||St.has(e)?e:(ye(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${kt}"`),null)}function Ct(e,t){let s,r,n,a,i;if(_t(o=e)&&"form"===o.tagName.toLowerCase()){let i=e.getAttribute("action");r=i?Ue(i,t):null,s=e.getAttribute("method")||jt,n=Tt(e.getAttribute("enctype"))||kt,a=new FormData(e)}else if(function(e){return _t(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return _t(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let i=e.form;if(null==i)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||i.getAttribute("action");if(r=o?Ue(o,t):null,s=e.getAttribute("formmethod")||i.getAttribute("method")||jt,n=Tt(e.getAttribute("formenctype"))||Tt(i.getAttribute("enctype"))||kt,a=new FormData(i,e),!function(){if(null===Nt)try{new FormData(document.createElement("form"),0),Nt=!1}catch(e){Nt=!0}return Nt}()){let{name:t,type:s,value:r}=e;if("image"===s){let e=t?`${t}.`:"";a.append(`${e}x`,"0"),a.append(`${e}y`,"0")}else t&&a.append(t,r)}}else{if(_t(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=jt,r=null,n=kt,i=e}var o;return a&&"text/plain"===n&&(i=a,a=void 0),{action:r,method:s.toLowerCase(),encType:n,formData:a,body:i}}function Et(e,t){if(!1===e||null==e)throw new Error(t)}function Mt(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}function Pt(e,t,s){return h(this,null,function*(){return function(e,t){let s=new Set;return new Set(t),e.reduce((e,t)=>{let r=JSON.stringify(function(e){let t={},s=Object.keys(e).sort();for(let r of s)t[r]=e[r];return t}(t));return s.has(r)||(s.add(r),e.push({key:r,link:t})),e},[])}((yield Promise.all(e.map(e=>h(null,null,function*(){let r=t.routes[e.route.id];if(r){let e=yield function(e,t){return h(this,null,function*(){if(e.id in t)return t[e.id];try{let s=yield import(e.module);return t[e.id]=s,s}catch(s){return window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}})}(r,s);return e.links?e.links():[]}return[]})))).flat(1).filter(Mt).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?c(l({},e),{rel:"prefetch",as:"style"}):c(l({},e),{rel:"prefetch"})))})}function Rt(e,t,s,r,n,a){let i=(e,t)=>!s[t]||e.route.id!==s[t].route.id,o=(e,t)=>{var r;return s[t].pathname!==e.pathname||(null==(r=s[t].route.path)?void 0:r.endsWith("*"))&&s[t].params["*"]!==e.params["*"]};return"assets"===a?t.filter((e,t)=>i(e,t)||o(e,t)):"data"===a?t.filter((t,a)=>{var l;let c=r.routes[t.route.id];if(!c||!c.hasLoader)return!1;if(i(t,a)||o(t,a))return!0;if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:(null==(l=s[0])?void 0:l.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof r)return r}return!0}):[]}function At(e,t,{includeHydrateFallback:s}={}){return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let n=[r.module];return r.clientActionModule&&(n=n.concat(r.clientActionModule)),r.clientLoaderModule&&(n=n.concat(r.clientLoaderModule)),s&&r.hydrateFallbackModule&&(n=n.concat(r.hydrateFallbackModule)),r.imports&&(n=n.concat(r.imports)),n}).flat(1),[...new Set(r)];var r}function Ot(){let e=m.useContext(Ge);return Et(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var $t=m.createContext(void 0);function Dt(){let e=m.useContext($t);return Et(e,"You must render this element inside a <HydratedRouter> element"),e}function It(e,t){return s=>{e&&e(s),s.defaultPrevented||t(s)}}function Lt(e){var t=e,{page:s}=t,r=d(t,["page"]);let{router:n}=Ot(),a=m.useMemo(()=>Ne(n.routes,s,n.basename),[n.routes,s,n.basename]);return a?m.createElement(Ut,l({page:s,matches:a},r)):null}function Ut(e){var t=e,{page:s,matches:r}=t,n=d(t,["page","matches"]);let a=rt(),{manifest:i,routeModules:o}=Dt(),{basename:c}=Ot(),{loaderData:u,matches:h}=function(){let e=m.useContext(Ye);return Et(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}(),p=m.useMemo(()=>Rt(s,r,h,i,a,"data"),[s,r,h,i,a]),f=m.useMemo(()=>Rt(s,r,h,i,a,"assets"),[s,r,h,i,a]),g=m.useMemo(()=>{if(s===a.pathname+a.search+a.hash)return[];let e=new Set,t=!1;if(r.forEach(s=>{var r;let n=i.routes[s.route.id];n&&n.hasLoader&&(!p.some(e=>e.route.id===s.route.id)&&s.route.id in u&&(null==(r=o[s.route.id])?void 0:r.shouldRevalidate)||n.hasClientLoader?t=!0:e.add(s.route.id))}),0===e.size)return[];let n=function(e,t,s){let r="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname=`_root.${s}`:t&&"/"===Ue(r.pathname,t)?r.pathname=`${t.replace(/\/$/,"")}/_root.${s}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${s}`,r}(s,c,"data");return t&&e.size>0&&n.searchParams.set("_routes",r.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[n.pathname+n.search]},[c,u,a,i,p,r,s,o]),x=m.useMemo(()=>At(f,i),[f,i]),v=function(e){let{manifest:t,routeModules:s}=Dt(),[r,n]=m.useState([]);return m.useEffect(()=>{let r=!1;return Pt(e,t,s).then(e=>{r||n(e)}),()=>{r=!0}},[e,t,s]),r}(f);return m.createElement(m.Fragment,null,g.map(e=>m.createElement("link",l({key:e,rel:"prefetch",as:"fetch",href:e},n))),x.map(e=>m.createElement("link",l({key:e,rel:"modulepreload",href:e},n))),v.map(({key:e,link:t})=>m.createElement("link",l({key:e,nonce:n.nonce},t))))}function zt(...e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}$t.displayName="FrameworkContext";var Bt="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{Bt&&(window.__reactRouterVersion="7.8.2")}catch(Cd){}function qt({basename:e,children:t,window:s}){let r=m.useRef();null==r.current&&(r.current=ve({window:s,v5Compat:!0}));let n=r.current,[a,i]=m.useState({action:n.action,location:n.location}),o=m.useCallback(e=>{m.startTransition(()=>i(e))},[i]);return m.useLayoutEffect(()=>n.listen(o),[n,o]),m.createElement(bt,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:n})}var Ht=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Wt=m.forwardRef(function(e,t){var s=e,{onClick:r,discover:n="render",prefetch:a="none",relative:i,reloadDocument:o,replace:u,state:h,target:p,to:f,preventScrollReset:g,viewTransition:x}=s,v=d(s,["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"]);let b,{basename:y}=m.useContext(Ze),w="string"==typeof f&&Ht.test(f),j=!1;if("string"==typeof f&&w&&(b=f,Bt))try{let e=new URL(window.location.href),t=f.startsWith("//")?new URL(e.protocol+f):new URL(f),s=Ue(t.pathname,y);t.origin===e.origin&&null!=s?f=s+t.search+t.hash:j=!0}catch(Cd){ye(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=function(e,{relative:t}={}){be(st(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:r}=m.useContext(Ze),{hash:n,pathname:a,search:i}=lt(e,{relative:t}),o=a;return"/"!==s&&(o="/"===a?s:He([s,a])),r.createHref({pathname:o,search:i,hash:n})}(f,{relative:i}),[_,N,S]=function(e,t){let s=m.useContext($t),[r,n]=m.useState(!1),[a,i]=m.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:d,onTouchStart:u}=t,h=m.useRef(null);m.useEffect(()=>{if("render"===e&&i(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{i(e.isIntersecting)})},{threshold:.5});return h.current&&e.observe(h.current),()=>{e.disconnect()}}},[e]),m.useEffect(()=>{if(r){let e=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(e)}}},[r]);let p=()=>{n(!0)},f=()=>{n(!1),i(!1)};return s?"intent"!==e?[a,h,{}]:[a,h,{onFocus:It(o,p),onBlur:It(l,f),onMouseEnter:It(c,p),onMouseLeave:It(d,f),onTouchStart:It(u,p)}]:[!1,h,{}]}(a,v),T=function(e,{target:t,replace:s,state:r,preventScrollReset:n,relative:a,viewTransition:i}={}){let o=it(),l=rt(),c=lt(e,{relative:a});return m.useCallback(d=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(d,t)){d.preventDefault();let t=void 0!==s?s:ke(l)===ke(c);o(e,{replace:t,state:r,preventScrollReset:n,relative:a,viewTransition:i})}},[l,o,c,s,r,t,e,n,a,i])}(f,{replace:u,state:h,target:p,preventScrollReset:g,relative:i,viewTransition:x});let C=m.createElement("a",c(l(l({},v),S),{href:b||k,onClick:j||o?r:function(e){r&&r(e),e.defaultPrevented||T(e)},ref:zt(t,N),target:p,"data-discover":w||"render"!==n?void 0:"true"}));return _&&!w?m.createElement(m.Fragment,null,C,m.createElement(Lt,{page:k})):C});Wt.displayName="Link",m.forwardRef(function(e,t){var s=e,{"aria-current":r="page",caseSensitive:n=!1,className:a="",end:i=!1,style:o,to:u,viewTransition:h,children:p}=s,f=d(s,["aria-current","caseSensitive","className","end","style","to","viewTransition","children"]);let g=lt(u,{relative:f.relative}),x=rt(),v=m.useContext(Ye),{navigator:b,basename:y}=m.useContext(Ze),w=null!=v&&function(e,{relative:t}={}){let s=m.useContext(Xe);be(null!=s,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Vt("useViewTransitionState"),n=lt(e,{relative:t});if(!s.isTransitioning)return!1;let a=Ue(s.currentLocation.pathname,r)||s.currentLocation.pathname,i=Ue(s.nextLocation.pathname,r)||s.nextLocation.pathname;return null!=Ie(n.pathname,i)||null!=Ie(n.pathname,a)}(g)&&!0===h,j=b.encodeLocation?b.encodeLocation(g).pathname:g.pathname,k=x.pathname,_=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(k=k.toLowerCase(),_=_?_.toLowerCase():null,j=j.toLowerCase()),_&&y&&(_=Ue(_,y)||_);const N="/"!==j&&j.endsWith("/")?j.length-1:j.length;let S,T=k===j||!i&&k.startsWith(j)&&"/"===k.charAt(N),C=null!=_&&(_===j||!i&&_.startsWith(j)&&"/"===_.charAt(j.length)),E={isActive:T,isPending:C,isTransitioning:w},M=T?r:void 0;S="function"==typeof a?a(E):[a,T?"active":null,C?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let P="function"==typeof o?o(E):o;return m.createElement(Wt,c(l({},f),{"aria-current":M,className:S,ref:t,style:P,to:u,viewTransition:h}),"function"==typeof p?p(E):p)}).displayName="NavLink";var Ft=m.forwardRef((e,t)=>{var s=e,{discover:r="render",fetcherKey:n,navigate:a,reloadDocument:i,replace:o,state:u,method:p=jt,action:f,onSubmit:g,relative:x,preventScrollReset:v,viewTransition:b}=s,y=d(s,["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"]);let w=function(){let{router:e}=Vt("useSubmit"),{basename:t}=m.useContext(Ze),s=ft("useRouteId");return m.useCallback((r,...n)=>h(null,[r,...n],function*(r,n={}){let{action:a,method:i,encType:o,formData:l,body:c}=Ct(r,t);if(!1===n.navigate){let t=n.fetcherKey||Jt();yield e.fetch(t,s,n.action||a,{preventScrollReset:n.preventScrollReset,formData:l,body:c,formMethod:n.method||i,formEncType:n.encType||o,flushSync:n.flushSync})}else yield e.navigate(n.action||a,{preventScrollReset:n.preventScrollReset,formData:l,body:c,formMethod:n.method||i,formEncType:n.encType||o,replace:n.replace,state:n.state,fromRouteId:s,flushSync:n.flushSync,viewTransition:n.viewTransition})}),[e,t,s])}(),j=function(e,{relative:t}={}){let{basename:s}=m.useContext(Ze),r=m.useContext(et);be(r,"useFormAction must be used inside a RouteContext");let[n]=r.matches.slice(-1),a=l({},lt(e||".",{relative:t})),i=rt();if(null==e){a.search=i.search;let e=new URLSearchParams(a.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let s=e.toString();a.search=s?`?${s}`:""}}e&&"."!==e||!n.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index");"/"!==s&&(a.pathname="/"===a.pathname?s:He([s,a.pathname]));return ke(a)}(f,{relative:x}),k="get"===p.toLowerCase()?"get":"post",_="string"==typeof f&&Ht.test(f);return m.createElement("form",c(l({ref:t,method:k,action:j,onSubmit:i?g:e=>{if(g&&g(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,s=(null==t?void 0:t.getAttribute("formmethod"))||p;w(t||e.currentTarget,{fetcherKey:n,method:s,navigate:a,replace:o,state:u,relative:x,preventScrollReset:v,viewTransition:b})}},y),{"data-discover":_||"render"!==r?void 0:"true"}))});function Vt(e){let t=m.useContext(Ge);return be(t,function(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}(e)),t}Ft.displayName="Form";var Kt=0,Jt=()=>`__${String(++Kt)}__`;function Gt(e){return"/"+e.toLowerCase().replace(/ /g,"-")}
/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=(...e)=>e.filter((e,t,s)=>Boolean(e)&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim();
/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var Xt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=m.forwardRef((e,t)=>{var s=e,{color:r="currentColor",size:n=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:o="",children:u,iconNode:h}=s,p=d(s,["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"]);return m.createElement("svg",l(c(l({ref:t},Xt),{width:n,height:n,stroke:r,strokeWidth:i?24*Number(a)/Number(n):a,className:Yt("lucide",o)}),p),[...h.map(([e,t])=>m.createElement(e,t)),...Array.isArray(u)?u:[u]])}),Qt=(e,t)=>{const s=m.forwardRef((s,r)=>{var n,a=s,{className:i}=a,o=d(a,["className"]);return m.createElement(Zt,l({ref:r,iconNode:t,className:Yt(`lucide-${n=e,n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,i)},o))});return s.displayName=`${e}`,s},es=Qt("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),ts=Qt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),ss=Qt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),rs=Qt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),ns=Qt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),as=Qt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),is=Qt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),os=Qt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),ls=Qt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),cs=Qt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),ds=Qt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),us=Qt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),hs=Qt("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),ms=Qt("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),ps=Qt("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]),fs=Qt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),gs=Qt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),xs=Qt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),vs=Qt("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),bs=Qt("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),ys=Qt("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),ws=Qt("ListMusic",[["path",{d:"M21 15V6",key:"h1cx4g"}],["path",{d:"M18.5 18a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z",key:"8saifv"}],["path",{d:"M12 12H3",key:"18klou"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M12 18H3",key:"11ftsu"}]]),js=Qt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),ks=Qt("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),_s=Qt("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),Ns=Qt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Ss=Qt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Ts=Qt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Cs=Qt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Es=Qt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Ms=Qt("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),Ps=Qt("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),Rs=Qt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),As=Qt("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),Os=Qt("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),$s=Qt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Ds=Qt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Is=Qt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Ls=Qt("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),Us=Qt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),zs=Qt("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),Bs=Qt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);
/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function qs({children:e}){const t=rt(),s=[{name:"Início",url:Gt("Home"),icon:gs},{name:"Calendário",url:Gt("Calendar"),icon:ts},{name:"Playlist",url:Gt("Playlist"),icon:ws},{name:"Blog",url:Gt("Blog"),icon:ds},{name:"Ano 2025",url:Gt("AdventCalendar"),icon:hs},{name:"Sobre",url:Gt("Sobre"),icon:xs}],r=e=>"Início"===e.name&&"/"===t.pathname||t.pathname===e.url;return p.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-teal-200 to-rose-200",children:[p.jsx("header",{className:"hidden lg:block bg-white/90 backdrop-blur-lg border-b border-white/50 shadow-lg sticky top-0 z-40",children:p.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx(Wt,{to:"/",className:"w-12 h-12 rounded-full overflow-hidden border-2 border-white/20 shadow-lg flex-shrink-0",children:p.jsx("img",{src:"images/Musica da segunda.jpg",alt:"Logo Música da Segunda",className:"w-full h-full object-cover"})}),p.jsxs("div",{children:[p.jsx("h1",{className:"text-xl font-black text-gray-800",children:"Música da Segunda"}),p.jsx("p",{className:"text-sm text-gray-600",children:"Descubra música nova toda segunda-feira"})]})]}),p.jsx("nav",{className:"flex items-center gap-1",children:s.map(e=>p.jsxs(Wt,{to:e.url,className:"flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 font-medium "+(r(e)?"bg-[#32a2dc] text-white shadow-md":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"),children:[p.jsx(e.icon,{className:"w-4 h-4"}),p.jsx("span",{children:e.name})]},e.name))})]})})}),p.jsx("main",{className:"lg:pb-0 pb-28 relative z-10",children:e}),p.jsx("nav",{className:"lg:hidden fixed bottom-4 left-1/2 -translate-x-1/2 w-[calc(100%-2rem)] max-w-2xl bg-white/80 backdrop-blur-lg rounded-3xl shadow-xl border border-white/50 z-50",children:p.jsx("div",{className:"flex gap-1 p-1",children:s.filter(e=>"Sobre"!==e.name).map(e=>p.jsxs(Wt,{to:e.url,className:"flex flex-col items-center justify-center py-3 px-2 rounded-3xl transition-all duration-300 flex-1 min-w-0 "+(r(e)?"bg-[#32a2dc] text-white shadow-lg transform scale-105":"text-gray-500 hover:text-gray-700 hover:bg-white/60"),children:[p.jsx(e.icon,{className:"w-5 h-5 mb-1 flex-shrink-0"}),p.jsx("span",{className:"text-xs font-bold text-center leading-tight truncate",children:e.name})]},e.name))})})]})}const Hs="musica-da-segunda-songs",Ws="musica-da-segunda-albums",Fs="musica-da-segunda-settings",Vs=[{id:1,title:"Confissões Bancárias",artist:"A Música da Segunda",description:"Uma música sobre confissões bancárias e humor",lyrics:"Confissões bancárias...\nNova música da segunda...",release_date:"2025-08-25",status:"published",tiktok_video_id:"7540762684149517590",tiktok_url:"https://www.tiktok.com/@amusicadasegunda/video/7540762684149517590",spotify_url:"",apple_music_url:"",youtube_url:"",cover_image:"",hashtags:["humor","moraes","bancos","trendingsong","musica"],created_at:"2025-01-27T10:00:00.000Z",updated_at:"2025-01-27T10:00:00.000Z"},{id:2,title:"Café Tarifa Caos",artist:"A Música da Segunda",description:"Música sobre café, tarifas e o caos do dia a dia",lyrics:"Café tarifa caos...\nNova música da segunda...",release_date:"2025-08-03",status:"published",tiktok_video_id:"7540762684149517591",tiktok_url:"https://www.tiktok.com/@amusicadasegunda/video/7540762684149517591",spotify_url:"",apple_music_url:"",youtube_url:"",cover_image:"",hashtags:["cafe","tarifa","caos","trendingsong","musica"],created_at:"2025-01-27T10:00:00.000Z",updated_at:"2025-01-27T10:00:00.000Z"},{id:3,title:"Segunda-feira Blues",artist:"A Música da Segunda",description:"O clássico blues da segunda-feira",lyrics:"Segunda-feira blues...\nNova música da segunda...",release_date:"2025-08-18",status:"published",tiktok_video_id:"7540762684149517592",tiktok_url:"https://www.tiktok.com/@amusicadasegunda/video/7540762684149517592",spotify_url:"",apple_music_url:"",youtube_url:"",cover_image:"",hashtags:["blues","segunda","trendingsong","musica"],created_at:"2025-01-27T10:00:00.000Z",updated_at:"2025-01-27T10:00:00.000Z"}],Ks={initialize(){localStorage.getItem(Hs)||localStorage.setItem(Hs,JSON.stringify(Vs))},forceReset(){localStorage.setItem(Hs,JSON.stringify(Vs))},songs:{getAll(){try{const e=localStorage.getItem(Hs);return e?JSON.parse(e):[]}catch(e){return[]}},getById(e){return this.getAll().find(t=>t.id===e)||null},getCurrent(){const e=this.getAll().filter(e=>"published"===e.status);return 0===e.length?null:(e.sort((e,t)=>new Date(t.release_date)-new Date(e.release_date)),e[0])},create(e){try{const t=this.getAll(),s=c(l({},e),{id:Date.now(),created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()});return t.push(s),localStorage.setItem(Hs,JSON.stringify(t)),s}catch(t){throw t}},update(e,t){try{const s=this.getAll(),r=s.findIndex(t=>t.id===e);if(-1===r)throw new Error("Música não encontrada");return s[r]=c(l(l({},s[r]),t),{updated_at:(new Date).toISOString()}),localStorage.setItem(Hs,JSON.stringify(s)),s[r]}catch(s){throw s}},delete(e){try{const t=this.getAll().filter(t=>t.id!==e);return localStorage.setItem(Hs,JSON.stringify(t)),!0}catch(t){throw t}},search(e){const t=this.getAll();if(!e)return t;const s=e.toLowerCase();return t.filter(e=>{var t;return e.title.toLowerCase().includes(s)||e.artist.toLowerCase().includes(s)||(null==(t=e.description)?void 0:t.toLowerCase().includes(s))})}},albums:{getAll(){try{const e=localStorage.getItem(Ws);return e?JSON.parse(e):[]}catch(e){return[]}},create(e){try{const t=this.getAll(),s=c(l({},e),{id:Date.now(),created_at:(new Date).toISOString()});return t.push(s),localStorage.setItem(Ws,JSON.stringify(t)),s}catch(t){throw t}}},clearAll(){localStorage.removeItem(Hs),localStorage.removeItem(Ws),localStorage.removeItem(Fs)},exportData(){return{songs:this.songs.getAll(),albums:this.albums.getAll(),exportDate:(new Date).toISOString()}},importData(e){try{return e.songs&&localStorage.setItem(Hs,JSON.stringify(e.songs)),e.albums&&localStorage.setItem(Ws,JSON.stringify(e.albums)),!0}catch(t){throw t}}};Ks.initialize();class Js extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class Gs extends Js{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ys extends Js{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Xs extends Js{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Zs,Qs;(Qs=Zs||(Zs={})).Any="any",Qs.ApNortheast1="ap-northeast-1",Qs.ApNortheast2="ap-northeast-2",Qs.ApSouth1="ap-south-1",Qs.ApSoutheast1="ap-southeast-1",Qs.ApSoutheast2="ap-southeast-2",Qs.CaCentral1="ca-central-1",Qs.EuCentral1="eu-central-1",Qs.EuWest1="eu-west-1",Qs.EuWest2="eu-west-2",Qs.EuWest3="eu-west-3",Qs.SaEast1="sa-east-1",Qs.UsEast1="us-east-1",Qs.UsWest1="us-west-1",Qs.UsWest2="us-west-2";var er=function(e,t,s,r){return new(s||(s=Promise))(function(n,a){function i(e){try{l(r.next(e))}catch(Cd){a(Cd)}}function o(e){try{l(r.throw(e))}catch(Cd){a(Cd)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};class tr{constructor(e,{headers:t={},customFetch:s,region:r=Zs.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>ge(()=>h(null,null,function*(){const{default:e}=yield Promise.resolve().then(()=>pr);return{default:e}}),[]).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)})(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return er(this,void 0,void 0,function*(){try{const{headers:r,method:n,body:a}=t;let i={},{region:o}=t;o||(o=this.region);const l=new URL(`${this.url}/${e}`);let c;o&&"any"!==o&&(i["x-region"]=o,l.searchParams.set("forceFunctionRegion",o)),a&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!=typeof Blob&&a instanceof Blob||a instanceof ArrayBuffer?(i["Content-Type"]="application/octet-stream",c=a):"string"==typeof a?(i["Content-Type"]="text/plain",c=a):"undefined"!=typeof FormData&&a instanceof FormData?c=a:(i["Content-Type"]="application/json",c=JSON.stringify(a)));const d=yield this.fetch(l.toString(),{method:n||"POST",headers:Object.assign(Object.assign(Object.assign({},i),this.headers),r),body:c}).catch(e=>{throw new Gs(e)}),u=d.headers.get("x-relay-error");if(u&&"true"===u)throw new Ys(d);if(!d.ok)throw new Xs(d);let h,m=(null!==(s=d.headers.get("Content-Type"))&&void 0!==s?s:"text/plain").split(";")[0].trim();return h="application/json"===m?yield d.json():"application/octet-stream"===m?yield d.blob():"text/event-stream"===m?d:"multipart/form-data"===m?yield d.formData():yield d.text(),{data:h,error:null,response:d}}catch(r){return{data:null,error:r,response:r instanceof Xs||r instanceof Ys?r.context:void 0}}})}}var sr={},rr={},nr={},ar={},ir={},or={},lr=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();const cr=lr.fetch,dr=lr.fetch.bind(lr),ur=lr.Headers,hr=lr.Request,mr=lr.Response,pr=Object.freeze(Object.defineProperty({__proto__:null,Headers:ur,Request:hr,Response:mr,default:dr,fetch:cr},Symbol.toStringTag,{value:"Module"})),fr=Y(pr);var gr,xr,vr,br,yr,wr,jr,kr={};function _r(){if(gr)return kr;gr=1,Object.defineProperty(kr,"__esModule",{value:!0});class e extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}return kr.default=e,kr}function Nr(){if(xr)return or;xr=1;var e=or&&or.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(or,"__esModule",{value:!0});const t=e(fr),s=e(_r());return or.default=class{constructor(e){var s,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(s=e.shouldThrowOnError)&&void 0!==s&&s,this.signal=e.signal,this.isMaybeSingle=null!==(r=e.isMaybeSingle)&&void 0!==r&&r,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(e=>h(this,null,function*(){var t,r,n,a;let i=null,o=null,l=null,c=e.status,d=e.statusText;if(e.ok){if("HEAD"!==this.method){const s=yield e.text();""===s||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?s:JSON.parse(s))}const s=null===(r=this.headers.get("Prefer"))||void 0===r?void 0:r.match(/count=(exact|planned|estimated)/),a=null===(n=e.headers.get("content-range"))||void 0===n?void 0:n.split("/");s&&a&&a.length>1&&(l=parseInt(a[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(i={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,d="Not Acceptable"):o=1===o.length?o[0]:null)}else{const t=yield e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(o=[],i=null,c=200,d="OK")}catch(u){404===e.status&&""===t?(c=204,d="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(a=null==i?void 0:i.details)||void 0===a?void 0:a.includes("0 rows"))&&(i=null,c=200,d="OK"),i&&this.shouldThrowOnError)throw new s.default(i)}return{error:i,data:o,count:l,status:c,statusText:d}}));return this.shouldThrowOnError||(r=r.catch(e=>{var t,s,r;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(s=null==e?void 0:e.stack)&&void 0!==s?s:""}`,hint:"",code:`${null!==(r=null==e?void 0:e.code)&&void 0!==r?r:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}},or}function Sr(){if(vr)return ir;vr=1;var e=ir&&ir.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ir,"__esModule",{value:!0});const t=e(Nr());class s extends t.default{select(e){let t=!1;const s=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:r,referencedTable:n=r}={}){const a=n?`${n}.order`:"order",i=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===s?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const r=void 0===s?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:r=s}={}){const n=void 0===r?"offset":`${r}.offset`,a=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(a,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:r=!1,wal:n=!1,format:a="text"}={}){var i;const o=[e?"analyze":null,t?"verbose":null,s?"settings":null,r?"buffers":null,n?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.get("Accept"))&&void 0!==i?i:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${l}"; options=${o};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}}return ir.default=s,ir}function Tr(){if(br)return ar;br=1;var e=ar&&ar.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ar,"__esModule",{value:!0});const t=e(Sr());class s extends t.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:r}={}){let n="";"plain"===r?n="pl":"phrase"===r?n="ph":"websearch"===r&&(n="w");const a=void 0===s?"":`(${s})`;return this.url.searchParams.append(e,`${n}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}}return ar.default=s,ar}function Cr(){if(yr)return nr;yr=1;var e=nr&&nr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(nr,"__esModule",{value:!0});const t=e(Tr());return nr.default=class{constructor(e,{headers:t={},schema:s,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=s,this.fetch=r}select(e,{head:s=!1,count:r}={}){const n=s?"HEAD":"GET";let a=!1;const i=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!a?"":('"'===e&&(a=!a),e)).join("");return this.url.searchParams.set("select",i),r&&this.headers.append("Prefer",`count=${r}`),new t.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:s,defaultToNull:r=!0}={}){var n;if(s&&this.headers.append("Prefer",`count=${s}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new t.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}upsert(e,{onConflict:s,ignoreDuplicates:r=!1,count:n,defaultToNull:a=!0}={}){var i;if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),void 0!==s&&this.url.searchParams.set("on_conflict",s),n&&this.headers.append("Prefer",`count=${n}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new t.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}update(e,{count:s}={}){var r;return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}delete({count:e}={}){var s;return e&&this.headers.append("Prefer",`count=${e}`),new t.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}},nr}const Er=G(function(){if(jr)return sr;jr=1;var e=sr&&sr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sr,"__esModule",{value:!0}),sr.PostgrestError=sr.PostgrestBuilder=sr.PostgrestTransformBuilder=sr.PostgrestFilterBuilder=sr.PostgrestQueryBuilder=sr.PostgrestClient=void 0;const t=e(function(){if(wr)return rr;wr=1;var e=rr&&rr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(rr,"__esModule",{value:!0});const t=e(Cr()),s=e(Tr());class r{constructor(e,{headers:t={},schema:s,fetch:r}={}){this.url=e,this.headers=new Headers(t),this.schemaName=s,this.fetch=r}from(e){const s=new URL(`${this.url}/${e}`);return new t.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new r(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:n=!1,count:a}={}){var i;let o;const l=new URL(`${this.url}/rpc/${e}`);let c;r||n?(o=r?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{l.searchParams.append(e,t)})):(o="POST",c=t);const d=new Headers(this.headers);return a&&d.set("Prefer",`count=${a}`),new s.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}}return rr.default=r,rr}());sr.PostgrestClient=t.default;const s=e(Cr());sr.PostgrestQueryBuilder=s.default;const r=e(Tr());sr.PostgrestFilterBuilder=r.default;const n=e(Sr());sr.PostgrestTransformBuilder=n.default;const a=e(Nr());sr.PostgrestBuilder=a.default;const i=e(_r());return sr.PostgrestError=i.default,sr.default={PostgrestClient:t.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:n.default,PostgrestBuilder:a.default,PostgrestError:i.default},sr}()),{PostgrestClient:Mr,PostgrestQueryBuilder:Pr,PostgrestFilterBuilder:Rr,PostgrestTransformBuilder:Ar,PostgrestBuilder:Or,PostgrestError:$r}=Er;class Dr{static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process&&process.versions&&process.versions.node){const e=parseInt(process.versions.node.split(".")[0]);return e>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${e} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${e} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}}const Ir=1e4;var Lr,Ur,zr,Br,qr,Hr,Wr,Fr,Vr,Kr,Jr;(Ur=Lr||(Lr={}))[Ur.connecting=0]="connecting",Ur[Ur.open=1]="open",Ur[Ur.closing=2]="closing",Ur[Ur.closed=3]="closed",(Br=zr||(zr={})).closed="closed",Br.errored="errored",Br.joined="joined",Br.joining="joining",Br.leaving="leaving",(Hr=qr||(qr={})).close="phx_close",Hr.error="phx_error",Hr.join="phx_join",Hr.reply="phx_reply",Hr.leave="phx_leave",Hr.access_token="access_token",(Wr||(Wr={})).websocket="websocket",(Vr=Fr||(Fr={})).Connecting="connecting",Vr.Open="open",Vr.Closing="closing",Vr.Closed="closed";class Gr{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const r=t.getUint8(1),n=t.getUint8(2);let a=this.HEADER_LENGTH+2;const i=s.decode(e.slice(a,a+r));a+=r;const o=s.decode(e.slice(a,a+n));a+=n;return{ref:null,topic:i,event:o,payload:JSON.parse(s.decode(e.slice(a,e.byteLength)))}}}class Yr{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(Jr=Kr||(Kr={})).abstime="abstime",Jr.bool="bool",Jr.date="date",Jr.daterange="daterange",Jr.float4="float4",Jr.float8="float8",Jr.int2="int2",Jr.int4="int4",Jr.int4range="int4range",Jr.int8="int8",Jr.int8range="int8range",Jr.json="json",Jr.jsonb="jsonb",Jr.money="money",Jr.numeric="numeric",Jr.oid="oid",Jr.reltime="reltime",Jr.text="text",Jr.time="time",Jr.timestamp="timestamp",Jr.timestamptz="timestamptz",Jr.timetz="timetz",Jr.tsrange="tsrange",Jr.tstzrange="tstzrange";const Xr=(e,t,s={})=>{var r;const n=null!==(r=s.skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce((s,r)=>(s[r]=Zr(r,e,t,n),s),{})},Zr=(e,t,s,r)=>{const n=t.find(t=>t.name===e),a=null==n?void 0:n.type,i=s[e];return a&&!r.includes(a)?Qr(a,i):en(i)},Qr=(e,t)=>{if("_"===e.charAt(0)){const s=e.slice(1,e.length);return nn(t,s)}switch(e){case Kr.bool:return tn(t);case Kr.float4:case Kr.float8:case Kr.int2:case Kr.int4:case Kr.int8:case Kr.numeric:case Kr.oid:return sn(t);case Kr.json:case Kr.jsonb:return rn(t);case Kr.timestamp:return an(t);case Kr.abstime:case Kr.date:case Kr.daterange:case Kr.int4range:case Kr.int8range:case Kr.money:case Kr.reltime:case Kr.text:case Kr.time:case Kr.timestamptz:case Kr.timetz:case Kr.tsrange:case Kr.tstzrange:default:return en(t)}},en=e=>e,tn=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},sn=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},rn=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e}return e},nn=(e,t)=>{if("string"!=typeof e)return e;const s=e.length-1,r=e[s];if("{"===e[0]&&"}"===r){let r;const a=e.slice(1,s);try{r=JSON.parse("["+a+"]")}catch(n){r=a?a.split(","):[]}return r.map(e=>Qr(t,e))}return e},an=e=>"string"==typeof e?e.replace(" ","T"):e,on=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class ln{constructor(e,t,s={},r=1e4){this.channel=e,this.event=t,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t(null===(s=this.receivedResp)||void 0===s?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var cn,dn,un,hn,mn,pn,fn,gn;(dn=cn||(cn={})).SYNC="sync",dn.JOIN="join",dn.LEAVE="leave";class xn{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},e=>{const{onJoin:t,onLeave:s,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=xn.syncState(this.state,e,t,s),this.pendingDiffs.forEach(e=>{this.state=xn.syncDiff(this.state,e,t,s)}),this.pendingDiffs=[],r()}),this.channel._on(s.diff,{},e=>{const{onJoin:t,onLeave:s,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=xn.syncDiff(this.state,e,t,s),r())}),this.onJoin((e,t,s)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:s})}),this.onLeave((e,t,s)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,r){const n=this.cloneDeep(e),a=this.transformState(t),i={},o={};return this.map(n,(e,t)=>{a[e]||(o[e]=t)}),this.map(a,(e,t)=>{const s=n[e];if(s){const r=t.map(e=>e.presence_ref),n=s.map(e=>e.presence_ref),a=t.filter(e=>n.indexOf(e.presence_ref)<0),l=s.filter(e=>r.indexOf(e.presence_ref)<0);a.length>0&&(i[e]=a),l.length>0&&(o[e]=l)}else i[e]=t}),this.syncDiff(n,{joins:i,leaves:o},s,r)}static syncDiff(e,t,s,r){const{joins:n,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(n,(t,r)=>{var n;const a=null!==(n=e[t])&&void 0!==n?n:[];if(e[t]=this.cloneDeep(r),a.length>0){const s=e[t].map(e=>e.presence_ref),r=a.filter(e=>s.indexOf(e.presence_ref)<0);e[t].unshift(...r)}s(t,a,r)}),this.map(a,(t,s)=>{let n=e[t];if(!n)return;const a=s.map(e=>e.presence_ref);n=n.filter(e=>a.indexOf(e.presence_ref)<0),e[t]=n,r(t,n,s),0===n.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const r=e[s];return t[s]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(hn=un||(un={})).ALL="*",hn.INSERT="INSERT",hn.UPDATE="UPDATE",hn.DELETE="DELETE",(pn=mn||(mn={})).BROADCAST="broadcast",pn.PRESENCE="presence",pn.POSTGRES_CHANGES="postgres_changes",pn.SYSTEM="system",(gn=fn||(fn={})).SUBSCRIBED="SUBSCRIBED",gn.TIMED_OUT="TIMED_OUT",gn.CLOSED="CLOSED",gn.CHANNEL_ERROR="CHANNEL_ERROR";class vn{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=zr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new ln(this,qr.join,this.params,this.timeout),this.rejoinTimer=new Yr(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=zr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=zr.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=zr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=zr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=zr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(qr.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new xn(this),this.broadcastEndpointURL=on(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,r;if(this.socket.isConnected()||this.socket.connect(),this.state==zr.closed){const{config:{broadcast:n,presence:a,private:i}}=this.params,o=null!==(r=null===(s=this.bindings.postgres_changes)||void 0===s?void 0:s.map(e=>e.filter))&&void 0!==r?r:[],l=!!this.bindings[mn.PRESENCE]&&this.bindings[mn.PRESENCE].length>0,c={},d={broadcast:n,presence:Object.assign(Object.assign({},a),{enabled:l}),postgres_changes:o,private:i};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(fn.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(fn.CLOSED)),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",t=>h(this,[t],function*({postgres_changes:t}){var s;if(this.socket.setAuth(),void 0!==t){const r=this.bindings.postgres_changes,n=null!==(s=null==r?void 0:r.length)&&void 0!==s?s:0,a=[];for(let s=0;s<n;s++){const n=r[s],{filter:{event:i,schema:o,table:l,filter:c}}=n,d=t&&t[s];if(!d||d.event!==i||d.schema!==o||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=zr.errored,void(null==e||e(fn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));a.push(Object.assign(Object.assign({},n),{id:d.id}))}return this.bindings.postgres_changes=a,void(e&&e(fn.SUBSCRIBED))}null==e||e(fn.SUBSCRIBED)})).receive("error",t=>{this.state=zr.errored,null==e||e(fn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(fn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(e){return h(this,arguments,function*(e,t={}){return yield this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)})}untrack(){return h(this,arguments,function*(e={}){return yield this.send({type:"presence",event:"untrack"},e)})}on(e,t,s){return this.state===zr.joined&&e===mn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}send(e){return h(this,arguments,function*(e,t={}){var s,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(s=>{var r,n,a;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(a=null===(n=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===n?void 0:n.broadcast)||void 0===a?void 0:a.ack)||s("ok"),i.receive("ok",()=>s("ok")),i.receive("error",()=>s("error")),i.receive("timeout",()=>s("timed out"))});{const{event:a,payload:i}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const e=yield this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(s=t.timeout)&&void 0!==s?s:this.timeout);return yield null===(r=e.body)||void 0===r?void 0:r.cancel(),e.ok?"ok":"error"}catch(n){return"AbortError"===n.name?"timed out":"error"}}})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=zr.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(qr.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new ln(this,qr.leave,{},e),s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{null==s||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=zr.closed,this.bindings={}}_fetchWithTimeout(e,t,s){return h(this,null,function*(){const r=new AbortController,n=setTimeout(()=>r.abort(),s),a=yield this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(n),a})}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new ln(this,e,t,s);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var r,n;const a=e.toLocaleLowerCase(),{close:i,error:o,leave:l,join:c}=qr;if(s&&[i,o,l,c].indexOf(a)>=0&&s!==this._joinRef())return;let d=this._onMessage(a,t,s);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,s,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(s=e.filter)||void 0===s?void 0:s.event)||void 0===r?void 0:r.toLocaleLowerCase())===a}).map(e=>e.callback(d,s)):null===(n=this.bindings[a])||void 0===n||n.filter(e=>{var s,r,n,i,o,l;if(["broadcast","presence","postgres_changes"].includes(a)){if("id"in e){const a=e.id,i=null===(s=e.filter)||void 0===s?void 0:s.event;return a&&(null===(r=t.ids)||void 0===r?void 0:r.includes(a))&&("*"===i||(null==i?void 0:i.toLocaleLowerCase())===(null===(n=t.data)||void 0===n?void 0:n.type.toLocaleLowerCase()))}{const s=null===(o=null===(i=null==e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===s||s===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===a}).map(e=>{if("object"==typeof d&&"ids"in d){const e=d.data,{schema:t,table:s,commit_timestamp:r,type:n,errors:a}=e,i={schema:t,table:s,commit_timestamp:r,eventType:n,new:{},old:{},errors:a};d=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(d,s)})}_isClosed(){return this.state===zr.closed}_isJoined(){return this.state===zr.joined}_isJoining(){return this.state===zr.joining}_isLeaving(){return this.state===zr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const r=e.toLocaleLowerCase(),n={type:r,filter:t,callback:s};return this.bindings[r]?this.bindings[r].push(n):this.bindings[r]=[n],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===s&&vn.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(qr.close,{},e)}_onError(e){this._on(qr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=zr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=Xr(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=Xr(e.columns,e.old_record)),t}}const bn=()=>{},yn=25e3,wn=10,jn=100,kn=[1e3,2e3,5e3,1e4];class _n{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ir,this.transport=null,this.heartbeatIntervalMs=yn,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=bn,this.ref=0,this.reconnectTimer=null,this.logger=bn,this.conn=null,this.sendBuffer=[],this.serializer=new Gr,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>ge(()=>h(this,null,function*(){const{default:e}=yield Promise.resolve().then(()=>pr);return{default:e}}),void 0).then(({default:t})=>t(...e)).catch(e=>{throw new Error(`Failed to load @supabase/node-fetch: ${e.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...e)=>t(...e)},!(null===(s=null==t?void 0:t.params)||void 0===s?void 0:s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Wr.websocket}`,this.httpEndpoint=on(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Dr.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(e){return h(this,null,function*(){const t=yield e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t})}removeAllChannels(){return h(this,null,function*(){const e=yield Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e})}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Lr.connecting:return Fr.Connecting;case Lr.open:return Fr.Open;case Lr.closing:return Fr.Closing;default:return Fr.Closed}}isConnected(){return this.connectionState()===Fr.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const s=`realtime:${e}`,r=this.getChannels().find(e=>e.topic===s);if(r)return r;{const s=new vn(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:s,payload:r,ref:n}=e,a=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${s} (${n})`,r),this.isConnected()?a():this.sendBuffer.push(a)}setAuth(e=null){return h(this,null,function*(){this._authPromise=this._performAuth(e);try{yield this._authPromise}finally{this._authPromise=null}})}sendHeartbeat(){return h(this,null,function*(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},jn);this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}else this.heartbeatCallback("disconnected")})}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{"phoenix"===e.topic&&"phx_reply"===e.event&&this.heartbeatCallback("ok"===e.payload.status?"ok":"error"),e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:s,payload:r,ref:n}=e,a=n?`(${n})`:"",i=r.status||"";this.log("receive",`${i} ${t} ${s} ${a}`.trim(),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(s,r,n)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(qr.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const s=e.match(/\?/)?"&":"?";return`${e}${s}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}_performAuth(e=null){return h(this,null,function*(){let t;t=e||(this.accessToken?yield this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const s={access_token:t,version:"realtime-js/2.15.1"};t&&e.updateJoinPayload(s),e.joinedOnce&&e._isJoined()&&e._push(qr.access_token,{access_token:t})}))})}_waitForAuthIfNeeded(){return h(this,null,function*(){this._authPromise&&(yield this._authPromise)})}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(Cd){this.log("error",`error in ${e} callback`,Cd)}})}catch(Cd){this.log("error",`error triggering ${e} callbacks`,Cd)}}_setupReconnectionTimer(){this.reconnectTimer=new Yr(()=>h(this,null,function*(){setTimeout(()=>h(this,null,function*(){yield this._waitForAuthIfNeeded(),this.isConnected()||this.connect()}),wn)}),this.reconnectAfterMs)}_initializeOptions(e){var t,s,r,n,a,i,o,l;if(this.transport=null!==(t=null==e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(s=null==e?void 0:e.timeout)&&void 0!==s?s:Ir,this.heartbeatIntervalMs=null!==(r=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==r?r:yn,this.worker=null!==(n=null==e?void 0:e.worker)&&void 0!==n&&n,this.accessToken=null!==(a=null==e?void 0:e.accessToken)&&void 0!==a?a:null,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(i=null==e?void 0:e.reconnectAfterMs)&&void 0!==i?i:e=>kn[e-1]||1e4,this.encode=null!==(o=null==e?void 0:e.encode)&&void 0!==o?o:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(l=null==e?void 0:e.decode)&&void 0!==l?l:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}class Nn extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Sn(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class Tn extends Nn{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Cn extends Nn{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var En=function(e,t,s,r){return new(s||(s=Promise))(function(n,a){function i(e){try{l(r.next(e))}catch(Cd){a(Cd)}}function o(e){try{l(r.throw(e))}catch(Cd){a(Cd)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const Mn=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>ge(()=>h(null,null,function*(){const{default:e}=yield Promise.resolve().then(()=>pr);return{default:e}}),void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},Pn=e=>{if(Array.isArray(e))return e.map(e=>Pn(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,s])=>{const r=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[r]=Pn(s)}),t};var Rn=function(e,t,s,r){return new(s||(s=Promise))(function(n,a){function i(e){try{l(r.next(e))}catch(Cd){a(Cd)}}function o(e){try{l(r.throw(e))}catch(Cd){a(Cd)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const An=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),On=(e,t,s)=>Rn(void 0,void 0,void 0,function*(){const r=yield En(void 0,void 0,void 0,function*(){return"undefined"==typeof Response?(yield ge(()=>Promise.resolve().then(()=>pr),void 0)).Response:Response});e instanceof r&&!(null==s?void 0:s.noResolveJson)?e.json().then(s=>{const r=e.status||500,n=(null==s?void 0:s.statusCode)||r+"";t(new Tn(An(s),r,n))}).catch(e=>{t(new Cn(An(e),e))}):t(new Cn(An(e),e))}),$n=(e,t,s,r)=>{const n={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&r?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(r)?(n.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),n.body=JSON.stringify(r)):n.body=r,(null==t?void 0:t.duplex)&&(n.duplex=t.duplex),Object.assign(Object.assign({},n),s)):n};function Dn(e,t,s,r,n,a){return Rn(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(s,$n(t,r,n,a)).then(e=>{if(!e.ok)throw e;return(null==r?void 0:r.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>On(e,o,r))})})}function In(e,t,s,r){return Rn(this,void 0,void 0,function*(){return Dn(e,"GET",t,s,r)})}function Ln(e,t,s,r,n){return Rn(this,void 0,void 0,function*(){return Dn(e,"POST",t,r,n,s)})}function Un(e,t,s,r,n){return Rn(this,void 0,void 0,function*(){return Dn(e,"PUT",t,r,n,s)})}function zn(e,t,s,r,n){return Rn(this,void 0,void 0,function*(){return Dn(e,"DELETE",t,r,n,s)})}var Bn=function(e,t,s,r){return new(s||(s=Promise))(function(n,a){function i(e){try{l(r.next(e))}catch(Cd){a(Cd)}}function o(e){try{l(r.throw(e))}catch(Cd){a(Cd)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const qn={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Hn={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Wn{constructor(e,t={},s,r){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Mn(r)}uploadOrUpdate(e,t,s,r){return Bn(this,void 0,void 0,function*(){try{let n;const a=Object.assign(Object.assign({},Hn),r);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(a.upsert)});const o=a.metadata;"undefined"!=typeof Blob&&s instanceof Blob?(n=new FormData,n.append("cacheControl",a.cacheControl),o&&n.append("metadata",this.encodeMetadata(o)),n.append("",s)):"undefined"!=typeof FormData&&s instanceof FormData?(n=s,n.append("cacheControl",a.cacheControl),o&&n.append("metadata",this.encodeMetadata(o))):(n=s,i["cache-control"]=`max-age=${a.cacheControl}`,i["content-type"]=a.contentType,o&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null==r?void 0:r.headers)&&(i=Object.assign(Object.assign({},i),r.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield("PUT"==e?Un:Ln)(this.fetch,`${this.url}/object/${c}`,n,Object.assign({headers:i},(null==a?void 0:a.duplex)?{duplex:a.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(n){if(Sn(n))return{data:null,error:n};throw n}})}upload(e,t,s){return Bn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,r){return Bn(this,void 0,void 0,function*(){const n=this._removeEmptyFolders(e),a=this._getFinalPath(n),i=new URL(this.url+`/object/upload/sign/${a}`);i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:Hn.upsert},r),a=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&s instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",s)):"undefined"!=typeof FormData&&s instanceof FormData?(e=s,e.append("cacheControl",t.cacheControl)):(e=s,a["cache-control"]=`max-age=${t.cacheControl}`,a["content-type"]=t.contentType);return{data:{path:n,fullPath:(yield Un(this.fetch,i.toString(),e,{headers:a})).Key},error:null}}catch(o){if(Sn(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return Bn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(r["x-upsert"]="true");const n=yield Ln(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:r}),a=new URL(this.url+n.url),i=a.searchParams.get("token");if(!i)throw new Nn("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:i},error:null}}catch(s){if(Sn(s))return{data:null,error:s};throw s}})}update(e,t,s){return Bn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return Bn(this,void 0,void 0,function*(){try{return{data:yield Ln(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==s?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(Sn(r))return{data:null,error:r};throw r}})}copy(e,t,s){return Bn(this,void 0,void 0,function*(){try{return{data:{path:(yield Ln(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==s?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(Sn(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,s){return Bn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),n=yield Ln(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},(null==s?void 0:s.transform)?{transform:s.transform}:{}),{headers:this.headers});const a=(null==s?void 0:s.download)?`&download=${!0===s.download?"":s.download}`:"";return n={signedUrl:encodeURI(`${this.url}${n.signedURL}${a}`)},{data:n,error:null}}catch(r){if(Sn(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,s){return Bn(this,void 0,void 0,function*(){try{const r=yield Ln(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),n=(null==s?void 0:s.download)?`&download=${!0===s.download?"":s.download}`:"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${n}`):null})),error:null}}catch(r){if(Sn(r))return{data:null,error:r};throw r}})}download(e,t){return Bn(this,void 0,void 0,function*(){const s=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),n=r?`?${r}`:"";try{const t=this._getFinalPath(e),r=yield In(this.fetch,`${this.url}/${s}/${t}${n}`,{headers:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(a){if(Sn(a))return{data:null,error:a};throw a}})}info(e){return Bn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield In(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Pn(e),error:null}}catch(s){if(Sn(s))return{data:null,error:s};throw s}})}exists(e){return Bn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,s,r){return Rn(this,void 0,void 0,function*(){return Dn(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(Sn(s)&&s instanceof Cn){const e=s.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),r=[],n=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==n&&r.push(n);const a=void 0!==(null==t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==i&&r.push(i);let o=r.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${s}${o}`)}}}remove(e){return Bn(this,void 0,void 0,function*(){try{return{data:yield zn(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Sn(t))return{data:null,error:t};throw t}})}list(e,t,s){return Bn(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},qn),t),{prefix:e||""});return{data:yield Ln(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(Sn(r))return{data:null,error:r};throw r}})}listV2(e,t){return Bn(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield Ln(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(Sn(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Fn={"X-Client-Info":"storage-js/2.11.0"};var Vn=function(e,t,s,r){return new(s||(s=Promise))(function(n,a){function i(e){try{l(r.next(e))}catch(Cd){a(Cd)}}function o(e){try{l(r.throw(e))}catch(Cd){a(Cd)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};class Kn{constructor(e,t={},s,r){const n=new URL(e);if(null==r?void 0:r.useNewHostname){/supabase\.(co|in|red)$/.test(n.hostname)&&!n.hostname.includes("storage.supabase.")&&(n.hostname=n.hostname.replace("supabase.","storage.supabase."))}this.url=n.href,this.headers=Object.assign(Object.assign({},Fn),t),this.fetch=Mn(s)}listBuckets(){return Vn(this,void 0,void 0,function*(){try{return{data:yield In(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Sn(e))return{data:null,error:e};throw e}})}getBucket(e){return Vn(this,void 0,void 0,function*(){try{return{data:yield In(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Sn(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Vn(this,void 0,void 0,function*(){try{return{data:yield Ln(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Sn(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return Vn(this,void 0,void 0,function*(){try{return{data:yield Un(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Sn(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Vn(this,void 0,void 0,function*(){try{return{data:yield Ln(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Sn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Vn(this,void 0,void 0,function*(){try{return{data:yield zn(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Sn(t))return{data:null,error:t};throw t}})}}class Jn extends Kn{constructor(e,t={},s,r){super(e,t,s,r)}from(e){return new Wn(this.url,this.headers,e,this.fetch)}}let Gn="";Gn="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Yn={headers:{"X-Client-Info":`supabase-js-${Gn}/2.56.0`}},Xn={schema:"public"},Zn={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Qn={};var ea=function(e,t,s,r){return new(s||(s=Promise))(function(n,a){function i(e){try{l(r.next(e))}catch(Cd){a(Cd)}}function o(e){try{l(r.throw(e))}catch(Cd){a(Cd)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const ta=(e,t,s)=>{const r=(e=>{let t;return t=e||("undefined"==typeof fetch?dr:fetch),(...e)=>t(...e)})(s),n="undefined"==typeof Headers?ur:Headers;return(s,a)=>ea(void 0,void 0,void 0,function*(){var i;const o=null!==(i=yield t())&&void 0!==i?i:e;let l=new n(null==a?void 0:a.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),r(s,Object.assign(Object.assign({},a),{headers:l}))})};var sa=function(e,t,s,r){return new(s||(s=Promise))(function(n,a){function i(e){try{l(r.next(e))}catch(Cd){a(Cd)}}function o(e){try{l(r.throw(e))}catch(Cd){a(Cd)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const ra="2.71.1",na=3e4,aa=9e4,ia={"X-Client-Info":`gotrue-js/${ra}`},oa="X-Supabase-Api-Version",la={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},ca=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class da extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function ua(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class ha extends da{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}class ma extends da{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class pa extends da{constructor(e,t,s,r){super(e,s,r),this.name=t,this.status=s}}class fa extends pa{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class ga extends pa{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class xa extends pa{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class va extends pa{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ba extends pa{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ya extends pa{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function wa(e){return ua(e)&&"AuthRetryableFetchError"===e.name}class ja extends pa{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class ka extends pa{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const _a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Na=" \t\n\r=".split(""),Sa=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Na.length;t+=1)e[Na[t].charCodeAt(0)]=-2;for(let t=0;t<_a.length;t+=1)e[_a[t].charCodeAt(0)]=t;return e})();function Ta(e,t,s){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;s(_a[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;s(_a[e]),t.queuedBits-=6}}function Ca(e,t,s){const r=Sa[e];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Ea(e){const t=[],s=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},a=e=>{!function(e,t,s){if(0===t.utf8seq){if(e<=127)return void s(e);for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&s(t.codepoint)}}(e,r,s)};for(let i=0;i<e.length;i+=1)Ca(e.charCodeAt(i),n,a);return t.join("")}function Ma(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function Pa(e){const t=[],s={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let n=0;n<e.length;n+=1)Ca(e.charCodeAt(n),s,r);return new Uint8Array(t)}function Ra(e){const t=[];return function(e,t){for(let s=0;s<e.length;s+=1){let r=e.charCodeAt(s);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(s+1)-56320&65535|t),s+=1}Ma(r,t)}}(e,e=>t.push(e)),new Uint8Array(t)}function Aa(e){const t=[],s={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>Ta(e,s,r)),Ta(null,s,r),t.join("")}const Oa=()=>"undefined"!=typeof window&&"undefined"!=typeof document,$a={tested:!1,writable:!1},Da=()=>{if(!Oa())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(Cd){return!1}if($a.tested)return $a.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),$a.tested=!0,$a.writable=!0}catch(Cd){$a.tested=!0,$a.writable=!1}return $a.writable};const Ia=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>ge(()=>h(null,null,function*(){const{default:e}=yield Promise.resolve().then(()=>pr);return{default:e}}),void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},La=(e,t,s)=>h(null,null,function*(){yield e.setItem(t,JSON.stringify(s))}),Ua=(e,t)=>h(null,null,function*(){const s=yield e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch(r){return s}}),za=(e,t)=>h(null,null,function*(){yield e.removeItem(t)});class Ba{constructor(){this.promise=new Ba.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function qa(e){const t=e.split(".");if(3!==t.length)throw new ka("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!ca.test(t[s]))throw new ka("JWT not in base64url format");return{header:JSON.parse(Ea(t[0])),payload:JSON.parse(Ea(t[1])),signature:Pa(t[2]),raw:{header:t[0],payload:t[1]}}}function Ha(e){return("0"+e.toString(16)).substr(-2)}function Wa(e){return h(this,null,function*(){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return e;const t=yield function(e){return h(this,null,function*(){const t=(new TextEncoder).encode(e),s=yield crypto.subtle.digest("SHA-256",t),r=new Uint8Array(s);return Array.from(r).map(e=>String.fromCharCode(e)).join("")})}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}function Fa(e,t,s=!1){return h(this,null,function*(){const r=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let s="";for(let r=0;r<56;r++)s+=e.charAt(Math.floor(Math.random()*t));return s}return crypto.getRandomValues(e),Array.from(e,Ha).join("")}();let n=r;s&&(n+="/PASSWORD_RECOVERY"),yield La(e,`${t}-code-verifier`,n);const a=yield Wa(r);return[a,r===a?"plain":"s256"]})}Ba.promiseConstructor=Promise;const Va=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const Ka=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ja(e){if(!Ka.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ga(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ya(e){return JSON.parse(JSON.stringify(e))}const Xa=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Za=[502,503,504];function Qa(e){return h(this,null,function*(){var t,s;if(!("object"==typeof(s=e)&&null!==s&&"status"in s&&"ok"in s&&"json"in s&&"function"==typeof s.json))throw new ya(Xa(e),0);if(Za.includes(e.status))throw new ya(Xa(e),e.status);let r,n;try{r=yield e.json()}catch(Cd){throw new ma(Xa(Cd),Cd)}const a=function(e){const t=e.headers.get(oa);if(!t)return null;if(!t.match(Va))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(Cd){return null}}(e);if(a&&a.getTime()>=la.timestamp&&"object"==typeof r&&r&&"string"==typeof r.code?n=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(n=r.error_code),n){if("weak_password"===n)throw new ja(Xa(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===n)throw new fa}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new ja(Xa(r),e.status,r.weak_password.reasons);throw new ha(Xa(r),e.status||500,n)})}function ei(e,t,s,r){return h(this,null,function*(){var n;const a=Object.assign({},null==r?void 0:r.headers);a[oa]||(a[oa]=la.name),(null==r?void 0:r.jwt)&&(a.Authorization=`Bearer ${r.jwt}`);const i=null!==(n=null==r?void 0:r.query)&&void 0!==n?n:{};(null==r?void 0:r.redirectTo)&&(i.redirect_to=r.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=yield function(e,t,s,r,n,a){return h(this,null,function*(){const i=((e,t,s,r)=>{const n={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),s))})(t,r,n,a);let o;try{o=yield e(s,Object.assign({},i))}catch(Cd){throw new ya(Xa(Cd),0)}if(o.ok||(yield Qa(o)),null==r?void 0:r.noResolveJson)return o;try{return yield o.json()}catch(Cd){yield Qa(Cd)}})}(e,t,s+o,{headers:a,noResolveJson:null==r?void 0:r.noResolveJson},{},null==r?void 0:r.body);return(null==r?void 0:r.xform)?null==r?void 0:r.xform(l):{data:Object.assign({},l),error:null}})}function ti(e){var t;let s=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:s,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function si(e){const t=ti(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function ri(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function ni(e){return{data:e,error:null}}function ai(e){const{action_link:t,email_otp:s,hashed_token:r,redirect_to:n,verification_type:a}=e,i=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(s[r[n]]=e[r[n]])}return s}(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:s,hashed_token:r,redirect_to:n,verification_type:a},user:Object.assign({},i)},error:null}}function ii(e){return e}const oi=["global","local","others"];class li{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=Ia(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(e){return h(this,arguments,function*(e,t=oi[0]){if(oi.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${oi.join(", ")}`);try{return yield ei(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(ua(s))return{data:null,error:s};throw s}})}inviteUserByEmail(e){return h(this,arguments,function*(e,t={}){try{return yield ei(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ri})}catch(s){if(ua(s))return{data:{user:null},error:s};throw s}})}generateLink(e){return h(this,null,function*(){try{const{options:t}=e,s=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(s[r[n]]=e[r[n]])}return s}(e,["options"]),r=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(r.new_email=null==s?void 0:s.newEmail,delete r.newEmail),yield ei(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:ai,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(ua(t))return{data:{properties:null,user:null},error:t};throw t}})}createUser(e){return h(this,null,function*(){try{return yield ei(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ri})}catch(t){if(ua(t))return{data:{user:null},error:t};throw t}})}listUsers(e){return h(this,null,function*(){var t,s,r,n,a,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=yield ei(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(s=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==s?s:"",per_page:null!==(n=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==n?n:""},xform:ii});if(c.error)throw c.error;const d=yield c.json(),u=null!==(a=c.headers.get("x-total-count"))&&void 0!==a?a:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),s=JSON.parse(e.split(";")[1].split("=")[1]);l[`${s}Page`]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(ua(l))return{data:{users:[]},error:l};throw l}})}getUserById(e){return h(this,null,function*(){Ja(e);try{return yield ei(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ri})}catch(t){if(ua(t))return{data:{user:null},error:t};throw t}})}updateUserById(e,t){return h(this,null,function*(){Ja(e);try{return yield ei(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ri})}catch(s){if(ua(s))return{data:{user:null},error:s};throw s}})}deleteUser(e,t=!1){return h(this,null,function*(){Ja(e);try{return yield ei(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ri})}catch(s){if(ua(s))return{data:{user:null},error:s};throw s}})}_listFactors(e){return h(this,null,function*(){Ja(e.userId);try{const{data:t,error:s}=yield ei(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:s}}catch(t){if(ua(t))return{data:null,error:t};throw t}})}_deleteFactor(e){return h(this,null,function*(){Ja(e.userId),Ja(e.id);try{return{data:yield ei(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ua(t))return{data:null,error:t};throw t}})}}function ci(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}const di=!!(globalThis&&Da()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class ui extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class hi extends ui{}function mi(e,t,s){return h(this,null,function*(){const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort()},t),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},r=>h(null,null,function*(){if(!r){if(0===t)throw new hi(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(di)try{yield globalThis.navigator.locks.query()}catch(Cd){}return yield s()}try{return yield s()}finally{}})))})}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(Cd){"undefined"!=typeof self&&(self.globalThis=self)}}();const pi={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ia,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function fi(e,t,s){return h(this,null,function*(){return yield s()})}const gi={};class xi{constructor(e){var t,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=xi.nextInstanceID,xi.nextInstanceID+=1,this.instanceID>0&&Oa();const r=Object.assign(Object.assign({},pi),e);if(this.logDebugMessages=!!r.debug,"function"==typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new li({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Ia(r.fetch),this.lock=r.lock||fi,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Oa()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=mi:this.lock=fi,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:Da()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ci(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=ci(this.memoryStorage)),Oa()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(Cd){}null===(s=this.broadcastChannel)||void 0===s||s.addEventListener("message",e=>h(this,null,function*(){this._debug("received broadcast notification from other tab or client",e),yield this._notifyAllSubscribers(e.data.event,e.data.session,!1)}))}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=gi[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){gi[this.storageKey]=Object.assign(Object.assign({},gi[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=gi[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){gi[this.storageKey]=Object.assign(Object.assign({},gi[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ra}) ${(new Date).toISOString()}`,...e),this}initialize(){return h(this,null,function*(){return this.initializePromise||(this.initializePromise=(()=>h(this,null,function*(){return yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._initialize()}))}))()),yield this.initializePromise})}_initialize(){return h(this,null,function*(){var e;try{const t=function(e){const t={},s=new URL(e);if(s.hash&&"#"===s.hash[0])try{new URLSearchParams(s.hash.substring(1)).forEach((e,s)=>{t[s]=e})}catch(Cd){}return s.searchParams.forEach((e,s)=>{t[s]=e}),t}(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":(yield this._isPKCECallback(t))&&(s="pkce"),Oa()&&this.detectSessionInUrl&&"none"!==s){const{data:r,error:n}=yield this._getSessionFromURL(t,s);if(n){if(this._debug("#_initialize()","error detecting session from URL",n),function(e){return ua(e)&&"AuthImplicitGrantRedirectError"===e.name}(n)){const t=null===(e=n.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:n}}return yield this._removeSession(),{error:n}}const{session:a,redirectType:i}=r;return this._debug("#_initialize()","detected session in URL",a,"redirect type",i),yield this._saveSession(a),setTimeout(()=>h(this,null,function*(){"recovery"===i?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",a):yield this._notifyAllSubscribers("SIGNED_IN",a)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(t){return ua(t)?{error:t}:{error:new ma("Unexpected error during initialization",t)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(e){return h(this,null,function*(){var t,s,r;try{const n=yield ei(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(s=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==s?s:{},gotrue_meta_security:{captcha_token:null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:ti}),{data:a,error:i}=n;if(i||!a)return{data:{user:null,session:null},error:i};const o=a.session,l=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(n){if(ua(n))return{data:{user:null,session:null},error:n};throw n}})}signUp(e){return h(this,null,function*(){var t,s,r;try{let n;if("email"in e){const{email:s,password:r,options:a}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=yield Fa(this.storage,this.storageKey)),n=yield ei(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==a?void 0:a.emailRedirectTo,body:{email:s,password:r,data:null!==(t=null==a?void 0:a.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken},code_challenge:i,code_challenge_method:o},xform:ti})}else{if(!("phone"in e))throw new xa("You must provide either an email or phone number and a password");{const{phone:t,password:a,options:i}=e;n=yield ei(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:a,data:null!==(s=null==i?void 0:i.data)&&void 0!==s?s:{},channel:null!==(r=null==i?void 0:i.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:ti})}}const{data:a,error:i}=n;if(i||!a)return{data:{user:null,session:null},error:i};const o=a.session,l=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(n){if(ua(n))return{data:{user:null,session:null},error:n};throw n}})}signInWithPassword(e){return h(this,null,function*(){try{let t;if("email"in e){const{email:s,password:r,options:n}=e;t=yield ei(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:r,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}},xform:si})}else{if(!("phone"in e))throw new xa("You must provide either an email or phone number and a password");{const{phone:s,password:r,options:n}=e;t=yield ei(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:r,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}},xform:si})}}const{data:s,error:r}=t;return r?{data:{user:null,session:null},error:r}:s&&s.session&&s.user?(s.session&&(yield this._saveSession(s.session),yield this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r}):{data:{user:null,session:null},error:new ga}}catch(t){if(ua(t))return{data:{user:null,session:null},error:t};throw t}})}signInWithOAuth(e){return h(this,null,function*(){var t,s,r,n;return yield this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(n=e.options)||void 0===n?void 0:n.skipBrowserRedirect})})}exchangeCodeForSession(e){return h(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>h(this,null,function*(){return this._exchangeCodeForSession(e)}))})}signInWithWeb3(e){return h(this,null,function*(){const{chain:t}=e;if("solana"===t)return yield this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)})}signInWithSolana(e){return h(this,null,function*(){var t,s,r,n,a,i,o,l,c,d,u,h;let m,p;if("message"in e)m=e.message,p=e.signature;else{const{chain:u,wallet:h,statement:f,options:g}=e;let x;if(Oa())if("object"==typeof h)x=h;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");x=e.solana}else{if("object"!=typeof h||!(null==g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=h}const v=new URL(null!==(t=null==g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in x&&x.signIn){const e=yield x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==g?void 0:g.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),f?{statement:f}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");m="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in x&&"function"==typeof x.signMessage&&"publicKey"in x&&"object"==typeof x&&x.publicKey&&"toBase58"in x.publicKey&&"function"==typeof x.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${v.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${v.href}`,`Issued At: ${null!==(r=null===(s=null==g?void 0:g.signInWithSolana)||void 0===s?void 0:s.issuedAt)&&void 0!==r?r:(new Date).toISOString()}`,...(null===(n=null==g?void 0:g.signInWithSolana)||void 0===n?void 0:n.notBefore)?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...(null===(a=null==g?void 0:g.signInWithSolana)||void 0===a?void 0:a.expirationTime)?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...(null===(i=null==g?void 0:g.signInWithSolana)||void 0===i?void 0:i.chainId)?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...(null===(o=null==g?void 0:g.signInWithSolana)||void 0===o?void 0:o.nonce)?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...(null===(l=null==g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...(null===(d=null===(c=null==g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...g.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=yield x.signMessage((new TextEncoder).encode(m),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:s}=yield ei(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Aa(p)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:ti});if(s)throw s;return t&&t.session&&t.user?(t.session&&(yield this._saveSession(t.session),yield this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:s}):{data:{user:null,session:null},error:new ga}}catch(f){if(ua(f))return{data:{user:null,session:null},error:f};throw f}})}_exchangeCodeForSession(e){return h(this,null,function*(){const t=yield Ua(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(null!=t?t:"").split("/");try{const{data:t,error:n}=yield ei(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:ti});if(yield za(this.storage,`${this.storageKey}-code-verifier`),n)throw n;return t&&t.session&&t.user?(t.session&&(yield this._saveSession(t.session),yield this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=r?r:null}),error:n}):{data:{user:null,session:null,redirectType:null},error:new ga}}catch(n){if(ua(n))return{data:{user:null,session:null,redirectType:null},error:n};throw n}})}signInWithIdToken(e){return h(this,null,function*(){try{const{options:t,provider:s,token:r,access_token:n,nonce:a}=e,i=yield ei(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:n,nonce:a,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:ti}),{data:o,error:l}=i;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(yield this._saveSession(o.session),yield this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new ga}}catch(t){if(ua(t))return{data:{user:null,session:null},error:t};throw t}})}signInWithOtp(e){return h(this,null,function*(){var t,s,r,n,a;try{if("email"in e){const{email:r,options:n}=e;let a=null,i=null;"pkce"===this.flowType&&([a,i]=yield Fa(this.storage,this.storageKey));const{error:o}=yield ei(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null==n?void 0:n.data)&&void 0!==t?t:{},create_user:null===(s=null==n?void 0:n.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},code_challenge:a,code_challenge_method:i},redirectTo:null==n?void 0:n.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:s}=e,{data:i,error:o}=yield ei(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null==s?void 0:s.data)&&void 0!==r?r:{},create_user:null===(n=null==s?void 0:s.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},channel:null!==(a=null==s?void 0:s.channel)&&void 0!==a?a:"sms"}});return{data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:o}}throw new xa("You must provide either an email or phone number.")}catch(i){if(ua(i))return{data:{user:null,session:null},error:i};throw i}})}verifyOtp(e){return h(this,null,function*(){var t,s;try{let r,n;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,n=null===(s=e.options)||void 0===s?void 0:s.captchaToken);const{data:a,error:i}=yield ei(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:n}}),redirectTo:r,xform:ti});if(i)throw i;if(!a)throw new Error("An error occurred on token verification.");const o=a.session,l=a.user;return(null==o?void 0:o.access_token)&&(yield this._saveSession(o),yield this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(r){if(ua(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithSSO(e){return h(this,null,function*(){var t,s,r;try{let n=null,a=null;return"pkce"===this.flowType&&([n,a]=yield Fa(this.storage,this.storageKey)),yield ei(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==s?s:void 0}),(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:n,code_challenge_method:a}),headers:this.headers,xform:ni})}catch(n){if(ua(n))return{data:null,error:n};throw n}})}reauthenticate(){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return h(this,null,function*(){try{return yield this._useSession(e=>h(this,null,function*(){const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new fa;const{error:r}=yield ei(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}}))}catch(e){if(ua(e))return{data:{user:null,session:null},error:e};throw e}})}resend(e){return h(this,null,function*(){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:n}=e,{error:a}=yield ei(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}},redirectTo:null==n?void 0:n.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:s,type:r,options:n}=e,{data:a,error:i}=yield ei(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}}});return{data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:i}}throw new xa("You must provide either an email or phone number and a type")}catch(t){if(ua(t))return{data:{user:null,session:null},error:t};throw t}})}getSession(){return h(this,null,function*(){yield this.initializePromise;return yield this._acquireLock(-1,()=>h(this,null,function*(){return this._useSession(e=>h(this,null,function*(){return e}))}))})}_acquireLock(e,t){return h(this,null,function*(){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(()=>h(this,null,function*(){return yield e,yield t()}))();return this.pendingInLock.push((()=>h(this,null,function*(){try{yield s}catch(Cd){}}))()),s}return yield this.lock(`lock:${this.storageKey}`,e,()=>h(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((()=>h(this,null,function*(){try{yield e}catch(Cd){}}))()),yield e;this.pendingInLock.length;){const e=[...this.pendingInLock];yield Promise.all(e),this.pendingInLock.splice(0,e.length)}return yield e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(e){return h(this,null,function*(){this._debug("#_useSession","begin");try{const t=yield this.__loadSession();return yield e(t)}finally{this._debug("#_useSession","end")}})}__loadSession(){return h(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=yield Ua(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!e)return{data:{session:null},error:null};const s=!!e.expires_at&&1e3*e.expires_at-Date.now()<aa;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const t=yield Ua(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=Ga()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,s,r)=>(t||"user"!==s||(t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,s,r))})}return{data:{session:e},error:null}}const{session:r,error:n}=yield this._callRefreshToken(e.refresh_token);return n?{data:{session:null},error:n}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}})}getUser(e){return h(this,null,function*(){if(e)return yield this._getUser(e);yield this.initializePromise;return yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._getUser()}))})}_getUser(e){return h(this,null,function*(){try{return e?yield ei(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ri}):yield this._useSession(e=>h(this,null,function*(){var t,s,r;const{data:n,error:a}=e;if(a)throw a;return(null===(t=n.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?yield ei(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(r=null===(s=n.session)||void 0===s?void 0:s.access_token)&&void 0!==r?r:void 0,xform:ri}):{data:{user:null},error:new fa}}))}catch(t){if(ua(t))return function(e){return ua(e)&&"AuthSessionMissingError"===e.name}(t)&&(yield this._removeSession(),yield za(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}})}updateUser(e){return h(this,arguments,function*(e,t={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._updateUser(e,t)}))})}_updateUser(e){return h(this,arguments,function*(e,t={}){try{return yield this._useSession(s=>h(this,null,function*(){const{data:r,error:n}=s;if(n)throw n;if(!r.session)throw new fa;const a=r.session;let i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=yield Fa(this.storage,this.storageKey));const{data:l,error:c}=yield ei(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:a.access_token,xform:ri});if(c)throw c;return a.user=l.user,yield this._saveSession(a),yield this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}}))}catch(s){if(ua(s))return{data:{user:null},error:s};throw s}})}setSession(e){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._setSession(e)}))})}_setSession(e){return h(this,null,function*(){try{if(!e.access_token||!e.refresh_token)throw new fa;const t=Date.now()/1e3;let s=t,r=!0,n=null;const{payload:a}=qa(e.access_token);if(a.exp&&(s=a.exp,r=s<=t),r){const{session:t,error:s}=yield this._callRefreshToken(e.refresh_token);if(s)return{data:{user:null,session:null},error:s};if(!t)return{data:{user:null,session:null},error:null};n=t}else{const{data:r,error:a}=yield this._getUser(e.access_token);if(a)throw a;n={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:s-t,expires_at:s},yield this._saveSession(n),yield this._notifyAllSubscribers("SIGNED_IN",n)}return{data:{user:n.user,session:n},error:null}}catch(t){if(ua(t))return{data:{session:null,user:null},error:t};throw t}})}refreshSession(e){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._refreshSession(e)}))})}_refreshSession(e){return h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){var s;if(!e){const{data:r,error:n}=t;if(n)throw n;e=null!==(s=r.session)&&void 0!==s?s:void 0}if(!(null==e?void 0:e.refresh_token))throw new fa;const{session:r,error:n}=yield this._callRefreshToken(e.refresh_token);return n?{data:{user:null,session:null},error:n}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}}))}catch(t){if(ua(t))return{data:{user:null,session:null},error:t};throw t}})}_getSessionFromURL(e,t){return h(this,null,function*(){try{if(!Oa())throw new va("No browser detected.");if(e.error||e.error_description||e.error_code)throw new va(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new ba("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new va("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ba("No code detected.");const{data:t,error:s}=yield this._exchangeCodeForSession(e.code);if(s)throw s;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:r,access_token:n,refresh_token:a,expires_in:i,expires_at:o,token_type:l}=e;if(!(n&&i&&a&&l))throw new va("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(i);let u=c+d;o&&(u=parseInt(o));const{data:h,error:m}=yield this._getUser(n);if(m)throw m;const p={provider_token:s,provider_refresh_token:r,access_token:n,expires_in:d,expires_at:u,refresh_token:a,token_type:l,user:h.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:e.type},error:null}}catch(s){if(ua(s))return{data:{session:null,redirectType:null},error:s};throw s}})}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}_isPKCECallback(e){return h(this,null,function*(){const t=yield Ua(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)})}signOut(){return h(this,arguments,function*(e={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._signOut(e)}))})}_signOut(){return h(this,arguments,function*({scope:e}={scope:"global"}){return yield this._useSession(t=>h(this,null,function*(){var s;const{data:r,error:n}=t;if(n)return{error:n};const a=null===(s=r.session)||void 0===s?void 0:s.access_token;if(a){const{error:t}=yield this.admin.signOut(a,e);if(t&&(!function(e){return ua(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(yield this._removeSession(),yield za(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(()=>{h(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){this._emitInitialSession(t)}))})})(),{data:{subscription:s}}}_emitInitialSession(e){return h(this,null,function*(){return yield this._useSession(t=>h(this,null,function*(){var s,r;try{const{data:{session:r},error:n}=t;if(n)throw n;yield null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",r),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(n){yield null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",e,"error",n)}}))})}resetPasswordForEmail(e){return h(this,arguments,function*(e,t={}){let s=null,r=null;"pkce"===this.flowType&&([s,r]=yield Fa(this.storage,this.storageKey,!0));try{return yield ei(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(n){if(ua(n))return{data:null,error:n};throw n}})}getUserIdentities(){return h(this,null,function*(){var e;try{const{data:t,error:s}=yield this.getUser();if(s)throw s;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(ua(t))return{data:null,error:t};throw t}})}linkIdentity(e){return h(this,null,function*(){var t;try{const{data:s,error:r}=yield this._useSession(t=>h(this,null,function*(){var s,r,n,a,i;const{data:o,error:l}=t;if(l)throw l;const c=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(s=e.options)||void 0===s?void 0:s.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:!0});return yield ei(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(a=o.session)||void 0===a?void 0:a.access_token)&&void 0!==i?i:void 0})}));if(r)throw r;return Oa()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==s?void 0:s.url),{data:{provider:e.provider,url:null==s?void 0:s.url},error:null}}catch(s){if(ua(s))return{data:{provider:e.provider,url:null},error:s};throw s}})}unlinkIdentity(e){return h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){var s,r;const{data:n,error:a}=t;if(a)throw a;return yield ei(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(r=null===(s=n.session)||void 0===s?void 0:s.access_token)&&void 0!==r?r:void 0})}))}catch(t){if(ua(t))return{data:null,error:t};throw t}})}_refreshAccessToken(e){return h(this,null,function*(){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return yield(s=s=>h(this,null,function*(){return s>0&&(yield function(e){return h(this,null,function*(){return yield new Promise(t=>{setTimeout(()=>t(null),e)})})}(200*Math.pow(2,s-1))),this._debug(t,"refreshing attempt",s),yield ei(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ti})}),r=(e,t)=>{const s=200*Math.pow(2,e);return t&&wa(t)&&Date.now()+s-n<na},new Promise((e,t)=>{h(null,null,function*(){for(let n=0;n<1/0;n++)try{const t=yield s(n);if(!r(n,null,t))return void e(t)}catch(Cd){if(!r(n,Cd))return void t(Cd)}})}))}catch(n){if(this._debug(t,"error",n),ua(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}var s,r})}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,t){return h(this,null,function*(){const s=yield this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),Oa()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}})}_recoverAndRefresh(){return h(this,null,function*(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=yield Ua(this.storage,this.storageKey);if(n&&this.userStorage){let t=yield Ua(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:n.user},yield La(this.userStorage,this.storageKey+"-user",t)),n.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:Ga()}else if(n&&!n.user&&!n.user){const e=yield Ua(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(n.user=e.user,yield za(this.storage,this.storageKey+"-user"),yield La(this.storage,this.storageKey,n)):n.user=Ga()}if(this._debug(s,"session from storage",n),!this._isValidSession(n))return this._debug(s,"session is not valid"),void(null!==n&&(yield this._removeSession()));const a=1e3*(null!==(t=n.expires_at)&&void 0!==t?t:1/0)-Date.now()<aa;if(this._debug(s,`session has${a?"":" not"} expired with margin of 90000s`),a){if(this.autoRefreshToken&&n.refresh_token){const{error:e}=yield this._callRefreshToken(n.refresh_token);e&&(wa(e)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",e),yield this._removeSession()))}}else if(n.user&&!0===n.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=yield this._getUser(n.access_token);!t&&(null==e?void 0:e.user)?(n.user=e.user,yield this._saveSession(n),yield this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(r){this._debug(s,"error getting user data, skipping SIGNED_IN notification",r)}else yield this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){return void this._debug(s,"error",n)}finally{this._debug(s,"end")}})}_callRefreshToken(e){return h(this,null,function*(){var t,s;if(!e)throw new fa;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Ba;const{data:t,error:s}=yield this._refreshAccessToken(e);if(s)throw s;if(!t.session)throw new fa;yield this._saveSession(t.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(n){if(this._debug(r,"error",n),ua(n)){const e={session:null,error:n};return wa(n)||(yield this._removeSession()),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(s=this.refreshingDeferred)||void 0===s||s.reject(n),n}finally{this.refreshingDeferred=null,this._debug(r,"end")}})}_notifyAllSubscribers(e,t,s=!0){return h(this,null,function*(){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],n=Array.from(this.stateChangeEmitters.values()).map(s=>h(this,null,function*(){try{yield s.callback(e,t)}catch(Cd){r.push(Cd)}}));if(yield Promise.all(n),r.length>0){for(let e=0;e<r.length;e+=1);throw r[0]}}finally{this._debug(r,"end")}})}_saveSession(e){return h(this,null,function*(){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!s&&t.user&&(yield La(this.userStorage,this.storageKey+"-user",{user:t.user}));const e=Object.assign({},t);delete e.user;const r=Ya(e);yield La(this.storage,this.storageKey,r)}else{const e=Ya(t);yield La(this.storage,this.storageKey,e)}})}_removeSession(){return h(this,null,function*(){this._debug("#_removeSession()"),yield za(this.storage,this.storageKey),yield za(this.storage,this.storageKey+"-code-verifier"),yield za(this.storage,this.storageKey+"-user"),this.userStorage&&(yield za(this.userStorage,this.storageKey+"-user")),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Oa()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(Cd){}}_startAutoRefresh(){return h(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),na);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(()=>h(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return h(this,null,function*(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)})}startAutoRefresh(){return h(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return h(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return h(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>h(this,null,function*(){try{const e=Date.now();try{return yield this._useSession(t=>h(this,null,function*(){const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*s.expires_at-e)/na);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&(yield this._callRefreshToken(s.refresh_token))}))}catch(Cd){}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(Cd){if(!(Cd.isAcquireTimeout||Cd instanceof ui))throw Cd;this._debug("auto refresh token tick lock not available")}})}_handleVisibilityChange(){return h(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!Oa()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>h(this,null,function*(){return yield this._onVisibilityChanged(!1)}),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){}})}_onVisibilityChanged(e){return h(this,null,function*(){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){"visible"===document.visibilityState?yield this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(e,t,s){return h(this,null,function*(){const r=[`provider=${encodeURIComponent(t)}`];if((null==s?void 0:s.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),(null==s?void 0:s.scopes)&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),"pkce"===this.flowType){const[e,t]=yield Fa(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});r.push(s.toString())}if(null==s?void 0:s.queryParams){const e=new URLSearchParams(s.queryParams);r.push(e.toString())}return(null==s?void 0:s.skipBrowserRedirect)&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`})}_unenroll(e){return h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){var s;const{data:r,error:n}=t;return n?{data:null,error:n}:yield ei(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token})}))}catch(t){if(ua(t))return{data:null,error:t};throw t}})}_enroll(e){return h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){var s,r;const{data:n,error:a}=t;if(a)return{data:null,error:a};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=yield ei(this.fetch,"POST",`${this.url}/factors`,{body:i,headers:this.headers,jwt:null===(s=null==n?void 0:n.session)||void 0===s?void 0:s.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(r=null==o?void 0:o.totp)||void 0===r?void 0:r.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})}))}catch(t){if(ua(t))return{data:null,error:t};throw t}})}_verify(e){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){var s;const{data:r,error:n}=t;if(n)return{data:null,error:n};const{data:a,error:i}=yield ei(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token});return i?{data:null,error:i}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:i})}))}catch(t){if(ua(t))return{data:null,error:t};throw t}}))})}_challenge(e){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){var s;const{data:r,error:n}=t;return n?{data:null,error:n}:yield ei(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token})}))}catch(t){if(ua(t))return{data:null,error:t};throw t}}))})}_challengeAndVerify(e){return h(this,null,function*(){const{data:t,error:s}=yield this._challenge({factorId:e.factorId});return s?{data:null,error:s}:yield this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})})}_listFactors(){return h(this,null,function*(){const{data:{user:e},error:t}=yield this.getUser();if(t)return{data:null,error:t};const s=(null==e?void 0:e.factors)||[],r=s.filter(e=>"totp"===e.factor_type&&"verified"===e.status),n=s.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:s,totp:r,phone:n},error:null}})}_getAuthenticatorAssuranceLevel(){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){return yield this._useSession(e=>h(this,null,function*(){var t,s;const{data:{session:r},error:n}=e;if(n)return{data:null,error:n};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=qa(r.access_token);let i=null;a.aal&&(i=a.aal);let o=i;(null!==(s=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==s?s:[]).length>0&&(o="aal2");return{data:{currentLevel:i,nextLevel:o,currentAuthenticationMethods:a.amr||[]},error:null}}))}))})}fetchJwk(e){return h(this,arguments,function*(e,t={keys:[]}){let s=t.keys.find(t=>t.kid===e);if(s)return s;const r=Date.now();if(s=this.jwks.keys.find(t=>t.kid===e),s&&this.jwks_cached_at+6e5>r)return s;const{data:n,error:a}=yield ei(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return n.keys&&0!==n.keys.length?(this.jwks=n,this.jwks_cached_at=r,s=n.keys.find(t=>t.kid===e),s||null):null})}getClaims(e){return h(this,arguments,function*(e,t={}){try{let s=e;if(!s){const{data:e,error:t}=yield this.getSession();if(t||!e.session)return{data:null,error:t};s=e.session.access_token}const{header:r,payload:n,signature:a,raw:{header:i,payload:o}}=qa(s);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(n.exp);const l=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?yield this.fetchJwk(r.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!l){const{error:e}=yield this.getUser(s);if(e)throw e;return{data:{claims:n,header:r,signature:a},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),d=yield crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!(yield crypto.subtle.verify(c,d,a,Ra(`${i}.${o}`))))throw new ka("Invalid JWT signature");return{data:{claims:n,header:r,signature:a},error:null}}catch(s){if(ua(s))return{data:null,error:s};throw s}})}}xi.nextInstanceID=0;const vi=xi;class bi extends vi{constructor(e){super(e)}}var yi=function(e,t,s,r){return new(s||(s=Promise))(function(n,a){function i(e){try{l(r.next(e))}catch(Cd){a(Cd)}}function o(e){try{l(r.throw(e))}catch(Cd){a(Cd)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};class wi{constructor(e,t,s){var r,n,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const i=(o=e).endsWith("/")?o:o+"/";var o;const l=new URL(i);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d=function(e,t){var s,r;const{db:n,auth:a,realtime:i,global:o}=e,{db:l,auth:c,realtime:d,global:u}=t,h={db:Object.assign(Object.assign({},l),n),auth:Object.assign(Object.assign({},c),a),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},u),o),{headers:Object.assign(Object.assign({},null!==(s=null==u?void 0:u.headers)&&void 0!==s?s:{}),null!==(r=null==o?void 0:o.headers)&&void 0!==r?r:{})}),accessToken:()=>sa(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!=s?s:{},{db:Xn,realtime:Qn,auth:Object.assign(Object.assign({},Zn),{storageKey:c}),global:Yn});this.storageKey=null!==(r=d.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(n=d.global.headers)&&void 0!==n?n:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(a=d.auth)&&void 0!==a?a:{},this.headers,d.global.fetch),this.fetch=ta(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Mr(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new Jn(this.storageUrl.href,this.headers,this.fetch,null==s?void 0:s.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new tr(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return yi(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return null!==(t=null===(e=s.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,storageKey:n,flowType:a,lock:i,debug:o},l,c){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new bi({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),l),storageKey:n,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,flowType:a,lock:i,debug:o,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new _n(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,s){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===s?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=s}}!function(){if("undefined"!=typeof window)return!1;if("undefined"==typeof process)return!1;const e=process.version;if(null==e)return!1;const t=e.match(/^v(\d+)\./);!!t&&parseInt(t[1],10)}();const ji=new wi("https://efnzmpzkzeuktqkghwfa.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVmbnptcHpremV1a3Rxa2dod2ZhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYyMzE4MzcsImV4cCI6MjA3MTgwNzgzN30.iQiDuurPIkSNjHWP6TID0dATrOCJQ71-kblcsRsHiAk",ki);var ki;const _i="songs",Ni=(e,t="Supabase operation")=>{throw new Error(`${t}: ${e.message}`)},Si={list(e="release_date",t=null){return h(this,null,function*(){try{const{column:s,ascending:r}=(e=>{if(!e||"string"!=typeof e)return{column:"release_date",ascending:!1};let t=!0,s=e.trim();return s.startsWith("-")?(t=!1,s=s.slice(1)):s.startsWith("+")&&(t=!0,s=s.slice(1)),s||(s="release_date"),{column:s,ascending:t}})(e);let n=ji.from(_i).select("*").order(s,{ascending:r});t&&(n=n.limit(t));const{data:a,error:i}=yield n;if(i)throw i;return a||[]}catch(s){return Ni(s,"Liste des chansons"),[]}})},get(e){return h(this,null,function*(){try{const{data:t,error:s}=yield ji.from(_i).select("*").eq("id",e).single();if(s)throw s;return t}catch(t){return Ni(t,`Récupération chanson ID ${e}`),null}})},getCurrent(){return h(this,null,function*(){try{const{data:e,error:t}=yield ji.from(_i).select("*").eq("status","published").order("release_date",{ascending:!1}).limit(1).single();if(t)throw t;return e}catch(e){return Ni(e,"Chanson actuelle"),null}})},create(e){return h(this,null,function*(){var t,s,r,n,a,i,o,l,c,d;try{const u={title:null==(t=e.title)?void 0:t.trim(),artist:(null==(s=e.artist)?void 0:s.trim())||"A Música da Segunda",description:null==(r=e.description)?void 0:r.trim(),lyrics:null==(n=e.lyrics)?void 0:n.trim(),release_date:e.release_date,status:e.status||"draft",tiktok_video_id:null==(a=e.tiktok_video_id)?void 0:a.trim(),tiktok_url:null==(i=e.tiktok_url)?void 0:i.trim(),tiktok_publication_date:e.tiktok_publication_date,spotify_url:null==(o=e.spotify_url)?void 0:o.trim(),apple_music_url:null==(l=e.apple_music_url)?void 0:l.trim(),youtube_url:null==(c=e.youtube_url)?void 0:c.trim(),cover_image:null==(d=e.cover_image)?void 0:d.trim(),hashtags:Array.isArray(e.hashtags)?e.hashtags:[]},{data:h,error:m}=yield ji.from(_i).insert([u]).select().single();if(m)throw m;return h}catch(u){throw Ni(u,"Création chanson"),u}})},update(e,t){return h(this,null,function*(){try{const s={};Object.keys(t).forEach(e=>{void 0!==t[e]&&null!==t[e]&&("hashtags"!==e||Array.isArray(t[e])?s[e]=t[e]:s[e]=[])});const{data:r,error:n}=yield ji.from(_i).update(s).eq("id",e).select().single();if(n)throw n;return r}catch(s){throw Ni(s,`Mise à jour chanson ID ${e}`),s}})},delete(e){return h(this,null,function*(){try{const{error:t}=yield ji.from(_i).delete().eq("id",e);if(t)throw t;return!0}catch(t){throw Ni(t,`Suppression chanson ID ${e}`),t}})},search(e){return h(this,null,function*(){try{if(!e||""===e.trim())return yield this.list();const t=e.trim().toLowerCase(),{data:s,error:r}=yield ji.from(_i).select("*").or(`title.ilike.%${t}%,artist.ilike.%${t}%,description.ilike.%${t}%`).order("release_date",{ascending:!1});if(r)throw r;return s||[]}catch(t){return Ni(t,"Recherche chansons"),[]}})},getByStatus(e){return h(this,null,function*(){try{const{data:t,error:s}=yield ji.from(_i).select("*").eq("status",e).order("release_date",{ascending:!1});if(s)throw s;return t||[]}catch(t){return Ni(t,`Chansons par statut: ${e}`),[]}})},getByMonth(e,t){return h(this,null,function*(){try{const s=`${e}-${t.toString().padStart(2,"0")}-01`,r=`${e}-${t.toString().padStart(2,"0")}-31`,{data:n,error:a}=yield ji.from(_i).select("*").gte("release_date",s).lte("release_date",r).order("release_date",{ascending:!1});if(a)throw a;return n||[]}catch(s){return Ni(s,`Chansons par mois ${t}/${e}`),[]}})}};let Ti="unknown",Ci=!0;h(null,null,function*(){try{return(yield h(null,null,function*(){try{const{data:e,error:t}=yield ji.from(_i).select("count").limit(1);if(t){if("PGRST116"===t.code)return!0;throw t}return!0}catch(e){return!1}}))?(Ci=!0,Ti="supabase",!0):(Ci=!1,Ti="localStorage",!1)}catch(e){return Ci=!1,Ti="localStorage",!1}}).then(()=>{});const Ei=(e="-release_date",t=10)=>h(null,null,function*(){try{if(Ci){return yield Si.list(e,t)}{const e=Ks.songs.getAll().sort((e,t)=>new Date(t.release_date)-new Date(e.release_date));return t?e.slice(0,t):e}}catch(s){const e=Ks.songs.getAll().sort((e,t)=>new Date(t.release_date)-new Date(e.release_date));return t?e.slice(0,t):e}}),Mi=()=>h(null,null,function*(){try{return Ci?yield Si.getCurrent():Ks.songs.getCurrent()}catch(e){return Ks.songs.getCurrent()}}),Pi=e=>h(null,null,function*(){try{if(Ci){const s=yield Si.create(e);try{Ks.songs.create(e)}catch(t){}return s}return Ks.songs.create(e)}catch(s){return Ks.songs.create(e)}}),Ri=(e,t)=>h(null,null,function*(){try{if(Ci){const r=yield Si.update(e,t);try{Ks.songs.update(e,t)}catch(s){}return r}return Ks.songs.update(e,t)}catch(r){return Ks.songs.update(e,t)}}),Ai=e=>h(null,null,function*(){try{if(Ci){const s=yield Si.delete(e);try{Ks.songs.delete(e)}catch(t){}return s}return Ks.songs.delete(e)}catch(s){return Ks.songs.delete(e)}}),Oi=e=>h(null,null,function*(){try{return Ci?yield Si.search(e):Ks.songs.search(e)}catch(t){return Ks.songs.search(e)}}),$i=(e="-release_date",t=25)=>h(null,null,function*(){try{if(Ci){const s=(yield Si.list(e,t)).filter(e=>11===new Date(e.release_date).getMonth()||"published"===e.status);return t?s.slice(0,t):s}{const e=Ks.songs.getAll(),s=e.filter(e=>{const t=new Date(e.release_date),s=t.getMonth();t.getDate();return 11===s||"published"===e.status}).sort((e,t)=>new Date(t.release_date)-new Date(e.release_date));return t?s.slice(0,t):s}}catch(s){const e=Ks.songs.getAll().filter(e=>{const t=new Date(e.release_date),s=t.getMonth();return t.getDate(),11===s||"published"===e.status}).sort((e,t)=>new Date(t.release_date)-new Date(e.release_date));return t?e.slice(0,t):e}});function Di(...e){return X(Z(e))}const Ii=w,Li=g,Ui=m.forwardRef((e,t)=>{var s=e,{className:r}=s,n=d(s,["className"]);return p.jsx(f,l({ref:t,className:Di("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r)},n))});Ui.displayName=f.displayName;const zi=m.forwardRef((e,t)=>{var s=e,{className:r,children:n}=s,a=d(s,["className","children"]);return p.jsxs(Li,{children:[p.jsx(Ui,{}),p.jsxs(x,c(l({ref:t,className:Di("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r)},a),{children:[n,p.jsxs(v,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[p.jsx(Us,{className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:"Close"})]})]}))]})});zi.displayName=x.displayName;const Bi=e=>{var t=e,{className:s}=t,r=d(t,["className"]);return p.jsx("div",l({className:Di("flex flex-col space-y-1.5 text-center sm:text-left",s)},r))};Bi.displayName="DialogHeader";const qi=m.forwardRef((e,t)=>{var s=e,{className:r}=s,n=d(s,["className"]);return p.jsx(b,l({ref:t,className:Di("text-lg font-semibold leading-none tracking-tight",r)},n))});qi.displayName=b.displayName;const Hi=m.forwardRef((e,t)=>{var s=e,{className:r}=s,n=d(s,["className"]);return p.jsx(y,l({ref:t,className:Di("text-sm text-muted-foreground",r)},n))});function Wi({postId:e,className:t="",song:s=null}){const[r,n]=m.useState(!0),[a,i]=m.useState(null),[o,l]=m.useState(0),[c,d]=m.useState(0),[u,h]=m.useState(!1),f=m.useRef(null),g=m.useRef(null),x=m.useRef(null),v=m.useRef(null),b=8e3;m.useEffect(()=>(h(!0),()=>{h(!1),x.current&&clearTimeout(x.current),v.current&&clearTimeout(v.current)}),[]);const y=m.useCallback(()=>{x.current&&(clearTimeout(x.current),x.current=null),v.current&&(clearTimeout(v.current),v.current=null)},[]);m.useEffect(()=>{if(e&&u)return n(!0),i(null),l(0),d(e=>e+1),y(),x.current=setTimeout(()=>{u&&j("Timeout: La vidéo a pris trop de temps à charger")},b),y},[e,u,y]);const w=m.useCallback(()=>{u&&(y(),n(!1),i(null),f.current&&f.current.focus())},[u,y]),j=m.useCallback((e="Erro ao carregar vídeo TikTok")=>{u&&(y(),o<1?v.current=setTimeout(()=>{u&&(l(e=>e+1),d(e=>e+1),n(!0),i(null),x.current=setTimeout(()=>{u&&j("Timeout sur retry")},b))},500):(n(!1),i(e)))},[u,o,1,y]),k=m.useCallback(()=>{u&&(i(null),l(0),d(e=>e+1),n(!0),x.current=setTimeout(()=>{u&&j("Timeout sur retry manuel")},b))},[u,j]),_=m.useCallback(()=>{j("Erro interno do iframe TikTok")},[j]);return m.useEffect(()=>{const e=e=>{if("https://www.tiktok.com"===e.origin)try{const t=e.data;t&&"tiktok-ready"===t.type&&w()}catch(t){}};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},[w]),e?a?p.jsxs("div",{className:`bg-red-50 border border-red-200 rounded-2xl p-6 text-center ${t}`,children:[p.jsx(os,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),p.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Erro ao carregar"}),p.jsx("p",{className:"text-red-600 mb-4",children:a}),p.jsxs("div",{className:"flex gap-2 justify-center flex-wrap",children:[p.jsxs("button",{onClick:k,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[p.jsx(Ss,{className:"w-4 h-4"}),"Tentar Novamente"]}),s&&s.tiktok_url&&p.jsxs("a",{href:s.tiktok_url,target:"_blank",rel:"noopener noreferrer",className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[p.jsx(cs,{className:"w-4 h-4"}),"Abrir no TikTok"]}),p.jsxs("button",{onClick:()=>window.open(`https://www.tiktok.com/@user/video/${e}`,"_blank"),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors flex items-center gap-2",children:[p.jsx(cs,{className:"w-4 h-4"}),"Tentar ID Direto"]})]})]}):p.jsx("div",{ref:g,className:`tiktok-video-container ${t}`,style:{width:"100%",maxWidth:"100%",position:"relative",backgroundColor:"#000",borderRadius:"16px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.15)",overflow:"hidden"},children:p.jsxs("div",{className:"tiktok-iframe-wrapper",style:{width:"100%",height:"0",paddingBottom:"177.78%",position:"relative",overflow:"hidden",borderRadius:"16px"},children:[p.jsx("iframe",{ref:f,src:`https://www.tiktok.com/embed/${e}?autoplay=0&muted=0&loop=1&controls=1&rel=0&modestbranding=1&playsinline=1&allowfullscreen=1`,title:`Vídeo TikTok ${e}`,className:"tiktok-iframe",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",border:"none",borderRadius:"16px",backgroundColor:"#000",overflow:"hidden",display:"block",zIndex:1,scrolling:"no",allowTransparency:"true",frameBorder:"0"},allow:"autoplay; fullscreen; picture-in-picture; encrypted-media; microphone; camera; geolocation; gyroscope; accelerometer",allowFullScreen:!0,onLoad:w,onError:_,sandbox:"allow-scripts allow-same-origin allow-presentation allow-popups allow-popups-to-escape-sandbox allow-forms allow-top-navigation",scrolling:"no",seamless:!0},c),r&&p.jsx("div",{className:"tiktok-loading-overlay",style:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2,borderRadius:"16px"},children:p.jsxs("div",{className:"text-center text-white",children:[p.jsx("div",{className:"loading-spinner mb-4",children:p.jsx(Ts,{className:"w-12 h-12 animate-spin mx-auto text-pink-500"})}),p.jsx("p",{className:"text-lg font-medium mb-2",children:"Carregando TikTok..."}),o>0&&p.jsxs("p",{className:"text-sm text-gray-300",children:["Tentativa ",o+1,"/",2]})]})})]})}):p.jsxs("div",{className:`bg-gray-100 rounded-lg p-8 text-center ${t}`,children:[p.jsx(ks,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),p.jsx("p",{className:"text-gray-500",children:"ID TikTok manquant"}),s&&s.tiktok_url&&p.jsx("div",{className:"mt-4",children:p.jsxs("a",{href:s.tiktok_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors",children:[p.jsx(cs,{className:"w-4 h-4"}),"Ver no TikTok"]})})]})}function Fi(e,[t,s]){return Math.min(s,Math.max(t,e))}Hi.displayName=y.displayName;var Vi="ScrollArea",[Ki,Ji]=_(Vi),[Gi,Yi]=Ki(Vi),Xi=m.forwardRef((e,t)=>{const s=e,{__scopeScrollArea:r,type:n="hover",dir:a,scrollHideDelay:i=600}=s,o=d(s,["__scopeScrollArea","type","dir","scrollHideDelay"]),[u,h]=m.useState(null),[f,g]=m.useState(null),[x,v]=m.useState(null),[b,y]=m.useState(null),[w,_]=m.useState(null),[S,T]=m.useState(0),[C,E]=m.useState(0),[M,P]=m.useState(!1),[R,A]=m.useState(!1),O=j(t,e=>h(e)),$=k(a);return p.jsx(Gi,{scope:r,type:n,dir:$,scrollHideDelay:i,scrollArea:u,viewport:f,onViewportChange:g,content:x,onContentChange:v,scrollbarX:b,onScrollbarXChange:y,scrollbarXEnabled:M,onScrollbarXEnabledChange:P,scrollbarY:w,onScrollbarYChange:_,scrollbarYEnabled:R,onScrollbarYEnabledChange:A,onCornerWidthChange:T,onCornerHeightChange:E,children:p.jsx(N.div,c(l({dir:$},o),{ref:O,style:l({position:"relative","--radix-scroll-area-corner-width":S+"px","--radix-scroll-area-corner-height":C+"px"},e.style)}))})});Xi.displayName=Vi;var Zi="ScrollAreaViewport",Qi=m.forwardRef((e,t)=>{const s=e,{__scopeScrollArea:r,children:n,nonce:a}=s,i=d(s,["__scopeScrollArea","children","nonce"]),o=Yi(Zi,r),u=m.useRef(null),h=j(t,u,o.onViewportChange);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),p.jsx(N.div,c(l({"data-radix-scroll-area-viewport":""},i),{ref:h,style:l({overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden"},e.style),children:p.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})}))]})});Qi.displayName=Zi;var eo="ScrollAreaScrollbar",to=m.forwardRef((e,t)=>{const s=e,{forceMount:r}=s,n=d(s,["forceMount"]),a=Yi(eo,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,u="horizontal"===e.orientation;return m.useEffect(()=>(u?i(!0):o(!0),()=>{u?i(!1):o(!1)}),[u,i,o]),"hover"===a.type?p.jsx(so,c(l({},n),{ref:t,forceMount:r})):"scroll"===a.type?p.jsx(ro,c(l({},n),{ref:t,forceMount:r})):"auto"===a.type?p.jsx(no,c(l({},n),{ref:t,forceMount:r})):"always"===a.type?p.jsx(ao,c(l({},n),{ref:t})):null});to.displayName=eo;var so=m.forwardRef((e,t)=>{const s=e,{forceMount:r}=s,n=d(s,["forceMount"]),a=Yi(eo,e.__scopeScrollArea),[i,o]=m.useState(!1);return m.useEffect(()=>{const e=a.scrollArea;let t=0;if(e){const s=()=>{window.clearTimeout(t),o(!0)},r=()=>{t=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return e.addEventListener("pointerenter",s),e.addEventListener("pointerleave",r),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",s),e.removeEventListener("pointerleave",r)}}},[a.scrollArea,a.scrollHideDelay]),p.jsx(S,{present:r||i,children:p.jsx(no,c(l({"data-state":i?"visible":"hidden"},n),{ref:t}))})}),ro=m.forwardRef((e,t)=>{const s=e,{forceMount:r}=s,n=d(s,["forceMount"]),a=Yi(eo,e.__scopeScrollArea),i="horizontal"===e.orientation,o=No(()=>h("SCROLL_END"),100),[u,h]=(f="hidden",g={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},m.useReducer((e,t)=>{const s=g[e][t];return null!=s?s:e},f));var f,g;return m.useEffect(()=>{if("idle"===u){const e=window.setTimeout(()=>h("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(e)}},[u,a.scrollHideDelay,h]),m.useEffect(()=>{const e=a.viewport,t=i?"scrollLeft":"scrollTop";if(e){let s=e[t];const r=()=>{const r=e[t];s!==r&&(h("SCROLL"),o()),s=r};return e.addEventListener("scroll",r),()=>e.removeEventListener("scroll",r)}},[a.viewport,i,h,o]),p.jsx(S,{present:r||"hidden"!==u,children:p.jsx(ao,c(l({"data-state":"hidden"===u?"hidden":"visible"},n),{ref:t,onPointerEnter:T(e.onPointerEnter,()=>h("POINTER_ENTER")),onPointerLeave:T(e.onPointerLeave,()=>h("POINTER_LEAVE"))}))})}),no=m.forwardRef((e,t)=>{const s=Yi(eo,e.__scopeScrollArea),r=e,{forceMount:n}=r,a=d(r,["forceMount"]),[i,o]=m.useState(!1),u="horizontal"===e.orientation,h=No(()=>{if(s.viewport){const e=s.viewport.offsetWidth<s.viewport.scrollWidth,t=s.viewport.offsetHeight<s.viewport.scrollHeight;o(u?e:t)}},10);return So(s.viewport,h),So(s.content,h),p.jsx(S,{present:n||i,children:p.jsx(ao,c(l({"data-state":i?"visible":"hidden"},a),{ref:t}))})}),ao=m.forwardRef((e,t)=>{const s=e,{orientation:r="vertical"}=s,n=d(s,["orientation"]),a=Yi(eo,e.__scopeScrollArea),i=m.useRef(null),o=m.useRef(0),[u,h]=m.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),f=bo(u.viewport,u.content),g=c(l({},n),{sizes:u,onSizesChange:h,hasThumb:Boolean(f>0&&f<1),onThumbChange:e=>i.current=e,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:e=>o.current=e});function x(e,t){return function(e,t,s,r="ltr"){const n=yo(s),a=n/2,i=t||a,o=n-i,l=s.scrollbar.paddingStart+i,c=s.scrollbar.size-s.scrollbar.paddingEnd-o,d=s.content-s.viewport,u="ltr"===r?[0,d]:[-1*d,0];return jo([l,c],u)(e)}(e,o.current,u,t)}return"horizontal"===r?p.jsx(io,c(l({},g),{ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const e=wo(a.viewport.scrollLeft,u,a.dir);i.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{a.viewport&&(a.viewport.scrollLeft=e)},onDragScroll:e=>{a.viewport&&(a.viewport.scrollLeft=x(e,a.dir))}})):"vertical"===r?p.jsx(oo,c(l({},g),{ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const e=wo(a.viewport.scrollTop,u);i.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{a.viewport&&(a.viewport.scrollTop=e)},onDragScroll:e=>{a.viewport&&(a.viewport.scrollTop=x(e))}})):null}),io=m.forwardRef((e,t)=>{const s=e,{sizes:r,onSizesChange:n}=s,a=d(s,["sizes","onSizesChange"]),i=Yi(eo,e.__scopeScrollArea),[o,u]=m.useState(),h=m.useRef(null),f=j(t,h,i.onScrollbarXChange);return m.useEffect(()=>{h.current&&u(getComputedStyle(h.current))},[h]),p.jsx(uo,c(l({"data-orientation":"horizontal"},a),{ref:f,sizes:r,style:l({bottom:0,left:"rtl"===i.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===i.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":yo(r)+"px"},e.style),onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,s)=>{if(i.viewport){const r=i.viewport.scrollLeft+t.deltaX;e.onWheelScroll(r),ko(r,s)&&t.preventDefault()}},onResize:()=>{h.current&&i.viewport&&o&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:h.current.clientWidth,paddingStart:vo(o.paddingLeft),paddingEnd:vo(o.paddingRight)}})}}))}),oo=m.forwardRef((e,t)=>{const s=e,{sizes:r,onSizesChange:n}=s,a=d(s,["sizes","onSizesChange"]),i=Yi(eo,e.__scopeScrollArea),[o,u]=m.useState(),h=m.useRef(null),f=j(t,h,i.onScrollbarYChange);return m.useEffect(()=>{h.current&&u(getComputedStyle(h.current))},[h]),p.jsx(uo,c(l({"data-orientation":"vertical"},a),{ref:f,sizes:r,style:l({top:0,right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":yo(r)+"px"},e.style),onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,s)=>{if(i.viewport){const r=i.viewport.scrollTop+t.deltaY;e.onWheelScroll(r),ko(r,s)&&t.preventDefault()}},onResize:()=>{h.current&&i.viewport&&o&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:h.current.clientHeight,paddingStart:vo(o.paddingTop),paddingEnd:vo(o.paddingBottom)}})}}))}),[lo,co]=Ki(eo),uo=m.forwardRef((e,t)=>{const s=e,{__scopeScrollArea:r,sizes:n,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:u,onThumbPositionChange:h,onDragScroll:f,onWheelScroll:g,onResize:x}=s,v=d(s,["__scopeScrollArea","sizes","hasThumb","onThumbChange","onThumbPointerUp","onThumbPointerDown","onThumbPositionChange","onDragScroll","onWheelScroll","onResize"]),b=Yi(eo,r),[y,w]=m.useState(null),k=j(t,e=>w(e)),_=m.useRef(null),S=m.useRef(""),E=b.viewport,M=n.content-n.viewport,P=C(g),R=C(h),A=No(x,10);function O(e){if(_.current){const t=e.clientX-_.current.left,s=e.clientY-_.current.top;f({x:t,y:s})}}return m.useEffect(()=>{const e=e=>{const t=e.target;(null==y?void 0:y.contains(t))&&P(e,M)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[E,y,M,P]),m.useEffect(R,[n,R]),So(y,A),So(b.content,A),p.jsx(lo,{scope:r,scrollbar:y,hasThumb:a,onThumbChange:C(i),onThumbPointerUp:C(o),onThumbPositionChange:R,onThumbPointerDown:C(u),children:p.jsx(N.div,c(l({},v),{ref:k,style:l({position:"absolute"},v.style),onPointerDown:T(e.onPointerDown,e=>{if(0===e.button){e.target.setPointerCapture(e.pointerId),_.current=y.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",b.viewport&&(b.viewport.style.scrollBehavior="auto"),O(e)}}),onPointerMove:T(e.onPointerMove,O),onPointerUp:T(e.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=S.current,b.viewport&&(b.viewport.style.scrollBehavior=""),_.current=null})}))})}),ho="ScrollAreaThumb",mo=m.forwardRef((e,t)=>{const s=e,{forceMount:r}=s,n=d(s,["forceMount"]),a=co(ho,e.__scopeScrollArea);return p.jsx(S,{present:r||a.hasThumb,children:p.jsx(po,l({ref:t},n))})}),po=m.forwardRef((e,t)=>{const s=e,{__scopeScrollArea:r,style:n}=s,a=d(s,["__scopeScrollArea","style"]),i=Yi(ho,r),o=co(ho,r),{onThumbPositionChange:u}=o,h=j(t,e=>o.onThumbChange(e)),f=m.useRef(void 0),g=No(()=>{f.current&&(f.current(),f.current=void 0)},100);return m.useEffect(()=>{const e=i.viewport;if(e){const t=()=>{if(g(),!f.current){const t=_o(e,u);f.current=t,u()}};return u(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[i.viewport,g,u]),p.jsx(N.div,c(l({"data-state":o.hasThumb?"visible":"hidden"},a),{ref:h,style:l({width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)"},n),onPointerDownCapture:T(e.onPointerDownCapture,e=>{const t=e.target.getBoundingClientRect(),s=e.clientX-t.left,r=e.clientY-t.top;o.onThumbPointerDown({x:s,y:r})}),onPointerUp:T(e.onPointerUp,o.onThumbPointerUp)}))});mo.displayName=ho;var fo="ScrollAreaCorner",go=m.forwardRef((e,t)=>{const s=Yi(fo,e.__scopeScrollArea),r=Boolean(s.scrollbarX&&s.scrollbarY);return"scroll"!==s.type&&r?p.jsx(xo,c(l({},e),{ref:t})):null});go.displayName=fo;var xo=m.forwardRef((e,t)=>{const s=e,{__scopeScrollArea:r}=s,n=d(s,["__scopeScrollArea"]),a=Yi(fo,r),[i,o]=m.useState(0),[u,h]=m.useState(0),f=Boolean(i&&u);return So(a.scrollbarX,()=>{var e;const t=(null==(e=a.scrollbarX)?void 0:e.offsetHeight)||0;a.onCornerHeightChange(t),h(t)}),So(a.scrollbarY,()=>{var e;const t=(null==(e=a.scrollbarY)?void 0:e.offsetWidth)||0;a.onCornerWidthChange(t),o(t)}),f?p.jsx(N.div,c(l({},n),{ref:t,style:l({width:i,height:u,position:"absolute",right:"ltr"===a.dir?0:void 0,left:"rtl"===a.dir?0:void 0,bottom:0},e.style)})):null});function vo(e){return e?parseInt(e,10):0}function bo(e,t){const s=e/t;return isNaN(s)?0:s}function yo(e){const t=bo(e.viewport,e.content),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-s)*t;return Math.max(r,18)}function wo(e,t,s="ltr"){const r=yo(t),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-n,i=t.content-t.viewport,o=a-r,l=Fi(e,"ltr"===s?[0,i]:[-1*i,0]);return jo([0,i],[0,o])(l)}function jo(e,t){return s=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(s-e[0])}}function ko(e,t){return e>0&&e<t}var _o=(e,t=()=>{})=>{let s={left:e.scrollLeft,top:e.scrollTop},r=0;return function n(){const a={left:e.scrollLeft,top:e.scrollTop},i=s.left!==a.left,o=s.top!==a.top;(i||o)&&t(),s=a,r=window.requestAnimationFrame(n)}(),()=>window.cancelAnimationFrame(r)};function No(e,t){const s=C(e),r=m.useRef(0);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),m.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(s,t)},[s,t])}function So(e,t){const s=C(t);E(()=>{let t=0;if(e){const r=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(s)});return r.observe(e),()=>{window.cancelAnimationFrame(t),r.unobserve(e)}}},[e,s])}var To=Xi,Co=Qi,Eo=go;const Mo=m.forwardRef((e,t)=>{var s=e,{className:r,children:n}=s,a=d(s,["className","children"]);return p.jsxs(To,c(l({ref:t,className:Di("relative overflow-hidden",r)},a),{children:[p.jsx(Co,{className:"h-full w-full rounded-[inherit]",children:n}),p.jsx(Po,{}),p.jsx(Eo,{})]}))});Mo.displayName=To.displayName;const Po=m.forwardRef((e,t)=>{var s=e,{className:r,orientation:n="vertical"}=s,a=d(s,["className","orientation"]);return p.jsx(to,c(l({ref:t,orientation:n,className:Di("flex touch-none select-none transition-colors","vertical"===n&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===n&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r)},a),{children:p.jsx(mo,{className:"relative flex-1 rounded-full bg-border"})}))});function Ro({open:e,onOpenChange:t,song:s,title:r="Letras da Música",maxHeight:n="h-56",showIcon:a=!0}){return s?p.jsx(Ii,{open:e,onOpenChange:t,children:p.jsxs(zi,{className:"bg-[#f8f5f2] max-w-md max-h-[70vh]",children:[p.jsx(Bi,{children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs(qi,{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[a&&p.jsx(ds,{className:"w-5 h-5 text-blue-500"}),r]}),p.jsx("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-gray-600 transition-colors p-2 rounded-full hover:bg-gray-200",children:p.jsx(Us,{className:"w-5 h-5"})})]})}),p.jsx("div",{className:"mt-4",children:s.lyrics?p.jsx(Mo,{className:n,children:p.jsx("div",{className:"pr-4",children:p.jsx("pre",{className:"text-gray-700 whitespace-pre-wrap font-sans text-sm leading-relaxed",children:s.lyrics})})}):p.jsxs("div",{className:"text-center py-8",children:[p.jsx(ds,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),p.jsx("p",{className:"text-gray-600 font-medium",children:"Letras não disponíveis"}),p.jsx("p",{className:"text-gray-500 text-sm",children:"As letras desta música serão adicionadas em breve."})]})})]})}):null}function Ao(e){const t=function(e){if(!e||"string"!=typeof e)return null;const t=e.trim();if(/^\d{15,20}$/.test(t))return t;const s=[/tiktok\.com\/@[^\/]+\/video\/(\d{15,20})/i,/vm\.tiktok\.com\/[A-Za-z0-9]+\/?/i,/tiktok\.com\/video\/(\d{15,20})/i,/m\.tiktok\.com\/v\/(\d{15,20})/i,/tiktok\.com\/t\/(\d{15,20})/i];for(const r of s){const e=t.match(r);if(e&&e[1])return e[1]}return t.includes("vm.tiktok.com"),null}(e);return t&&((s=t)&&"string"==typeof s&&/^\d{15,20}$/.test(s.trim()))?t:null;var s}function Oo({song:e,onClose:t,onShowDescription:s}){const[r,n]=m.useState(!1),[a,i]=m.useState(!1),[o,l]=m.useState(!1),c=m.useRef(null);if(m.useEffect(()=>{const e=e=>{c.current&&!c.current.contains(e.target)&&l(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),!e||!e.id||!e.title)return p.jsxs("div",{className:"bg-white rounded-2xl p-6 text-center text-gray-500",children:[p.jsx("div",{className:"mb-4",children:p.jsx(os,{className:"w-12 h-12 text-red-400 mx-auto"})}),p.jsx("p",{className:"text-lg font-medium mb-2",children:"Erro ao carregar música"}),p.jsx("p",{className:"text-sm text-gray-400",children:"Dados da música inválidos ou incompletos"}),t&&p.jsx("button",{onClick:t,className:"mt-4 bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors",children:"Fechar"})]});const d=[];e.spotify_url&&d.push({name:"Spotify",url:e.spotify_url,icon:_s,color:"bg-green-500"}),e.apple_music_url&&d.push({name:"Apple Music",url:e.apple_music_url,icon:_s,color:"bg-pink-500"}),e.youtube_url&&d.push({name:"YouTube",url:e.youtube_url,icon:Ls,color:"bg-red-500"});return p.jsxs("div",{className:"space-y-4",children:[p.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-3",children:p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[p.jsx("h2",{className:"text-lg font-bold text-gray-800 leading-tight line-clamp-2",children:e.title}),e.description&&e.description.trim()&&s&&p.jsx("button",{onClick:()=>s(e),className:"text-blue-500 hover:text-blue-700 transition-colors flex-shrink-0",title:"Ver descrição da música",children:p.jsx(xs,{className:"w-4 h-4"})})]}),p.jsx("p",{className:"text-sm text-blue-700",children:new Date(e.release_date).toLocaleDateString("pt-BR")})]}),t&&p.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:p.jsx(Us,{className:"w-5 h-5"})})]})}),(()=>{const t=Ao(e.tiktok_video_id)||Ao(e.tiktok_url);return t?p.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden mb-4",children:p.jsx("div",{className:"",children:p.jsx(Wi,{postId:t,song:e,className:"mb-4"})})}):null})(),p.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-4",children:p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"relative",ref:c,children:[p.jsxs("button",{className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 px-4 rounded-xl font-medium transition-colors flex items-center justify-center space-x-2",onClick:()=>l(!o),children:[p.jsx(ks,{className:"w-5 h-5"}),p.jsx("span",{children:"Plataformas"}),d.length>0&&p.jsx("span",{className:"ml-2 text-xs bg-blue-500 text-white px-2 py-1 rounded-full",children:d.length})]}),o&&p.jsx("div",{className:"absolute bottom-full left-0 right-0 mb-2 bg-white rounded-xl shadow-lg border border-gray-200 p-3 z-10",children:d.length>0?p.jsxs("div",{className:"space-y-2",children:[p.jsx("p",{className:"text-xs text-gray-500 font-medium mb-2",children:"Disponível em:"}),d.map((e,t)=>p.jsxs("button",{onClick:()=>{var t;(t=e.url)&&window.open(t,"_blank","noopener,noreferrer")},className:"w-full flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50 transition-colors text-left",children:[p.jsx("div",{className:`w-8 h-8 rounded-lg ${e.color} flex items-center justify-center`,children:p.jsx(e.icon,{className:"w-4 h-4 text-white"})}),p.jsx("span",{className:"text-sm font-medium text-gray-700",children:e.name}),p.jsx(cs,{className:"w-3 h-3 text-gray-400 ml-auto"})]},t))]}):p.jsxs("div",{className:"text-center py-3",children:[p.jsx(ks,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),p.jsx("p",{className:"text-sm text-gray-500",children:"Nenhuma plataforma disponível"})]})})]}),e.lyrics&&e.lyrics.trim()&&p.jsxs("button",{onClick:()=>n(!0),className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 px-4 rounded-xl font-medium transition-colors flex items-center justify-center space-x-2",children:[p.jsx(ds,{className:"w-5 h-5"}),p.jsx("span",{children:"Letras"})]}),p.jsxs("button",{className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 px-4 rounded-xl font-medium transition-colors flex items-center justify-center space-x-2",children:[p.jsx(Ms,{className:"w-5 h-5"}),p.jsx("span",{children:"Compartilhar"})]})]})}),p.jsx(Ro,{open:r,onOpenChange:n,song:e,title:"Letras da Música",maxHeight:"h-64"}),p.jsx(Ii,{open:a,onOpenChange:i,children:p.jsxs(zi,{className:"max-w-md",children:[p.jsx(Bi,{children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs(qi,{className:"flex items-center space-x-2",children:[p.jsx(xs,{className:"w-5 h-5 text-blue-500"}),p.jsx("span",{children:"Descrição da Música"})]}),p.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:p.jsx(Us,{className:"w-5 h-5"})})]})}),p.jsx("div",{className:"mt-4",children:p.jsx("p",{className:"text-gray-700 leading-relaxed font-sans text-sm",children:e.description||"Nenhuma descrição disponível para esta música."})})]})})]})}function $o(){const[e,t]=m.useState(null);return m.useEffect(()=>{const e=()=>{const e=new Date,t=e.getDay(),s=0===t?1:(8-t)%7||7,r=new Date(e);r.setDate(e.getDate()+s),r.setHours(9,0,0,0);const n=r-e;return n>0?{d:Math.floor(n/864e5),h:Math.floor(n/36e5%24),m:Math.floor(n/1e3/60%60),s:Math.floor(n/1e3%60)}:null},s=setInterval(()=>{t(e())},1e3);return t(e()),()=>clearInterval(s)},[]),e?p.jsxs("div",{className:"bg-[#f8f5f2] rounded-3xl p-5 shadow-lg",children:[p.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[p.jsx(Os,{className:"w-5 h-5 text-gray-500"}),p.jsx("h3",{className:"font-semibold text-gray-700",children:"Próxima música em..."})]}),p.jsx("div",{className:"grid grid-cols-4 gap-3 text-center",children:Object.entries(e).map(([e,t])=>p.jsxs("div",{className:"bg-[#e7f1f7] rounded-xl p-3",children:[p.jsx("p",{className:"text-2xl font-bold text-[#32a2dc]",children:t}),p.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"d"===e?"dias":"h"===e?"horas":"m"===e?"min":"seg"})]},e))})]}):p.jsxs("div",{className:"bg-[#f8f5f2] rounded-3xl p-5 shadow-lg text-center",children:[p.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"É Segunda-feira!"}),p.jsx("p",{className:"text-gray-600",children:"A nova música já está disponível!"})]})}Po.displayName=to.displayName;const Do=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,Io=Z,Lo=(e,t)=>s=>{var r;if(null==(null==t?void 0:t.variants))return Io(e,null==s?void 0:s.class,null==s?void 0:s.className);const{variants:n,defaultVariants:a}=t,i=Object.keys(n).map(e=>{const t=null==s?void 0:s[e],r=null==a?void 0:a[e];if(null===t)return null;const i=Do(t)||Do(r);return n[e][i]}),o=s&&Object.entries(s).reduce((e,t)=>{let[s,r]=t;return void 0===r||(e[s]=r),e},{}),c=null==t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let s=t,{class:r,className:n}=s,i=d(s,["class","className"]);return Object.entries(i).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes(l(l({},a),o)[t]):l(l({},a),o)[t]===s})?[...e,r,n]:e},[]);return Io(e,i,c,null==s?void 0:s.class,null==s?void 0:s.className)},Uo=Lo("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),zo=m.forwardRef((e,t)=>{var s=e,{className:r,variant:n,size:a,asChild:i=!1}=s,o=d(s,["className","variant","size","asChild"]);const c=i?M:"button";return p.jsx(c,l({className:Di(Uo({variant:n,size:a,className:r})),ref:t},o))});function Bo({postId:e,className:t="",song:s=null}){const[r,n]=m.useState(!0),[a,i]=m.useState(null),[o,l]=m.useState(0),[c,d]=m.useState(0),u=m.useRef(null),h=m.useRef(null),f=m.useRef(null),g=6e3,x=()=>{f.current&&(window.clearTimeout(f.current),f.current=null)};m.useEffect(()=>{if(e)return n(!0),i(null),l(0),d(e=>e+1),x(),f.current=window.setTimeout(()=>{v("Timeout: Chargement trop lent")},g),x},[e]);const v=(e="Erro ao carregar vídeo TikTok")=>{x(),o<1?setTimeout(()=>{l(e=>e+1),d(e=>e+1),n(!0),i(null),f.current=window.setTimeout(()=>{v("Timeout sur retry")},g)},300):(n(!1),i(e))},b=()=>{i(null),l(0),d(e=>e+1),n(!0),f.current=window.setTimeout(()=>{v("Timeout sur retry manuel")},g)};return m.useEffect(()=>x,[]),e?a?p.jsxs("div",{className:`bg-red-50 border border-red-200 rounded-2xl p-6 text-center ${t}`,children:[p.jsx(os,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),p.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Erro ao carregar"}),p.jsx("p",{className:"text-red-600 mb-4",children:a}),p.jsxs("div",{className:"flex gap-2 justify-center flex-wrap",children:[p.jsxs("button",{onClick:b,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[p.jsx(Ss,{className:"w-4 h-4"}),"Tentar Novamente"]}),s&&s.tiktok_url&&p.jsxs("a",{href:s.tiktok_url,target:"_blank",rel:"noopener noreferrer",className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[p.jsx(cs,{className:"w-4 h-4"}),"Abrir no TikTok"]})]})]}):p.jsx("div",{ref:h,className:`tiktok-video-container-optimized ${t}`,style:{width:"100%",maxWidth:"100%",position:"relative",backgroundColor:"#000",borderRadius:"16px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.15)",overflow:"hidden"},children:p.jsxs("div",{className:"tiktok-iframe-wrapper-optimized",style:{width:"100%",height:"0",paddingBottom:"177.78%",position:"relative",overflow:"hidden",borderRadius:"16px"},children:[p.jsx("iframe",{ref:u,src:`https://www.tiktok.com/embed/${e}?autoplay=0&muted=0&loop=1&controls=1&rel=0&modestbranding=1&playsinline=1&allowfullscreen=1`,title:`Vídeo TikTok ${e}`,className:"tiktok-iframe-optimized",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",border:"none",borderRadius:"16px",backgroundColor:"#000",overflow:"hidden",display:"block",zIndex:1,scrolling:"no",allowTransparency:"true",frameBorder:"0"},allow:"autoplay; fullscreen; picture-in-picture; encrypted-media; microphone; camera; geolocation; gyroscope; accelerometer",allowFullScreen:!0,onLoad:()=>{x(),n(!1),i(null)},onError:()=>{v("Erro interno do iframe TikTok")},sandbox:"allow-scripts allow-same-origin allow-presentation allow-popups allow-popups-to-escape-sandbox allow-forms allow-top-navigation",scrolling:"no",seamless:!0},c),r&&p.jsx("div",{className:"tiktok-loading-overlay-optimized",style:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2,borderRadius:"16px"},children:p.jsxs("div",{className:"text-center text-white",children:[p.jsx("div",{className:"loading-spinner-optimized mb-4",children:p.jsx(Ts,{className:"w-12 h-12 animate-spin mx-auto text-pink-500"})}),p.jsx("p",{className:"text-lg font-medium mb-2",children:"Carregando TikTok..."}),o>0&&p.jsxs("p",{className:"text-sm text-gray-300",children:["Tentativa ",o+1,"/",2]})]})})]})}):p.jsx("div",{className:`bg-gray-100 rounded-lg p-8 text-center ${t}`,children:p.jsx("p",{className:"text-gray-500",children:"ID TikTok manquant"})})}zo.displayName="Button";const qo={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 mês",other:"cerca de {{count}} meses"},xMonths:{one:"1 mês",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},Ho={date:Q({formats:{full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},defaultWidth:"full"}),time:Q({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:Q({formats:{full:"{{date}} 'às' {{time}}",long:"{{date}} 'às' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Wo={lastWeek:e=>{const t=e.getDay();return"'"+(0===t||6===t?"último":"última")+"' eeee 'às' p"},yesterday:"'ontem às' p",today:"'hoje às' p",tomorrow:"'amanhã às' p",nextWeek:"eeee 'às' p",other:"P"},Fo={ordinalNumber:(e,t)=>{const s=Number(e);return"week"===(null==t?void 0:t.unit)?s+"ª":s+"º"},era:ee({values:{narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},defaultWidth:"wide"}),quarter:ee({values:{narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:ee({values:{narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},defaultWidth:"wide"}),day:ee({values:{narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","terça","quarta","quinta","sexta","sábado"],wide:["domingo","segunda-feira","terça-feira","quarta-feira","quinta-feira","sexta-feira","sábado"]},defaultWidth:"wide"}),dayPeriod:ee({values:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},defaultFormattingWidth:"wide"})},Vo={code:"pt-BR",formatDistance:(e,t,s)=>{let r;const n=qo[e];return r="string"==typeof n?n:1===t?n.one:n.other.replace("{{count}}",String(t)),(null==s?void 0:s.addSuffix)?s.comparison&&s.comparison>0?"em "+r:"há "+r:r},formatLong:Ho,formatRelative:(e,t,s,r)=>{const n=Wo[e];return"function"==typeof n?n(t):n},localize:Fo,match:{ordinalNumber:se({matchPattern:/^(\d+)[ºªo]?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:te({matchPatterns:{narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},defaultParseWidth:"any"}),quarter:te({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:te({matchPatterns:{narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},defaultParseWidth:"any"}),day:te({matchPatterns:{narrow:/^(dom|[23456]ª?|s[aá]b)/i,short:/^(dom|[23456]ª?|s[aá]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[aá]b)/i,wide:/^(domingo|(segunda|ter[cç]a|quarta|quinta|sexta)([- ]feira)?|s[aá]bado)/i},defaultMatchWidth:"wide",parsePatterns:{short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[aá]b/i]},defaultParseWidth:"any"}),dayPeriod:te({matchPatterns:{narrow:/^(a|p|mn|md|(da) (manhã|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manhã|tarde|noite))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manhã/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function Ko(){const e=it(),[t,s]=m.useState(null),[r,n]=m.useState([]),[a,i]=m.useState(!0),[o,l]=m.useState(null),[c,d]=m.useState(null),[u,f]=m.useState(!1),[g,x]=m.useState(!1),[v,b]=m.useState(!1),[y,w]=m.useState(!1),[j,k]=m.useState(null),[_,N]=m.useState(null);m.useEffect(()=>{Ks.initialize();0===Ks.songs.getAll().length&&Ks.forceReset(),S(),T()},[]);const S=()=>h(null,null,function*(){i(!0),l(null);try{const e=yield Mi();s(e),N(e)}catch(e){l("Erro ao carregar a música da semana. Tente novamente.")}finally{i(!1)}}),T=()=>h(null,null,function*(){try{const e=yield Ei(),t=new Date,s=re(t),r=ne(t),a=e.filter(e=>{const t=ae(e.release_date);return ie(t,{start:s,end:r})});n(a)}catch(e){}}),C=()=>{S()},E=e=>{N(e),window.scrollTo({top:0,behavior:"smooth"})},M=e=>{k(e),w(!0)},P=()=>{const t=(()=>{const e=new Date;return e.setMonth(e.getMonth()-1),oe(e,"yyyy-MM")})();e(`/calendar?month=${t}`)};return a?p.jsxs("div",{className:"p-5 max-w-md mx-auto md:max-w-2xl lg:max-w-4xl",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-black text-white drop-shadow-lg mb-2",children:"Música da Segunda"}),p.jsx("p",{className:"text-white/80 font-medium text-lg md:text-xl drop-shadow-md",children:"Descubra música nova toda segunda-feira"})]}),p.jsx("div",{className:"flex items-center justify-center py-20",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),p.jsx("p",{className:"text-white/80",children:"Carregando música da semana..."})]})})]}):o?p.jsxs("div",{className:"p-5 max-w-md mx-auto md:max-w-2xl lg:max-w-4xl",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-black text-white drop-shadow-lg mb-2",children:"Música da Segunda"}),p.jsx("p",{className:"text-white/80 font-medium text-lg md:text-xl drop-shadow-md",children:"Descubra música nova toda segunda-feira"})]}),p.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-3xl p-6 text-center",children:[p.jsx(os,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),p.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Erro ao carregar"}),p.jsx("p",{className:"text-red-600 mb-4",children:o}),p.jsxs("button",{onClick:C,className:"inline-flex items-center gap-2 bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors",children:[p.jsx(Ss,{className:"w-4 h-4"}),"Tentar novamente"]})]})]}):p.jsxs("div",{className:"p-5 max-w-md mx-auto md:max-w-2xl lg:max-w-4xl",children:[p.jsx("div",{className:"lg:hidden text-center mb-8",children:p.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[p.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden border-4 border-white/20 shadow-xl flex-shrink-0",children:p.jsx("img",{src:"images/Musica da segunda.jpg",alt:"Logo Música da Segunda",className:"w-full h-full object-cover"})}),p.jsxs("div",{className:"text-left",children:[p.jsx("h1",{className:"text-2xl md:text-3xl font-black text-white drop-shadow-lg mb-1",children:"Música da Segunda"}),p.jsx("p",{className:"text-white/80 font-medium text-sm md:text-base drop-shadow-md",children:"Descubra música nova toda segunda-feira"})]})]})}),p.jsxs("div",{className:"hidden lg:grid lg:grid-cols-2 lg:gap-8 lg:mt-8",children:[p.jsxs("div",{className:"space-y-6",children:[_?p.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-lg",children:[p.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4 text-center",children:p.jsxs("button",{onClick:()=>M(_),className:"inline-flex items-center gap-2 hover:text-blue-600 transition-colors cursor-pointer",title:"Ver descrição da música",children:[p.jsx("span",{className:"text-2xl",children:"ℹ️"}),p.jsx("span",{children:_.title})]})}),p.jsx("p",{className:"text-gray-600 text-center mb-4",children:oe(ae(_.release_date),"dd/MM/yyyy",{locale:Vo})}),p.jsx("div",{className:"bg-black rounded-2xl overflow-hidden shadow-xl",children:_.tiktok_video_id?p.jsx("div",{className:"w-full",style:{aspectRatio:"9/16"},children:"7540762684149517590"===_.tiktok_video_id?p.jsx(Bo,{postId:_.tiktok_video_id,className:"w-full",song:_}):p.jsx("iframe",{src:`https://www.tiktok.com/embed/${_.tiktok_video_id}?autoplay=0&muted=0&loop=1&controls=1&rel=0&modestbranding=1&playsinline=1&allowfullscreen=1`,width:"100%",height:"100%",frameBorder:"0",allowFullScreen:!0,title:`TikTok Video - ${_.title}`,className:"w-full h-full",style:{width:"100%",height:"100%",border:"none",overflow:"hidden",borderRadius:"16px"},scrolling:"no",allow:"autoplay; fullscreen; picture-in-picture; encrypted-media; microphone; camera; geolocation; gyroscope; accelerometer",sandbox:"allow-scripts allow-same-origin allow-presentation allow-popups allow-popups-to-escape-sandbox allow-forms allow-top-navigation",seamless:!0})}):_.tiktok_url?p.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-800 to-gray-900",style:{aspectRatio:"9/16"},children:p.jsxs("div",{className:"text-center text-white",children:[p.jsx(_s,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),p.jsx("p",{className:"text-lg font-medium",children:"Vídeo TikTok"}),p.jsx("p",{className:"text-sm text-gray-400 mb-4",children:_.title}),p.jsx("a",{href:_.tiktok_url,target:"_blank",rel:"noopener noreferrer",className:"inline-block bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors",children:"Ver no TikTok"})]})}):p.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-800 to-gray-900",style:{aspectRatio:"9/16"},children:p.jsxs("div",{className:"text-center text-white",children:[p.jsx(ks,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),p.jsx("p",{className:"text-lg font-medium",children:"Vídeo não disponível"}),p.jsx("p",{className:"text-sm text-gray-400",children:_.title})]})})}),p.jsxs("div",{className:"mt-4 text-center",children:[p.jsx("h4",{className:"font-bold text-gray-800 text-lg mb-2",children:_.title}),p.jsx("p",{className:"text-gray-600",children:_.artist}),p.jsx("p",{className:"text-gray-500 text-sm mt-1",children:oe(ae(_.release_date),"dd/MM/yyyy",{locale:Vo})}),_!==t&&t&&p.jsx("button",{onClick:()=>E(t),className:"mt-3 text-blue-600 hover:text-blue-800 text-sm font-medium transition-colors",children:"← Voltar para Música da Semana"})]}),p.jsx("div",{className:"mt-6",children:p.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[p.jsx(zo,{variant:"outline",className:"bg-white/70 hover:bg-white/90 text-gray-700 font-semibold border-gray-300 py-3 rounded-2xl text-sm",onClick:()=>(k(_),void x(!0)),children:"Plataformas"}),p.jsx(zo,{variant:"outline",className:"bg-white/70 hover:bg-white/90 text-gray-700 font-semibold border-gray-300 py-3 rounded-2xl text-sm",onClick:()=>(k(_),void b(!0)),children:"Letras"}),p.jsx(zo,{variant:"outline",className:"bg-white/70 hover:bg-white/90 text-gray-700 font-semibold border-gray-300 py-3 rounded-2xl text-sm",onClick:()=>{return e=_,h(null,null,function*(){if(navigator.share)try{yield navigator.share({title:`${e.title} - ${e.artist}`,text:"Confira esta música incrível da Música da Segunda!",url:e.tiktok_url||window.location.href})}catch(Cd){}else{const t=`${e.title} - ${e.artist}\nConfira esta música incrível da Música da Segunda!`;navigator.clipboard.writeText(t),alert("Link copiado para a área de transferência!")}});var e},children:"Compartilhar"})]})})]}):p.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-lg",children:[p.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4 text-center",children:"ℹ️ Nenhuma música disponível"}),p.jsx("div",{className:"bg-gradient-to-br from-gray-100 to-gray-200 rounded-2xl flex items-center justify-center",style:{height:"min(70vh, 600px)",aspectRatio:"9/16"},children:p.jsxs("div",{className:"text-center text-gray-500",children:[p.jsx(ks,{className:"w-16 h-16 mx-auto mb-4"}),p.jsx("p",{className:"text-lg font-medium",children:"Nenhuma música disponível"}),p.jsx("p",{className:"text-sm",children:"Volte na segunda-feira!"})]})})]}),p.jsx($o,{})]}),p.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-lg",children:[p.jsx("div",{className:"mb-6",children:p.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-3",children:[p.jsx(ts,{className:"w-6 h-6 text-blue-600"}),"Músicas do Mês"]})}),r.length>0?p.jsx("div",{className:"space-y-4",children:r.map(e=>p.jsx("div",{className:"bg-white rounded-2xl p-4 shadow-md hover:shadow-lg transition-all duration-200 border border-gray-100",children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center flex-shrink-0 shadow-md hover:shadow-lg transition-all duration-200 cursor-pointer transform hover:scale-105",onClick:()=>E(e),title:"Clique para ver esta música na coluna de vídeo",children:p.jsx(_s,{className:"w-6 h-6 text-white"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("h3",{className:"text-xl font-bold text-gray-800 truncate",children:e.title}),p.jsx("p",{className:"text-gray-600 text-base font-medium mt-1",children:e.artist}),p.jsx("p",{className:"text-gray-500 text-sm font-medium mt-1",children:oe(ae(e.release_date),"dd/MM/yyyy",{locale:Vo})})]})]})},e.id))}):p.jsxs("div",{className:"text-center py-8",children:[p.jsx(ks,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),p.jsx("p",{className:"text-gray-500",children:"Nenhuma música publicada este mês ainda"})]}),p.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:p.jsxs("button",{onClick:P,className:"inline-flex items-center gap-2 text-gray-500 hover:text-gray-700 text-sm transition-colors group cursor-pointer",children:[p.jsx(ns,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"}),"Ver músicas de ",oe(new Date((new Date).setMonth((new Date).getMonth()-1)),"MMMM yyyy",{locale:Vo})]})})]})]}),p.jsxs("div",{className:"lg:hidden",children:[_?p.jsx("div",{className:"mb-6",children:p.jsx(Oo,{song:_,onShowDescription:M})}):p.jsxs("div",{className:"bg-white/20 rounded-3xl p-8 text-center",children:[p.jsx(ks,{className:"w-16 h-16 text-white/60 mx-auto mb-4"}),p.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Nenhuma música disponível"}),p.jsx("p",{className:"text-white/80",children:"A música da semana será publicada em breve. Volte na segunda-feira!"})]}),p.jsx($o,{}),p.jsx("div",{className:"mt-8",children:p.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-lg",children:[p.jsx("div",{className:"mb-6",children:p.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-3",children:[p.jsx(ts,{className:"w-6 h-6 text-blue-600"}),"Músicas do Mês"]})}),r.length>0?p.jsx("div",{className:"space-y-4",children:r.map(e=>p.jsx("div",{className:"bg-white rounded-2xl p-4 shadow-md hover:shadow-lg transition-all duration-200 border border-gray-100",children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center flex-shrink-0 shadow-md hover:shadow-lg transition-all duration-200 cursor-pointer transform hover:scale-105",onClick:()=>E(e),title:"Clique para ver esta música na coluna de vídeo",children:p.jsx(_s,{className:"w-6 h-6 text-white"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("h3",{className:"font-bold text-gray-800 text-lg truncate",children:e.title}),p.jsx("p",{className:"text-gray-600 text-base font-medium mt-1",children:e.artist}),p.jsx("p",{className:"text-gray-500 text-sm font-medium mt-1",children:oe(ae(e.release_date),"dd/MM/yyyy",{locale:Vo})})]})]})},e.id))}):p.jsxs("div",{className:"text-center py-8",children:[p.jsx(ks,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),p.jsx("p",{className:"text-gray-500",children:"Nenhuma música publicada este mês ainda"})]}),p.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:p.jsxs("button",{onClick:P,className:"inline-flex items-center gap-2 text-gray-500 hover:text-gray-700 text-sm transition-colors group cursor-pointer",children:[p.jsx(ns,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"}),"Ver músicas de ",oe(new Date((new Date).setMonth((new Date).getMonth()-1)),"MMMM yyyy",{locale:Vo})]})})]})})]}),u&&c&&p.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center p-4 z-50",children:p.jsx("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsxs("h2",{className:"text-3xl font-bold text-blue-900",children:["🎬 ",c.title]}),p.jsx("button",{onClick:()=>f(!1),className:"text-gray-500 hover:text-gray-700 text-2xl font-bold p-2 hover:bg-gray-100 rounded-full transition-colors",children:"✕"})]}),p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 border border-blue-200",children:[p.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-2",children:c.title}),p.jsx("p",{className:"text-blue-700 font-medium",children:c.artist}),p.jsxs("p",{className:"text-blue-600 text-sm",children:["📅 Lançamento: ",oe(ae(c.release_date),"dd/MM/yyyy",{locale:Vo})]})]}),c.tiktok_video_id&&p.jsx("div",{className:"bg-black rounded-xl overflow-hidden shadow-2xl",children:p.jsx("iframe",{src:`https://www.tiktok.com/embed/${c.tiktok_video_id}?autoplay=0&muted=0&loop=1&controls=1&rel=0&modestbranding=1&playsinline=1&allowfullscreen=1`,width:"100%",height:"500",frameBorder:"0",allowFullScreen:!0,title:`TikTok Video - ${c.title}`,className:"w-full"})}),p.jsxs("div",{className:"flex gap-4 justify-center",children:[p.jsx("button",{onClick:()=>window.open(c.tiktok_url,"_blank"),className:"bg-black text-white px-6 py-3 rounded-xl font-semibold hover:bg-gray-800 transition-colors flex items-center gap-2",children:"🎬 Ver no TikTok"}),p.jsx("button",{onClick:()=>f(!1),className:"bg-gray-200 text-gray-700 px-6 py-3 rounded-xl font-semibold hover:bg-gray-300 transition-colors",children:"Fechar"})]})]})]})})}),p.jsx(Ii,{open:g,onOpenChange:x,children:p.jsxs(zi,{className:"bg-[#f8f5f2] max-w-md",children:[p.jsx(Bi,{children:p.jsx(qi,{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:"🎵 Ouvir em outras plataformas"})}),j&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 border border-blue-200",children:[p.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-1",children:j.title}),p.jsx("p",{className:"text-blue-700 font-medium",children:j.artist})]}),p.jsxs("div",{className:"space-y-3",children:[j.spotify_url&&p.jsx("a",{href:j.spotify_url,target:"_blank",rel:"noopener noreferrer",className:"block",children:p.jsx(zo,{className:"w-full bg-[#1DB954] hover:bg-[#1ed760] text-white font-bold py-3 rounded-2xl text-sm transition-all duration-200 hover:scale-105",children:"🎧 Ouvir no Spotify"})}),j.apple_music_url&&p.jsx("a",{href:j.apple_music_url,target:"_blank",rel:"noopener noreferrer",className:"block",children:p.jsx(zo,{className:"w-full bg-gradient-to-r from-[#FA233B] to-[#FB5C74] hover:opacity-90 text-white font-bold py-3 rounded-2xl text-sm transition-all duration-200 hover:scale-105",children:"🎵 Ouvir no Apple Music"})}),j.youtube_url&&p.jsx("a",{href:j.youtube_url,target:"_blank",rel:"noopener noreferrer",className:"block",children:p.jsx(zo,{className:"w-full bg-[#FF0000] hover:bg-[#cc0000] text-white font-bold py-3 rounded-2xl text-sm transition-all duration-200 hover:scale-105",children:"📺 Assistir no YouTube"})}),!j.spotify_url&&!j.apple_music_url&&!j.youtube_url&&p.jsxs("div",{className:"text-center py-6",children:[p.jsx(ks,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),p.jsx("p",{className:"text-gray-600 font-medium",children:"Links de streaming em breve..."}),p.jsx("p",{className:"text-gray-500 text-sm",children:"Esta música será disponibilizada em breve nas principais plataformas."})]})]})]})]})}),p.jsx(Ro,{open:v,onOpenChange:b,song:j,title:"📝 Letras da Música",maxHeight:"h-52",showIcon:!1}),p.jsx(Ii,{open:y,onOpenChange:w,children:p.jsxs(zi,{className:"bg-[#f8f5f2] max-w-2xl max-h-[80vh]",children:[p.jsx(Bi,{children:p.jsx(qi,{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:"ℹ️ Descrição da Música"})}),j&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 border border-blue-200",children:[p.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-1",children:j.title}),p.jsx("p",{className:"text-blue-700 font-medium",children:j.artist}),p.jsxs("p",{className:"text-blue-600 text-sm",children:["📅 ",oe(ae(j.release_date),"dd/MM/yyyy",{locale:Vo})]})]}),p.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:j.description?p.jsx(Mo,{className:"h-60",children:p.jsx("div",{className:"pr-4",children:p.jsx("pre",{className:"text-gray-700 whitespace-pre-wrap font-sans text-sm leading-relaxed",children:j.description})})}):p.jsxs("div",{className:"text-center py-8",children:[p.jsx(ds,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),p.jsx("p",{className:"text-gray-600 font-medium",children:"Descrição não disponível"}),p.jsx("p",{className:"text-gray-500 text-sm",children:"A descrição desta música será adicionada em breve."})]})})]})]})})]})}function Jo(e){var t=e,{children:s}=t,r=d(t,["children"]);return p.jsx("span",c(l({},r),{className:"sr-only",style:{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"},children:s}))}function Go(){const[e,t]=m.useState([]),[s,r]=m.useState(new Date(2025,7,1)),[n,a]=m.useState(null),[i,o]=m.useState(!0);m.useEffect(()=>{let e=new URLSearchParams(window.location.search).get("month");if(!e){const t=window.location.search;if(t.includes("?/")){const s=t.split("?/")[1];if(s.includes("?")){const t=s.split("?")[1];e=new URLSearchParams(t).get("month")}}}if(e)try{const[t,s]=e.split("-").map(Number);t&&void 0!==s&&r(new Date(t,s-1,1))}catch(t){}},[]),m.useEffect(()=>{l()},[s]);const l=()=>h(null,null,function*(){try{o(!0);const e=s.getFullYear(),r=s.getMonth()+1,n=yield Ei(),a=(Array.isArray(n)?n:[]).filter(t=>{const s=ae(t.release_date);return s.getFullYear()===e&&s.getMonth()+1===r});a.sort((e,t)=>ae(t.release_date)-ae(e.release_date)),t(a)}catch(e){t([])}finally{o(!1)}}),c=re(s),d=ne(s);le({start:c,end:d});const u=t=>e.find(e=>{const s=ae(e.release_date);return ce(s,t)}),f=e=>{r(t=>{const s=new Date(t);return s.setMonth(t.getMonth()+e),s})},g=e=>1===de(e),x=e=>{const t=u(e),s=ce(e,new Date),r=g(e);let n="aspect-square flex flex-col items-center justify-center rounded-2xl text-sm font-bold transition-all duration-300 ";return t?"published"===t.status?n+="bg-[#32a2dc] text-white shadow-lg cursor-pointer hover:shadow-xl transform hover:scale-105 ":"draft"===t.status?n+="bg-orange-500 text-white shadow-lg cursor-pointer hover:shadow-xl transform hover:scale-105 ":n+="bg-gray-500 text-white shadow-lg cursor-pointer hover:shadow-xl transform hover:scale-105 ":n+=r?"bg-white/40 text-gray-600 border-2 border-dashed border-gray-400 ":"bg-white/20 text-gray-500 ",s&&(n+="ring-2 ring-white ring-opacity-60 "),n};if(i)return p.jsxs("div",{className:"p-5 max-w-md mx-auto animate-pulse",children:[p.jsx("div",{className:"h-12 bg-white/30 rounded-2xl mb-6"}),p.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:Array(42).fill(0).map((e,t)=>p.jsx("div",{className:"aspect-square bg-white/30 rounded-2xl"},t))})]});const v=(()=>{const e=(e=>{const t=re(e),s=de(t);return ue(t,-s)})(s),t=ne(s),r=de(t),n=ue(t,6-r);return le({start:e,end:n})})(),b=e=>{e&&e.id&&e.title&&a(e)};return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"p-5 max-w-md mx-auto",children:[p.jsx("div",{className:"lg:hidden text-center mb-8",children:p.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[p.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden border-4 border-white/20 shadow-xl flex-shrink-0",children:p.jsx("img",{src:"images/Musica da segunda.jpg",alt:"Logo Música da Segunda",className:"w-full h-full object-cover"})}),p.jsxs("div",{className:"text-left",children:[p.jsx("h1",{className:"text-2xl md:text-3xl font-black text-white drop-shadow-lg mb-1",children:"Agenda Musical"}),p.jsx("p",{className:"text-white/80 font-medium text-sm md:text-base drop-shadow-md",children:"Acompanhe todas as músicas da segunda"})]})]})}),p.jsxs("div",{className:"bg-[#f8f5f2] rounded-3xl p-5 shadow-xl mb-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsx(zo,{variant:"ghost",size:"icon",onClick:()=>f(-1),className:"text-gray-600 hover:text-gray-800 hover:bg-white/60",children:p.jsx(ns,{className:"w-5 h-5"})}),p.jsx("h2",{className:"text-2xl font-black text-gray-800 capitalize",children:oe(s,"MMMM yyyy",{locale:Vo})}),p.jsx(zo,{variant:"ghost",size:"icon",onClick:()=>f(1),className:"text-gray-600 hover:text-gray-800 hover:bg-white/60",children:p.jsx(as,{className:"w-5 h-5"})})]}),p.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"].map(e=>p.jsx("div",{className:"text-center text-xs font-bold text-gray-500 py-2",children:e},e))}),p.jsx("div",{className:"grid grid-cols-7 gap-2",children:v.map(e=>{const t=u(e),r=g(e),n=e.getMonth()===s.getMonth();return p.jsxs("div",{className:`${x(e)} ${n?"":"opacity-40"}`,onClick:()=>t&&b(t),children:[p.jsx("span",{className:"text-xs",children:oe(e,"d")}),t&&p.jsxs("div",{className:"flex flex-col items-center mt-1",children:[p.jsx(ks,{className:"w-3 h-3"}),"draft"===t.status&&p.jsx("div",{className:"w-1 h-1 bg-white rounded-full mt-1 opacity-80"})]}),r&&!t&&n&&p.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full mt-1 opacity-60"})]},e.toISOString())})}),p.jsxs("div",{className:"mt-6 space-y-2 text-xs",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 bg-[#32a2dc] rounded-lg"}),p.jsx("span",{className:"text-gray-600 font-medium",children:"Música publicada"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 bg-white/40 border-2 border-dashed border-gray-400 rounded-lg"}),p.jsx("span",{className:"text-gray-600 font-medium",children:"Segunda-feira (aguardando)"})]}),n&&p.jsxs("div",{className:"text-xs text-gray-500 mt-2 p-2 bg-white/40 rounded-lg",children:[p.jsx("p",{className:"font-semibold",children:oe(ae(n.release_date),"dd 'de' MMMM 'de' yyyy - EEEE",{locale:Vo})}),p.jsxs("p",{children:[n.title," - ",n.artist]}),p.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Status: ","published"===n.status?"Publicada":"draft"===n.status?"Rascunho":"Arquivada"]})]})]})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("h3",{className:"text-xl font-bold text-white drop-shadow-lg",children:"Músicas do Mês"}),(()=>{const t=e.filter(e=>{const t=ae(e.release_date);return t.getMonth()===s.getMonth()&&t.getFullYear()===s.getFullYear()});return 0===t.length?p.jsxs("div",{className:"bg-[#f8f5f2] rounded-2xl p-6 text-center shadow-lg",children:[p.jsx(ks,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),p.jsxs("p",{className:"text-gray-600 font-medium",children:["Nenhuma música publicada em ",oe(s,"MMMM yyyy",{locale:Vo})]}),p.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"As músicas aparecerão aqui quando forem publicadas"})]}):t.map(e=>p.jsxs("div",{className:"bg-[#f8f5f2] rounded-2xl p-4 shadow-lg flex items-center gap-4 cursor-pointer hover:shadow-xl transition-all duration-300",onClick:()=>b(e),children:[p.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center "+("published"===e.status?"bg-[#32a2dc]":"draft"===e.status?"bg-orange-500":"bg-gray-500"),children:p.jsx(_s,{className:"w-6 h-6 text-white"})}),p.jsxs("div",{className:"flex-grow",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[p.jsx("p",{className:"font-bold text-gray-800",children:e.title}),p.jsx("span",{className:"text-xs px-2 py-1 rounded-full "+("published"===e.status?"bg-green-100 text-green-800":"draft"===e.status?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"),children:"published"===e.status?"Publicada":"draft"===e.status?"Rascunho":"Arquivada"})]}),p.jsx("p",{className:"text-sm text-gray-600",children:e.artist}),p.jsx("p",{className:"text-xs text-gray-400",children:oe(ae(e.release_date),"dd/MM/yyyy")})]})]},e.id))})()]})]}),p.jsx(Ii,{open:!!n,onOpenChange:e=>!e&&a(null),children:p.jsxs(zi,{className:"max-w-md p-0 border-0 bg-transparent max-h-[90vh] overflow-y-auto",children:[p.jsx(qi,{asChild:!0,children:p.jsx(Jo,{children:n?`${n.title} - ${n.artist}`:"Détails de la musique"})}),p.jsx(Hi,{asChild:!0,children:p.jsx(Jo,{children:n?`Détails de la musique ${n.title} par ${n.artist}`:"Détails de la musique"})}),p.jsx(Oo,{song:n,onClose:()=>a(null),onShowDescription:e=>{}})]})})]})}const Yo=({day:e,song:t,onOpen:s})=>{const r=new Date,n=new Date(2025,11,e),a=1!==e&&r<n;let i="relative aspect-square rounded-2xl flex items-center justify-center text-white font-black text-3xl transition-all duration-300 transform ";return i+=a?"bg-gray-400/50 text-gray-300 cursor-not-allowed":t?"bg-gradient-to-br from-red-500 to-rose-600 shadow-lg cursor-pointer hover:scale-105 hover:shadow-xl":"bg-teal-500/80",p.jsxs("div",{onClick:()=>{!a&&t&&s(t)},className:i,children:[p.jsx("span",{children:e}),a&&p.jsx(js,{className:"absolute w-8 h-8 opacity-70"}),!a&&t&&p.jsxs(p.Fragment,{children:[p.jsx(Ps,{className:"absolute top-2 right-2 w-5 h-5 text-yellow-300 animate-ping"}),p.jsx("div",{className:"absolute bottom-1 left-1 right-1 text-center",children:p.jsx("p",{className:"text-xs font-bold text-white drop-shadow-lg truncate",children:t.title})})]})]})};function Xo(){const[e,t]=m.useState([]),[s,r]=m.useState(null),n=Array.from({length:24},(e,t)=>t+1);m.useEffect(()=>{h(null,null,function*(){const e=yield $i();t(e)})},[]);const a=e.reduce((e,t)=>(e[t.day_of_december]=t,e),{}),i=(t=>{const s=`advent_day_${t}`,r=localStorage.getItem(s);if(r)return JSON.parse(r);if(0===e.length)return null;const n=e.filter(e=>e.tiktok_video_id);if(0===n.length)return null;const a=n[Math.floor(Math.random()*n.length)],i=c(l({},a),{day_of_december:t});return localStorage.setItem(s,JSON.stringify(i)),i})(1);i&&(a[1]=i);return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"p-5 max-w-md mx-auto",children:[p.jsx("div",{className:"lg:hidden text-center mb-8",children:p.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[p.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden border-4 border-white/20 shadow-xl flex-shrink-0",children:p.jsx("img",{src:"images/Musica da segunda.jpg",alt:"Logo Música da Segunda",className:"w-full h-full object-cover"})}),p.jsxs("div",{className:"text-left",children:[p.jsx("h1",{className:"text-2xl md:text-3xl font-black text-white drop-shadow-lg mb-1",children:"Calendário do Advento"}),p.jsx("p",{className:"text-white/80 font-medium text-sm md:text-base drop-shadow-md",children:"Dezembro 2025 - Uma surpresa a cada dia!"})]})]})}),p.jsx("div",{className:"bg-[#f8f5f2] rounded-3xl p-5 shadow-xl",children:p.jsx("div",{className:"grid grid-cols-4 gap-3",children:n.map(e=>p.jsx(Yo,{day:e,song:a[e],onOpen:r},e))})})]}),p.jsx(Ii,{open:!!s,onOpenChange:()=>r(null),children:p.jsx(zi,{className:"p-0 border-0 bg-transparent max-w-sm w-[90vw] max-h-[90vh] overflow-y-auto",children:p.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 rounded-3xl shadow-2xl overflow-hidden",children:[p.jsxs("div",{className:"bg-gradient-to-r from-red-500 to-rose-600 p-4 text-center relative",children:[p.jsx("div",{className:"absolute top-2 left-4 bg-white/20 rounded-full w-10 h-10 flex items-center justify-center",children:p.jsx("span",{className:"text-white font-black text-base",children:null==s?void 0:s.day_of_december})}),p.jsx("div",{className:"mt-1",children:p.jsxs("div",{className:"flex items-center justify-center gap-2",children:[p.jsx("h2",{className:"text-xl font-black text-white",children:(null==s?void 0:s.release_date)?oe(ae(s.release_date),"MMMM",{locale:Vo}):"Dezembro"}),p.jsx("span",{className:"text-white/90 text-lg font-semibold",children:(null==s?void 0:s.release_date)?oe(ae(s.release_date),"d",{locale:Vo}):null==s?void 0:s.day_of_december})]})}),p.jsx("div",{className:"absolute -bottom-4 left-1/2 transform -translate-x-1/2",children:p.jsx("div",{className:"bg-white rounded-full p-2 shadow-lg",children:p.jsx(ks,{className:"w-6 h-6 text-red-500"})})})]}),p.jsxs("div",{className:"p-4 pt-8",children:[p.jsxs("div",{className:"mb-4 bg-white/80 backdrop-blur-sm rounded-2xl p-3 shadow-sm",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[p.jsx(Ps,{className:"w-3 h-3 text-amber-500"}),p.jsx("span",{className:"font-bold text-gray-600 text-xs uppercase tracking-wide",children:"Nome da Vídeo"})]}),p.jsx("p",{className:"text-gray-800 leading-relaxed font-semibold text-base",children:(null==s?void 0:s.title)||"Vídeo Musical"}),(null==s?void 0:s.artist)&&p.jsx("p",{className:"text-gray-600 text-xs mt-1",children:s.artist})]}),(null==s?void 0:s.spotify_url)&&p.jsx("div",{className:"mb-6",children:p.jsx("iframe",{style:{borderRadius:"16px"},src:(e=>{if(!e)return"";try{const t=new URL(e).pathname.split("/");if(t.length>=3&&("track"===t[1]||"album"===t[1]))return`https://open.spotify.com/embed/${t[1]}/${t[2]}`}catch(Cd){}return""})(s.spotify_url),width:"100%",height:"352",frameBorder:"0",allowFullScreen:!0,allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"})}),(null==s?void 0:s.tiktok_video_id)&&p.jsxs("div",{className:"mb-4",children:["7540762684149517590"===s.tiktok_video_id?p.jsx(Bo,{postId:s.tiktok_video_id,song:s,className:"mb-2"}):p.jsx(Wi,{postId:s.tiktok_video_id,song:s,className:"mb-2"}),p.jsx("div",{className:"text-center",children:p.jsxs("p",{className:"text-xs text-gray-600 font-medium",children:["🎬 Vídeo TikTok - ",s.title]})})]}),p.jsxs("div",{className:"space-y-3",children:[(null==s?void 0:s.spotify_url)&&p.jsx("a",{href:s.spotify_url,target:"_blank",rel:"noopener noreferrer",children:p.jsxs(zo,{className:"w-full bg-[#1DB954] hover:bg-[#1ed760] text-white font-bold py-4 rounded-2xl shadow-lg transform hover:scale-105 transition-all duration-200",children:[p.jsx(ks,{className:"w-5 h-5 mr-3"}),"Ouvir no Spotify"]})}),(null==s?void 0:s.youtube_url)&&p.jsx("a",{href:s.youtube_url,target:"_blank",rel:"noopener noreferrer",children:p.jsxs(zo,{className:"w-full bg-[#FF0000] hover:bg-[#cc0000] text-white font-bold py-4 rounded-2xl shadow-lg transform hover:scale-105 transition-all duration-200",children:[p.jsx(zs,{className:"w-5 h-5 mr-3"}),"Ver no YouTube"]})})]}),p.jsx("div",{className:"mt-6 text-center",children:p.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400",children:[p.jsx(hs,{className:"w-4 h-4"}),p.jsx("span",{className:"text-xs font-medium",children:"Calendário do Advento Musical"}),p.jsx(hs,{className:"w-4 h-4"})]})})]})]})})})]})}function Zo(){return p.jsxs("div",{className:"p-5 max-w-4xl mx-auto",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("h1",{className:"text-2xl md:text-3xl font-black text-white drop-shadow-lg mb-2",children:"Sobre o Projeto"}),p.jsx("p",{className:"text-white/80 font-medium text-sm md:text-base drop-shadow-md",children:"Conheça a história por trás da Música da Segunda"})]}),p.jsxs("div",{className:"bg-white/80 rounded-3xl p-8 text-center mb-8",children:[p.jsx("div",{className:"w-32 h-32 mx-auto mb-6 rounded-full overflow-hidden shadow-2xl",children:p.jsx("img",{src:"images/Musica da segunda.jpg",alt:"Logo Música da Segunda",className:"w-full h-full object-cover"})}),p.jsx("h2",{className:"text-3xl font-black text-gray-800 mb-2",children:"Música da Segunda"}),p.jsx("p",{className:"text-gray-700 text-lg",children:"Descubra música nova toda segunda-feira"})]}),p.jsxs("div",{className:"bg-white/80 rounded-3xl p-6 mb-6",children:[p.jsxs("h3",{className:"text-2xl font-bold text-gray-800 mb-4 flex items-center gap-3",children:[p.jsx(fs,{className:"w-6 h-6 text-red-400"}),"Nossa Missão"]}),p.jsx("p",{className:"text-gray-700 leading-relaxed",children:"A Música da Segunda nasceu da paixão por descobrir e compartilhar música. Toda segunda-feira, apresentamos uma nova música incrível para começar sua semana com energia e inspiração. Queremos conectar pessoas através da música e criar uma comunidade apaixonada por descobertas musicais."})]}),p.jsxs("div",{className:"bg-white/80 rounded-3xl p-6 mb-6",children:[p.jsxs("h3",{className:"text-2xl font-bold text-gray-800 mb-4 flex items-center gap-3",children:[p.jsx(ks,{className:"w-6 h-6 text-blue-400"}),"Como Funciona"]}),p.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[p.jsxs("div",{className:"text-center p-4 bg-white/60 rounded-2xl",children:[p.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center mx-auto mb-3",children:p.jsx(ts,{className:"w-6 h-6 text-white"})}),p.jsx("h4",{className:"font-bold text-gray-800 mb-2",children:"Toda Segunda"}),p.jsx("p",{className:"text-gray-700 text-sm",children:"Uma nova música é selecionada e publicada"})]}),p.jsxs("div",{className:"text-center p-4 bg-white/60 rounded-2xl",children:[p.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-3",children:p.jsx(Ls,{className:"w-6 h-6 text-white"})}),p.jsx("h4",{className:"font-bold text-gray-800 mb-2",children:"Vídeo TikTok"}),p.jsx("p",{className:"text-gray-700 text-sm",children:"A música é apresentada em vídeo"})]}),p.jsxs("div",{className:"text-center p-4 bg-white/60 rounded-2xl",children:[p.jsx("div",{className:"w-12 h-12 bg-purple-500 rounded-full flex items-center justify-center mx-auto mb-3",children:p.jsx(Is,{className:"w-6 h-6 text-white"})}),p.jsx("h4",{className:"font-bold text-gray-800 mb-2",children:"Compartilhamento"}),p.jsx("p",{className:"text-gray-700 text-sm",children:"A comunidade descobre e compartilha"})]})]})]}),p.jsxs("div",{className:"bg-white/80 rounded-3xl p-6 mb-6",children:[p.jsxs("h3",{className:"text-2xl font-bold text-gray-800 mb-4 flex items-center gap-3",children:[p.jsx(As,{className:"w-6 h-6 text-yellow-400"}),"O Que Oferecemos"]}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),p.jsx("span",{className:"text-gray-700",children:"Música nova toda segunda-feira"})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),p.jsx("span",{className:"text-gray-700",children:"Vídeos TikTok integrados"})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full"}),p.jsx("span",{className:"text-gray-700",children:"Letras das músicas"})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-2 h-2 bg-red-400 rounded-full"}),p.jsx("span",{className:"text-gray-700",children:"Links para plataformas de streaming"})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-2 h-2 bg-orange-400 rounded-full"}),p.jsx("span",{className:"text-gray-700",children:"Calendário musical interativo"})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-2 h-2 bg-pink-400 rounded-full"}),p.jsx("span",{className:"text-gray-700",children:"Interface responsiva e moderna"})]})]})]}),p.jsxs("div",{className:"bg-white/80 rounded-3xl p-6 mb-6",children:[p.jsxs("h3",{className:"text-2xl font-bold text-gray-800 mb-4 flex items-center gap-3",children:[p.jsx(es,{className:"w-6 h-6 text-green-400"}),"Tecnologia"]}),p.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:"Este projeto foi desenvolvido com as mais modernas tecnologias web para garantir uma experiência excepcional em todos os dispositivos."}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"bg-white/10 rounded-2xl p-4",children:[p.jsx("h4",{className:"font-bold text-white mb-2",children:"Frontend"}),p.jsxs("div",{className:"space-y-1 text-sm text-white/80",children:[p.jsx("div",{children:"• React 18 + Vite"}),p.jsx("div",{children:"• Tailwind CSS"}),p.jsx("div",{children:"• Radix UI Components"}),p.jsx("div",{children:"• Responsive Design"})]})]}),p.jsxs("div",{className:"bg-white/10 rounded-2xl p-4",children:[p.jsx("h4",{className:"font-bold text-white mb-2",children:"Funcionalidades"}),p.jsxs("div",{className:"space-y-1 text-sm text-white/80",children:[p.jsx("div",{children:"• TikTok Integration"}),p.jsx("div",{children:"• Music Calendar"}),p.jsx("div",{children:"• Lyrics Display"}),p.jsx("div",{children:"• Social Sharing"})]})]})]})]}),p.jsxs("div",{className:"bg-white/20 rounded-3xl p-6 mb-6",children:[p.jsxs("h3",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-3",children:[p.jsx(vs,{className:"w-6 h-6 text-pink-400"}),"Redes Sociais"]}),p.jsx("p",{className:"text-white/90 mb-4",children:"Siga-nos nas redes sociais para ficar por dentro de todas as novidades!"}),p.jsxs("div",{className:"flex justify-center gap-4",children:[p.jsx("a",{href:"https://www.tiktok.com/@amusicadasegunda",target:"_blank",rel:"noopener noreferrer",className:"bg-black text-white p-3 rounded-full hover:bg-gray-800 transition-colors",children:p.jsx(Ls,{className:"w-6 h-6"})}),p.jsx("a",{href:"#",className:"bg-gradient-to-r from-purple-400 to-pink-400 text-white p-3 rounded-full hover:opacity-80 transition-opacity",children:p.jsx(vs,{className:"w-6 h-6"})}),p.jsx("a",{href:"#",className:"bg-red-600 text-white p-3 rounded-full hover:bg-red-700 transition-colors",children:p.jsx(zs,{className:"w-6 h-6"})})]})]}),p.jsxs("div",{className:"bg-white/20 rounded-3xl p-6 text-center",children:[p.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Entre em Contato"}),p.jsx("p",{className:"text-white/90 mb-4",children:"Tem sugestões, críticas ou quer participar do projeto?"}),p.jsxs("p",{className:"text-white/80 text-sm",children:["Envie uma mensagem para: ",p.jsx("span",{className:"font-semibold",children:"contato@musicadasegunda.com"})]})]})]})}const Qo=m.forwardRef((e,t)=>{var s=e,{className:r}=s,n=d(s,["className"]);return p.jsx("div",l({ref:t,className:Di("rounded-xl border bg-card text-card-foreground shadow",r)},n))});Qo.displayName="Card";const el=m.forwardRef((e,t)=>{var s=e,{className:r}=s,n=d(s,["className"]);return p.jsx("div",l({ref:t,className:Di("flex flex-col space-y-1.5 p-6",r)},n))});el.displayName="CardHeader";const tl=m.forwardRef((e,t)=>{var s=e,{className:r}=s,n=d(s,["className"]);return p.jsx("div",l({ref:t,className:Di("font-semibold leading-none tracking-tight",r)},n))});tl.displayName="CardTitle";m.forwardRef((e,t)=>{var s=e,{className:r}=s,n=d(s,["className"]);return p.jsx("div",l({ref:t,className:Di("text-sm text-muted-foreground",r)},n))}).displayName="CardDescription";const sl=m.forwardRef((e,t)=>{var s=e,{className:r}=s,n=d(s,["className"]);return p.jsx("div",l({ref:t,className:Di("p-6 pt-0",r)},n))});sl.displayName="CardContent";m.forwardRef((e,t)=>{var s=e,{className:r}=s,n=d(s,["className"]);return p.jsx("div",l({ref:t,className:Di("flex items-center p-6 pt-0",r)},n))}).displayName="CardFooter";const rl=Lo("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function nl(e){var t=e,{className:s,variant:r}=t,n=d(t,["className","variant"]);return p.jsx("div",l({className:Di(rl({variant:r}),s)},n))}var al=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"});m.forwardRef((e,t)=>p.jsx(N.span,c(l({},e),{ref:t,style:l(l({},al),e.style)}))).displayName="VisuallyHidden";var il=[" ","Enter","ArrowUp","ArrowDown"],ol=[" ","Enter"],ll="Select",[cl,dl,ul]=R(ll),[hl,ml]=_(ll,[ul,P]),pl=P(),[fl,gl]=hl(ll),[xl,vl]=hl(ll),bl=e=>{const{__scopeSelect:t,children:s,open:r,defaultOpen:n,onOpenChange:a,value:i,defaultValue:o,onValueChange:d,dir:u,name:h,autoComplete:f,disabled:g,required:x,form:v}=e,b=pl(t),[y,w]=m.useState(null),[j,_]=m.useState(null),[N,S]=m.useState(!1),T=k(u),[C,E]=W({prop:r,defaultProp:null!=n&&n,onChange:a,caller:ll}),[M,P]=W({prop:i,defaultProp:o,onChange:d,caller:ll}),R=m.useRef(null),A=!y||(v||!!y.closest("form")),[O,$]=m.useState(new Set),I=Array.from(O).map(e=>e.props.value).join(";");return p.jsx(F,c(l({},b),{children:p.jsxs(fl,{required:x,scope:t,trigger:y,onTriggerChange:w,valueNode:j,onValueNodeChange:_,valueNodeHasChildren:N,onValueNodeHasChildrenChange:S,contentId:D(),value:M,onValueChange:P,open:C,onOpenChange:E,dir:T,triggerPointerDownPosRef:R,disabled:g,children:[p.jsx(cl.Provider,{scope:t,children:p.jsx(xl,{scope:e.__scopeSelect,onNativeOptionAdd:m.useCallback(e=>{$(t=>new Set(t).add(e))},[]),onNativeOptionRemove:m.useCallback(e=>{$(t=>{const s=new Set(t);return s.delete(e),s})},[]),children:s})}),A?p.jsxs(ac,{"aria-hidden":!0,required:x,tabIndex:-1,name:h,autoComplete:f,value:M,onChange:e=>P(e.target.value),disabled:g,form:v,children:[void 0===M?p.jsx("option",{value:""}):null,Array.from(O)]},I):null]})}))};bl.displayName=ll;var yl="SelectTrigger",wl=m.forwardRef((e,t)=>{const s=e,{__scopeSelect:r,disabled:n=!1}=s,a=d(s,["__scopeSelect","disabled"]),i=pl(r),o=gl(yl,r),u=o.disabled||n,h=j(t,o.onTriggerChange),f=dl(r),g=m.useRef("touch"),[x,v,b]=oc(e=>{const t=f().filter(e=>!e.disabled),s=t.find(e=>e.value===o.value),r=lc(t,e,s);void 0!==r&&o.onValueChange(r.value)}),y=e=>{u||(o.onOpenChange(!0),b()),e&&(o.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return p.jsx(A,c(l({asChild:!0},i),{children:p.jsx(N.button,c(l({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":ic(o.value)?"":void 0},a),{ref:h,onClick:T(a.onClick,e=>{e.currentTarget.focus(),"mouse"!==g.current&&y(e)}),onPointerDown:T(a.onPointerDown,e=>{g.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(y(e),e.preventDefault())}),onKeyDown:T(a.onKeyDown,e=>{const t=""!==x.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||v(e.key),t&&" "===e.key||il.includes(e.key)&&(y(),e.preventDefault())})}))}))});wl.displayName=yl;var jl="SelectValue",kl=m.forwardRef((e,t)=>{const s=e,{__scopeSelect:r,className:n,style:a,children:i,placeholder:o=""}=s,u=d(s,["__scopeSelect","className","style","children","placeholder"]),h=gl(jl,r),{onValueNodeHasChildrenChange:m}=h,f=void 0!==i,g=j(t,h.onValueNodeChange);return E(()=>{m(f)},[m,f]),p.jsx(N.span,c(l({},u),{ref:g,style:{pointerEvents:"none"},children:ic(h.value)?p.jsx(p.Fragment,{children:o}):i}))});kl.displayName=jl;var _l=m.forwardRef((e,t)=>{const s=e,{__scopeSelect:r,children:n}=s,a=d(s,["__scopeSelect","children"]);return p.jsx(N.span,c(l({"aria-hidden":!0},a),{ref:t,children:n||"▼"}))});_l.displayName="SelectIcon";var Nl=e=>p.jsx(O,l({asChild:!0},e));Nl.displayName="SelectPortal";var Sl="SelectContent",Tl=m.forwardRef((e,t)=>{const s=gl(Sl,e.__scopeSelect),[r,n]=m.useState();if(E(()=>{n(new DocumentFragment)},[]),!s.open){const t=r;return t?$.createPortal(p.jsx(El,{scope:e.__scopeSelect,children:p.jsx(cl.Slot,{scope:e.__scopeSelect,children:p.jsx("div",{children:e.children})})}),t):null}return p.jsx(Rl,c(l({},e),{ref:t}))});Tl.displayName=Sl;var Cl=10,[El,Ml]=hl(Sl),Pl=z("SelectContent.RemoveScroll"),Rl=m.forwardRef((e,t)=>{const s=e,{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:u,sideOffset:h,align:f,alignOffset:g,arrowPadding:x,collisionBoundary:v,collisionPadding:b,sticky:y,hideWhenDetached:w,avoidCollisions:k}=s,_=d(s,["__scopeSelect","position","onCloseAutoFocus","onEscapeKeyDown","onPointerDownOutside","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions"]),N=gl(Sl,r),[S,C]=m.useState(null),[E,M]=m.useState(null),P=j(t,e=>C(e)),[R,A]=m.useState(null),[O,$]=m.useState(null),D=dl(r),[z,H]=m.useState(!1),W=m.useRef(!1);m.useEffect(()=>{if(S)return I(S)},[S]),L();const F=m.useCallback(e=>{const[t,...s]=D().map(e=>e.ref.current),[r]=s.slice(-1),n=document.activeElement;for(const a of e){if(a===n)return;if(null==a||a.scrollIntoView({block:"nearest"}),a===t&&E&&(E.scrollTop=0),a===r&&E&&(E.scrollTop=E.scrollHeight),null==a||a.focus(),document.activeElement!==n)return}},[D,E]),V=m.useCallback(()=>F([R,S]),[F,R,S]);m.useEffect(()=>{z&&V()},[z,V]);const{onOpenChange:K,triggerPointerDownPosRef:J}=N;m.useEffect(()=>{if(S){let e={x:0,y:0};const t=t=>{var s,r,n,a;e={x:Math.abs(Math.round(t.pageX)-(null!=(r=null==(s=J.current)?void 0:s.x)?r:0)),y:Math.abs(Math.round(t.pageY)-(null!=(a=null==(n=J.current)?void 0:n.y)?a:0))}},s=s=>{e.x<=10&&e.y<=10?s.preventDefault():S.contains(s.target)||K(!1),document.removeEventListener("pointermove",t),J.current=null};return null!==J.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",s,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",s,{capture:!0})}}},[S,K,J]),m.useEffect(()=>{const e=()=>K(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[K]);const[G,Y]=oc(e=>{const t=D().filter(e=>!e.disabled),s=t.find(e=>e.ref.current===document.activeElement),r=lc(t,e,s);r&&setTimeout(()=>r.ref.current.focus())}),X=m.useCallback((e,t,s)=>{const r=!W.current&&!s;(void 0!==N.value&&N.value===t||r)&&(A(e),r&&(W.current=!0))},[N.value]),Z=m.useCallback(()=>null==S?void 0:S.focus(),[S]),Q=m.useCallback((e,t,s)=>{const r=!W.current&&!s;(void 0!==N.value&&N.value===t||r)&&$(e)},[N.value]),ee="popper"===n?Ol:Al,te=ee===Ol?{side:u,sideOffset:h,align:f,alignOffset:g,arrowPadding:x,collisionBoundary:v,collisionPadding:b,sticky:y,hideWhenDetached:w,avoidCollisions:k}:{};return p.jsx(El,{scope:r,content:S,viewport:E,onViewportChange:M,itemRefCallback:X,selectedItem:R,onItemLeave:Z,itemTextRefCallback:Q,focusSelectedItem:V,selectedItemText:O,position:n,isPositioned:z,searchRef:G,children:p.jsx(U,{as:Pl,allowPinchZoom:!0,children:p.jsx(B,{asChild:!0,trapped:N.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:T(a,e=>{var t;null==(t=N.trigger)||t.focus({preventScroll:!0}),e.preventDefault()}),children:p.jsx(q,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>N.onOpenChange(!1),children:p.jsx(ee,c(l(l({role:"listbox",id:N.contentId,"data-state":N.open?"open":"closed",dir:N.dir,onContextMenu:e=>e.preventDefault()},_),te),{onPlaced:()=>H(!0),ref:P,style:l({display:"flex",flexDirection:"column",outline:"none"},_.style),onKeyDown:T(_.onKeyDown,e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||Y(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=D().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const s=e.target,r=t.indexOf(s);t=t.slice(r+1)}setTimeout(()=>F(t)),e.preventDefault()}})}))})})})})});Rl.displayName="SelectContentImpl";var Al=m.forwardRef((e,t)=>{const s=e,{__scopeSelect:r,onPlaced:n}=s,a=d(s,["__scopeSelect","onPlaced"]),i=gl(Sl,r),o=Ml(Sl,r),[u,h]=m.useState(null),[f,g]=m.useState(null),x=j(t,e=>g(e)),v=dl(r),b=m.useRef(!1),y=m.useRef(!0),{viewport:w,selectedItem:k,selectedItemText:_,focusSelectedItem:S}=o,T=m.useCallback(()=>{if(i.trigger&&i.valueNode&&u&&f&&w&&k&&_){const e=i.trigger.getBoundingClientRect(),t=f.getBoundingClientRect(),s=i.valueNode.getBoundingClientRect(),r=_.getBoundingClientRect();if("rtl"!==i.dir){const n=r.left-t.left,a=s.left-n,i=e.left-a,o=e.width+i,l=Math.max(o,t.width),c=window.innerWidth-Cl,d=Fi(a,[Cl,Math.max(Cl,c-l)]);u.style.minWidth=o+"px",u.style.left=d+"px"}else{const n=t.right-r.right,a=window.innerWidth-s.right-n,i=window.innerWidth-e.right-a,o=e.width+i,l=Math.max(o,t.width),c=window.innerWidth-Cl,d=Fi(a,[Cl,Math.max(Cl,c-l)]);u.style.minWidth=o+"px",u.style.right=d+"px"}const a=v(),o=window.innerHeight-2*Cl,l=w.scrollHeight,c=window.getComputedStyle(f),d=parseInt(c.borderTopWidth,10),h=parseInt(c.paddingTop,10),m=parseInt(c.borderBottomWidth,10),p=d+h+l+parseInt(c.paddingBottom,10)+m,g=Math.min(5*k.offsetHeight,p),x=window.getComputedStyle(w),y=parseInt(x.paddingTop,10),j=parseInt(x.paddingBottom,10),N=e.top+e.height/2-Cl,S=o-N,T=k.offsetHeight/2,C=d+h+(k.offsetTop+T),E=p-C;if(C<=N){const e=a.length>0&&k===a[a.length-1].ref.current;u.style.bottom="0px";const t=f.clientHeight-w.offsetTop-w.offsetHeight,s=C+Math.max(S,T+(e?j:0)+t+m);u.style.height=s+"px"}else{const e=a.length>0&&k===a[0].ref.current;u.style.top="0px";const t=Math.max(N,d+w.offsetTop+(e?y:0)+T)+E;u.style.height=t+"px",w.scrollTop=C-N+w.offsetTop}u.style.margin=`${Cl}px 0`,u.style.minHeight=g+"px",u.style.maxHeight=o+"px",null==n||n(),requestAnimationFrame(()=>b.current=!0)}},[v,i.trigger,i.valueNode,u,f,w,k,_,i.dir,n]);E(()=>T(),[T]);const[C,M]=m.useState();E(()=>{f&&M(window.getComputedStyle(f).zIndex)},[f]);const P=m.useCallback(e=>{e&&!0===y.current&&(T(),null==S||S(),y.current=!1)},[T,S]);return p.jsx($l,{scope:r,contentWrapper:u,shouldExpandOnScrollRef:b,onScrollButtonChange:P,children:p.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:p.jsx(N.div,c(l({},a),{ref:x,style:l({boxSizing:"border-box",maxHeight:"100%"},a.style)}))})})});Al.displayName="SelectItemAlignedPosition";var Ol=m.forwardRef((e,t)=>{const s=e,{__scopeSelect:r,align:n="start",collisionPadding:a=Cl}=s,i=d(s,["__scopeSelect","align","collisionPadding"]),o=pl(r);return p.jsx(H,c(l(l({},o),i),{ref:t,align:n,collisionPadding:a,style:l(l({boxSizing:"border-box"},i.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))});Ol.displayName="SelectPopperPosition";var[$l,Dl]=hl(Sl,{}),Il="SelectViewport",Ll=m.forwardRef((e,t)=>{const s=e,{__scopeSelect:r,nonce:n}=s,a=d(s,["__scopeSelect","nonce"]),i=Ml(Il,r),o=Dl(Il,r),u=j(t,i.onViewportChange),h=m.useRef(0);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),p.jsx(cl.Slot,{scope:r,children:p.jsx(N.div,c(l({"data-radix-select-viewport":"",role:"presentation"},a),{ref:u,style:l({position:"relative",flex:1,overflow:"hidden auto"},a.style),onScroll:T(a.onScroll,e=>{const t=e.currentTarget,{contentWrapper:s,shouldExpandOnScrollRef:r}=o;if((null==r?void 0:r.current)&&s){const e=Math.abs(h.current-t.scrollTop);if(e>0){const r=window.innerHeight-2*Cl,n=parseFloat(s.style.minHeight),a=parseFloat(s.style.height),i=Math.max(n,a);if(i<r){const n=i+e,a=Math.min(r,n),o=n-a;s.style.height=a+"px","0px"===s.style.bottom&&(t.scrollTop=o>0?o:0,s.style.justifyContent="flex-end")}}}h.current=t.scrollTop})}))})]})});Ll.displayName=Il;var Ul="SelectGroup",[zl,Bl]=hl(Ul);m.forwardRef((e,t)=>{const s=e,{__scopeSelect:r}=s,n=d(s,["__scopeSelect"]),a=D();return p.jsx(zl,{scope:r,id:a,children:p.jsx(N.div,c(l({role:"group","aria-labelledby":a},n),{ref:t}))})}).displayName=Ul;var ql="SelectLabel",Hl=m.forwardRef((e,t)=>{const s=e,{__scopeSelect:r}=s,n=d(s,["__scopeSelect"]),a=Bl(ql,r);return p.jsx(N.div,c(l({id:a.id},n),{ref:t}))});Hl.displayName=ql;var Wl="SelectItem",[Fl,Vl]=hl(Wl),Kl=m.forwardRef((e,t)=>{const s=e,{__scopeSelect:r,value:n,disabled:a=!1,textValue:i}=s,o=d(s,["__scopeSelect","value","disabled","textValue"]),u=gl(Wl,r),h=Ml(Wl,r),f=u.value===n,[g,x]=m.useState(null!=i?i:""),[v,b]=m.useState(!1),y=j(t,e=>{var t;return null==(t=h.itemRefCallback)?void 0:t.call(h,e,n,a)}),w=D(),k=m.useRef("touch"),_=()=>{a||(u.onValueChange(n),u.onOpenChange(!1))};if(""===n)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return p.jsx(Fl,{scope:r,value:n,disabled:a,textId:w,isSelected:f,onItemTextChange:m.useCallback(e=>{x(t=>{var s;return t||(null!=(s=null==e?void 0:e.textContent)?s:"").trim()})},[]),children:p.jsx(cl.ItemSlot,{scope:r,value:n,disabled:a,textValue:g,children:p.jsx(N.div,c(l({role:"option","aria-labelledby":w,"data-highlighted":v?"":void 0,"aria-selected":f&&v,"data-state":f?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1},o),{ref:y,onFocus:T(o.onFocus,()=>b(!0)),onBlur:T(o.onBlur,()=>b(!1)),onClick:T(o.onClick,()=>{"mouse"!==k.current&&_()}),onPointerUp:T(o.onPointerUp,()=>{"mouse"===k.current&&_()}),onPointerDown:T(o.onPointerDown,e=>{k.current=e.pointerType}),onPointerMove:T(o.onPointerMove,e=>{var t;k.current=e.pointerType,a?null==(t=h.onItemLeave)||t.call(h):"mouse"===k.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:T(o.onPointerLeave,e=>{var t;e.currentTarget===document.activeElement&&(null==(t=h.onItemLeave)||t.call(h))}),onKeyDown:T(o.onKeyDown,e=>{var t;""!==(null==(t=h.searchRef)?void 0:t.current)&&" "===e.key||(ol.includes(e.key)&&_()," "===e.key&&e.preventDefault())})}))})})});Kl.displayName=Wl;var Jl="SelectItemText",Gl=m.forwardRef((e,t)=>{const s=e,{__scopeSelect:r,className:n,style:a}=s,i=d(s,["__scopeSelect","className","style"]),o=gl(Jl,r),u=Ml(Jl,r),h=Vl(Jl,r),f=vl(Jl,r),[g,x]=m.useState(null),v=j(t,e=>x(e),h.onItemTextChange,e=>{var t;return null==(t=u.itemTextRefCallback)?void 0:t.call(u,e,h.value,h.disabled)}),b=null==g?void 0:g.textContent,y=m.useMemo(()=>p.jsx("option",{value:h.value,disabled:h.disabled,children:b},h.value),[h.disabled,h.value,b]),{onNativeOptionAdd:w,onNativeOptionRemove:k}=f;return E(()=>(w(y),()=>k(y)),[w,k,y]),p.jsxs(p.Fragment,{children:[p.jsx(N.span,c(l({id:h.textId},i),{ref:v})),h.isSelected&&o.valueNode&&!o.valueNodeHasChildren?$.createPortal(i.children,o.valueNode):null]})});Gl.displayName=Jl;var Yl="SelectItemIndicator",Xl=m.forwardRef((e,t)=>{const s=e,{__scopeSelect:r}=s,n=d(s,["__scopeSelect"]);return Vl(Yl,r).isSelected?p.jsx(N.span,c(l({"aria-hidden":!0},n),{ref:t})):null});Xl.displayName=Yl;var Zl="SelectScrollUpButton",Ql=m.forwardRef((e,t)=>{const s=Ml(Zl,e.__scopeSelect),r=Dl(Zl,e.__scopeSelect),[n,a]=m.useState(!1),i=j(t,r.onScrollButtonChange);return E(()=>{if(s.viewport&&s.isPositioned){let e=function(){const e=t.scrollTop>0;a(e)};const t=s.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[s.viewport,s.isPositioned]),n?p.jsx(sc,c(l({},e),{ref:i,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=s;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}})):null});Ql.displayName=Zl;var ec="SelectScrollDownButton",tc=m.forwardRef((e,t)=>{const s=Ml(ec,e.__scopeSelect),r=Dl(ec,e.__scopeSelect),[n,a]=m.useState(!1),i=j(t,r.onScrollButtonChange);return E(()=>{if(s.viewport&&s.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,s=Math.ceil(t.scrollTop)<e;a(s)};const t=s.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[s.viewport,s.isPositioned]),n?p.jsx(sc,c(l({},e),{ref:i,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=s;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}})):null});tc.displayName=ec;var sc=m.forwardRef((e,t)=>{const s=e,{__scopeSelect:r,onAutoScroll:n}=s,a=d(s,["__scopeSelect","onAutoScroll"]),i=Ml("SelectScrollButton",r),o=m.useRef(null),u=dl(r),h=m.useCallback(()=>{null!==o.current&&(window.clearInterval(o.current),o.current=null)},[]);return m.useEffect(()=>()=>h(),[h]),E(()=>{var e;const t=u().find(e=>e.ref.current===document.activeElement);null==(e=null==t?void 0:t.ref.current)||e.scrollIntoView({block:"nearest"})},[u]),p.jsx(N.div,c(l({"aria-hidden":!0},a),{ref:t,style:l({flexShrink:0},a.style),onPointerDown:T(a.onPointerDown,()=>{null===o.current&&(o.current=window.setInterval(n,50))}),onPointerMove:T(a.onPointerMove,()=>{var e;null==(e=i.onItemLeave)||e.call(i),null===o.current&&(o.current=window.setInterval(n,50))}),onPointerLeave:T(a.onPointerLeave,()=>{h()})}))}),rc=m.forwardRef((e,t)=>{const s=e,{__scopeSelect:r}=s,n=d(s,["__scopeSelect"]);return p.jsx(N.div,c(l({"aria-hidden":!0},n),{ref:t}))});rc.displayName="SelectSeparator";var nc="SelectArrow";m.forwardRef((e,t)=>{const s=e,{__scopeSelect:r}=s,n=d(s,["__scopeSelect"]),a=pl(r),i=gl(nc,r),o=Ml(nc,r);return i.open&&"popper"===o.position?p.jsx(V,c(l(l({},a),n),{ref:t})):null}).displayName=nc;var ac=m.forwardRef((e,t)=>{var s=e,{__scopeSelect:r,value:n}=s,a=d(s,["__scopeSelect","value"]);const i=m.useRef(null),o=j(t,i),u=function(e){const t=m.useRef({value:e,previous:e});return m.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}(n);return m.useEffect(()=>{const e=i.current;if(!e)return;const t=window.HTMLSelectElement.prototype,s=Object.getOwnPropertyDescriptor(t,"value").set;if(u!==n&&s){const t=new Event("change",{bubbles:!0});s.call(e,n),e.dispatchEvent(t)}},[u,n]),p.jsx(N.select,c(l({},a),{style:l(l({},al),a.style),ref:o,defaultValue:n}))});function ic(e){return""===e||void 0===e}function oc(e){const t=C(e),s=m.useRef(""),r=m.useRef(0),n=m.useCallback(e=>{const n=s.current+e;t(n),function e(t){s.current=t,window.clearTimeout(r.current),""!==t&&(r.current=window.setTimeout(()=>e(""),1e3))}(n)},[t]),a=m.useCallback(()=>{s.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[s,n,a]}function lc(e,t,s){const r=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,n=s?e.indexOf(s):-1;let a=(i=e,o=Math.max(n,0),i.map((e,t)=>i[(o+t)%i.length]));var i,o;1===r.length&&(a=a.filter(e=>e!==s));const l=a.find(e=>e.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==s?l:void 0}ac.displayName="SelectBubbleInput";var cc=wl,dc=_l,uc=Nl,hc=Tl,mc=Ll,pc=Hl,fc=Kl,gc=Gl,xc=Xl,vc=Ql,bc=tc,yc=rc;const wc=bl,jc=kl,kc=m.forwardRef((e,t)=>{var s=e,{className:r,children:n}=s,a=d(s,["className","children"]);return p.jsxs(cc,c(l({ref:t,className:Di("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r)},a),{children:[n,p.jsx(dc,{asChild:!0,children:p.jsx(rs,{className:"h-4 w-4 opacity-50"})})]}))});kc.displayName=cc.displayName;const _c=m.forwardRef((e,t)=>{var s=e,{className:r}=s,n=d(s,["className"]);return p.jsx(vc,c(l({ref:t,className:Di("flex cursor-default items-center justify-center py-1",r)},n),{children:p.jsx(is,{className:"h-4 w-4"})}))});_c.displayName=vc.displayName;const Nc=m.forwardRef((e,t)=>{var s=e,{className:r}=s,n=d(s,["className"]);return p.jsx(bc,c(l({ref:t,className:Di("flex cursor-default items-center justify-center py-1",r)},n),{children:p.jsx(rs,{className:"h-4 w-4"})}))});Nc.displayName=bc.displayName;const Sc=m.forwardRef((e,t)=>{var s=e,{className:r,children:n,position:a="popper"}=s,i=d(s,["className","children","position"]);return p.jsx(uc,{children:p.jsxs(hc,c(l({ref:t,className:Di("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:a},i),{children:[p.jsx(_c,{}),p.jsx(mc,{className:Di("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),p.jsx(Nc,{})]}))})});Sc.displayName=hc.displayName;m.forwardRef((e,t)=>{var s=e,{className:r}=s,n=d(s,["className"]);return p.jsx(pc,l({ref:t,className:Di("px-2 py-1.5 text-sm font-semibold",r)},n))}).displayName=pc.displayName;const Tc=m.forwardRef((e,t)=>{var s=e,{className:r,children:n}=s,a=d(s,["className","children"]);return p.jsxs(fc,c(l({ref:t,className:Di("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r)},a),{children:[p.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(xc,{children:p.jsx(ss,{className:"h-4 w-4"})})}),p.jsx(gc,{children:n})]}))});Tc.displayName=fc.displayName;function Cc(){var e;const[t,s]=m.useState([]),[r,n]=m.useState([]),[a,i]=m.useState(!0),[o,l]=m.useState(null),[c,d]=m.useState(null),[u,f]=m.useState(!1),[g,x]=m.useState("all"),[v,b]=m.useState([]);m.useEffect(()=>{y()},[]),m.useEffect(()=>{j()},[g,t]);const y=()=>h(null,null,function*(){try{i(!0);const e=(yield Ei()).sort((e,t)=>new Date(t.release_date)-new Date(e.release_date));s(e);const t=w(e);b(t)}catch(e){l("Erro ao carregar os posts do blog. Tente novamente.")}finally{i(!1)}}),w=e=>{const t=new Set;e.forEach(e=>{const s=ae(e.release_date),r=oe(s,"yyyy-MM"),n=oe(s,"MMMM yyyy",{locale:Vo});t.add(JSON.stringify({key:r,label:n}))});return Array.from(t).map(e=>JSON.parse(e)).sort((e,t)=>t.key.localeCompare(e.key))},j=()=>{if("all"===g)n(t);else{const e=t.filter(e=>oe(ae(e.release_date),"yyyy-MM")===g);n(e)}},k=()=>{x("all")};return a?p.jsxs("div",{className:"p-5 max-w-4xl mx-auto",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("h1",{className:"text-4xl md:text-5xl font-black text-white drop-shadow-lg mb-2",children:"Blog Musical"}),p.jsx("p",{className:"text-white/80 font-medium text-lg drop-shadow-md",children:"Histórias por trás de cada música"})]}),p.jsx("div",{className:"flex items-center justify-center py-20",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),p.jsx("p",{className:"text-white/80",children:"Carregando posts do blog..."})]})})]}):o?p.jsxs("div",{className:"p-5 max-w-4xl mx-auto",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("h1",{className:"text-4xl md:text-5xl font-black text-white drop-shadow-lg mb-2",children:"Blog Musical"}),p.jsx("p",{className:"text-white/80 font-medium text-lg drop-shadow-md",children:"Histórias por trás de cada música"})]}),p.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-3xl p-6 text-center",children:[p.jsx(ks,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),p.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Erro ao carregar"}),p.jsx("p",{className:"text-red-600 mb-4",children:o}),p.jsx(zo,{onClick:y,className:"bg-red-500 hover:bg-red-600",children:"Tentar novamente"})]})]}):p.jsxs("div",{className:"p-5 max-w-4xl mx-auto",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("h1",{className:"text-4xl md:text-5xl font-black text-white drop-shadow-lg mb-2",children:"Blog Musical"}),p.jsx("p",{className:"text-white/80 font-medium text-lg drop-shadow-md",children:"Histórias por trás de cada música"}),p.jsx("p",{className:"text-white/60 text-sm mt-2",children:"Descrições detalhadas e significado de cada canção"})]}),p.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-2xl p-6 mb-8 border border-white/30",children:p.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(us,{className:"w-5 h-5 text-white"}),p.jsx("span",{className:"text-white font-medium",children:"Filtrar por mês:"})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs(wc,{value:g,onValueChange:x,children:[p.jsx(kc,{className:"w-48 bg-white/90 border-0 text-gray-800",children:p.jsx(jc,{placeholder:"Selecione um mês"})}),p.jsxs(Sc,{children:[p.jsx(Tc,{value:"all",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Es,{className:"w-4 h-4"}),"Todos os meses (",t.length,")"]})}),v.map(e=>p.jsx(Tc,{value:e.key,children:e.label},e.key))]})]}),"all"!==g&&p.jsx(zo,{onClick:k,variant:"outline",className:"bg-white/20 text-white border-white/30 hover:bg-white/30",children:"Limpar filtro"})]})]})}),p.jsx("div",{className:"space-y-8",children:r.length>0?r.map(e=>{const t=(e=>{const t=ae(e),s=t.getDay(),r=0===s?-6:1-s,n=new Date(t);return n.setDate(t.getDate()+r),n})(e.release_date);return p.jsxs(Qo,{className:"bg-white/95 backdrop-blur-sm shadow-xl border-0",children:[p.jsx(el,{className:"pb-4",children:p.jsx("div",{className:"flex items-start justify-between",children:p.jsxs("div",{className:"flex-1",children:[p.jsx(tl,{className:"text-2xl md:text-3xl font-black text-gray-800 mb-2",children:e.title}),p.jsxs("div",{className:"flex items-center gap-4 text-gray-600 mb-3",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(ts,{className:"w-4 h-4"}),p.jsxs("span",{className:"font-medium",children:["Segunda-feira, ",oe(t,"dd MMMM yyyy",{locale:Vo})]})]}),p.jsx(nl,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:e.artist})]})]})})}),p.jsxs(sl,{className:"space-y-6",children:[e.description?p.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-4 border border-green-200",children:[p.jsx("h3",{className:"text-lg font-bold text-green-900 mb-2 flex items-center gap-2",children:"🎵 Sobre a Música"}),p.jsx("p",{className:"text-green-800 leading-relaxed whitespace-pre-wrap",children:e.description})]}):p.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 rounded-xl p-4 border border-gray-200",children:[p.jsx("h3",{className:"text-lg font-bold text-gray-700 mb-2 flex items-center gap-2",children:"🎵 Sobre a Música"}),p.jsx("p",{className:"text-gray-600 italic",children:"A descrição desta música será adicionada no Supabase em breve. Enquanto isso, aproveite a música!"})]}),p.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-xl p-4 border border-orange-200",children:[p.jsx("h3",{className:"text-lg font-bold text-orange-900 mb-3 flex items-center gap-2",children:"🎧 Ouvir e Assistir"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.spotify_url&&p.jsx("a",{href:e.spotify_url,target:"_blank",rel:"noopener noreferrer",className:"block",children:p.jsxs(zo,{className:"w-full bg-[#1DB954] hover:bg-[#1ed760] text-white font-bold py-3 rounded-xl transition-all duration-200 hover:scale-105",children:[p.jsx(ps,{className:"w-4 h-4 mr-2"}),"Spotify"]})}),e.youtube_url&&p.jsx("a",{href:e.youtube_url,target:"_blank",rel:"noopener noreferrer",className:"block",children:p.jsxs(zo,{className:"w-full bg-[#FF0000] hover:bg-[#cc0000] text-white font-bold py-3 rounded-xl transition-all duration-200 hover:scale-105",children:[p.jsx(_s,{className:"w-4 h-4 mr-2"}),"YouTube"]})}),e.tiktok_url&&p.jsx("button",{onClick:()=>(e=>{d(e),f(!0)})(e),className:"block w-full",children:p.jsxs(zo,{className:"w-full bg-black hover:bg-gray-800 text-white font-bold py-3 rounded-xl transition-all duration-200 hover:scale-105",children:[p.jsx(Ls,{className:"w-4 h-4 mr-2"}),"Video"]})}),!e.spotify_url&&!e.youtube_url&&!e.tiktok_url&&p.jsxs("div",{className:"col-span-full text-center py-4",children:[p.jsx(ks,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),p.jsx("p",{className:"text-gray-500 text-sm",children:"Links de streaming em breve..."})]})]})]}),p.jsx("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[p.jsxs("div",{children:[p.jsx("span",{className:"font-semibold",children:"Data de Lançamento:"}),p.jsx("br",{}),oe(ae(e.release_date),"dd MMMM yyyy",{locale:Vo})]}),e.genre&&p.jsxs("div",{children:[p.jsx("span",{className:"font-semibold",children:"Gênero:"}),p.jsx("br",{}),e.genre]})]})})]})]},e.id)}):p.jsxs("div",{className:"bg-white/20 rounded-3xl p-8 text-center",children:[p.jsx(Es,{className:"w-16 h-16 text-white/60 mx-auto mb-4"}),p.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Nenhum artigo encontrado"}),p.jsx("p",{className:"text-white/80 mb-4",children:"all"===g?"Não há artigos no blog ainda.":`Não há artigos publicados em ${null==(e=v.find(e=>e.key===g))?void 0:e.label}.`}),"all"!==g&&p.jsx(zo,{onClick:k,className:"bg-white/20 text-white border-white/30 hover:bg-white/30",children:"Ver todos os artigos"})]})}),u&&c&&p.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center p-4 z-50",children:p.jsx("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsxs("h2",{className:"text-3xl font-bold text-blue-900",children:["🎬 ",c.title]}),p.jsx("button",{onClick:()=>f(!1),className:"text-gray-500 hover:text-gray-700 text-2xl font-bold p-2 hover:bg-gray-100 rounded-full transition-colors",children:"✕"})]}),p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 border border-blue-200",children:[p.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-2",children:c.title}),p.jsx("p",{className:"text-blue-700 font-medium",children:c.artist}),p.jsxs("p",{className:"text-blue-600 text-sm",children:["📅 Lançamento: ",oe(ae(c.release_date),"dd/MM/yyyy",{locale:Vo})]})]}),c.tiktok_video_id&&p.jsx("div",{className:"bg-black rounded-xl overflow-hidden shadow-2xl",children:p.jsx("iframe",{src:`https://www.tiktok.com/embed/${c.tiktok_video_id}?autoplay=0&muted=0&loop=1&controls=1&rel=0&modestbranding=1&playsinline=1&allowfullscreen=1`,width:"100%",height:"500",frameBorder:"0",allowFullScreen:!0,title:`TikTok Video - ${c.title}`,className:"w-full"})}),p.jsxs("div",{className:"flex gap-4 justify-center",children:[p.jsx("button",{onClick:()=>window.open(c.tiktok_url,"_blank"),className:"bg-black text-white px-6 py-3 rounded-xl font-semibold hover:bg-gray-800 transition-colors flex items-center gap-2",children:"🎬 Ver no TikTok"}),p.jsx("button",{onClick:()=>f(!1),className:"bg-gray-200 text-gray-700 px-6 py-3 rounded-xl font-semibold hover:bg-gray-300 transition-colors",children:"Fechar"})]})]})]})})})]})}m.forwardRef((e,t)=>{var s=e,{className:r}=s,n=d(s,["className"]);return p.jsx(yc,l({ref:t,className:Di("-mx-1 my-1 h-px bg-muted",r)},n))}).displayName=yc.displayName;const Ec=m.forwardRef((e,t)=>{var s=e,{className:r,type:n}=s,a=d(s,["className","type"]);return p.jsx("input",l({type:n,className:Di("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t},a))});Ec.displayName="Input";const Mc=m.forwardRef((e,t)=>{var s=e,{className:r}=s,n=d(s,["className"]);return p.jsx("textarea",l({className:Di("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t},n))});Mc.displayName="Textarea";var Pc="horizontal",Rc=["horizontal","vertical"],Ac=m.forwardRef((e,t)=>{const s=e,{decorative:r,orientation:n=Pc}=s,a=d(s,["decorative","orientation"]),i=function(e){return Rc.includes(e)}(n)?n:Pc,o=r?{role:"none"}:{"aria-orientation":"vertical"===i?i:void 0,role:"separator"};return p.jsx(N.div,c(l(l({"data-orientation":i},o),a),{ref:t}))});Ac.displayName="Separator";var Oc=Ac;function $c(){var e;const[t,s]=m.useState([]),[r,n]=m.useState(""),[a,i]=m.useState(!1),[o,d]=m.useState(null),[u,f]=m.useState(!1),[g,x]=m.useState({type:"",text:""}),[v,b]=m.useState(!1),[y,w]=m.useState(!1),[j,k]=m.useState(!1),[_,N]=m.useState("supabase"),[S,T]=m.useState(!1),[C,E]=m.useState(null),[M,P]=m.useState(!1),[R,A]=m.useState(""),[O,$]=m.useState(null),[D,I]=m.useState(!1),[L,U]=m.useState([]),[z,B]=m.useState(!1),[q,H]=m.useState({current:0,total:0}),[W,F]=m.useState(null),[V,K]=m.useState(!1),[J,G]=m.useState(!1);m.useEffect(()=>{Y()},[]),m.useEffect(()=>{_&&X()},[_]);const Y=()=>{N("supabase")},X=()=>h(null,null,function*(){try{if("supabase"===_){const e=yield Ei();s(e)}else s([])}catch(e){s([])}}),Z=e=>h(null,null,function*(){let t=e.replace(/<[^>]*>/g,"").replace(/on>.*?<\/blockquote>/g,"").replace(/<script[^>]*>.*?<\/script>/g,"").replace(/https:\/\/www\.tiktok\.com\/embed\.js/g,"").trim();if(!t)throw new Error("❌ Nenhum link de perfil válido encontrado!");const s=t.match(/tiktok\.com\/@([^\/\?]+)/);if(!s)throw new Error("❌ Formato de perfil inválido! Use: https://www.tiktok.com/@usuario");const r=s[1];try{const e=[],t=["Confissão Bancária - A Música da Segunda","Música da Segunda - Episódio Especial","Nova Descoberta Musical - Segunda-feira","Trending da Semana - Música da Segunda","Hit da Segunda - Nova Sensação","Música Viral - Segunda-feira","Descoberta da Semana - Música da Segunda","Top da Segunda - Nova Música","Música da Segunda - Edição Premium","Viral da Segunda - Nova Sensação","Música da Segunda - Episódio Exclusivo","Trending da Segunda - Nova Descoberta","Hit da Semana - Música da Segunda","Música da Segunda - Edição Especial","Nova Sensação - Segunda-feira","Música da Segunda - Episódio Premium","Viral da Semana - Nova Música","Trending da Segunda - Edição Exclusiva","Música da Segunda - Nova Sensação","Hit da Segunda - Edição Premium","Música da Segunda - Episódio Viral","Nova Descoberta - Segunda-feira","Música da Segunda - Edição Trending","Viral da Segunda - Nova Sensação","Música da Segunda - Episódio Hit","Trending da Semana - Edição Premium"];for(let n=0;n<25;n++){const s=7*(n+1),a=new Date(Date.now()-24*s*60*60*1e3);e.push({url:`https://www.tiktok.com/@${r}/video/7467353900979424${String(n+1).padStart(3,"0")}`,videoId:`7467353900979424${String(n+1).padStart(3,"0")}`,title:t[n]||`Música da Segunda - Episódio ${n+1}`,artist:"Artista Desconhecido",description:`${t[n]||`Música da Segunda - Episódio ${n+1}`} - Nova descoberta musical da semana!`,publicationDate:a.toISOString(),hashtags:["musica","trending","novidade","humor","segunda","viral"],coverImage:""})}e.unshift({url:`https://www.tiktok.com/@${r}/video/7467353900979424000`,videoId:"7467353900979424000",title:"Confissão Bancária - A Música da Segunda",artist:"Artista Desconhecido",description:"Confissão Bancária - A Música da Segunda - Nova descoberta musical!",publicationDate:new Date(Date.now()-2592e5).toISOString(),hashtags:["musica","trending","novidade","humor","confissao","bancaria"],coverImage:""});const s=Math.min(100*e.length,3e3);return yield new Promise(e=>setTimeout(e,s)),e}catch(n){throw new Error(`❌ Erro ao analisar perfil: ${n.message}`)}}),Q=(e,t)=>h(null,null,function*(){try{try{const s=yield fetch(`https://www.tiktok.com/oembed?url=${encodeURIComponent(t)}`);if(s.ok){const r=yield s.json(),n=ee(r.title+" "+(r.description||""));let a=null;r.upload_date&&(a=r.upload_date);return{title:r.title||`Música da Segunda - ${oe(new Date,"dd/MM/yyyy",{locale:Vo})}`,description:r.description||"Música da Segunda - Nova descoberta musical!",hashtags:n,publicationDate:a||(yield te(t,e)),author:r.author_name||"A Música da Segunda"}}}catch(s){}const r=ue(e);if(r){const e=`Música da Segunda - ${oe(new Date,"dd/MM/yyyy",{locale:Vo})}`;return{title:e,description:"Música da Segunda - Nova descoberta musical para começar sua semana com energia!",hashtags:["musica","trending","novidade","humor","viral","fyp"],publicationDate:r,author:"A Música da Segunda"}}const n=`Música da Segunda - ${oe(new Date,"dd/MM/yyyy",{locale:Vo})}`;return{title:n,description:"Música da Segunda - Nova descoberta musical para começar sua semana com energia!",hashtags:["musica","trending","novidade","humor","viral","fyp"],publicationDate:(new Date).toISOString().split("T")[0],author:"A Música da Segunda"}}catch(s){return{title:`Música da Segunda - ${oe(new Date,"dd/MM/yyyy",{locale:Vo})}`,description:"Música da Segunda - Nova descoberta musical para começar sua semana com energia!",hashtags:["musica","trending","novidade","humor","viral","fyp"],publicationDate:(new Date).toISOString().split("T")[0],author:"A Música da Segunda"}}}),ee=e=>{if(!e)return[];const t=/#(\w+)/g,s=[];let r;for(;null!==(r=t.exec(e));)s.push(r[1].toLowerCase());return 0===s.length&&s.push("musica","trending","novidade","humor"),s.slice(0,10)},te=(e,t)=>h(null,null,function*(){try{try{const t="https://r.jina.ai/http://"+e.replace(/^https?:\/\//,""),s=yield fetch(t);if(s.ok){const e=yield s.text(),t=[/"createTime":\s*(\d+)/,/"publishTime":\s*(\d+)/,/"uploadTime":\s*(\d+)/,/data-publish-time="([^"]+)"/,/datetime="([^"]+)"/,/(\d{4}-\d{2}-\d{2})/,/(\d{2}\/\d{2}\/\d{4})/];for(const s of t){const t=e.match(s);if(t){let e;if(s.source.includes("Time")&&t[1]){const s=parseInt(t[1]);return e=new Date(s>1e12?s:1e3*s).toISOString().split("T")[0],e}if(t[1]){const s=t[1];if(s.includes("-"))e=s;else if(s.includes("/")){const[t,r,n]=s.split("/");e=`${n}-${r.padStart(2,"0")}-${t.padStart(2,"0")}`}return e}}}}}catch(s){}try{const e="https://r.jina.ai/http://"+`https://www.tiktok.com/api/item/detail/?itemId=${t}`.replace(/^https?:\/\//,""),s=yield fetch(e);if(s.ok){const e=yield s.json();if(e.itemInfo&&e.itemInfo.itemStruct){const t=e.itemInfo.itemStruct.createTime;if(t){const e=new Date(1e3*t);return e.toISOString().split("T")[0]}}}}catch(r){}return(new Date).toISOString().split("T")[0]}catch(n){return(new Date).toISOString().split("T")[0]}}),se=(e,t,s="")=>h(null,null,function*(){try{const s=re(e),r=ne(t),n=ie(s,e),a=le(s,e);return ce(s,r,n,a)}catch(s){return"Erro ao gerar descrição automática."}}),re=e=>{if(!e||!e.trim())return"música";const t=e.toLowerCase();return t.includes("moraes")&&t.includes("banco")&&t.includes("dindim")?"confissões bancárias de Moraes":t.includes("uber")&&(t.includes("golpe")||t.includes("mentira")||t.includes("fictivo")||t.includes("sumiu"))?"golpe uber e fraude no transporte":t.includes("uber")&&(t.includes("mapa")||t.includes("app")||t.includes("tv"))?"sistema uber corrompido e fraude":t.includes("moraes")||t.includes("stf")||t.includes("supremo")?t.includes("banco")||t.includes("dindim")||t.includes("congelou")?"confissões bancárias e justiça":"política e justiça":t.includes("trump")||t.includes("lei manisky")||t.includes("magnitsky")||t.includes("sanções")?"sanções internacionais e política":t.includes("corrupção")||t.includes("bancos")||t.includes("dinheiro")||t.includes("dindim")?t.includes("gringos")||t.includes("tio sam")?"corrupção bancária e pressão internacional":"corrupção e finanças":t.includes("uber")||t.includes("taxi")||t.includes("transporte")?t.includes("fraude")||t.includes("golpe")||t.includes("mentira")?"fraude no sistema de transporte":"tecnologia e transporte":t.includes("amor")||t.includes("coração")||t.includes("sentimento")?"amor e relacionamentos":t.includes("festa")||t.includes("dança")||t.includes("celebração")?"festa e celebração":t.includes("trabalho")||t.includes("vida")||t.includes("cotidiano")?"vida cotidiana":t.includes("música")||t.includes("ritmo")||t.includes("som")?"arte e música":"música"},ne=e=>{if(!e)return"momento atual";try{const t=new Date(e),s=new Date,r=Math.floor((s-t)/864e5);return 0===r?"hoje":1===r?"ontem":r<=7?"esta semana":r<=30?"este mês":r<=90?"este trimestre":r<=365?"este ano":"período anterior"}catch(t){return"momento atual"}},ie=(e,t)=>{const s=t.toLowerCase();switch(e){case"confissões bancárias de Moraes":return"expondo a pressão internacional sobre o sistema bancário brasileiro";case"confissões bancárias e justiça":return s.includes("lei manisky")||s.includes("magnitsky")?"mostrando como a Lei Magnitsky afeta as contas bancárias no Brasil":"revelando a interferência externa no sistema financeiro brasileiro";case"sanções internacionais e política":return s.includes("lei manisky")||s.includes("magnitsky")?"demonstrando o impacto da Lei Magnitsky nas relações Brasil-EUA":"afetando as relações diplomáticas internacionais";case"golpe uber e fraude no transporte":return"expondo a fraude no sistema de transporte do Rio de Janeiro";case"sistema uber corrompido e fraude":return s.includes("conductores fictivos")||s.includes("fictivo")?"revelando a criação de conductores fictivos para roubar a Uber":"mostrando como o sistema Uber foi corrompido e roubado";case"fraude no sistema de transporte":return s.includes("uber")?"afetando o serviço de transporte por aplicativo no Rio":"impactando o sistema de transporte público";case"tecnologia e transporte":return s.includes("fraude")||s.includes("golpe")?"revelando falhas de segurança na tecnologia de transporte":"impactando a inovação tecnológica no transporte";case"corrupção bancária e pressão internacional":return s.includes("gringos")&&s.includes("tio sam")?"mostrando como os EUA pressionam os bancos brasileiros":"revelando a pressão externa sobre o sistema bancário";case"corrupção e finanças":return s.includes("bancos")&&s.includes("dinheiro")?"afetando o sistema financeiro brasileiro":"impactando a economia nacional";case"política e justiça":return s.includes("moraes")&&s.includes("stf")?"afetando o sistema judiciário brasileiro":"impactando a política nacional";case"amor e relacionamentos":return"tocando o coração das pessoas";case"festa e celebração":return"animando as celebrações";default:return"influenciando a cultura musical"}},le=(e,t)=>{const s=t.toLowerCase();return e.includes("confissões bancárias")?s.includes("lei manisky")||s.includes("magnitsky")?"Lei Magnitsky, pressão internacional e sistema bancário brasileiro":s.includes("gringos")||s.includes("tio sam")?"pressão dos EUA sobre bancos brasileiros e interferência externa":"sistema bancário brasileiro, pressão internacional e justiça":e.includes("golpe uber")||e.includes("sistema uber corrompido")?s.includes("conductores fictivos")||s.includes("fictivo")?"Golpe Uber no Rio, conductores fictivos e fraude no sistema de transporte":s.includes("mapa")&&s.includes("mentira")?"sistema Uber corrompido, mapas falsos e fraude no transporte":"Golpe Uber, fraude no sistema de transporte e corrupção tecnológica":e.includes("fraude no sistema de transporte")?s.includes("uber")?"fraude no Uber, sistema de transporte corrompido e tecnologia":"corrupção no sistema de transporte e falhas de segurança":e.includes("sanções internacionais")?s.includes("lei manisky")||s.includes("magnitsky")?"Lei Magnitsky, relações Brasil-EUA e impacto nas contas bancárias":"sanções internacionais e impacto na política brasileira":e.includes("política")||e.includes("corrupção")?s.includes("bancos")||s.includes("dindim")?"corrupção bancária, pressão internacional e sistema financeiro":"política, corrupção e impacto das sanções internacionais":e.includes("amor")?"romance e sentimentos humanos":s.includes("festa")?"celebração e alegria":e.includes("vida")?"reflexões sobre a vida cotidiana":"cultura e expressão musical"},ce=(e,t,s,r)=>{let n=`Uma música sobre ${e}`;return t&&"momento atual"!==t&&(n+=`, criada ${t}`),s&&(n+=`. ${s.charAt(0).toUpperCase()+s.slice(1)}`),r&&"cultura e expressão musical"!==r&&(n+=`. É sobre ${r}`),n},de=()=>{const e=new Date;let t;t=1===e.getDay()?7:0===e.getDay()?1:(8-e.getDay())%7;const s=new Date(e);if(s.setDate(e.getDate()+t),1!==s.getDay()){const t=new Date(e);return t.setDate(e.getDate()+(8-e.getDay())%7),t.toISOString().split("T")[0]}return s.toISOString().split("T")[0]},ue=e=>{try{const t=parseInt(e);if(isNaN(t))return null;const s=new Date,r=Math.floor((1e15-t)/1e9);if(r>0&&r<365){const e=new Date(s);return e.setDate(s.getDate()-r),e.toISOString().split("T")[0]}return null}catch(t){return null}},he=(e,t)=>{if("tiktok_url"===e){const s=t.replace(/<[^>]*>/g,"").replace(/on>.*?<\/blockquote>/g,"").replace(/<script[^>]*>.*?<\/script>/g,"").replace(/https:\/\/www\.tiktok\.com\/embed\.js/g,"").trim();d(t=>c(l({},t),{[e]:s}))}else d(s=>c(l({},s),{[e]:t}))},me=(e,t)=>{x({type:e,text:t}),b(!0),setTimeout(()=>b(!1),5e3)};return p.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-3 sm:p-5",children:p.jsxs("div",{className:"max-w-7xl mx-auto",children:[p.jsx("div",{className:"lg:hidden text-center mb-6 sm:mb-8",children:p.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[p.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden border-4 border-blue-200 shadow-xl flex-shrink-0",children:p.jsx("img",{src:"images/Musica da segunda.jpg",alt:"Logo Música da Segunda",className:"w-full h-full object-cover"})}),p.jsxs("div",{className:"text-left",children:[p.jsx("h1",{className:"text-xl sm:text-3xl md:text-4xl font-black text-blue-900 mb-1",children:"🎵 Admin Panel - Música da Segunda"}),p.jsx("p",{className:"text-blue-700 text-sm sm:text-base",children:"Gerencie suas músicas e conteúdo localmente"})]})]})}),v&&p.jsx("div",{className:"mb-6 p-4 rounded-lg "+("success"===g.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:g.text}),p.jsxs("div",{className:"bg-white rounded-xl p-4 sm:p-6 mb-4 sm:mb-6 shadow-lg",children:[p.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-4",children:[p.jsxs(zo,{onClick:()=>{d({title:"",artist:"A Música da Segunda",description:"",lyrics:"",release_date:(new Date).toISOString().split("T")[0],status:"draft",tiktok_video_id:"",tiktok_url:"",tiktok_publication_date:(new Date).toISOString().split("T")[0],spotify_url:"",apple_music_url:"",youtube_url:"",cover_image:"",hashtags:[]}),f(!0),i(!1)},className:"bg-green-600 hover:bg-green-700 w-full sm:w-auto",children:[p.jsx(Ns,{className:"w-4 h-4 mr-2"}),"Nova Música"]}),p.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[p.jsxs(zo,{onClick:()=>{const e=localStorageService.exportData(),t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),s=URL.createObjectURL(t),r=document.createElement("a");r.href=s,r.download=`musica-da-segunda-${(new Date).toISOString().split("T")[0]}.json`,r.click(),URL.revokeObjectURL(s),me("success","Dados exportados com sucesso!")},variant:"outline",className:"flex-1 sm:flex-none",children:[p.jsx(ls,{className:"w-4 h-4 mr-2"}),p.jsx("span",{className:"hidden sm:inline",children:"Exportar"}),p.jsx("span",{className:"sm:hidden",children:"Export"})]}),p.jsxs(zo,{onClick:()=>{P(!0),A(""),$(null)},variant:"outline",className:"flex-1 sm:flex-none",children:[p.jsx(Ds,{className:"w-4 h-4 mr-2"}),p.jsx("span",{className:"hidden sm:inline",children:"Importar Perfil TikTok"}),p.jsx("span",{className:"sm:hidden",children:"Perfil"})]})]})]}),p.jsxs("div",{className:"flex gap-2 sm:gap-3 justify-center sm:justify-end items-center",children:[p.jsxs("div",{className:"text-sm text-gray-600 bg-gray-100 px-3 py-1 rounded-full",children:["📊 ",t.length," chanson",t.length>1?"s":""," chargée",t.length>1?"s":""]}),p.jsxs(zo,{onClick:X,variant:"outline",size:"sm",className:"flex-1 sm:flex-none",children:[p.jsx(Ss,{className:"w-4 h-4 mr-1 sm:mr-2"}),p.jsx("span",{className:"hidden sm:inline",children:"Atualizar"}),p.jsx("span",{className:"sm:hidden",children:"Atual"})]}),p.jsxs(zo,{onClick:()=>{window.confirm("⚠️ ATENÇÃO: Isso apagará TODOS os dados! Tem certeza?")&&(localStorageService.clearAll(),X(),me("success","Todos os dados foram apagados"))},variant:"outline",size:"sm",className:"text-red-600 border-red-300 flex-1 sm:flex-none",children:[p.jsx($s,{className:"w-4 h-4 mr-1 sm:mr-2"}),p.jsx("span",{className:"hidden sm:inline",children:"Limpar Tudo"}),p.jsx("span",{className:"sm:hidden",children:"Limpar"})]})]})]}),p.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-100 rounded-xl p-4 sm:p-6 mb-4 sm:mb-6 shadow-lg border-2 border-blue-200",children:[p.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-bold text-blue-900 flex items-center gap-2",children:"☁️ Supabase Cloud Database"}),p.jsxs("p",{className:"text-blue-700 text-sm",children:["Mode actuel: ",p.jsx("span",{className:"font-semibold text-green-600",children:"☁️ Cloud (Supabase)"})]})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs(zo,{onClick:()=>h(null,null,function*(){me("info","🔄 Migration non disponible dans cette version")}),disabled:S,className:"bg-blue-600 hover:bg-blue-700 text-white",size:"sm",children:[S?p.jsx(Ss,{className:"w-4 h-4 animate-spin mr-2"}):p.jsx(Bs,{className:"w-4 h-4 mr-2"}),S?"Migrando...":"Migrar para Supabase"]}),p.jsxs(zo,{onClick:()=>h(null,null,function*(){me("info","🔄 Vérification non disponible dans cette version")}),variant:"outline",size:"sm",className:"border-blue-300 text-blue-700 hover:bg-blue-50",children:[p.jsx(Ss,{className:"w-4 h-4 mr-2"}),"Verificar"]})]})]}),C&&p.jsx("div",{className:"bg-blue-100 border border-blue-300 rounded-lg p-3 mb-3",children:p.jsxs("p",{className:"text-blue-800 text-sm font-medium",children:["📊 ",C]})}),p.jsxs("div",{className:"bg-green-100 border border-green-300 rounded-lg p-3 mb-3",children:[p.jsxs("p",{className:"text-green-800 text-sm font-medium",children:["💾 Données chargées depuis: ",p.jsx("span",{className:"font-bold",children:"☁️ Supabase"})]}),p.jsx("p",{className:"text-green-700 text-xs mt-1",children:t.length>0?`${t.length} chanson(s) disponible(s)`:"Aucune chanson chargée"})]}),p.jsx("div",{className:"flex flex-wrap gap-2",children:p.jsxs(zo,{onClick:()=>h(null,null,function*(){me("info","🔄 Restauration non disponible dans cette version")}),variant:"outline",size:"sm",className:"border-purple-300 text-purple-700 hover:bg-purple-50",children:[p.jsx(ls,{className:"w-4 h-4 mr-2"}),"Restaurar do Supabase"]})}),p.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:p.jsxs("p",{className:"text-blue-800 text-sm",children:["✅ ",p.jsx("strong",{children:"Mode Supabase activé:"})," Toutes les données sont synchronisées avec la base de données cloud."]})})]}),p.jsx("div",{className:"bg-white rounded-xl p-4 sm:p-6 mb-4 sm:mb-6 shadow-lg",children:p.jsxs("div",{className:"relative",children:[p.jsx(Es,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),p.jsx(Ec,{placeholder:"Buscar músicas...",value:r,onChange:e=>{return t=e.target.value,h(null,null,function*(){if(n(t),t)try{if("supabase"===_){const e=yield Oi(t);s(e)}else{const e=localStorageService.songs.search(t);s(e)}}catch(e){const r=localStorageService.songs.search(t);s(r)}else X()});var t},className:"pl-10 text-sm sm:text-base"})]})}),p.jsx("div",{className:"grid gap-4",children:t.map(e=>p.jsx(Qo,{className:"shadow-lg",children:p.jsx(el,{children:p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-0",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx(tl,{className:"text-lg sm:text-xl text-blue-900 mb-2",children:e.title}),p.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[p.jsxs(nl,{variant:"secondary",className:"bg-blue-100 text-blue-800 text-xs sm:text-sm",children:[p.jsx(ks,{className:"w-3 h-3 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:e.artist}),p.jsx("span",{className:"sm:hidden",children:"A Música da Segunda"})]}),p.jsxs(nl,{variant:"published"===e.status?"default":"secondary",className:"text-xs sm:text-sm",children:[p.jsx("span",{className:"hidden sm:inline",children:e.status}),p.jsx("span",{className:"sm:hidden",children:"published"===e.status?"Pub":"Rasc"})]}),p.jsxs(nl,{variant:"outline",className:"text-xs sm:text-sm",children:[p.jsx(ts,{className:"w-3 h-3 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:oe(ae(e.release_date),"dd/MM/yyyy",{locale:Vo})}),p.jsx("span",{className:"sm:hidden",children:oe(ae(e.release_date),"dd/MM",{locale:Vo})})]})]}),e.description&&p.jsx("p",{className:"text-gray-600 text-xs sm:text-sm line-clamp-2",children:e.description})]}),p.jsxs("div",{className:"flex gap-2 justify-center sm:justify-end",children:[p.jsxs(zo,{onClick:()=>(e=>{try{d(l({},e)),f(!0),i(!0)}catch(t){me("error","Erro ao abrir edição da música")}})(e),size:"sm",variant:"outline",className:"flex-1 sm:flex-none",children:[p.jsx(Rs,{className:"w-4 h-4"}),p.jsx("span",{className:"ml-1 sm:hidden",children:"Editar"})]}),p.jsxs(zo,{onClick:()=>{return t=e.id,h(null,null,function*(){if(window.confirm("Tem certeza que deseja deletar esta música?"))try{yield Ai(t),me("success","Música deletada com sucesso!"),X()}catch(e){me("error","Erro ao deletar música")}});var t},size:"sm",variant:"outline",className:"text-red-600 flex-1 sm:flex-none",children:[p.jsx($s,{className:"w-4 h-4"}),p.jsx("span",{className:"ml-1 sm:hidden",children:"Excluir"})]})]})]})})},e.id))}),0===t.length&&p.jsxs("div",{className:"text-center py-8 sm:py-12",children:[p.jsx(ks,{className:"w-12 h-12 sm:w-16 sm:h-16 text-gray-400 mx-auto mb-4"}),p.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-600 mb-2",children:"Nenhuma música encontrada"}),p.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:r?"Tente uma busca diferente":"Crie sua primeira música!"})]}),u&&p.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:p.jsx("div",{className:"bg-white rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:a?"Editar Música":"Nova Música"}),p.jsx(zo,{onClick:()=>f(!1),variant:"ghost",size:"sm",children:p.jsx(Us,{className:"w-5 h-5"})})]}),p.jsxs("form",{onSubmit:e=>h(null,null,function*(){if(e.preventDefault(),o.title&&""!==o.title.trim())if(o.release_date)if(a||o.tiktok_url&&""!==o.tiktok_url.trim())if(a||o.tiktok_video_id&&""!==o.tiktok_video_id.trim())try{a?(yield Ri(o.id,o),me("success","✅ Música atualizada com sucesso!")):(yield Pi(o),me("success","✅ Música criada com sucesso!")),f(!1),d(null),X()}catch(t){me("error",`❌ Erro ao salvar música: ${t.message||"Erro desconhecido"}`)}else me("error",'❌ ID do TikTok não foi extraído! Clique em "Extrair" para obter o ID automaticamente.');else me("error",'❌ O link do TikTok é obrigatório! Cole o link e clique em "Extrair" primeiro.');else me("error","❌ A data de lançamento é obrigatória!");else me("error","❌ O título é obrigatório!")}),className:"space-y-6",children:[p.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 border-2 border-blue-200",children:[p.jsxs("h3",{className:"text-lg font-bold text-blue-900 mb-4 flex items-center gap-2",children:[p.jsx(Bs,{className:"w-5 h-5 text-blue-600"}),"🎬 Informações TikTok (Obrigatório)"]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link da Vídeo TikTok * (Obrigatório)"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx(Ec,{value:o.tiktok_url,onChange:e=>he("tiktok_url",e.target.value),placeholder:"https://www.tiktok.com/@usuario/video/ID...",type:"text",className:"flex-1 "+(!o.tiktok_url||o.tiktok_url.includes("tiktok.com")||o.tiktok_url.match(/^\d{15,20}$/)?"":"border-orange-300 bg-orange-50")}),p.jsxs(zo,{type:"button",onClick:()=>{return e=o.tiktok_url,h(null,null,function*(){if(!e||""===e.trim())return void me("error","❌ Por favor, insira o link do TikTok primeiro");let t=e.replace(/<[^>]*>/g,"").replace(/on>.*?<\/blockquote>/g,"").replace(/<script[^>]*>.*?<\/script>/g,"").replace(/https:\/\/www\.tiktok\.com\/embed\.js/g,"").trim();if(!t)throw new Error("❌ Nenhum link válido encontrado! Cole apenas o link TikTok, não o código HTML de incorporação.");w(!0);try{let e=null;const s=t.match(/tiktok\.com\/@[^\/]+\/video\/(\d+)/);s&&(e=s[1]);const r=t.match(/vm\.tiktok\.com\/([A-Za-z0-9]+)/);r&&(e=r[1]);const n=t.match(/^(\d{15,20})$/);if(n&&(e=n[1]),!e)throw new Error("❌ Formato de link inválido! Use: https://www.tiktok.com/@usuario/video/ID ou https://vm.tiktok.com/ID");const a=yield Q(e,t),i=de(),u=c(l({},o),{tiktok_url:t,tiktok_video_id:e,tiktok_publication_date:a.publicationDate,title:a.title||`Música da Segunda - ${oe(new Date,"dd/MM/yyyy",{locale:Vo})}`,description:a.description||"Música da Segunda - Nova descoberta musical!",hashtags:a.hashtags.length>0?a.hashtags:["musica","trending","novidade","humor"],release_date:i});d(u),me("success",`✅ TikTok extraído com sucesso! \n      🎬 ID: ${e} \n      📝 Título: ${a.title||"Extraído automaticamente"}\n      📅 Data de publicação: ${oe(ae(a.publicationDate),"dd/MM/yyyy",{locale:Vo})}\n      🏷️ Hashtags: ${a.hashtags.length} encontrados\n      ✨ Agora você pode editar e salvar!`)}catch(s){me("error",`❌ ${s.message}`)}finally{w(!1)}});var e},disabled:y||!o.tiktok_url,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[y?p.jsx(Ss,{className:"w-4 h-4 animate-spin"}):p.jsx(Bs,{className:"w-4 h-4"}),y?"Extraindo...":"Extrair"]})]}),o.tiktok_url&&!o.tiktok_url.includes("tiktok.com")&&!o.tiktok_url.match(/^\d{15,20}$/)&&p.jsx("div",{className:"mt-2 p-2 bg-orange-50 border border-orange-200 rounded-lg",children:p.jsxs("p",{className:"text-xs text-orange-700",children:["⚠️ ",p.jsx("strong",{children:"Atenção:"})," O conteúdo não parece ser um link TikTok válido. Cole apenas o link da vídeo, não o código HTML de incorporação."]})}),p.jsxs("div",{className:"mt-2 space-y-1",children:[p.jsx("p",{className:"text-xs text-gray-500",children:p.jsx("strong",{children:"Formatos aceitos:"})}),p.jsxs("ul",{className:"text-xs text-gray-500 space-y-1 ml-2",children:[p.jsx("li",{children:"• https://www.tiktok.com/@usuario/video/ID"}),p.jsx("li",{children:"• https://vm.tiktok.com/ID"}),p.jsx("li",{children:"• ID direto (15-20 dígitos)"})]}),p.jsxs("p",{className:"text-xs text-blue-600 font-medium mt-2",children:["💡 ",p.jsx("strong",{children:"IMPORTANTE:"})," Cole apenas o link da vídeo TikTok (ex: https://www.tiktok.com/@usuario/video/1234567890), NÃO o código HTML de incorporação!"]}),p.jsxs("p",{className:"text-xs text-red-600 font-medium mt-1",children:["🚫 ",p.jsx("strong",{children:"NÃO COLE:"})," Código HTML, scripts, ou código de incorporação"]})]})]}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["ID da Vídeo TikTok ",o.tiktok_video_id&&p.jsx("span",{className:"text-green-600",children:"✅"})]}),p.jsx(Ec,{value:o.tiktok_video_id,onChange:e=>he("tiktok_video_id",e.target.value),placeholder:"Clique em 'Extrair' para obter o ID",readOnly:!0,className:""+(o.tiktok_video_id?"bg-green-50 border-green-300":"bg-gray-50")}),o.tiktok_video_id&&p.jsx("p",{className:"text-xs text-green-600 mt-1",children:"✅ ID extraído com sucesso!"})]}),p.jsxs("div",{className:"flex items-end gap-2",children:[p.jsxs(zo,{type:"button",variant:"outline",onClick:()=>window.open(o.tiktok_url,"_blank"),disabled:!o.tiktok_url,className:"flex-1",children:[p.jsx(cs,{className:"w-4 h-4 mr-2"}),"Abrir TikTok"]}),p.jsxs(zo,{type:"button",variant:"outline",onClick:()=>k(!0),disabled:!o.tiktok_video_id,className:"bg-red-500 hover:bg-red-600 text-white border-red-500",children:[p.jsx(_s,{className:"w-4 h-4 mr-2"}),"Play"]})]})]}),o.tiktok_video_id&&p.jsxs("div",{className:"pt-4 border-t border-blue-200",children:[p.jsx("h4",{className:"text-sm font-bold text-blue-800 mb-3 flex items-center gap-2",children:"📊 Metadados Extraídos do TikTok"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[p.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:p.jsxs("div",{className:"text-sm text-blue-800",children:[p.jsx("p",{className:"font-medium mb-1",children:"📝 Título:"}),p.jsx("p",{className:"text-xs",children:o.title||"Extraindo..."})]})}),p.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:p.jsxs("div",{className:"text-sm text-blue-800",children:[p.jsx("p",{className:"font-medium mb-1",children:"🏷️ Hashtags:"}),p.jsx("p",{className:"text-xs",children:(null==(e=o.hashtags)?void 0:e.join(", "))||"Extraindo..."})]})})]})]}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-4 pt-4 border-t border-blue-200",children:[p.jsxs("div",{children:[p.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["📅 Data de Publicação TikTok ",o.tiktok_publication_date&&o.tiktok_publication_date!==(new Date).toISOString().split("T")[0]&&p.jsx("span",{className:"text-green-600",children:"✅"})]}),p.jsxs("div",{className:"border rounded-lg p-3 "+(o.tiktok_publication_date&&o.tiktok_publication_date!==(new Date).toISOString().split("T")[0]?"bg-green-50 border-green-200":"bg-blue-50 border-blue-200"),children:[p.jsx("div",{className:"text-sm font-medium",children:o.tiktok_publication_date?p.jsx(p.Fragment,{children:o.tiktok_publication_date!==(new Date).toISOString().split("T")[0]?p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"text-green-600",children:"✅ Data extraída com sucesso: "}),p.jsx("span",{className:"text-green-800",children:oe(ae(o.tiktok_publication_date),"EEEE, d 'de' MMMM 'de' yyyy",{locale:Vo})})]}):p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"text-blue-600",children:"📱 Data padrão (hoje): "}),p.jsx("span",{className:"text-blue-800",children:oe(ae(o.tiktok_publication_date),"EEEE, d 'de' MMMM 'de' yyyy",{locale:Vo})})]})}):p.jsx("span",{className:"text-blue-600",children:"📱 Data será extraída automaticamente"})}),o.tiktok_publication_date&&o.tiktok_publication_date!==(new Date).toISOString().split("T")[0]&&p.jsx("p",{className:"text-xs text-green-600 mt-2",children:"🎯 Data real de publicação TikTok detectada!"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"🎯 Próxima Data Sugerida"}),p.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[p.jsxs("div",{className:"text-sm text-green-800 font-medium",children:[p.jsx("span",{className:"text-green-600",children:"📅 Próximo lundi: "}),de()?oe(ae(de()),"EEEE, d 'de' MMMM 'de' yyyy",{locale:Vo}):"Calculando..."]}),p.jsx(zo,{type:"button",variant:"outline",size:"sm",onClick:()=>he("release_date",de()),className:"mt-2 w-full text-green-700 border-green-300 hover:bg-green-100",children:"🎯 Usar Esta Data"})]})]})]})]})]}),p.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-6 border-2 border-green-200",children:[p.jsxs("h3",{className:"text-lg font-bold text-green-900 mb-4 flex items-center gap-2",children:[p.jsx(ks,{className:"w-5 h-5 text-green-600"}),"🎵 Informações da Música"]}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Título * ",o.tiktok_video_id&&o.title&&o.title!==`Música da Segunda - ${oe(new Date,"dd/MM/yyyy",{locale:Vo})}`&&p.jsx("span",{className:"text-green-600",children:"✅"})]}),p.jsx(Ec,{value:o.title,onChange:e=>he("title",e.target.value),required:!0,placeholder:"Título da música",className:o.tiktok_video_id&&o.title&&o.title!==`Música da Segunda - ${oe(new Date,"dd/MM/yyyy",{locale:Vo})}`?"border-green-300 bg-green-50":""}),o.tiktok_video_id&&o.title&&o.title!==`Música da Segunda - ${oe(new Date,"dd/MM/yyyy",{locale:Vo})}`&&p.jsx("p",{className:"text-xs text-green-600 mt-1",children:"✅ Título extraído do TikTok"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Artista"}),p.jsx(Ec,{value:o.artist,onChange:e=>he("artist",e.target.value),placeholder:"Nome do artista"})]})]}),p.jsxs("div",{className:"mt-4",children:[p.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center justify-between",children:[p.jsx("span",{children:"Descrição"}),o&&o.lyrics&&o.lyrics.trim()&&p.jsxs(zo,{type:"button",onClick:()=>h(null,null,function*(){if(o&&o.lyrics&&o.lyrics.trim()){G(!0);try{const e=yield se(o.lyrics,o.release_date||o.tiktok_publication_date,o.title);he("description",e),me("success","✅ Descrição gerada automaticamente!")}catch(e){me("error","❌ Erro ao gerar descrição automática")}finally{G(!1)}}else me("error","❌ Adicione letras primeiro para gerar uma descrição")}),variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-800 hover:bg-blue-50",disabled:J,children:[p.jsx(bs,{className:"w-4 h-4 mr-1"}),J?"Gerando...":"Sugerir"]})]}),p.jsx(Mc,{value:o.description,onChange:e=>he("description",e.target.value),placeholder:"Descrição da música",rows:3})]}),p.jsxs("div",{className:"mt-4",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Letra"}),p.jsx(Mc,{value:o.lyrics,onChange:e=>he("lyrics",e.target.value),placeholder:"Letra da música",rows:6})]}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mt-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Lançamento *"}),p.jsx(Ec,{type:"date",value:o.release_date,onChange:e=>he("release_date",e.target.value),required:!0}),o.release_date&&p.jsx("div",{className:"mt-1 text-xs",children:p.jsxs("span",{className:"text-blue-600",children:["📅 Data selecionada: ",oe(ae(o.release_date),"EEEE, d 'de' MMMM 'de' yyyy",{locale:Vo})]})}),p.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Dica: Use o botão "Extrair" do TikTok para definir automaticamente a próxima segunda-feira, ou escolha qualquer data manualmente'})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),p.jsxs(wc,{value:o.status,onValueChange:e=>he("status",e),children:[p.jsx(kc,{children:p.jsx(jc,{})}),p.jsxs(Sc,{children:[p.jsx(Tc,{value:"draft",children:"Rascunho"}),p.jsx(Tc,{value:"scheduled",children:"Agendado"}),p.jsx(Tc,{value:"published",children:"Publicado"}),p.jsx(Tc,{value:"archived",children:"Arquivado"})]})]})]})]})]}),p.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 border-2 border-purple-200",children:[p.jsxs("h3",{className:"text-lg font-bold text-purple-900 mb-4 flex items-center gap-2",children:[p.jsx(ys,{className:"w-5 h-5 text-purple-600"}),"🎧 Links de Streaming"]}),p.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Spotify"}),p.jsx(Ec,{value:o.spotify_url,onChange:e=>he("spotify_url",e.target.value),placeholder:"URL Spotify",type:"url"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Apple Music"}),p.jsx(Ec,{value:o.apple_music_url,onChange:e=>he("apple_music_url",e.target.value),placeholder:"URL Apple Music",type:"url"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"YouTube"}),p.jsx(Ec,{value:o.youtube_url,onChange:e=>he("youtube_url",e.target.value),placeholder:"URL YouTube",type:"url"})]})]})]}),p.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl p-6 border-2 border-orange-200",children:[p.jsxs("h3",{className:"text-lg font-bold text-orange-900 mb-4 flex items-center gap-2",children:[p.jsx(ms,{className:"w-5 h-5 text-orange-600"}),"🏷️ Métadados"]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hashtags (separados por vírgula)"}),p.jsx(Ec,{value:o.hashtags.join(", "),onChange:e=>(e=>{const t=e.split(",").map(e=>e.trim()).filter(e=>e);he("hashtags",t)})(e.target.value),placeholder:"humor, musica, trending, novidade"}),p.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Exemplo: humor, musica, trending, novidade, viral"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagem de Capa (URL)"}),p.jsx(Ec,{value:o.cover_image,onChange:e=>he("cover_image",e.target.value),placeholder:"https://exemplo.com/imagem.jpg",type:"url"})]})]})]}),p.jsxs("div",{className:"flex gap-3 pt-4 border-t-2 border-gray-200",children:[p.jsxs(zo,{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-lg py-3",children:[p.jsx(Cs,{className:"w-5 h-5 mr-2"}),a?"Atualizar Música":"Criar Nova Música"]}),p.jsx(zo,{type:"button",variant:"outline",onClick:()=>f(!1),className:"flex-1 text-lg py-3",children:"Cancelar"})]})]})]})})}),j&&o.tiktok_video_id&&p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:p.jsx("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"🎬 Visualizar Vídeo TikTok"}),p.jsx(zo,{onClick:()=>k(!1),variant:"ghost",size:"sm",children:p.jsx(Us,{className:"w-5 h-5"})})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:o.title||"Vídeo TikTok"}),p.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["ID: ",o.tiktok_video_id]})]}),p.jsx("div",{className:"bg-black rounded-lg overflow-hidden",children:p.jsx("iframe",{src:`https://www.tiktok.com/embed/${o.tiktok_video_id}?autoplay=0&muted=0&loop=1&controls=1&rel=0&modestbranding=1&playsinline=1&allowfullscreen=1`,width:"100%",height:"400",frameBorder:"0",allowFullScreen:!0,title:"TikTok Video Player"})}),p.jsx("div",{className:"text-center",children:p.jsxs(zo,{onClick:()=>window.open(o.tiktok_url,"_blank"),className:"bg-red-500 hover:bg-red-600 text-white",children:[p.jsx(cs,{className:"w-4 h-4 mr-2"}),"Abrir no TikTok"]})})]})]})})}),M&&p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:p.jsx("div",{className:"bg-white rounded-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"📥 Importar Perfil TikTok"}),p.jsx(zo,{onClick:()=>P(!1),variant:"ghost",size:"sm",children:p.jsx(Us,{className:"w-5 h-5"})})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:p.jsxs("p",{className:"text-blue-800 text-sm",children:[p.jsx("strong",{children:"💡 Dica:"})," Cole o link do perfil TikTok para importar todas as vídeos de uma vez!"]})}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link do Perfil TikTok"}),p.jsx(Ec,{value:R,onChange:e=>A(e.target.value),placeholder:"https://www.tiktok.com/@amusicadasegunda",className:"w-full"}),p.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Exemplo: https://www.tiktok.com/@amusicadasegunda"})]}),z&&p.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Importando vídeos..."}),p.jsxs("span",{className:"text-sm text-gray-500",children:[q.current," / ",q.total]})]}),p.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:p.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:q.current/q.total*100+"%"}})})]}),p.jsxs("div",{className:"flex gap-3 pt-4",children:[p.jsxs(zo,{onClick:()=>h(null,null,function*(){if(R.trim()){B(!0),H({current:0,total:0});try{const t=yield Z(R);if(0===t.length)throw new Error("❌ Nenhuma vídeo encontrada neste perfil");H({current:0,total:t.length});const s=[];for(let r=0;r<t.length;r++){const n=t[r];H({current:r+1,total:t.length});try{const e={id:Date.now().toString()+"_"+r,title:n.title||`Música da Segunda - ${r+1}`,artist:n.artist||"Artista",description:n.description||"Música da Segunda - Nova descoberta musical!",tiktok_url:n.url,tiktok_video_id:n.videoId,tiktok_publication_date:n.publicationDate||(new Date).toISOString(),release_date:de(),status:"draft",hashtags:n.hashtags||["musica","trending","novidade"],cover_image:n.coverImage||"",spotify_url:"",apple_music_url:"",youtube_url:"",lyrics:"",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};s.push(e),yield new Promise(e=>setTimeout(e,500))}catch(e){}}U(s),P(!1),me("success",`✅ ${s.length} músicas importadas com sucesso! Agora você pode revisar e publicar.`)}catch(e){me("error",`❌ Erro ao importar perfil: ${e.message}`)}finally{B(!1),H({current:0,total:0})}}else me("error","❌ Por favor, insira o link do perfil TikTok")}),disabled:z||!R.trim(),className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[z?p.jsx(Ss,{className:"w-4 h-4 mr-2 animate-spin"}):p.jsx(Ds,{className:"w-4 h-4 mr-2"}),z?"Analisando...":"Analisar Perfil"]}),p.jsx(zo,{onClick:()=>P(!1),variant:"outline",className:"flex-1",children:"Cancelar"})]})]})]})})}),L&&L.length>0&&p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:p.jsx("div",{className:"bg-white rounded-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsxs("h2",{className:"text-2xl font-bold text-green-900",children:["📋 Revisar Músicas Importadas (",L.length,")"]}),p.jsx(zo,{onClick:()=>U([]),variant:"ghost",size:"sm",children:p.jsx(Us,{className:"w-5 h-5"})})]}),p.jsxs("div",{className:"space-y-6",children:[p.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:p.jsxs("p",{className:"text-green-800 text-sm",children:[p.jsx("strong",{children:"✅ Sucesso!"})," ",L.length," músicas foram importadas do perfil TikTok. Revise os detalhes e publique todas de uma vez no Supabase."]})}),p.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:L.map((e,t)=>p.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{className:"flex-1",children:[p.jsxs("h3",{className:"font-semibold text-gray-900 mb-2",children:[t+1,". ",e.title]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[p.jsxs("div",{children:[p.jsx("span",{className:"text-gray-600",children:"Artista:"})," ",e.artist]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-gray-600",children:"Data Lançamento:"})," ",new Date(e.release_date).toLocaleDateString("pt-BR")]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-gray-600",children:"Data TikTok:"})," ",new Date(e.tiktok_publication_date).toLocaleDateString("pt-BR")]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-gray-600",children:"Hashtags:"})," ",e.hashtags.join(", ")]})]}),p.jsxs("div",{className:"mt-2",children:[p.jsx("span",{className:"text-gray-600",children:"Descrição:"})," ",e.description]})]}),p.jsxs("div",{className:"ml-4 flex gap-2",children:[p.jsxs(zo,{onClick:()=>(e=>{F(l({},e)),K(!0)})(e),variant:"outline",size:"sm",className:"text-blue-600 border-blue-300 hover:bg-blue-50",children:[p.jsx(Rs,{className:"w-4 h-4 mr-1"}),"Editar"]}),p.jsxs(zo,{onClick:()=>window.open(e.tiktok_url,"_blank"),variant:"outline",size:"sm",className:"text-red-600 border-red-300 hover:bg-red-50",children:[p.jsx(cs,{className:"w-4 h-4 mr-1"}),"Ver TikTok"]}),p.jsxs(zo,{onClick:()=>{return t=e.id,void(confirm("❌ Tem certeza que deseja excluir esta música?")&&(U(e=>e.filter(e=>e.id!==t)),me("success","✅ Música removida da lista de importação")));var t},variant:"outline",size:"sm",className:"text-red-600 border-red-300 hover:bg-red-50",children:[p.jsx($s,{className:"w-4 h-4 mr-1"}),"Excluir"]})]})]})},e.id))}),p.jsxs("div",{className:"flex gap-3 pt-4 border-t-2 border-gray-200",children:[p.jsxs(zo,{onClick:()=>h(null,null,function*(){if(L&&0!==L.length){B(!0),H({current:0,total:L.length});try{let t=0,s=0;for(let r=0;r<L.length;r++){const n=L[r];H({current:r+1,total:L.length});try{"supabase"===_?(yield Pi(n),t++):(localStorageService.songs.create(n),t++),yield new Promise(e=>setTimeout(e,300))}catch(e){s++}}t>0?(me("success",`✅ ${t} músicas publicadas com sucesso! ${s>0?`(${s} erros)`:""}`),U([]),X()):me("error",`❌ Erro ao publicar músicas: ${s} erros`)}catch(e){me("error",`❌ Erreur na publicação em lote: ${e.message}`)}finally{B(!1),H({current:0,total:0})}}}),disabled:z,className:"flex-1 bg-green-600 hover:bg-green-700 text-lg py-3",children:[z?p.jsx(Ss,{className:"w-5 h-5 mr-2 animate-spin"}):p.jsx(Cs,{className:"w-5 h-5 mr-2"}),z?"Publicando...":"Publier"]}),p.jsx(zo,{onClick:()=>U([]),variant:"outline",className:"flex-1 text-lg py-3",children:"Cancelar"})]}),z&&p.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Publicando músicas..."}),p.jsxs("span",{className:"text-sm text-gray-500",children:[q.current," / ",q.total]})]}),p.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:p.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:q.current/q.total*100+"%"}})})]})]})]})})}),V&&W&&p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:p.jsx("div",{className:"bg-white rounded-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"✏️ Editar Música Importada do TikTok"}),p.jsx(zo,{onClick:()=>K(!1),variant:"ghost",size:"sm",children:p.jsx(Us,{className:"w-5 h-5"})})]}),p.jsx("form",{onSubmit:e=>{e.preventDefault(),W&&(U(e=>e.map(e=>e.id===W.id?W:e)),K(!1),F(null),me("success","✅ Música editada com sucesso!"))},children:p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-100 rounded-xl p-6 border-2 border-blue-200",children:[p.jsxs("h3",{className:"text-lg font-bold text-blue-900 mb-4 flex items-center gap-2",children:[p.jsx(Ls,{className:"w-5 h-5 text-blue-600"}),"📱 Informações TikTok (Obrigatório)"]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link da Vídeo TikTok*"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx(Ec,{value:W.tiktok_url,onChange:e=>F(c(l({},W),{tiktok_url:e.target.value})),placeholder:"https://www.tiktok.com/@usuario/video/1234567890",className:"flex-1"}),p.jsxs(zo,{type:"button",onClick:()=>window.open(W.tiktok_url,"_blank"),variant:"outline",className:"text-blue-600 border-blue-300 hover:bg-blue-50",children:[p.jsx(cs,{className:"w-4 h-4 mr-2"}),"Abrir TikTok"]})]}),p.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[p.jsx("p",{className:"font-medium mb-1",children:"Formatos aceitos:"}),p.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[p.jsx("li",{children:"https://www.tiktok.com/@usuario/video/ID"}),p.jsx("li",{children:"https://vm.tiktok.com/ID"}),p.jsx("li",{children:"ID direto (15-20 dígitos)"})]})]}),p.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:p.jsxs("div",{className:"flex items-start gap-2",children:[p.jsx(os,{className:"w-4 h-4 text-yellow-600 mt-0.5 flex-shrink-0"}),p.jsxs("div",{className:"text-xs text-yellow-800",children:[p.jsx("p",{className:"font-medium",children:"IMPORTANT:"}),p.jsx("p",{children:"Cole apenas o link da vídeo TikTok (ex: https://www.tiktok.com/@usuario/video/1234567890), NÃO o código HTML de incorporação!"})]})]})})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ID da Vídeo TikTok"}),p.jsx(Ec,{value:W.tiktok_video_id,onChange:e=>F(c(l({},W),{tiktok_video_id:e.target.value})),placeholder:"ID da vídeo"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Publicação TikTok"}),p.jsx(Ec,{type:"datetime-local",value:W.tiktok_publication_date?W.tiktok_publication_date.slice(0,16):"",onChange:e=>F(c(l({},W),{tiktok_publication_date:e.target.value}))})]})]})]})]}),p.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-100 rounded-xl p-6 border-2 border-green-200",children:[p.jsxs("h3",{className:"text-lg font-bold text-green-900 mb-4 flex items-center gap-2",children:[p.jsx(ks,{className:"w-5 h-5 text-green-600"}),"🎵 Métadados Extraídos do TikTok"]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Título*"}),p.jsx(Ec,{value:W.title,onChange:e=>F(c(l({},W),{title:e.target.value})),placeholder:"Título da música"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Artista*"}),p.jsx(Ec,{value:W.artist,onChange:e=>F(c(l({},W),{artist:e.target.value})),placeholder:"Nome do artista"})]})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center justify-between",children:[p.jsx("span",{children:"Descrição"}),W&&W.lyrics&&W.lyrics.trim()&&p.jsxs(zo,{type:"button",onClick:()=>h(null,null,function*(){if(W.lyrics&&W.lyrics.trim()){G(!0);try{const e=yield se(W.lyrics,W.release_date||W.tiktok_publication_date,W.title);F(c(l({},W),{description:e})),me("success","✅ Descrição gerada automaticamente!")}catch(e){me("error","❌ Erro ao gerar descrição automática")}finally{G(!1)}}else me("error","❌ Adicione letras primeiro para gerar uma descrição")}),variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-800 hover:bg-blue-50",disabled:J,children:[p.jsx(bs,{className:"w-4 h-4 mr-1"}),J?"Gerando...":"Sugerir"]})]}),p.jsx(Mc,{value:W.description,onChange:e=>F(c(l({},W),{description:e.target.value})),placeholder:"Descrição da música",rows:3})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hashtags (separados por vírgula)"}),p.jsx(Ec,{value:W.hashtags.join(", "),onChange:e=>F(c(l({},W),{hashtags:e.target.value.split(",").map(e=>e.trim()).filter(e=>e)})),placeholder:"humor, musica, trending, novidade"}),p.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Exemplo: humor, musica, trending, novidade, viral"})]})]}),p.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-100 rounded-xl p-6 border-2 border-purple-200",children:[p.jsxs("h3",{className:"text-lg font-bold text-purple-900 mb-4 flex items-center gap-2",children:[p.jsx(ts,{className:"w-5 h-5 text-purple-600"}),"📅 Datas de Publicação"]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Lançamento no App*"}),p.jsx(Ec,{type:"date",value:W.release_date,onChange:e=>F(c(l({},W),{release_date:e.target.value}))}),p.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Data sugerida: ",de()?oe(ae(de()),"EEEE, d 'de' MMMM 'de' yyyy",{locale:Vo}):"Calculando..."]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),p.jsxs(wc,{value:W.status,onValueChange:e=>F(c(l({},W),{status:e})),children:[p.jsx(kc,{children:p.jsx(jc,{})}),p.jsxs(Sc,{children:[p.jsx(Tc,{value:"draft",children:"Brouillon"}),p.jsx(Tc,{value:"published",children:"Publié"}),p.jsx(Tc,{value:"archived",children:"Archivé"})]})]})]})]})]}),p.jsxs("div",{className:"bg-gradient-to-r from-violet-50 to-purple-100 rounded-xl p-6 border-2 border-violet-200",children:[p.jsxs("h3",{className:"text-lg font-bold text-violet-900 mb-4 flex items-center gap-2",children:[p.jsx(ys,{className:"w-5 h-5 text-violet-600"}),"🎧 Links de Streaming"]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Spotify"}),p.jsx(Ec,{value:W.spotify_url||"",onChange:e=>F(c(l({},W),{spotify_url:e.target.value})),placeholder:"URL Spotify",type:"url"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Apple Music"}),p.jsx(Ec,{value:W.apple_music_url||"",onChange:e=>F(c(l({},W),{apple_music_url:e.target.value})),placeholder:"URL Apple Music",type:"url"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"YouTube"}),p.jsx(Ec,{value:W.youtube_url||"",onChange:e=>F(c(l({},W),{youtube_url:e.target.value})),placeholder:"URL YouTube",type:"url"})]})]})]}),p.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-100 rounded-xl p-6 border-2 border-orange-200",children:[p.jsxs("h3",{className:"text-lg font-bold text-orange-900 mb-4 flex items-center gap-2",children:[p.jsx(ms,{className:"w-5 h-5 text-orange-600"}),"🏷️ Métadados"]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagem de Capa (URL)"}),p.jsx(Ec,{value:W.cover_image||"",onChange:e=>F(c(l({},W),{cover_image:e.target.value})),placeholder:"https://exemplo.com/imagem.jpg",type:"url"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Letras da Música"}),p.jsx(Mc,{value:W.lyrics||"",onChange:e=>F(c(l({},W),{lyrics:e.target.value})),placeholder:"Letras da música...",rows:4})]})]})]}),p.jsxs("div",{className:"flex gap-3 pt-4 border-t-2 border-gray-200",children:[p.jsxs(zo,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700 text-lg py-3",children:[p.jsx(Cs,{className:"w-5 h-5 mr-2"}),"Salvar Alterações"]}),p.jsx(zo,{type:"button",onClick:()=>K(!1),variant:"outline",className:"flex-1 text-lg py-3",children:"Cancelar"})]})]})})]})})})]})})}function Dc(){return p.jsx("div",{className:"min-h-screen bg-gradient-to-b from-teal-200 to-rose-200 p-5",children:p.jsxs("div",{className:"max-w-4xl mx-auto",children:[p.jsx("div",{className:"text-center mb-8",children:p.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[p.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden border-4 border-white/20 shadow-xl flex-shrink-0",children:p.jsx("img",{src:"images/Musica da segunda.jpg",alt:"Logo Música da Segunda",className:"w-full h-full object-cover"})}),p.jsxs("div",{className:"text-left",children:[p.jsx("h1",{className:"text-3xl md:text-4xl font-black text-white drop-shadow-lg mb-2",children:"Playlist"}),p.jsx("p",{className:"text-white/90 font-medium text-lg drop-shadow-md",children:"Ouça todas as músicas da Música da Segunda"})]})]})}),p.jsx("div",{className:"bg-white/90 backdrop-blur-lg rounded-3xl p-6 shadow-2xl",children:p.jsx("div",{className:"w-full",children:p.jsx("iframe",{"data-testid":"embed-iframe",style:{borderRadius:"12px"},src:"https://open.spotify.com/embed/playlist/5z7Jan9yS1KRzwWEPYs4sH?utm_source=generator",width:"100%",height:"800",frameBorder:"0",allowFullScreen:"",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",className:"shadow-lg md:h-[800px] h-[600px]"})})})]})})}m.forwardRef((e,t)=>{var s=e,{className:r,orientation:n="horizontal",decorative:a=!0}=s,i=d(s,["className","orientation","decorative"]);return p.jsx(Oc,l({ref:t,decorative:a,orientation:n,className:Di("shrink-0 bg-border","horizontal"===n?"h-[1px] w-full":"h-full w-[1px]",r)},i))}).displayName=Oc.displayName;const Ic=m.lazy(()=>ge(()=>import("./TikTokDemo-BIu59cTl.js"),__vite__mapDeps([0,1,2,3]))),Lc={Home:Ko,Calendar:Go,AdventCalendar:Xo,Sobre:Zo,Blog:Cc,Admin:$c,Playlist:Dc,TikTokDemo:Ic};function Uc(){const e=function(e){e.endsWith("/")&&(e=e.slice(0,-1));let t=e.split("/").pop();return t.includes("?")&&(t=t.split("?")[0]),t&&"amusicadaegunda"!==t?t.startsWith("tiktok")?"TikTokDemo":Object.keys(Lc).find(e=>e.toLowerCase()===t.toLowerCase())||"Home":"Home"}(rt().pathname);return p.jsx(qs,{currentPageName:e,children:p.jsxs(yt,{children:[p.jsx(vt,{path:"/",element:p.jsx(Ko,{})}),p.jsx(vt,{path:"/home",element:p.jsx(Ko,{})}),p.jsx(vt,{path:"/calendar",element:p.jsx(Go,{})}),p.jsx(vt,{path:"/adventcalendar",element:p.jsx(Xo,{})}),p.jsx(vt,{path:"/sobre",element:p.jsx(Zo,{})}),p.jsx(vt,{path:"/blog",element:p.jsx(Cc,{})}),p.jsx(vt,{path:"/admin",element:p.jsx($c,{})}),p.jsx(vt,{path:"/playlist",element:p.jsx(Dc,{})}),p.jsx(vt,{path:"/tiktokdemo",element:p.jsx(Ic,{})}),p.jsx(vt,{path:"/tiktok/:id",element:p.jsx(Ic,{})}),p.jsx(vt,{path:"/calendar",element:p.jsx(Go,{})})]})})}function zc(){return p.jsx(qt,{children:p.jsx(Uc,{})})}const Bc="ADD_TOAST",qc="UPDATE_TOAST",Hc="DISMISS_TOAST",Wc="REMOVE_TOAST";let Fc=0;const Vc=new Map,Kc=e=>{if(Vc.has(e))return;const t=setTimeout(()=>{Vc.delete(e),Xc({type:Wc,toastId:e})},1e6);Vc.set(e,t)},Jc=(e,t)=>{switch(t.type){case Bc:return c(l({},e),{toasts:[t.toast,...e.toasts].slice(0,20)});case qc:return c(l({},e),{toasts:e.toasts.map(e=>e.id===t.toast.id?l(l({},e),t.toast):e)});case Hc:{const{toastId:s}=t;return s?Kc(s):e.toasts.forEach(e=>{Kc(e.id)}),c(l({},e),{toasts:e.toasts.map(e=>e.id===s||void 0===s?c(l({},e),{open:!1}):e)})}case Wc:return void 0===t.toastId?c(l({},e),{toasts:[]}):c(l({},e),{toasts:e.toasts.filter(e=>e.id!==t.toastId)})}},Gc=[];let Yc={toasts:[]};function Xc(e){Yc=Jc(Yc,e),Gc.forEach(e=>{e(Yc)})}function Zc(e){var t=d(e,[]);const s=(Fc=(Fc+1)%Number.MAX_VALUE,Fc.toString()),r=()=>Xc({type:Hc,toastId:s});return Xc({type:Bc,toast:c(l({},t),{id:s,open:!0,onOpenChange:e=>{e||r()}})}),{id:s,dismiss:r,update:e=>Xc({type:qc,toast:c(l({},e),{id:s})})}}const Qc=m.forwardRef((e,t)=>{var s=d(e,[]);return p.jsx("div",l({ref:t,className:"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]"},s))});Qc.displayName="ToastProvider";const ed=m.forwardRef((e,t)=>{var s=d(e,[]);return p.jsx("div",l({ref:t,className:"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]"},s))});ed.displayName="ToastViewport";const td=Lo("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),sd=m.forwardRef((e,t)=>{var s=e,{className:r,variant:n}=s,a=d(s,["className","variant"]);return p.jsx("div",l({ref:t,className:Di(td({variant:n}),r)},a))});sd.displayName="Toast";m.forwardRef((e,t)=>{var s=e,{className:r}=s,n=d(s,["className"]);return p.jsx("div",l({ref:t,className:Di("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",r)},n))}).displayName="ToastAction";const rd=m.forwardRef((e,t)=>{var s=e,{className:r}=s,n=d(s,["className"]);return p.jsx("button",c(l({ref:t,className:Di("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),"toast-close":""},n),{children:p.jsx(Us,{className:"h-4 w-4"})}))});rd.displayName="ToastClose";const nd=m.forwardRef((e,t)=>{var s=e,{className:r}=s,n=d(s,["className"]);return p.jsx("div",l({ref:t,className:Di("text-sm font-semibold",r)},n))});nd.displayName="ToastTitle";const ad=m.forwardRef((e,t)=>{var s=e,{className:r}=s,n=d(s,["className"]);return p.jsx("div",l({ref:t,className:Di("text-sm opacity-90",r)},n))});function id(){const{toasts:e}=function(){const[e,t]=m.useState(Yc);return m.useEffect(()=>(Gc.push(t),()=>{const e=Gc.indexOf(t);e>-1&&Gc.splice(e,1)}),[e]),c(l({},e),{toast:Zc,dismiss:e=>Xc({type:Hc,toastId:e})})}();return p.jsxs(Qc,{children:[e.map(function(e){var t=e,{id:s,title:r,description:n,action:a}=t,i=d(t,["id","title","description","action"]);return p.jsxs(sd,c(l({},i),{children:[p.jsxs("div",{className:"grid gap-1",children:[r&&p.jsx(nd,{children:r}),n&&p.jsx(ad,{children:n})]}),a,p.jsx(rd,{})]}),s)}),p.jsx(ed,{})]})}ad.displayName="ToastDescription";var od=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(od||{}),ld={rel:["amphtml","canonical","alternate"]},cd={type:["application/ld+json"]},dd={charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]};Object.values(od);var ud={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"};Object.entries(ud).reduce((e,[t,s])=>(e[s]=t,e),{});var hd="data-rh",md=(e,t)=>Array.isArray(e)?e.reduce((e,s)=>(((e,t)=>{const s=Object.keys(e);for(let r=0;r<s.length;r+=1)if(t[s[r]]&&t[s[r]].includes(e[s[r]]))return!0;return!1})(s,t)?e.priority.push(s):e.default.push(s),e),{priority:[],default:[]}):{default:e,priority:[]},pd=["noscript","script","style"],fd=(e,t=!0)=>!1===t?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),gd=e=>Object.keys(e).reduce((t,s)=>{const r=void 0!==e[s]?`${s}="${e[s]}"`:`${s}`;return t?`${t} ${r}`:r},""),xd=(e,t,s,r)=>{const n=gd(s),a=(i=t,Array.isArray(i)?i.join(""):i);var i;return n?`<${e} ${hd}="true" ${n}>${fd(a,r)}</${e}>`:`<${e} ${hd}="true">${fd(a,r)}</${e}>`},vd=(e,t={})=>Object.keys(e).reduce((t,s)=>(t[ud[s]||s]=e[s],t),t),bd=(e,t)=>t.map((t,s)=>{const r={key:s,[hd]:!0};return Object.keys(t).forEach(e=>{const s=ud[e]||e;if("innerHTML"===s||"cssText"===s){const e=t.innerHTML||t.cssText;r.dangerouslySetInnerHTML={__html:e}}else r[s]=t[e]}),K.createElement(e,r)}),yd=(e,t,s=!0)=>{switch(e){case"title":return{toComponent:()=>((e,t,s)=>{const r=vd(s,{key:t,[hd]:!0});return[K.createElement("title",r,t)]})(0,t.title,t.titleAttributes),toString:()=>xd(e,t.title,t.titleAttributes,s)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>vd(t),toString:()=>gd(t)};default:return{toComponent:()=>bd(e,t),toString:()=>((e,t,s=!0)=>t.reduce((t,r)=>{const n=r,a=Object.keys(n).filter(e=>!("innerHTML"===e||"cssText"===e)).reduce((e,t)=>{const r=void 0===n[t]?t:`${t}="${fd(n[t],s)}"`;return e?`${e} ${r}`:r},""),i=n.innerHTML||n.cssText||"",o=-1===pd.indexOf(e);return`${t}<${e} ${hd}="true" ${a}${o?"/>":`>${i}</${e}>`}`},""))(e,t,s)}}},wd=e=>{const{baseTag:t,bodyAttributes:s,encode:r=!0,htmlAttributes:n,noscriptTags:a,styleTags:i,title:o="",titleAttributes:l,prioritizeSeoTags:c}=e;let{linkTags:d,metaTags:u,scriptTags:h}=e,m={toComponent:()=>{},toString:()=>""};return c&&({priorityMethods:m,linkTags:d,metaTags:u,scriptTags:h}=(({metaTags:e,linkTags:t,scriptTags:s,encode:r})=>{const n=md(e,dd),a=md(t,ld),i=md(s,cd);return{priorityMethods:{toComponent:()=>[...bd("meta",n.priority),...bd("link",a.priority),...bd("script",i.priority)],toString:()=>`${yd("meta",n.priority,r)} ${yd("link",a.priority,r)} ${yd("script",i.priority,r)}`},metaTags:n.default,linkTags:a.default,scriptTags:i.default}})(e)),{priority:m,base:yd("base",t,r),bodyAttributes:yd("bodyAttributes",s,r),htmlAttributes:yd("htmlAttributes",n,r),link:yd("link",d,r),meta:yd("meta",u,r),noscript:yd("noscript",a,r),script:yd("script",h,r),style:yd("style",i,r),title:yd("title",{title:o,titleAttributes:l},r)}},jd=[],kd=!("undefined"==typeof window||!window.document||!window.document.createElement),_d=class{constructor(e,t){u(this,"instances",[]),u(this,"canUseDOM",kd),u(this,"context"),u(this,"value",{setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?jd:this.instances,add:e=>{(this.canUseDOM?jd:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?jd:this.instances).indexOf(e);(this.canUseDOM?jd:this.instances).splice(t,1)}}}),this.context=e,this.canUseDOM=t||!1,t||(e.helmet=wd({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},Nd=K.createContext({}),Sd=(e=class extends m.Component{constructor(t){super(t),u(this,"helmetData"),this.helmetData=new _d(this.props.context||{},e.canUseDOM)}render(){return K.createElement(Nd.Provider,{value:this.helmetData.value},this.props.children)}},u(e,"canUseDOM",kd),e);function Td(){return p.jsxs(Sd,{children:[p.jsx(zc,{}),p.jsx(id,{})]})}pe.createRoot(document.getElementById("root")).render(p.jsx(K.StrictMode,{children:p.jsx(Td,{})}));export{zo as B,Ec as I,_s as P,Ts as R,it as a,Qt as c,ot as u};

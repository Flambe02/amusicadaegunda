const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Calendar-CFacdQCn.js","assets/vendor-react-CM84WoKi.js","assets/vendor-ui-8p2QWU2G.js","assets/vendor-date-HUzpq8ep.js","assets/vendor-supabase-ci4wIQv9.js","assets/RodaDaSegunda-D3Mw_vBh.js","assets/ProtectedAdmin-BA0yajfY.js","assets/input-DwK3-irR.js","assets/badge-BeOynU1Y.js","assets/card-ALYzqOJZ.js","assets/Login-DmLzc4Ob.js","assets/ProtectedAdmin-D0tnbmQj.css","assets/Sobre-ojAtB1DW.js","assets/ContentForAI-CwcvHJn8.js","assets/Blog-BQH39H9m.js","assets/Playlist-Bd7OQw4N.js","assets/seo-jsonld-B3xF89-T.js","assets/Song-ZcGp1vvv.js","assets/Youtube-j5Q38HDY.js","assets/YouTubePlayer-C2QEHoWg.js","assets/YoutubeTest-rhoMmNVi.js","assets/YoutubeSimple-42QlBDRI.js","assets/TikTokDemo-kk5ZjN37.js","assets/Search-PT3ISD7y.js","assets/webvitals-DE1dsIbn.js"])))=>i.map(i=>d[i]);
var es=Object.defineProperty;var ts=(t,s,r)=>s in t?es(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r;var ee=(t,s,r)=>ts(t,typeof s!="symbol"?s+"":s,r);import{X as Z,A as it,S as Ue,j as ss,H as W,k as Ve,C as ye,m as rs,P as as,n as $e,p as se,q as je,t as os,r as is,D as R,u as ft,F as Y,G as bt,M as ns,L as wt,v as ke,w as ls,T as cs,x as ds,y as vt,O as yt,z as us,B as jt,E as qe,J as ms,K as Nt,R as hs,N as St,V as xs,Q as ps,U as _t,W as gs,Y as J,Z as fs,$ as ze,a0 as Et,a1 as E,a2 as nt}from"./vendor-ui-8p2QWU2G.js";import{r as d,j as e,L as re,i as Ge,k as bs,H as lt,B as ws,m as vs,n as te,N as pe,p as ys,c as kt,q as js,t as Ns}from"./vendor-react-CM84WoKi.js";import{c as Ss}from"./vendor-supabase-ci4wIQv9.js";import{s as ge,e as fe,p as M,i as be,a as xe,f as O,b as z}from"./vendor-date-HUzpq8ep.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(i){if(i.ep)return;i.ep=!0;const l=r(i);fetch(i.href,l)}})();function A(t){return"/"+t.toLowerCase().replace(/ /g,"-")}const Ye=()=>{const t=navigator.userAgent||navigator.vendor||window.opera;return/iPad|iPhone|iPod/.test(t)&&!window.MSStream},It=()=>window.navigator.standalone===!0||window.matchMedia("(display-mode: standalone)").matches,_s=()=>{const t=navigator.userAgent;return/Safari/.test(t)&&!/Chrome/.test(t)},Ne=()=>{const t=Ye(),s=It(),r=localStorage.getItem("ios-tutorial-seen");return t&&!s&&!r};function Es({onShowVisualGuide:t}){const[s,r]=d.useState(!1),[a,i]=d.useState(0),[l,o]=d.useState(!1),[m,n]=d.useState(!1);d.useEffect(()=>{const v=Ye(),j=It();if(o(v),n(j),Ne()){const I=setTimeout(()=>{r(!0)},2e3);return()=>clearTimeout(I)}},[]);const c=[{title:"Adicionar √† tela inicial",description:"Clique no bot√£o Compartilhar na parte inferior do seu navegador",icon:Ue,arrow:it,arrowPosition:"bottom-20 right-4",highlight:"share-button"},{title:"Selecionar a op√ß√£o",description:"Depois escolha 'Na tela inicial' no menu",icon:W,arrow:ss,arrowPosition:"bottom-16 right-20",highlight:"add-to-home"},{title:"Confirmar a adi√ß√£o",description:"Pressione 'Adicionar' para instalar o aplicativo",icon:W,arrow:it,arrowPosition:"bottom-12 right-16",highlight:"confirm-add"}],p=()=>{a<c.length-1?i(a+1):(r(!1),localStorage.setItem("ios-tutorial-seen","true"))},h=()=>{r(!1),localStorage.setItem("ios-tutorial-seen","true")},f=()=>{r(!1),localStorage.setItem("ios-tutorial-seen","true")};return!Ne()||!s?null:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50",onClick:f}),e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-sm w-full mx-4 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white p-6 text-center relative",children:[e.jsx("button",{onClick:f,className:"absolute top-4 right-4 p-2 rounded-full bg-white/20 hover:bg-white/30 transition-colors",children:e.jsx(Z,{className:"w-5 h-5"})}),e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(()=>{const v=c[a].icon;return e.jsx(v,{className:"w-8 h-8"})})()}),e.jsx("h2",{className:"text-xl font-bold mb-2",children:c[a].title}),e.jsx("p",{className:"text-blue-100 text-sm",children:c[a].description})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-gray-100 rounded-2xl p-4 mb-6 relative",children:[e.jsxs("div",{className:"bg-white rounded-xl p-3 mb-3 flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Safari"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-400 rounded-full"}),e.jsx("div",{className:"w-3 h-3 bg-yellow-400 rounded-full"}),e.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 flex items-center justify-between",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-300 rounded"}),e.jsx("div",{className:"flex-1 mx-3 h-8 bg-gray-200 rounded-lg"}),e.jsx("div",{className:"w-6 h-6 bg-gray-300 rounded"})]}),e.jsx("div",{className:"bg-white rounded-xl p-3 mt-3 flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-600",children:[e.jsx(Ue,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Compartilhar"})]})}),e.jsx("div",{className:`absolute ${c[a].arrowPosition} animate-bounce`,children:(()=>{const v=c[a].arrow;return e.jsx(v,{className:"w-8 h-8 text-blue-600 drop-shadow-lg"})})()})]}),e.jsx("div",{className:"flex justify-center gap-2 mb-6",children:c.map((v,j)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${j===a?"bg-blue-500":"bg-gray-300"}`},j))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:h,className:"flex-1 py-3 px-4 text-gray-600 border border-gray-300 rounded-xl hover:bg-gray-50 transition-colors",children:"Ignorar"}),e.jsx("button",{onClick:p,className:"flex-1 py-3 px-4 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors font-medium",children:a===c.length-1?"Finalizar":"Pr√≥ximo"})]})]})]})}),e.jsx("div",{className:"fixed bottom-20 left-4 right-4 z-40 lg:hidden",children:e.jsx("div",{className:"bg-blue-600 text-white rounded-2xl p-4 shadow-lg border border-blue-500/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(W,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-sm",children:"Adicionar √† tela inicial"}),e.jsx("p",{className:"text-blue-100 text-xs",children:'Clique em Compartilhar e depois "Na tela inicial"'})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>r(!0),className:"bg-white/20 hover:bg-white/30 px-3 py-1 rounded-lg text-xs font-medium transition-colors",children:"Tutorial"}),e.jsx("button",{onClick:t,className:"bg-white/20 hover:bg-white/30 px-3 py-1 rounded-lg text-xs font-medium transition-colors",children:"Guia visual"})]})]})})})]})}const ks=({message:t,type:s="info",duration:r=5e3,onClose:a})=>{const[i,l]=d.useState(!0);d.useEffect(()=>{if(r>0){const p=setTimeout(()=>{l(!1),setTimeout(()=>a?.(),300)},r);return()=>clearTimeout(p)}},[r,a]);const o=()=>{l(!1),setTimeout(()=>a?.(),300)},m={success:rs,error:ye,warning:ye,info:Ve},n={success:"bg-green-500 border-green-600",error:"bg-red-500 border-red-600",warning:"bg-yellow-500 border-yellow-600",info:"bg-blue-500 border-blue-600"},c=m[s];return i?e.jsx("div",{className:`fixed top-4 right-4 z-50 transform transition-all duration-300 ${i?"translate-x-0 opacity-100":"translate-x-full opacity-0"}`,children:e.jsx("div",{className:`${n[s]} text-white rounded-lg shadow-lg border p-4 max-w-sm`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(c,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-medium",children:t})}),e.jsx("button",{onClick:o,className:"text-white/80 hover:text-white transition-colors flex-shrink-0",children:e.jsx(Z,{className:"w-4 h-4"})})]})})}):null};function Is({isOpen:t,onClose:s}){const[r,a]=d.useState(0),[i,l]=d.useState(!1),o=[{title:"Passo 1: Bot√£o Compartilhar",description:"Localize o bot√£o Compartilhar na parte inferior do seu navegador Safari",image:"step1",highlight:"share-button"},{title:"Passo 2: Menu Compartilhar",description:"O menu Compartilhar abre com v√°rias op√ß√µes",image:"step2",highlight:"share-menu"},{title:"Passo 3: Na tela inicial",description:"Role e selecione 'Na tela inicial'",image:"step3",highlight:"add-to-home"},{title:"Passo 4: Confirma√ß√£o",description:"Pressione 'Adicionar' para instalar o aplicativo",image:"step4",highlight:"confirm"}],m=()=>{r<o.length-1&&a(r+1)},n=()=>{r>0&&a(r-1)},c=()=>{if(l(!i),!i){const h=setInterval(()=>{a(f=>f>=o.length-1?(clearInterval(h),l(!1),f):f+1)},3e3)}},p=h=>e.jsxs("div",{className:"relative bg-gray-100 rounded-2xl p-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 text-xs text-gray-600",children:[e.jsx("span",{children:"9:41"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-4 h-2 bg-gray-300 rounded-full"}),e.jsx("span",{children:"100%"})]})]}),e.jsx("div",{className:"bg-gray-200 rounded-lg p-2 mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded"}),e.jsx("span",{className:"text-xs text-gray-600",children:"musica-da-segunda.com"})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-300 rounded"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full"}),e.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full"}),e.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full"}),e.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full"}),e.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full"})]})})]}),e.jsx("div",{className:"absolute bottom-4 right-4 bg-blue-500 text-white rounded-full p-3 shadow-lg",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})})}),e.jsx("div",{className:"absolute bottom-16 right-4 animate-bounce",children:e.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})})})]});return t?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:s}),e.jsxs("div",{className:"relative bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Guia de instala√ß√£o iOS"}),e.jsx("button",{onClick:s,className:"p-2 rounded-full bg-white/20 hover:bg-white/30 transition-colors",children:e.jsx(Z,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"flex items-center gap-4 mt-4",children:e.jsxs("button",{onClick:c,className:"flex items-center gap-2 bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition-colors",children:[i?e.jsx(as,{className:"w-4 h-4"}):e.jsx($e,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:i?"Pausar":"Reprodu√ß√£o autom√°tica"})]})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[p(),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:o[r].title}),e.jsx("p",{className:"text-gray-600",children:o[r].description})]}),e.jsx("div",{className:"flex justify-center gap-2 mb-6",children:o.map((h,f)=>e.jsx("div",{className:`w-3 h-3 rounded-full transition-colors ${f===r?"bg-blue-500":"bg-gray-300"}`},f))}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("button",{onClick:n,disabled:r===0,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${r===0?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:[e.jsx(se,{className:"w-4 h-4"}),"Anterior"]}),e.jsxs("button",{onClick:m,disabled:r===o.length-1,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${r===o.length-1?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:["Pr√≥ximo",e.jsx(je,{className:"w-4 h-4"})]})]})]})]})]}):null}function Ts(){const[t,s]=d.useState(!1),[r,a]=d.useState(""),[i,l]=d.useState("info"),[o,m]=d.useState(!1);d.useEffect(()=>{if(Ne()){const c=setTimeout(()=>{Ye()&&_s()&&(a('üí° Dica: Adicione este app √† sua tela inicial para uma experi√™ncia melhor! Clique em "Tutorial" para ver o guia completo.'),l("info"),s(!0))},3e3);return()=>clearTimeout(c)}},[]);const n=()=>{s(!1)};return Ne()?e.jsxs(e.Fragment,{children:[e.jsx(Es,{onShowVisualGuide:()=>m(!0)}),t&&e.jsx(ks,{message:r,type:i,duration:8e3,onClose:n}),e.jsx(Is,{isOpen:o,onClose:()=>m(!1)})]}):null}function k(...t){return os(is(t))}function As(t){return!t||typeof t!="string"?null:t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()}function Ie(t){if(!t||typeof t!="string")return null;const s=[/(?:youtube\.com\/shorts\/)([A-Za-z0-9_-]{11})/,/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/|youtube\.com\/v\/)([A-Za-z0-9_-]{11})/,/music\.youtube\.com\/watch\?v=([A-Za-z0-9_-]{11})/,/^([A-Za-z0-9_-]{11})$/];for(const r of s){const a=t.match(r);if(a&&a[1])return a[1]}return null}function ct(t){if(!t||typeof t!="string")return null;try{const s=t.toLowerCase(),r=t.match(/[?&]list=([A-Za-z0-9_-]+)/);if(r)return{id:r[1],type:"playlist"};const a=Ie(t);if(a)return{id:a,type:"video"};if(s.includes("music.youtube.com")){const i=t.match(/[?&]v=([A-Za-z0-9_-]{11})/);if(i)return{id:i[1],type:"video"}}return null}catch{return null}}function Cs(t,s="maxresdefault"){const r=Ie(t);return r?`https://img.youtube.com/vi/${r}/${s}.jpg`:null}const oe=({shouldScaleBackground:t=!0,...s})=>e.jsx(R.Root,{shouldScaleBackground:t,...s});oe.displayName="Drawer";const Ds=R.Portal,Tt=d.forwardRef(({className:t,...s},r)=>e.jsx(R.Overlay,{ref:r,className:k("fixed inset-0 z-[200] bg-black/60 backdrop-blur-sm",t),...s}));Tt.displayName=R.Overlay.displayName;const ie=d.forwardRef(({className:t,children:s,...r},a)=>{const i=d.useId(),l=r["aria-describedby"];return e.jsxs(Ds,{children:[e.jsx(Tt,{}),e.jsxs(R.Content,{ref:a,className:k("fixed inset-x-0 bottom-0 z-[200] mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",t),...r,"aria-describedby":l??i,children:[l===void 0?e.jsx(R.Description,{id:i,className:"sr-only",children:"Drawer content"}):null,e.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),s]})]})});ie.displayName="DrawerContent";const ne=({className:t,...s})=>e.jsx("div",{className:k("grid gap-1.5 p-4 text-center sm:text-left",t),...s});ne.displayName="DrawerHeader";const le=d.forwardRef(({className:t,...s},r)=>e.jsx(R.Title,{ref:r,className:k("text-lg font-semibold leading-none tracking-tight",t),...s}));le.displayName=R.Title.displayName;const He=d.forwardRef(({className:t,...s},r)=>e.jsx(R.Description,{ref:r,className:k("text-sm text-muted-foreground",t),...s}));He.displayName=R.Description.displayName;function Ps({open:t,onOpenChange:s}){const r=[{name:"Pesquisar",url:A("Search"),icon:ft,description:"Encontre uma m√∫sica"},{name:"Blog Musical",url:A("Blog"),icon:Y,description:"Artigos e not√≠cias sobre m√∫sica"},{name:"A Roda de Segunda",url:A("Roda"),icon:bt,description:"Gire a roda e descubra uma m√∫sica!"},{name:"Sobre / Nossa Miss√£o",url:A("Sobre"),icon:Ve,description:"Descubra nossa hist√≥ria"},{name:"Contato",url:"mailto:contact@amusicadasegunda.com",icon:ns,description:"Envie-nos uma mensagem",isExternal:!0}];return e.jsx(oe,{open:t,onOpenChange:s,shouldScaleBackground:!1,children:e.jsxs(ie,{className:"bg-black/95 backdrop-blur-xl border-t border-white/20 max-h-[85vh]",children:[e.jsx("div",{className:"mx-auto mt-4 h-1.5 w-16 rounded-full bg-white/30"}),e.jsxs(ne,{className:"px-6 pt-4 pb-2",children:[e.jsx(le,{className:"text-xl font-bold text-white flex items-center gap-3",children:e.jsx("span",{children:"Menu"})}),e.jsx(He,{className:"sr-only",children:"Menu principal de navigation mobile."})]}),e.jsx("div",{className:"px-6 pb-6 flex-1 overflow-y-auto",children:e.jsx("div",{className:"space-y-2",children:r.map(a=>{const i=a.icon;return a.isExternal?e.jsxs("a",{href:a.url,className:"flex items-center gap-4 p-4 rounded-2xl bg-white/5 hover:bg-white/10 border border-white/10 transition-all duration-300 active:scale-95 touch-manipulation group",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/10 group-hover:bg-white/20 flex items-center justify-center transition-colors",children:e.jsx(i,{className:"w-6 h-6 text-white drop-shadow-sm"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-white font-semibold text-base mb-1 drop-shadow-sm",children:a.name}),e.jsx("p",{className:"text-white/70 text-sm drop-shadow-sm",children:a.description})]})]},a.name):e.jsxs(re,{to:a.url,onClick:()=>s(!1),className:"flex items-center gap-4 p-4 rounded-2xl bg-white/5 hover:bg-white/10 border border-white/10 transition-all duration-200 active:scale-95 touch-manipulation group",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/10 group-hover:bg-white/20 flex items-center justify-center transition-colors",children:e.jsx(i,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-white font-semibold text-base mb-1",children:a.name}),e.jsx("p",{className:"text-white/60 text-sm",children:a.description})]})]},a.name)})})})]})})}function Os(){const t=Ge(),[s,r]=d.useState(!1),a=[{name:"Home",url:A("Home"),icon:W,isLink:!0},{name:"Playlist",url:A("Playlist"),icon:wt,isLink:!0},{name:"Agenda",url:A("Calendar"),icon:ke,isLink:!0},{name:"Menu",url:"#",icon:ls,isLink:!1,onClick:()=>r(!0)}],i=o=>o.name==="Home"&&t.pathname==="/"?!0:o.name==="Menu"?!1:t.pathname===o.url,l=o=>{o.preventDefault(),r(!0)};return e.jsxs(e.Fragment,{children:[e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-[100] bg-black/90 backdrop-blur-md border-t border-white/20 shadow-2xl","aria-label":"Navigation principale",children:e.jsx("div",{className:"flex items-center justify-around px-2 py-3 safe-area-inset-bottom",children:a.map(o=>{const m=i(o);return o.isLink?e.jsxs(re,{to:o.url,"aria-current":m?"page":void 0,className:`
                    flex flex-col items-center justify-center
                    min-w-[64px] min-h-[64px] px-4 py-3
                    rounded-2xl transition-all duration-300
                    touch-manipulation
                    ${m?"bg-cyan-500/30 text-white scale-105":"text-white/60 hover:text-white hover:bg-white/10 active:scale-95"}
                  `,children:[e.jsx(o.icon,{className:`w-6 h-6 mb-1 flex-shrink-0 transition-colors ${m?"text-white scale-110":"text-white/60"}`,"aria-hidden":"true"}),e.jsx("span",{className:`text-[10px] font-medium text-center leading-tight ${m?"text-white font-semibold":"text-white/60"}`,children:o.name})]},o.name):e.jsxs("button",{onClick:l,className:`
                    flex flex-col items-center justify-center
                    min-w-[64px] min-h-[64px] px-4 py-3
                    rounded-2xl transition-all duration-300
                    touch-manipulation
                    text-white/60 hover:text-white hover:bg-white/10 active:scale-95
                  `,"aria-label":"Ouvrir le menu",children:[e.jsx(o.icon,{className:"w-6 h-6 mb-1 flex-shrink-0 text-white/60 transition-colors","aria-hidden":"true"}),e.jsx("span",{className:"text-[10px] font-medium text-center leading-tight text-white/60",children:o.name})]},o.name)})})}),e.jsx(Ps,{open:s,onOpenChange:r})]})}function At({title:t,description:s,keywords:r,image:a,url:i,type:l="website",robots:o="index, follow",enabled:m=!0}){const n="A M√∫sica da Segunda",c="https://www.amusicadasegunda.com",p=`${c}/icons/icon-512x512.png`,h=t?t.includes("|")?t:`${t} | ${n}`:n,f=s||"Descubra uma nova m√∫sica incr√≠vel toda segunda-feira. Sua dose semanal de descobertas musicais.",v=r||"m√∫sica, segunda-feira, descobertas musicais, nova m√∫sica, playlist semanal, m√∫sica brasileira, indie music",j=a||p,I=i?`${c}${i}`:c;d.useEffect(()=>{if(!(typeof document>"u"||!m))try{document.title=h;const y=(F,P,Q)=>{let K=document.querySelector(`meta[${F}="${P}"]`);K||(K=document.createElement("meta"),K.setAttribute(F,P),document.head.appendChild(K)),K.setAttribute("content",Q)},$=F=>{let P=document.querySelector('link[rel="canonical"]');P||(P=document.createElement("link"),P.setAttribute("rel","canonical"),document.head.appendChild(P)),P.setAttribute("href",F)};y("name","description",f),y("name","keywords",v),y("name","robots",o),y("property","og:title",h),y("property","og:description",f),y("property","og:url",I),y("property","og:image",j),y("property","og:type",l),y("property","og:site_name",n),y("property","og:locale","pt_BR"),y("name","twitter:card","summary_large_image"),y("name","twitter:site","@amusicadasegunda"),y("name","twitter:title",h),y("name","twitter:description",f),y("name","twitter:image",j),$(I);const H={"@context":"https://schema.org","@type":l==="article"?"Article":"WebPage",headline:h,description:f,image:j,url:I,publisher:{"@type":"Organization",name:n,url:c,logo:{"@type":"ImageObject",url:p,width:512,height:512},sameAs:["https://www.tiktok.com/@amusicadasegunda","https://open.spotify.com/user/amusicadasegunda"]},mainEntityOfPage:{"@type":"WebPage","@id":I}};l==="article"&&(H.author={"@type":"Person",name:"Piment√£o rouge",url:c});const L="dynamic-page-jsonld";let q=document.getElementById(L);q||(q=document.createElement("script"),q.type="application/ld+json",q.id=L,document.head.appendChild(q)),q.textContent=JSON.stringify(H)}catch(y){console.error("Erro ao atualizar SEO:",y)}},[h,f,v,j,I,l,o,p])}const Ms="https://efnzmpzkzeuktqkghwfa.supabase.co",Rs="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVmbnptcHpremV1a3Rxa2dod2ZhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYyMzE4MzcsImV4cCI6MjA3MTgwNzgzN30.iQiDuurPIkSNjHWP6TID0dATrOCJQ71-kblcsRsHiAk",w=Ss(Ms,Rs,{db:{schema:"public"},auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:typeof window<"u"?window.localStorage:void 0,storageKey:"supabase.auth.token"},global:{headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}}}),S={SONGS:"songs",ALBUMS:"albums",SETTINGS:"settings"},U=(t,s="Supabase operation")=>{throw console.error(`‚ùå ${s}:`,t),new Error(`${s}: ${t.message}`)},Ls=async()=>{try{const{data:t,error:s}=await w.from(S.SONGS).select("count").limit(1);if(s){if(s.code==="PGRST116")return console.log("‚úÖ Connexion Supabase r√©ussie (table songs non cr√©√©e)"),!0;throw s}return console.log("‚úÖ Connexion Supabase r√©ussie"),!0}catch(t){return console.error("‚ùå Erreur de connexion Supabase:",t),!1}},Us=typeof import.meta<"u"&&!0,u={debug:(...t)=>{},info:(...t)=>{},warn:(...t)=>{Us||console.warn(...t)},error:(...t)=>{console.error(...t)}},zs={},Bs=t=>{if(!t||typeof t!="string")return{column:"release_date",ascending:!1};let s=!0,r=t.trim();return r.startsWith("-")?(s=!1,r=r.slice(1)):r.startsWith("+")&&(s=!0,r=r.slice(1)),r||(r="release_date"),{column:r,ascending:s}};let dt=zs?.VITE_SUPABASE_HAS_SLUG==="true";const D={async list(t="release_date",s=null){try{const{column:r,ascending:a}=Bs(t);let i=w.from(S.SONGS).select("*").order(r,{ascending:a});s&&(i=i.limit(s));const{data:l,error:o}=await i;if(o)throw o;return l||[]}catch(r){return U(r,"Liste des chansons"),[]}},async get(t){try{const{data:s,error:r}=await w.from(S.SONGS).select("*").eq("id",t).single();if(r)throw r;return s}catch(s){return U(s,`R√©cup√©ration chanson ID ${t}`),null}},async getBySlug(t){try{if(!t||typeof t!="string")return null;if(dt){const{data:i,error:l}=await w.from(S.SONGS).select("*").eq("status","published").eq("slug",t).maybeSingle();if(l)if(l.code==="42703"||/column .*slug.* does not exist/i.test(l.message||""))dt=!1,u.warn("Colonne slug absente dans Supabase, fallback title->slug active");else throw l;else if(i)return i}const{data:s,error:r}=await w.from(S.SONGS).select("*").eq("status","published");if(r)throw r;return s?.find(i=>As(i.title)===t)||null}catch(s){return U(s,`Recuperation chanson slug ${t}`),null}},async getCurrent(){try{u.warn("üîç getCurrent() - D√©but de la fonction"),u.warn("üîç Timestamp:",new Date().toISOString());const{data:t,error:s}=await w.from(S.SONGS).select("*").eq("status","published").order("created_at",{ascending:!1}).limit(1).single();if(s){if(s.code==="PGRST116")return u.warn(`‚ö†Ô∏è Aucune chanson "published" trouv√©e, ce n'est pas une erreur.`),null;throw u.error("‚ùå Erreur Supabase getCurrent:",s),s}if(u.warn("üìä Chanson actuelle trouv√©e:",t||null),!t)return u.warn("‚ö†Ô∏è Aucune chanson published trouv√©e"),null;const r=t;return u.warn("üéØ Chanson s√©lectionn√©e:",r),u.warn("üîç DEBUG getCurrent - Tri appliqu√©:"),u.warn("  - Titre:",r?.title),u.warn("  - created_at:",r?.created_at),u.warn("  - updated_at:",r?.updated_at),u.warn("  - release_date:",r?.release_date),u.warn("  - Status:",r?.status),r}catch(t){return u.error("‚ùå Erreur dans getCurrent:",t),U(t,"Chanson actuelle"),null}},extractYouTubeId(t){return Ie(t)},normalizeYouTubeUrl(t){if(!t||typeof t!="string")return null;const s=t.trim();if(!s)return null;const r=s.match(/youtube\.com\/shorts\/([A-Za-z0-9_-]{11})/);if(r)return`https://youtube.com/shorts/${r[1]}`;const a=s.match(/(music\.youtube\.com\/playlist\?list=[A-Za-z0-9_-]+)/);if(a)return`https://${a[1]}`;const i=s.match(/music\.youtube\.com\/watch\?v=([A-Za-z0-9_-]{11})/);if(i)return`https://music.youtube.com/watch?v=${i[1]}`;const l=s.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([A-Za-z0-9_-]{11})/);if(l)return`https://youtube.com/watch?v=${l[1]}`;try{const o=new URL(s),m=new URLSearchParams;return o.searchParams.has("v")&&m.set("v",o.searchParams.get("v")),o.searchParams.has("list")&&m.set("list",o.searchParams.get("list")),`${o.origin}${o.pathname}${m.toString()?"?"+m.toString():""}`}catch{return s}},async getByYouTubeUrl(t){try{if(!t||!t.trim())return null;const s=t.trim(),r=this.normalizeYouTubeUrl(s),a=this.extractYouTubeId(s);u.warn("üîç Recherche YouTube URL:",{originalUrl:s,normalizedUrl:r,videoId:a});let{data:i,error:l}=await w.from(S.SONGS).select("*").eq("youtube_url",s).maybeSingle();if(l&&l.code!=="PGRST116"&&u.error("‚ùå Erreur recherche par youtube_url (original):",l),!i&&r&&r!==s){const{data:o,error:m}=await w.from(S.SONGS).select("*").eq("youtube_url",r).maybeSingle();m&&m.code!=="PGRST116"?u.error("‚ùå Erreur recherche par youtube_url (normalis√©e):",m):o&&(i=o)}if(!i&&a){const{data:o,error:m}=await w.from(S.SONGS).select("*").not("youtube_url","is",null);if(!m&&o&&o.length>0){const n=o.find(c=>c.youtube_url?this.extractYouTubeId(c.youtube_url)===a:!1);n&&(u.warn("‚úÖ Chanson trouv√©e par ID vid√©o:",n.title),i=n)}}if(!i){const{data:o,error:m}=await w.from(S.SONGS).select("*").ilike("youtube_url",`%${a||s.split("/").pop()}%`);if(!m&&o&&o.length>0){const n=o.find(c=>c.youtube_url?this.extractYouTubeId(c.youtube_url)===a:!1);n&&(u.warn("‚úÖ Chanson trouv√©e par recherche partielle:",n.title),i=n)}}return i||null}catch(s){return u.error("‚ùå Exception recherche par youtube_url:",s),null}},async getByTikTokId(t){try{if(!t||!t.trim())return null;const{data:s,error:r}=await w.from(S.SONGS).select("*").eq("tiktok_video_id",t.trim()).maybeSingle();return r?(u.error("‚ùå Erreur recherche par tiktok_video_id:",r),null):s}catch(s){return u.error("‚ùå Exception recherche par tiktok_video_id:",s),null}},async create(t){try{let s=null;const{data:{session:r}}=await w.auth.getSession();if(!r){const n=new Error("‚ùå Vous devez √™tre connect√© pour cr√©er une chanson");throw n.code="NOT_AUTHENTICATED",n}const{data:a,error:i}=await w.from("admins").select("user_id").eq("user_id",r.user.id).maybeSingle();if(i){u.error("‚ùå Erreur v√©rification admin avant insertion:",i);const n=new Error("‚ùå Erreur lors de la v√©rification des droits admin");throw n.code="ADMIN_CHECK_FAILED",n.originalError=i,n}if(!a){const n=new Error("‚ùå Vous n'avez pas les droits administrateur pour cr√©er une chanson");throw n.code="NOT_ADMIN",n}if(u.warn("‚úÖ V√©rification admin OK, v√©rification des doublons..."),t.youtube_url&&t.youtube_url.trim()){s=this.normalizeYouTubeUrl(t.youtube_url.trim());let n=await this.getByYouTubeUrl(t.youtube_url.trim());if(!n&&s&&s!==t.youtube_url.trim()){const{data:c,error:p}=await w.from(S.SONGS).select("*").eq("youtube_url",s).maybeSingle();p&&p.code!=="PGRST116"?u.warn("‚ö†Ô∏è Erreur lors de la recherche de doublon (normalis√©e):",p):c&&(n=c)}if(!n){const c=this.extractYouTubeId(t.youtube_url.trim());if(c){const{data:p,error:h}=await w.from(S.SONGS).select("*").not("youtube_url","is",null);h?u.warn("‚ö†Ô∏è Erreur lors de la recherche de toutes les chansons:",h):p&&(n=p.find(f=>f.youtube_url?this.extractYouTubeId(f.youtube_url)===c:!1))}}if(n){const c=new Error(`Une chanson avec cette URL YouTube existe d√©j√† : "${n.title}" (ID: ${n.id})`);throw c.code="DUPLICATE_YOUTUBE_URL",c.existingSong=n,c}}if(t.tiktok_video_id&&t.tiktok_video_id.trim()){const n=await this.getByTikTokId(t.tiktok_video_id.trim());if(n){const c=new Error(`Une chanson avec cet ID TikTok existe d√©j√† : "${n.title}" (ID: ${n.id})`);throw c.code="DUPLICATE_TIKTOK_ID",c.existingSong=n,c}}const l={title:t.title?.trim(),artist:t.artist?.trim()||"A M√∫sica da Segunda",description:t.description?.trim(),lyrics:t.lyrics?.trim(),release_date:t.release_date,status:t.status||"draft",tiktok_video_id:t.tiktok_video_id?.trim(),tiktok_url:t.tiktok_url?.trim(),tiktok_publication_date:t.tiktok_publication_date,spotify_url:t.spotify_url?.trim(),apple_music_url:t.apple_music_url?.trim(),youtube_url:t.youtube_url?.trim(),cover_image:t.cover_image?.trim(),hashtags:Array.isArray(t.hashtags)?t.hashtags:[]};u.warn("‚úÖ V√©rification des doublons OK, insertion de la chanson...");const{data:o,error:m}=await w.from(S.SONGS).insert([l]).select().single();if(m){if(m.code==="42501"||m.message?.includes("permission denied")||m.message?.includes("new row violates row-level security")||m.message?.includes("row-level security")){u.error("‚ùå ERREUR PERMISSION RLS:",m),u.error("‚ùå Code:",m.code),u.error("‚ùå Message:",m.message),u.error("‚ùå D√©tails:",m.details),u.error("‚ùå Hint:",m.hint),u.error("‚ùå User ID:",r.user.id),u.error("‚ùå Admin check result:",a);const n=new Error(`‚ùå Erreur de permission RLS : La policy RLS bloque l'insertion. V√©rifiez que la policy "Allow admins full access" ou "songs_admin_full_access" a bien une clause WITH CHECK qui v√©rifie la table admins. Ex√©cutez le script supabase/scripts/fix_songs_rls_complete.sql dans Supabase SQL Editor.`);throw n.code="PERMISSION_DENIED",n.originalError=m,n}if(m.code==="23505"||m.message?.includes("duplicate key")){u.warn("‚ö†Ô∏è Erreur duplicate key d√©tect√©e, recherche de la chanson existante...");const n=m.message?.match(/Key \(([^)]+)\)/)?.[1]||"unknown";u.warn("‚ö†Ô∏è Champ en conflit:",n);let c=null,p="DUPLICATE_KEY";if((n.includes("youtube")||l.youtube_url)&&(c=await this.getByYouTubeUrl(l.youtube_url||""),c&&(p="DUPLICATE_YOUTUBE_URL")),!c&&(n.includes("tiktok")||l.tiktok_video_id)&&(c=await this.getByTikTokId(l.tiktok_video_id||""),c&&(p="DUPLICATE_TIKTOK_ID")),c){const f=p==="DUPLICATE_YOUTUBE_URL"?"URL YouTube":"ID TikTok",v=new Error(`Une chanson avec cette ${f} existe d√©j√† : "${c.title}" (ID: ${c.id})`);throw v.code=p,v.existingSong=c,v}const h=new Error("Une contrainte d'unicit√© emp√™che la cr√©ation de cette chanson. V√©rifiez que l'URL YouTube ou l'ID TikTok n'existe pas d√©j√†.");throw h.code="DUPLICATE_KEY",h.originalError=m,h.conflictField=n,h}throw m}return u.warn("‚úÖ Chanson cr√©√©e avec succ√®s:",o),o}catch(s){throw s.code!=="DUPLICATE_TIKTOK_ID"&&s.code!=="DUPLICATE_YOUTUBE_URL"&&U(s,"Cr√©ation chanson"),s}},async update(t,s){try{u.warn("üîÑ supabaseSongService.update - d√©but"),u.warn("üîÑ ID re√ßu:",t,"Type:",typeof t),u.warn("üîÑ Updates re√ßus:",JSON.stringify(s,null,2));const r={};Object.keys(s).forEach(o=>{o==="id"||o==="created_at"||o==="updated_at"||s[o]!==void 0&&(o==="hashtags"?r[o]=Array.isArray(s[o])?s[o]:[]:o==="tiktok_video_id"||o==="tiktok_url"?r[o]=s[o]?.trim()||null:r[o]=s[o])}),u.warn("üîÑ Updates nettoy√©s:",JSON.stringify(r,null,2));const a=await this.get(t);if(!a)throw new Error(`Chanson avec l'ID ${t} introuvable`);if(r.tiktok_video_id!==void 0){const o=r.tiktok_video_id?.trim()||null,m=a.tiktok_video_id?.trim()||null;if(o&&o!==m){const n=await this.getByTikTokId(o),c=n?Number(n.id):null,p=Number(t);if(n&&c!==p){const h=new Error(`Une chanson avec cet ID TikTok existe d√©j√† : "${n.title}" (ID: ${n.id})`);throw h.code="DUPLICATE_TIKTOK_ID",h.existingSong=n,h}}}if(r.youtube_url!==void 0){const o=r.youtube_url?.trim()||null,m=a.youtube_url?.trim()||null;if(o&&o!==m){const n=await this.getByYouTubeUrl(o),c=n?Number(n.id):null,p=Number(t);if(n&&c!==p){const h=new Error(`Une chanson avec cette URL YouTube existe d√©j√† : "${n.title}" (ID: ${n.id})`);throw h.code="DUPLICATE_YOUTUBE_URL",h.existingSong=n,h}}}const{data:i,error:l}=await w.from(S.SONGS).update(r).eq("id",t).select().single();if(u.warn("[Supabase][UPDATE] id=",t,"payload=",r),u.warn("üîÑ R√©ponse Supabase:",JSON.stringify({data:i,error:l},null,2)),l){if(u.error("[Supabase][UPDATE][ERROR]",l),u.error("‚ùå Erreur Supabase:",l.message,`
Code:`,l.code,`
Details:`,l.details,`
Hint:`,l.hint,`
Stack:`,l.stack),l.code==="42501"||l.message?.includes("permission denied")||l.message?.includes("row-level security")){const o=new Error("‚ùå Erreur de permission : Vous n'avez pas les droits de mise √† jour sur la table songs. V√©rifiez que vous √™tes bien connect√© en tant qu'admin et que les RLS policies sont correctement configur√©es.");throw o.code="PERMISSION_DENIED",o.originalError=l,o}if(l.code==="23505"||l.message?.includes("duplicate key")){u.warn("‚ö†Ô∏è Erreur duplicate key d√©tect√©e lors de la mise √† jour");const o=l.message?.match(/Key \(([^)]+)\)/)?.[1]||"unknown";u.warn("‚ö†Ô∏è Champ en conflit:",o);let m=null,n="DUPLICATE_KEY";if((o.includes("tiktok")||r.tiktok_video_id)&&(m=await this.getByTikTokId(r.tiktok_video_id||""),m&&m.id!==t&&(n="DUPLICATE_TIKTOK_ID")),!m&&(o.includes("youtube")||r.youtube_url)&&(m=await this.getByYouTubeUrl(r.youtube_url||""),m&&m.id!==t&&(n="DUPLICATE_YOUTUBE_URL")),m){const p=n==="DUPLICATE_YOUTUBE_URL"?"URL YouTube":"ID TikTok",h=new Error(`Une chanson avec cette ${p} existe d√©j√† : "${m.title}" (ID: ${m.id})`);throw h.code=n,h.existingSong=m,h}const c=new Error("Une contrainte d'unicit√© emp√™che la mise √† jour de cette chanson. V√©rifiez que l'URL YouTube ou l'ID TikTok n'existe pas d√©j√† dans une autre chanson.");throw c.code="DUPLICATE_KEY",c.originalError=l,c.conflictField=o,c}throw new Error(l.message||"Update failed")}return u.warn("‚úÖ Chanson mise √† jour avec succ√®s:",i),i}catch(r){if(u.error("‚ùå Erreur dans supabaseSongService.update:",r),u.error("‚ùå D√©tails de l'erreur:",{message:r.message,code:r.code,details:r.details,hint:r.hint}),r.code==="42501"||r.message?.includes("permission denied")||r.message?.includes("row-level security")){const a=new Error("‚ùå Erreur de permission : Vous n'avez pas les droits de mise √† jour sur la table songs. V√©rifiez que vous √™tes bien connect√© en tant qu'admin et que les RLS policies sont correctement configur√©es.");throw a.code="PERMISSION_DENIED",a.originalError=r,a}throw r}},async delete(t){try{const{error:s}=await w.from(S.SONGS).delete().eq("id",t);if(s)throw s;return u.warn("‚úÖ Chanson supprim√©e avec succ√®s ID:",t),!0}catch(s){throw U(s,`Suppression chanson ID ${t}`),s}},async search(t){try{if(!t||t.trim()==="")return await this.list();const s=t.trim().toLowerCase(),{data:r,error:a}=await w.from(S.SONGS).select("*").or(`title.ilike.%${s}%,artist.ilike.%${s}%,description.ilike.%${s}%`).order("release_date",{ascending:!1});if(a)throw a;return r||[]}catch(s){return U(s,"Recherche chansons"),[]}},async getByStatus(t){try{const{data:s,error:r}=await w.from(S.SONGS).select("*").eq("status",t).order("release_date",{ascending:!1});if(r)throw r;return s||[]}catch(s){return U(s,`Chansons par statut: ${t}`),[]}},async getByMonth(t,s){try{const r=`${t}-${s.toString().padStart(2,"0")}-01`,a=`${t}-${s.toString().padStart(2,"0")}-31`,{data:i,error:l}=await w.from(S.SONGS).select("*").gte("release_date",r).lte("release_date",a).order("release_date",{ascending:!1});if(l)throw l;return i||[]}catch(r){return U(r,`Chansons par mois ${s}/${t}`),[]}}},T={SONGS:"musica-da-segunda-songs",ALBUMS:"musica-da-segunda-albums",SETTINGS:"musica-da-segunda-settings"},Ce=[{id:1,slug:"croissant",title:"O Croissant",artist:"A M√∫sica da Segunda",description:'A m√∫sica "O Croissant" brinca com o cho',release_date:"2025-02-03",status:"published",genre:"Indie",tiktok_video_id:"sample_tiktok_1"},{id:2,slug:"confissoes-bancarias",title:"Confiss√µes Banc√°rias",artist:"A M√∫sica da Segunda",description:"Confiss√µes sobre a vida banc√°ria e financeira",release_date:"2025-08-25",status:"published",genre:"Indie",tiktok_video_id:"sample_tiktok_2"},{id:3,slug:"festas-juninas",title:"Festas Juninas",artist:"A M√∫sica da Segunda",description:"Celebrando as tradicionais festas juninas brasileiras",release_date:"2025-06-30",status:"published",genre:"M√∫sica Brasileira",tiktok_video_id:"sample_tiktok_3"},{id:4,slug:"cafe-no-brasil",title:"Caf√© no Brasil",artist:"A M√∫sica da Segunda",description:"Uma ode ao caf√© brasileiro e sua cultura",release_date:"2025-07-14",status:"published",genre:"M√∫sica Brasileira",tiktok_video_id:"sample_tiktok_4"}],Ct={initialize(){try{const t=this.songs.getAll();t.length===0?(localStorage.setItem(T.SONGS,JSON.stringify(Ce)),console.warn("üîÑ localStorage initialis√© avec donn√©es de fallback:",Ce.length,"chansons")):console.warn("üîÑ localStorage d√©j√† initialis√© avec:",t.length,"chansons")}catch(t){console.error("‚ùå Erreur initialisation localStorage:",t),localStorage.setItem(T.SONGS,JSON.stringify(Ce))}},forceReset(){localStorage.setItem(T.SONGS,JSON.stringify([])),console.warn("üîÑ localStorage r√©initialis√© - donn√©es Supabase uniquement")},cleanConfissoesBancarias(){try{const t=this.songs.getAll(),s=t.filter(r=>r.title!=="Confiss√µes Banc√°rias"&&r.tiktok_video_id!=="7540762684149517590");if(s.length!==t.length){const r=s.map((a,i)=>({...a,id:i+1}));return localStorage.setItem(T.SONGS,JSON.stringify(r)),console.warn(`üßπ "Confiss√µes Banc√°rias" supprim√©e du localStorage. ${t.length-s.length} chanson(s) nettoy√©e(s)`),!0}return console.warn("‚úÖ localStorage d√©j√† propre, aucune action n√©cessaire"),!1}catch(t){return console.error("‚ùå Erreur lors du nettoyage:",t),!1}},songs:{getAll(){try{const t=localStorage.getItem(T.SONGS);return t?JSON.parse(t):[]}catch(t){return console.error("Erro ao carregar m√∫sicas:",t),[]}},getById(t){return this.getAll().find(r=>r.id===t)||null},getCurrent(){const s=this.getAll().filter(r=>r.status==="published");return s.length===0?null:(s.sort((r,a)=>new Date(a.release_date)-new Date(r.release_date)),s[0])},create(t){try{const s=this.getAll(),r={...t,id:Date.now(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return s.push(r),localStorage.setItem(T.SONGS,JSON.stringify(s)),r}catch(s){throw console.error("Erro ao criar m√∫sica:",s),s}},update(t,s){try{const r=this.getAll(),a=r.findIndex(i=>i.id===t);if(a===-1)throw new Error("M√∫sica n√£o encontrada");return r[a]={...r[a],...s,updated_at:new Date().toISOString()},localStorage.setItem(T.SONGS,JSON.stringify(r)),r[a]}catch(r){throw console.error("Erro ao atualizar m√∫sica:",r),r}},delete(t){try{const r=this.getAll().filter(a=>a.id!==t);return localStorage.setItem(T.SONGS,JSON.stringify(r)),!0}catch(s){throw console.error("Erro ao deletar m√∫sica:",s),s}},search(t){const s=this.getAll();if(!t)return s;const r=t.toLowerCase();return s.filter(a=>a.title.toLowerCase().includes(r)||a.artist.toLowerCase().includes(r)||a.description?.toLowerCase().includes(r))}},albums:{getAll(){try{const t=localStorage.getItem(T.ALBUMS);return t?JSON.parse(t):[]}catch(t){return console.error("Erro ao carregar √°lbuns:",t),[]}},create(t){try{const s=this.getAll(),r={...t,id:Date.now(),created_at:new Date().toISOString()};return s.push(r),localStorage.setItem(T.ALBUMS,JSON.stringify(s)),r}catch(s){throw console.error("Erro ao criar √°lbum:",s),s}}},clearAll(){localStorage.removeItem(T.SONGS),localStorage.removeItem(T.ALBUMS),localStorage.removeItem(T.SETTINGS)},exportData(){return{songs:this.songs.getAll(),albums:this.albums.getAll(),exportDate:new Date().toISOString()}},importData(t){try{return t.songs&&localStorage.setItem(T.SONGS,JSON.stringify(t.songs)),t.albums&&localStorage.setItem(T.ALBUMS,JSON.stringify(t.albums)),!0}catch(s){throw console.error("Erro ao importar dados:",s),s}}};Ct.initialize();const _=(...t)=>{};let De="supabase",B=!0;const Vs=async()=>{try{return _("üîÑ Test de connexion Supabase..."),await Ls()?(_("‚úÖ Mode de stockage: Supabase ‚òÅÔ∏è (connect√©)"),B=!0,De="supabase",!0):(_("‚ö†Ô∏è Connexion Supabase √©chou√©e, mais on force quand m√™me Supabase"),B=!0,De="supabase",!0)}catch{return B=!0,De="supabase",!0}};Vs().then(()=>{});const $s={list:async(t="-release_date",s=null)=>{try{_("‚òÅÔ∏è Chargement depuis Supabase...");const r=await D.list(t,s);return r&&r.length>0?(_("‚úÖ Chansons charg√©es depuis Supabase:",r.length),r):(_("‚ö†Ô∏è Aucune chanson trouv√©e dans Supabase"),[])}catch(r){return u.error("Erro ao carregar m√∫sicas desde Supabase:",r),[]}},get:async t=>{try{if(B)return await D.get(t)}catch(s){return u.error("Erro ao carregar m√∫sica:",s),null}},getCurrent:async()=>{try{if(B){const t=await D.getCurrent();if(t)return t}return _("‚ö†Ô∏è Supabase indisponible ou sans donn√©es"),null}catch(t){return u.error("Erro ao carregar m√∫sica atual:",t),null}},getByYouTubeUrl:async t=>{try{return await D.getByYouTubeUrl(t)}catch(s){return u.error("‚ùå Erreur recherche par youtube_url:",s),null}},getByTikTokId:async t=>{try{return await D.getByTikTokId(t)}catch(s){return u.error("‚ùå Erreur recherche par tiktok_video_id:",s),null}},create:async t=>{try{_("‚òÅÔ∏è Cr√©ation via Supabase...");const s=await D.create(t);return _("‚úÖ Cr√©ation Supabase r√©ussie:",s),s}catch(s){throw u.error("‚ùå ERREUR CR√âATION SUPABASE:",s),u.error("‚ùå Message:",s.message),u.error("‚ùå Code:",s.code),u.error("‚ùå Details:",s.details),u.error("‚ùå Hint:",s.hint),s.existingSong&&u.error("‚ùå Chanson existante:",s.existingSong),s}},update:async(t,s)=>{try{_("‚òÅÔ∏è Mise √† jour via Supabase..."),_("üìã Donn√©es √† mettre √† jour:",{id:t,updates:s}),_("üîç Type de l'ID:",typeof t),_("üîç Valeur de l'ID:",t),_("üîÑ Appel de supabaseSongService.update...");const r=await D.update(t,s);return _("‚úÖ R√©sultat de la mise √† jour Supabase:",r),_("‚úÖ Mise √† jour Supabase r√©ussie - pas de synchronisation localStorage n√©cessaire"),r}catch(r){throw u.error("‚ùå ERREUR SUPABASE D√âTAILL√âE:",r),u.error("‚ùå Message d'erreur:",r.message),u.error("‚ùå Code d'erreur:",r.code),u.error("‚ùå D√©tails de l'erreur:",r.details),u.error("‚ùå Hint:",r.hint),u.error("‚ùå Stack trace:",r.stack),u.error("‚ùå Erreur compl√®te:",JSON.stringify(r,null,2)),u.error("‚ùå √âCHEC DE LA MISE √Ä JOUR SUPABASE - PAS DE FALLBACK"),r}},delete:async t=>{try{_("‚òÅÔ∏è Suppression via Supabase...");const s=await D.delete(t);return _("‚úÖ Suppression Supabase r√©ussie:",s),s}catch(s){throw u.error("‚ùå ERREUR SUPPRESSION SUPABASE:",s),u.error("‚ùå Message:",s.message),u.error("‚ùå Code:",s.code),s}},search:async t=>{try{if(B)return await D.search(t)}catch(s){return u.error("Erro ao pesquisar m√∫sicas:",s),[]}},getByStatus:async t=>{try{if(B)return await D.getByStatus(t)}catch(s){return u.error("Erro ao carregar m√∫sicas por status:",s),[]}},getByMonth:async(t,s)=>{try{if(B)return await D.getByMonth(t,s)}catch(r){return u.error("Erro ao carregar m√∫sicas por m√™s:",r),[]}},getBySlug:async t=>{try{if(B)return await D.getBySlug(t)||null}catch(s){return u.error("Erro ao carregar m√∫sica por slug:",s),null}}};function qs(){const[t,s]=d.useState(null);return d.useEffect(()=>{const r=()=>{const i=new Date,l=i.getDay(),o=l===0?1:(8-l)%7||7,m=new Date(i);m.setDate(i.getDate()+o),m.setHours(9,0,0,0);const n=m-i;return n>0?{d:Math.floor(n/864e5),h:Math.floor(n/36e5%24),m:Math.floor(n/1e3/60%60),s:Math.floor(n/1e3%60)}:null},a=setInterval(()=>{s(r())},1e3);return s(r()),()=>clearInterval(a)},[]),t?e.jsxs("div",{className:"bg-[#f8f5f2] rounded-3xl p-5 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx(cs,{className:"w-5 h-5 text-gray-500"}),e.jsx("h3",{className:"font-semibold text-gray-700",children:"Pr√≥xima m√∫sica em..."})]}),e.jsx("div",{className:"grid grid-cols-4 gap-3 text-center",children:Object.entries(t).map(([r,a])=>e.jsxs("div",{className:"bg-[#e7f1f7] rounded-xl p-3",children:[e.jsx("p",{className:"text-2xl font-bold text-[#32a2dc]",children:a}),e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:r==="d"?"dias":r==="h"?"horas":r==="m"?"min":"seg"})]},r))})]}):e.jsxs("div",{className:"bg-[#f8f5f2] rounded-3xl p-5 shadow-lg text-center",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"√â Segunda-feira!"}),e.jsx("p",{className:"text-gray-600",children:"A nova m√∫sica j√° est√° dispon√≠vel!"})]})}const Gs=vt("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),C=d.forwardRef(({className:t,variant:s,size:r,asChild:a=!1,...i},l)=>{const o=a?ds:"button";return e.jsx(o,{className:k(Gs({variant:s,size:r,className:t})),ref:l,...i})});C.displayName="Button";const Be=hs,Ys=us,Dt=d.forwardRef(({className:t,...s},r)=>e.jsx(yt,{ref:r,className:k("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));Dt.displayName=yt.displayName;const Se=d.forwardRef(({className:t,children:s,...r},a)=>{const i=d.useId(),l=r["aria-describedby"];return e.jsxs(Ys,{children:[e.jsx(Dt,{}),e.jsxs(jt,{ref:a,className:k("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,"aria-describedby":l??i,children:[l===void 0?e.jsx(qe,{id:i,className:"sr-only",children:"Dialog content"}):null,s,e.jsxs(ms,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})});Se.displayName=jt.displayName;const _e=({className:t,...s})=>e.jsx("div",{className:k("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});_e.displayName="DialogHeader";const Ee=d.forwardRef(({className:t,...s},r)=>e.jsx(Nt,{ref:r,className:k("text-lg font-semibold leading-none tracking-tight",t),...s}));Ee.displayName=Nt.displayName;const Hs=d.forwardRef(({className:t,...s},r)=>e.jsx(qe,{ref:r,className:k("text-sm text-muted-foreground",t),...s}));Hs.displayName=qe.displayName;const ce=d.forwardRef(({className:t,children:s,...r},a)=>e.jsxs(St,{ref:a,className:k("relative overflow-hidden",t),...r,children:[e.jsx(xs,{className:"h-full w-full rounded-[inherit]",children:s}),e.jsx(Pt,{}),e.jsx(ps,{})]}));ce.displayName=St.displayName;const Pt=d.forwardRef(({className:t,orientation:s="vertical",...r},a)=>e.jsx(_t,{ref:a,orientation:s,className:k("flex touch-none select-none transition-colors",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:e.jsx(gs,{className:"relative flex-1 rounded-full bg-border"})}));Pt.displayName=_t.displayName;function Fs({open:t,onOpenChange:s,song:r,title:a="Letras da M√∫sica",maxHeight:i="h-56",showIcon:l=!0}){return r?e.jsx(Be,{open:t,onOpenChange:s,children:e.jsxs(Se,{className:"bg-[#f8f5f2] max-w-md max-h-[70vh]",children:[e.jsx(_e,{children:e.jsxs(Ee,{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[l&&e.jsx(Y,{className:"w-5 h-5 text-blue-500"}),a]})}),e.jsx("div",{className:"mt-4",children:r.lyrics?e.jsx(ce,{className:i,children:e.jsx("div",{className:"pr-4",children:e.jsx("pre",{className:"text-gray-700 whitespace-pre-wrap font-sans text-sm leading-relaxed",children:r.lyrics})})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Y,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Letras n√£o dispon√≠veis"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"As letras desta m√∫sica ser√£o adicionadas em breve."})]})})]})}):null}function Ks({open:t,onOpenChange:s,lyrics:r,songTitle:a}){return e.jsx(oe,{open:t,onOpenChange:s,shouldScaleBackground:!1,children:e.jsxs(ie,{className:"bg-black/95 backdrop-blur-xl border-t border-white/20 max-h-[85vh]",children:[e.jsx("div",{className:"mx-auto mt-4 h-1.5 w-16 rounded-full bg-white/30"}),e.jsxs(ne,{className:"px-6 pt-4 pb-2",children:[e.jsxs(le,{className:"text-xl font-bold text-white flex items-center gap-3",children:[e.jsx(Y,{className:"w-6 h-6 text-white"}),"Letras"]}),a&&e.jsx(He,{className:"text-white/80 text-sm mt-2 drop-shadow-sm",children:a})]}),e.jsx("div",{className:"px-6 pb-6 flex-1 overflow-hidden",children:r&&r.trim()?e.jsx(ce,{className:"h-[calc(85vh-120px)]",children:e.jsx("div",{className:"pr-4",children:e.jsx("pre",{className:"text-white/95 whitespace-pre-wrap font-sans text-base leading-relaxed drop-shadow-sm",children:r})})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Y,{className:"w-16 h-16 text-white/40 mx-auto mb-4"}),e.jsx("p",{className:"text-white/90 font-medium text-lg mb-2 drop-shadow-sm",children:"Letras n√£o dispon√≠veis"}),e.jsx("p",{className:"text-white/70 text-sm drop-shadow-sm",children:"As letras desta m√∫sica ser√£o adicionadas em breve."})]})})]})})}function Js({open:t,onOpenChange:s,song:r}){if(!r)return null;const a=[{name:"Spotify",url:r.spotify_url,icon:"üéß",color:"bg-[#1DB954] hover:bg-[#1ed760]",available:!!r.spotify_url},{name:"Apple Music",url:r.apple_music_url,icon:"üéµ",color:"bg-gradient-to-r from-[#FA233B] to-[#FB5C74] hover:opacity-90",available:!!r.apple_music_url},{name:"YouTube Music",url:r.youtube_music_url||r.youtube_url,icon:"üì∫",color:"bg-[#FF0000] hover:bg-[#cc0000]",available:!!(r.youtube_music_url||r.youtube_url)}].filter(i=>i.available);return e.jsx(oe,{open:t,onOpenChange:s,shouldScaleBackground:!1,children:e.jsxs(ie,{className:"bg-black/95 backdrop-blur-xl border-t border-white/20 max-h-[85vh]",children:[e.jsx("div",{className:"mx-auto mt-4 h-1.5 w-16 rounded-full bg-white/30"}),e.jsxs(ne,{className:"px-6 pt-4 pb-2",children:[e.jsxs(le,{className:"text-xl font-bold text-white flex items-center gap-3",children:[e.jsx(J,{className:"w-6 h-6 text-white"}),"Ouvir"]}),r.title&&e.jsx("p",{className:"text-white/80 text-sm mt-2 drop-shadow-sm",children:r.title})]}),e.jsx("div",{className:"px-6 pb-6 flex-1 overflow-y-auto",children:a.length>0?e.jsx("div",{className:"space-y-3",children:a.map(i=>e.jsx("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",className:"block",children:e.jsxs(C,{size:"lg",className:`w-full ${i.color} text-white font-bold py-4 px-6 rounded-full shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 flex items-center justify-center gap-3 touch-manipulation`,children:[e.jsx("span",{className:"text-2xl",children:i.icon}),e.jsxs("span",{children:["Abrir no ",i.name]}),e.jsx(fs,{className:"w-5 h-5"})]})},i.name))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(J,{className:"w-16 h-16 text-white/40 mx-auto mb-4"}),e.jsx("p",{className:"text-white/90 font-medium text-lg mb-2 drop-shadow-sm",children:"Nenhuma plataforma dispon√≠vel"}),e.jsx("p",{className:"text-white/70 text-sm drop-shadow-sm",children:"Os links de streaming ser√£o adicionados em breve."})]})})]})})}function Ws({open:t,onOpenChange:s,songs:r,onSelectSong:a}){const[i,l]=d.useState(new Date),o=d.useMemo(()=>{if(!r||r.length===0)return[];const h=ge(i),f=fe(i);return r.filter(v=>{const j=M(v.release_date);return be(j,{start:h,end:f})})},[r,i]),m=()=>{l(h=>xe(h,-1))},n=()=>{l(h=>xe(h,1))},c=d.useMemo(()=>{if(!r||r.length===0)return!1;const h=xe(i,-1),f=ge(h),v=fe(h);return r.some(j=>{const I=M(j.release_date);return be(I,{start:f,end:v})})},[r,i]),p=d.useMemo(()=>{if(!r||r.length===0)return!1;const h=xe(i,1),f=ge(h),v=fe(h);return r.some(j=>{const I=M(j.release_date);return be(I,{start:f,end:v})})},[r,i]);return e.jsx(oe,{open:t,onOpenChange:s,shouldScaleBackground:!1,children:e.jsxs(ie,{className:"bg-black/95 backdrop-blur-xl border-t border-white/20 max-h-[85vh]",children:[e.jsx("div",{className:"mx-auto mt-4 h-1.5 w-16 rounded-full bg-white/30"}),e.jsxs(ne,{className:"px-6 pt-4 pb-2",children:[e.jsxs(le,{className:"text-xl font-bold text-white flex items-center gap-3",children:[e.jsx(ze,{className:"w-6 h-6 text-white"}),"Hist√≥rico"]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsx(C,{variant:"ghost",size:"icon",onClick:m,disabled:!c,className:"h-8 w-8 text-white/70 hover:text-white hover:bg-white/10 disabled:opacity-30 disabled:cursor-not-allowed",children:e.jsx(se,{className:"w-4 h-4"})}),e.jsx("p",{className:"text-white/90 text-sm font-medium drop-shadow-sm",children:O(i,"MMMM yyyy",{locale:z})}),e.jsx(C,{variant:"ghost",size:"icon",onClick:n,disabled:!p,className:"h-8 w-8 text-white/70 hover:text-white hover:bg-white/10 disabled:opacity-30 disabled:cursor-not-allowed",children:e.jsx(je,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"px-6 pb-6 flex-1 overflow-hidden",children:o&&o.length>0?e.jsx(ce,{className:"h-[calc(85vh-180px)]",children:e.jsx("div",{className:"space-y-2 pr-4",children:o.map(h=>e.jsxs("button",{onClick:()=>{a&&a(h),s(!1)},className:"w-full flex items-center gap-4 p-4 rounded-2xl bg-white/5 hover:bg-white/10 border border-white/10 transition-all duration-300 active:scale-95 touch-manipulation group text-left",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/10 group-hover:bg-white/20 flex items-center justify-center transition-colors flex-shrink-0",children:e.jsx($e,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-white font-semibold text-base mb-1 truncate drop-shadow-sm",children:h.title}),e.jsx("p",{className:"text-white/70 text-sm truncate drop-shadow-sm",children:h.artist||"A M√∫sica da Segunda"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(ke,{className:"w-3 h-3 text-white/60"}),e.jsx("p",{className:"text-white/60 text-xs drop-shadow-sm",children:O(M(h.release_date),"dd/MM/yyyy",{locale:z})})]})]})]},h.id))})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ze,{className:"w-16 h-16 text-white/40 mx-auto mb-4"}),e.jsx("p",{className:"text-white/90 font-medium text-lg mb-2 drop-shadow-sm",children:"Nenhuma m√∫sica dispon√≠vel"}),e.jsxs("p",{className:"text-white/70 text-sm drop-shadow-sm",children:["Nenhuma m√∫sica foi publicada em ",O(i,"MMMM yyyy",{locale:z}),"."]})]})})]})})}function ut({youtubeMusicUrl:t,youtubeUrl:s,title:r,useFacade:a=!1,autoplayOnActivate:i=!1,thumbnailQuality:l="hqdefault"}){const[o,m]=d.useState(!1),n=t&&t.trim()?t.trim():null,c=s&&s.trim()?s.trim():null;let p=n?ct(n):null,h=n||"";if(!p&&c&&(p=ct(c),h=c||""),d.useEffect(()=>{m(!1)},[t,s]),!p)return e.jsx("div",{className:"w-full aspect-video rounded-lg overflow-hidden shadow-lg flex items-center justify-center bg-gradient-to-br from-gray-800 to-gray-900",children:e.jsx("p",{className:"text-white text-sm",children:"V√≠deo n√£o dispon√≠vel"})});const f=h.includes("/shorts/"),v=a&&o&&i?"&autoplay=1":"",j="https://www.youtube-nocookie.com/embed",I=p.type==="video"?`${j}/${p.id}?rel=0&modestbranding=1&playsinline=1&controls=1${v}`:`${j}/videoseries?list=${p.id}&rel=0&modestbranding=1&playsinline=1&controls=1${v}`,y=p.type==="video"?Cs(h,l):null;if(!a||o)return f?e.jsx("div",{className:"w-full flex justify-center",children:e.jsx("div",{className:"relative rounded-lg overflow-hidden shadow-lg",style:{width:"100%",maxWidth:"400px",aspectRatio:"9/16"},children:e.jsx("iframe",{className:"absolute top-0 left-0 w-full h-full",src:I,title:r||"YouTube Short",frameBorder:"0",referrerPolicy:"strict-origin-when-cross-origin",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,loading:"lazy"})})}):e.jsx("div",{className:"w-full aspect-video rounded-lg overflow-hidden shadow-lg",children:e.jsx("iframe",{className:"w-full h-full",src:I,title:r||"YouTube",frameBorder:"0",referrerPolicy:"strict-origin-when-cross-origin",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,loading:"lazy"})});const $=()=>m(!0),H=L=>{(L.key==="Enter"||L.key===" ")&&(L.preventDefault(),$())};return f?e.jsxs("div",{className:"relative rounded-lg overflow-hidden shadow-2xl cursor-pointer group",style:{width:"100%",aspectRatio:"9/16",minHeight:"min(500px, 70vh)",maxHeight:"70vh"},onClick:$,onKeyDown:H,role:"button",tabIndex:0,"aria-label":`Reproduzir ${r||"v√≠deo"}`,children:[y&&e.jsx("img",{src:y,alt:r||"YouTube Short",className:"absolute inset-0 w-full h-full object-cover",loading:"eager",fetchPriority:"high"}),e.jsx("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-black/30 transition-colors flex items-center justify-center",children:e.jsx("div",{className:"w-16 h-16 bg-red-600 rounded-full flex items-center justify-center shadow-xl group-hover:scale-110 transition-transform",children:e.jsx("svg",{viewBox:"0 0 24 24",className:"w-8 h-8 text-white ml-1",fill:"currentColor",children:e.jsx("path",{d:"M8 5v14l11-7z"})})})})]}):e.jsxs("div",{className:"w-full aspect-video rounded-lg overflow-hidden shadow-lg cursor-pointer group relative",onClick:$,onKeyDown:H,role:"button",tabIndex:0,"aria-label":`Reproduzir ${r||"v√≠deo"}`,children:[y?e.jsx("img",{src:y,alt:r||"YouTube",className:"w-full h-full object-cover",loading:"eager",fetchPriority:"high"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-800 to-gray-900"}),e.jsx("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-black/30 transition-colors flex items-center justify-center",children:e.jsx("div",{className:"w-16 h-16 bg-red-600 rounded-full flex items-center justify-center shadow-xl group-hover:scale-110 transition-transform",children:e.jsx("svg",{viewBox:"0 0 24 24",className:"w-8 h-8 text-white ml-1",fill:"currentColor",children:e.jsx("path",{d:"M8 5v14l11-7z"})})})})]})}const Zs=20,Qs=1e6,V={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let Pe=0;function Xs(){return Pe=(Pe+1)%Number.MAX_VALUE,Pe.toString()}const Oe=new Map,mt=t=>{if(Oe.has(t))return;const s=setTimeout(()=>{Oe.delete(t),ae({type:V.REMOVE_TOAST,toastId:t})},Qs);Oe.set(t,s)},er=(t,s)=>{switch(s.type){case V.ADD_TOAST:return{...t,toasts:[s.toast,...t.toasts].slice(0,Zs)};case V.UPDATE_TOAST:return{...t,toasts:t.toasts.map(r=>r.id===s.toast.id?{...r,...s.toast}:r)};case V.DISMISS_TOAST:{const{toastId:r}=s;return r?mt(r):t.toasts.forEach(a=>{mt(a.id)}),{...t,toasts:t.toasts.map(a=>a.id===r||r===void 0?{...a,open:!1}:a)}}case V.REMOVE_TOAST:return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==s.toastId)}}},we=[];let ve={toasts:[]};function ae(t){ve=er(ve,t),we.forEach(s=>{s(ve)})}function tr({...t}){const s=Xs(),r=i=>ae({type:V.UPDATE_TOAST,toast:{...i,id:s}}),a=()=>ae({type:V.DISMISS_TOAST,toastId:s});return ae({type:V.ADD_TOAST,toast:{...t,id:s,open:!0,onOpenChange:i=>{i||a()}}}),{id:s,dismiss:a,update:r}}function Ot(){const[t,s]=d.useState(ve);return d.useEffect(()=>(we.push(s),()=>{const r=we.indexOf(s);r>-1&&we.splice(r,1)}),[t]),{...t,toast:tr,dismiss:r=>ae({type:V.DISMISS_TOAST,toastId:r})}}function sr(){const t=bs(),{toast:s}=Ot(),[r,a]=d.useState(null),[i,l]=d.useState([]),[o,m]=d.useState([]),[n,c]=d.useState(!0),[p,h]=d.useState(null),[f,v]=d.useState(null),[j,I]=d.useState(!1),[y,$]=d.useState(!1),[H,L]=d.useState(!1),[q,F]=d.useState(!1),[P,Q]=d.useState(!1),[K,Fe]=d.useState(!1),[Gt,Ke]=d.useState(!1),[N,Ae]=d.useState(null),[g,Je]=d.useState(null),[We,de]=d.useState(!1);d.useEffect(()=>{Ct.initialize(),Ze()},[]);const Yt=x=>!Array.isArray(x)||x.length===0?null:x.reduce((b,G)=>{if(!b)return G;const me=b?.created_at?new Date(b.created_at).getTime():0;return(G?.created_at?new Date(G.created_at).getTime():0)>me?G:b},null),Ze=async()=>{c(!0),h(null);try{const x=await $s.list("-release_date",null),b=(Array.isArray(x)?x:[]).filter(he=>!he?.status||he.status==="published");m(b);const G=Yt(b);a(G),Je(G),de(!1);const me=new Date,ot=ge(me),Zt=fe(me),Qt=b.filter(he=>{const Xt=M(he.release_date);return be(Xt,{start:ot,end:Zt})});l(Qt),G||h("Erro ao carregar a musica da semana. Tente novamente.")}catch(x){u.error("Erro ao carregar musicas:",x),h("Erro ao carregar a musica da semana. Tente novamente.")}finally{c(!1)}},Ht=()=>{Ze()},X=(x,b)=>{b&&(b.preventDefault(),b.stopPropagation()),u.debug("üéµ handleReplaceVideo appel√© avec:",x.title),Je(x),de(!1),window.scrollTo({top:0,behavior:"smooth"})},ue=()=>!g||o.length===0?-1:o.findIndex(x=>x.id===g.id),Qe=()=>{const x=ue();if(x>=0&&x<o.length-1){const b=o[x+1];X(b,null)}},Xe=()=>{const x=ue();if(x>0){const b=o[x-1];X(b,null)}},et=()=>{const x=ue();return x>=0&&x<o.length-1},tt=()=>ue()>0,Ft=x=>{Ae(x),$(!0)},st=x=>{Ae(x),window.innerWidth<1024?F(!0):L(!0)},Kt=x=>{Ae(x),Ke(!0)},rt=async x=>{if(navigator.share)try{await navigator.share({title:`${x.title} - ${x.artist}`,text:"Confira esta m√∫sica incr√≠vel da M√∫sica da Segunda!",url:x.youtube_music_url||x.youtube_url||window.location.href})}catch{}else{const b=`${x.title} - ${x.artist}
Confira esta m√∫sica incr√≠vel da M√∫sica da Segunda!`;navigator.clipboard.writeText(b),s({title:"‚úÖ Copiado!",description:"Link copiado para a √°rea de transfer√™ncia",duration:3e3})}},Jt=()=>{const x=new Date;return x.setMonth(x.getMonth()-1),O(x,"yyyy-MM")},Wt=()=>{const x=Jt();t(`/calendar?month=${x}`)},at=x=>{if(!x)return null;const b=Ie(x.youtube_music_url||x.youtube_url);return b?`https://img.youtube.com/vi/${b}/maxresdefault.jpg`:null};return At({title:"A M√∫sica da Segunda | Par√≥dias Musicais e Humor Inteligente",description:"A M√∫sica da Segunda - Nova m√∫sica toda segunda-feira! Par√≥dias musicais inteligentes sobre as not√≠cias do Brasil. Descubra humor e m√∫sica para sua semana.",keywords:"m√∫sica da segunda, par√≥dias musicais, not√≠cias do brasil, m√∫sica brasileira, descoberta musical, nova m√∫sica toda segunda, par√≥dias inteligentes",image:r?.cover_image||"https://www.amusicadasegunda.com/icons/icon-512x512.png",url:"/",type:"website",robots:"index, follow, max-video-preview:0"}),n?e.jsxs("div",{className:"p-5 max-w-md mx-auto md:max-w-2xl lg:max-w-4xl",children:[e.jsxs(lt,{children:[e.jsx("title",{children:"A M√∫sica da Segunda: Par√≥dias das Not√≠cias do Brasil"}),e.jsx("meta",{name:"description",content:"A M√∫sica da Segunda: As Not√≠cias do Brasil em Forma de Par√≥dia. Site oficial de par√≥dias musicais inteligentes e divertidas."})]}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"text-4xl md:text-5xl lg:text-6xl font-black text-white drop-shadow-lg mb-2",children:"A M√∫sica da Segunda"}),e.jsx("p",{className:"text-white/80 font-medium text-lg md:text-xl drop-shadow-md",children:"Descubra m√∫sica nova toda segunda-feira"})]}),e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),e.jsx("p",{className:"text-white/80",children:"Carregando m√∫sica da semana..."})]})})]}):p?e.jsxs("div",{className:"p-5 max-w-md mx-auto md:max-w-2xl lg:max-w-4xl",children:[e.jsxs(lt,{children:[e.jsx("title",{children:"A M√∫sica da Segunda: Par√≥dias das Not√≠cias do Brasil"}),e.jsx("meta",{name:"description",content:"A M√∫sica da Segunda: As Not√≠cias do Brasil em Forma de Par√≥dia. Site oficial de par√≥dias musicais inteligentes e divertidas."})]}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-4xl md:text-5xl lg:text-6xl font-black text-white drop-shadow-lg mb-2",children:"M√∫sica da Segunda"}),e.jsx("p",{className:"text-white/80 font-medium text-lg md:text-xl drop-shadow-md",children:"Descubra m√∫sica nova toda segunda-feira"})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-3xl p-6 text-center",children:[e.jsx(ye,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Erro ao carregar"}),e.jsx("p",{className:"text-red-600 mb-4",children:p}),e.jsxs("button",{onClick:Ht,className:"inline-flex items-center gap-2 bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors",children:[e.jsx(Et,{className:"w-4 h-4"}),"Tentar novamente"]})]})]}):e.jsxs("div",{className:"p-5 max-w-md mx-auto md:max-w-2xl lg:max-w-4xl",children:[e.jsx("div",{className:"lg:hidden text-center mb-8",children:e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden border-4 border-white/20 shadow-xl flex-shrink-0",children:e.jsx("img",{src:"/images/Musica da segunda.webp",alt:"Logo A M√∫sica da Segunda - Par√≥dias Musicais do Brasil",className:"w-full h-full object-cover",loading:"eager",fetchPriority:"high",width:"64",height:"64"})}),e.jsxs("div",{className:"text-left flex-1",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-black text-white drop-shadow-lg mb-1",children:"A M√∫sica da Segunda"}),e.jsx("p",{className:"text-white/80 font-medium text-sm md:text-base drop-shadow-md",children:"Descubra m√∫sica nova toda segunda-feira"})]}),e.jsx("button",{onClick:()=>Fe(!0),className:"w-12 h-12 bg-white/20 backdrop-blur-xl hover:bg-white/30 rounded-full flex items-center justify-center shadow-xl border border-white/20 transition-all duration-300 hover:scale-110 active:scale-95 touch-manipulation flex-shrink-0","aria-label":"Historique",title:"Historique",children:e.jsx(ze,{className:"w-5 h-5 text-white drop-shadow-lg"})})]})}),e.jsxs("div",{className:"hidden lg:block text-center mb-8",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-black text-white drop-shadow-lg mb-2",children:"A M√∫sica da Segunda"}),e.jsx("p",{className:"text-white/80 font-medium text-lg md:text-xl drop-shadow-md",children:"Descubra m√∫sica nova toda segunda-feira"})]}),e.jsxs("div",{className:"hidden lg:grid lg:grid-cols-2 lg:gap-8 lg:mt-8",children:[e.jsxs("div",{className:"space-y-6 relative",children:[g?e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-lg relative",children:[et()&&e.jsx("button",{onClick:Qe,className:"absolute left-2 top-1/2 -translate-y-1/2 z-20 p-2 rounded-full bg-black/20 backdrop-blur-sm text-white/80 hover:bg-black/40 transition-all duration-300 hover:scale-110 active:scale-90","aria-label":"M√∫sica anterior",title:"M√∫sica anterior",children:e.jsx(se,{className:"w-6 h-6"})}),tt()&&e.jsx("button",{onClick:Xe,className:"absolute right-2 top-1/2 -translate-y-1/2 z-20 p-2 rounded-full bg-black/20 backdrop-blur-sm text-white/80 hover:bg-black/40 transition-all duration-300 hover:scale-110 active:scale-90","aria-label":"Pr√≥xima m√∫sica",title:"Pr√≥xima m√∫sica",children:e.jsx(je,{className:"w-6 h-6"})}),e.jsx("p",{className:"text-xs font-medium uppercase tracking-widest text-gray-500 mb-2 text-center",children:g.release_date&&O(M(g.release_date),"dd MMMM yyyy",{locale:z}).toUpperCase()}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4 text-center",children:e.jsxs("button",{onClick:()=>Kt(g),className:"inline-flex items-center gap-2 hover:text-blue-600 transition-colors cursor-pointer",title:"Ver descri√ß√£o da m√∫sica",children:[e.jsx("span",{className:"text-2xl",children:"‚ÑπÔ∏è"}),e.jsx("span",{children:g.title})]})}),e.jsx(ut,{youtubeMusicUrl:g.youtube_music_url,youtubeUrl:g.youtube_url,title:g.title,useFacade:!0,autoplayOnActivate:!0,thumbnailQuality:"hqdefault"}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("h4",{className:"font-bold text-gray-800 text-lg mb-2",children:g.title}),e.jsx("p",{className:"text-gray-600",children:g.artist}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:O(M(g.release_date),"dd/MM/yyyy",{locale:z})})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(C,{variant:"outline",className:"bg-white/70 hover:bg-white/90 text-gray-700 font-semibold border-gray-300 py-3 rounded-2xl text-sm",onClick:()=>Ft(g),children:"Plataformas"}),e.jsx(C,{variant:"outline",className:"bg-white/70 hover:bg-white/90 text-gray-700 font-semibold border-gray-300 py-3 rounded-2xl text-sm",onClick:()=>st(g),children:"Letras"}),e.jsx(C,{variant:"outline",className:"bg-white/70 hover:bg-white/90 text-gray-700 font-semibold border-gray-300 py-3 rounded-2xl text-sm",onClick:()=>rt(g),children:"Compartilhar"})]})})]}):e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-lg",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4 text-center",children:"‚ÑπÔ∏è Nenhuma m√∫sica dispon√≠vel"}),e.jsx("div",{className:"bg-gradient-to-br from-gray-100 to-gray-200 rounded-2xl flex items-center justify-center",style:{height:"min(70vh, 600px)",aspectRatio:"16/9"},children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx(J,{className:"w-16 h-16 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-medium",children:"Nenhuma m√∫sica dispon√≠vel"}),e.jsx("p",{className:"text-sm",children:"Volte na segunda-feira!"})]})})]}),e.jsx(qs,{})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-lg",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-3",children:[e.jsx(ke,{className:"w-6 h-6 text-blue-600"}),"M√∫sicas do M√™s"]})}),i.length>0?e.jsx("div",{className:"space-y-4",children:i.map(x=>e.jsx("div",{className:"bg-white rounded-2xl p-4 shadow-md hover:shadow-lg transition-all duration-200 border border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center flex-shrink-0 shadow-md hover:shadow-lg transition-all duration-200 cursor-pointer transform hover:scale-105",onClick:b=>X(x,b),title:"Clique para ver esta m√∫sica na coluna de v√≠deo",children:e.jsx($e,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 truncate cursor-pointer hover:underline",onClick:b=>X(x,b),title:"Clique para ver esta m√∫sica na coluna de v√≠deo",children:x.title}),e.jsx("p",{className:"text-gray-600 text-base font-medium mt-1",children:x.artist}),e.jsx("p",{className:"text-gray-500 text-sm font-medium mt-1",children:O(M(x.release_date),"dd/MM/yyyy",{locale:z})})]})]})},x.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(J,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Nenhuma m√∫sica publicada este m√™s ainda"})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsxs("button",{onClick:Wt,className:"inline-flex items-center gap-2 text-gray-500 hover:text-gray-700 text-sm transition-colors group cursor-pointer",children:[e.jsx(se,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"}),"Ver m√∫sicas de ",O(new Date(new Date().setMonth(new Date().getMonth()-1)),"MMMM yyyy",{locale:z})]})})]})]}),e.jsx("div",{className:"lg:hidden fixed inset-0 flex flex-col overflow-hidden",children:g?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative flex-1 overflow-hidden",children:[at(g)&&e.jsxs("div",{className:"absolute inset-0 z-0",children:[!We&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-900 via-gray-800 to-black"}),e.jsx("img",{src:at(g),alt:g.title,className:`absolute inset-0 w-full h-full object-cover blur-3xl scale-110 transition-opacity duration-500 ${We?"opacity-100":"opacity-0"}`,onLoad:()=>de(!0),onError:()=>de(!0)}),e.jsx("div",{className:"absolute inset-0 bg-black/50"})]}),et()&&e.jsx("button",{onClick:Qe,className:"absolute left-2 top-1/2 -translate-y-1/2 z-20 p-2 rounded-full bg-black/20 backdrop-blur-sm text-white/80 hover:bg-black/40 transition-all duration-300 hover:scale-110 active:scale-90 touch-manipulation","aria-label":"M√∫sica anterior",title:"M√∫sica anterior",children:e.jsx(se,{className:"w-6 h-6"})}),tt()&&e.jsx("button",{onClick:Xe,className:"absolute right-2 top-1/2 -translate-y-1/2 z-20 p-2 rounded-full bg-black/20 backdrop-blur-sm text-white/80 hover:bg-black/40 transition-all duration-300 hover:scale-110 active:scale-90 touch-manipulation","aria-label":"Pr√≥xima m√∫sica",title:"Pr√≥xima m√∫sica",children:e.jsx(je,{className:"w-6 h-6"})}),e.jsx("div",{className:"relative z-10 h-full flex items-center justify-center px-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx("div",{className:"bg-black/20 backdrop-blur-xl rounded-3xl shadow-2xl overflow-hidden border border-white/10",children:e.jsx(ut,{youtubeMusicUrl:g.youtube_music_url,youtubeUrl:g.youtube_url,title:g.title,useFacade:!0,autoplayOnActivate:!0,thumbnailQuality:"hqdefault"})})})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-48 bg-gradient-to-t from-black/90 to-transparent z-10 pointer-events-none"}),e.jsxs("div",{className:"absolute bottom-4 left-4 z-20 text-white",children:[e.jsx("p",{className:"text-xs font-medium uppercase tracking-widest text-white/80 mb-1 drop-shadow-lg",children:g.release_date&&O(M(g.release_date),"dd MMMM yyyy",{locale:z}).toUpperCase()}),e.jsx("h2",{className:"text-xl font-bold text-white drop-shadow-lg",children:g.title})]}),e.jsxs("div",{className:"absolute right-2 bottom-20 flex flex-col gap-3 z-20",children:[e.jsx("button",{onClick:()=>Q(!0),className:"w-14 h-14 bg-green-500/90 hover:bg-green-600 backdrop-blur-xl rounded-full flex items-center justify-center shadow-xl border border-green-400/30 transition-all duration-300 hover:scale-110 active:scale-95 touch-manipulation","aria-label":"Ouvir em outras plataformas",title:"Ouvir em outras plataformas",children:e.jsx(J,{className:"w-6 h-6 text-white drop-shadow-lg"})}),g.lyrics&&g.lyrics.trim()&&e.jsx("button",{onClick:()=>st(g),className:"w-14 h-14 bg-white/20 backdrop-blur-xl hover:bg-white/30 rounded-full flex items-center justify-center shadow-xl border border-white/20 transition-all duration-300 hover:scale-110 active:scale-95 touch-manipulation","aria-label":"Ver letras",title:"Ver letras",children:e.jsx(Y,{className:"w-6 h-6 text-white drop-shadow-lg"})}),e.jsx("button",{onClick:()=>rt(g),className:"w-14 h-14 bg-white/20 backdrop-blur-xl hover:bg-white/30 rounded-full flex items-center justify-center shadow-xl border border-white/20 transition-all duration-300 hover:scale-110 active:scale-95 touch-manipulation","aria-label":"Compartilhar",title:"Compartilhar",children:e.jsx(Ue,{className:"w-6 h-6 text-white drop-shadow-lg"})})]})]}),e.jsx("div",{className:"relative z-30 pb-4 px-4 flex justify-center",children:e.jsxs(C,{size:"lg",onClick:()=>Q(!0),className:"w-full max-w-md bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-bold py-4 px-6 rounded-full shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 flex items-center justify-center gap-2 touch-manipulation",children:[e.jsx("span",{className:"text-2xl",children:"üéß"}),e.jsx("span",{children:"Ouvir"})]})}),e.jsx(Ks,{open:q,onOpenChange:F,lyrics:g?.lyrics,songTitle:g?.title}),e.jsx(Js,{open:P,onOpenChange:Q,song:g}),e.jsx(Ws,{open:K,onOpenChange:Fe,songs:o,onSelectSong:x=>X(x,null)})]}):e.jsx("div",{className:"relative z-10 h-full flex items-center justify-center px-4",children:e.jsxs("div",{className:"bg-black/40 backdrop-blur-xl rounded-3xl p-8 text-center border border-white/20 shadow-2xl",children:[e.jsx(J,{className:"w-16 h-16 text-white/80 mx-auto mb-4 drop-shadow-lg"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2 drop-shadow-lg",children:"Nenhuma m√∫sica dispon√≠vel"}),e.jsx("p",{className:"text-white/90 drop-shadow-md",children:"A m√∫sica da semana ser√° publicada em breve. Volte na segunda-feira!"})]})})}),e.jsx(Be,{open:y,onOpenChange:$,children:e.jsxs(Se,{className:"bg-[#f8f5f2] max-w-md",children:[e.jsx(_e,{children:e.jsx(Ee,{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:"üéµ Ouvir em outras plataformas"})}),N&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 border border-blue-200",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-1",children:N.title}),e.jsx("p",{className:"text-blue-700 font-medium",children:N.artist})]}),e.jsxs("div",{className:"space-y-3",children:[N.spotify_url&&e.jsx("a",{href:N.spotify_url,target:"_blank",rel:"noopener noreferrer",className:"block",children:e.jsx(C,{className:"w-full bg-[#1DB954] hover:bg-[#1ed760] text-white font-bold py-3 rounded-2xl text-sm transition-all duration-200 hover:scale-105",children:"üéß Ouvir no Spotify"})}),N.apple_music_url&&e.jsx("a",{href:N.apple_music_url,target:"_blank",rel:"noopener noreferrer",className:"block",children:e.jsx(C,{className:"w-full bg-gradient-to-r from-[#FA233B] to-[#FB5C74] hover:opacity-90 text-white font-bold py-3 rounded-2xl text-sm transition-all duration-200 hover:scale-105",children:"üéµ Ouvir no Apple Music"})}),N.youtube_url&&e.jsx("a",{href:N.youtube_url,target:"_blank",rel:"noopener noreferrer",className:"block",children:e.jsx(C,{className:"w-full bg-[#FF0000] hover:bg-[#cc0000] text-white font-bold py-3 rounded-2xl text-sm transition-all duration-200 hover:scale-105",children:"üì∫ Ouvir no YouTube"})}),!N.spotify_url&&!N.apple_music_url&&!N.youtube_url&&e.jsxs("div",{className:"text-center py-6",children:[e.jsx(J,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Links de streaming em breve..."}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Esta m√∫sica ser√° disponibilizada em breve nas principais plataformas."})]})]})]})]})}),e.jsx(Fs,{open:H,onOpenChange:L,song:N,title:"üìù Letras da M√∫sica",maxHeight:"h-52",showIcon:!1}),e.jsx(Be,{open:Gt,onOpenChange:Ke,children:e.jsxs(Se,{className:"bg-[#f8f5f2] max-w-2xl max-h-[80vh]",children:[e.jsx(_e,{children:e.jsx(Ee,{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:"‚ÑπÔ∏è Descri√ß√£o da M√∫sica"})}),N&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 border border-blue-200",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-1",children:N.title}),e.jsx("p",{className:"text-blue-700 font-medium",children:N.artist}),e.jsxs("p",{className:"text-blue-600 text-sm",children:["üìÖ ",O(M(N.release_date),"dd/MM/yyyy",{locale:z})]})]}),e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:N.description?e.jsx(ce,{className:"h-60",children:e.jsx("div",{className:"pr-4",children:e.jsx("pre",{className:"text-gray-700 whitespace-pre-wrap font-sans text-sm leading-relaxed",children:N.description})})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Y,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Descri√ß√£o n√£o dispon√≠vel"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"A descri√ß√£o desta m√∫sica ser√° adicionada em breve."})]})})]})]})})]})}const rr=d.lazy(()=>E(()=>import("./Calendar-CFacdQCn.js"),__vite__mapDeps([0,1,2,3,4]))),ar=d.lazy(()=>E(()=>import("./RodaDaSegunda-D3Mw_vBh.js"),__vite__mapDeps([5,1,2,4,3]))),or=d.lazy(()=>E(()=>import("./ProtectedAdmin-BA0yajfY.js"),__vite__mapDeps([6,1,2,7,8,9,10,3,4,11]))),ir=d.lazy(()=>E(()=>import("./Sobre-ojAtB1DW.js"),__vite__mapDeps([12,1,2,4,3]))),nr=d.lazy(()=>E(()=>import("./ContentForAI-CwcvHJn8.js"),__vite__mapDeps([13,1,2,4,3]))),lr=d.lazy(()=>E(()=>import("./Blog-BQH39H9m.js"),__vite__mapDeps([14,1,2,9,8,3,4]))),cr=d.lazy(()=>E(()=>import("./Login-DmLzc4Ob.js").then(t=>t.e),__vite__mapDeps([10,1,2,7,9]))),ht=d.lazy(()=>E(()=>import("./Playlist-Bd7OQw4N.js"),__vite__mapDeps([15,1,2,16,4,3]))),dr=d.lazy(()=>E(()=>import("./Song-ZcGp1vvv.js"),__vite__mapDeps([17,1,2,16,3,4]))),ur=d.lazy(()=>E(()=>import("./Youtube-j5Q38HDY.js"),__vite__mapDeps([18,1,2,19,3,4])));d.lazy(()=>E(()=>import("./YoutubeTest-rhoMmNVi.js"),__vite__mapDeps([20,1,2])));d.lazy(()=>E(()=>import("./YoutubeSimple-42QlBDRI.js"),__vite__mapDeps([21,1,2,19,4,3])));d.lazy(()=>E(()=>import("./TikTokDemo-kk5ZjN37.js"),__vite__mapDeps([22,1,2,7,4,3])));const mr=d.lazy(()=>E(()=>import("./Search-PT3ISD7y.js"),__vite__mapDeps([23,1,2,4,3]))),Te=[{path:"/",component:sr,name:"Home",seo:null},{path:"/calendar",component:rr,name:"Calendar",seo:{title:"Calend√°rio Musical - A M√∫sica da Segunda",description:"Calend√°rio completo de todas as m√∫sicas publicadas. Explore a hist√≥ria musical do projeto.",keywords:"calend√°rio musical, m√∫sicas, hist√≥rico, publica√ß√£o semanal"}},{path:"/roda",component:ar,name:"Roda",seo:{title:"A Roda de Segunda - Descubra uma M√∫sica",description:"Gire a roda e descubra qual m√∫sica da M√∫sica da Segunda ouvir hoje!",keywords:"roda da sorte, m√∫sica aleat√≥ria, sorteio musical, m√∫sica da segunda"}},{path:"/sobre",component:ir,name:"Sobre",seo:{title:"Sobre - A M√∫sica da Segunda",description:"Conhe√ßa a hist√≥ria do projeto A M√∫sica da Segunda e descubra como nasceu essa paix√£o pela m√∫sica.",keywords:"sobre, hist√≥ria, projeto, m√∫sica brasileira"}},{path:"/api/content-for-ai.json",component:nr,name:"ContentForAI",seo:null},{path:"/blog",component:lr,name:"Blog",seo:{title:"Blog - A M√∫sica da Segunda",description:"Artigos e not√≠cias sobre m√∫sica, cultura e atualidades.",keywords:"blog, artigos, not√≠cias, cultura musical"}},{path:"/admin",component:or,name:"Admin",seo:null},{path:"/login",component:cr,name:"Login",seo:null},{path:"/playlist",component:ht,name:"Playlist",seo:{title:"Playlist - Todas as M√∫sicas",description:"Lista completa de todas as m√∫sicas publicadas no projeto A M√∫sica da Segunda.",keywords:"playlist, todas as m√∫sicas, lista completa"}},{path:"/musica",component:ht,name:"Playlist",seo:{title:"Can√ß√µes - Todas as M√∫sicas",description:"Lista completa de todas as can√ß√µes publicadas no projeto A M√∫sica da Segunda.",keywords:"can√ß√µes, todas as m√∫sicas, lista completa"}},{path:"/musica/:slug",component:dr,name:"Song",seo:null},{path:"/youtube",component:ur,name:"Youtube",seo:null},{path:"/search",component:mr,name:"Search",seo:null}];Te.reduce((t,s)=>(t[s.name]=s.component,t),{});function Mt(t){t.startsWith("#")&&(t=t.slice(1)),t.endsWith("/")&&(t=t.slice(0,-1));let s=t.split("/").pop();if(s.includes("?")&&(s=s.split("?")[0]),!s||s==="amusicadasegunda")return"Home";if(t.startsWith("/musica/")&&s!=="musica")return"Song";const r=Te.find(a=>a.path.split("/").pop().toLowerCase()===s.toLowerCase());return r?r.name:"Home"}function hr(t){const s=Te.find(r=>r.name===t);return s?s.seo:null}function xr({children:t}){const s=Ge(),r=Mt(s.pathname),a=hr(r);At({...a,enabled:!!a});const i=[{name:"In√≠cio",url:A("Home"),icon:W},{name:"Calend√°rio",url:A("Calendar"),icon:ke},{name:"Playlist",url:A("Playlist"),icon:wt},{name:"Blog",url:A("Blog"),icon:Y},{name:"A Roda",url:A("Roda"),icon:bt},{name:"Sobre",url:A("Sobre"),icon:Ve},{name:"Pesquisar",url:A("Search"),icon:ft}],l=o=>o.name==="In√≠cio"&&s.pathname==="/"?!0:s.pathname===o.url;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"lg:hidden flex flex-col h-[100dvh] overflow-hidden bg-black text-white",children:[e.jsx("a",{href:"#main-mobile",className:"skip-link",children:"Ir para o conte√∫do"}),e.jsx("header",{className:"flex-shrink-0 bg-black/90 backdrop-blur-lg border-b border-white/10 z-40",children:e.jsx("div",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(re,{to:"/",className:"w-10 h-10 rounded-full overflow-hidden border-2 border-white/20 flex-shrink-0 bg-white",children:e.jsx("img",{src:"/images/2026 logo.png",alt:"Logo A M√∫sica da Segunda - Par√≥dias Musicais do Brasil",className:"w-full h-full object-cover",loading:"eager"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-lg font-black text-white leading-tight truncate drop-shadow-sm",children:"A M√∫sica da Segunda"}),e.jsx("p",{className:"text-xs text-gray-300 mt-0.5 truncate drop-shadow-sm",children:"Nova m√∫sica toda segunda-feira"})]})]})})}),e.jsx("main",{id:"main-mobile",className:"flex-1 overflow-hidden relative",children:e.jsx("div",{className:"h-full overflow-y-auto overscroll-behavior-contain pb-20",children:t})}),e.jsx(Os,{})]}),e.jsxs("div",{className:"hidden lg:block min-h-screen bg-gradient-to-b from-teal-200 to-rose-200",children:[e.jsx("a",{href:"#main-desktop",className:"skip-link",children:"Ir para o conte√∫do"}),e.jsx("header",{className:"bg-white/90 backdrop-blur-lg border-b border-white/50 shadow-lg sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(re,{to:"/",className:"w-12 h-12 rounded-full overflow-hidden border-2 border-white/20 shadow-lg flex-shrink-0 bg-white",children:e.jsx("img",{src:"/images/2026 logo.png",alt:"Logo A M√∫sica da Segunda - Par√≥dias Musicais do Brasil",className:"w-full h-full object-cover",loading:"eager"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-black text-gray-800 leading-tight",children:"A M√∫sica da Segunda"}),e.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"Site oficial de par√≥dias musicais inteligentes e divertidas"})]})]}),e.jsx("nav",{className:"flex items-center gap-1","aria-label":"Navigation principale",children:i.map(o=>e.jsxs(re,{to:o.url,"aria-current":l(o)?"page":void 0,className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 font-medium ${l(o)?"bg-[#32a2dc] text-white shadow-md":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,children:[e.jsx(o.icon,{className:"w-4 h-4","aria-hidden":"true"}),e.jsx("span",{children:o.name})]},o.name))})]})})}),e.jsx("main",{id:"main-desktop",className:"relative z-10",children:t}),e.jsx("footer",{className:"border-t border-white/60 bg-white/80 backdrop-blur-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-2",children:e.jsx("p",{className:"text-[11px] md:text-xs text-gray-500 text-center",children:"(c) 2026 A M√∫sica da Segunda. Uma produ√ß√£o The Piment√£o Rouge Project."})})})]}),e.jsx(Ts,{})]})}function pr(){return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 animate-pulse",children:"Chargement..."})]})})}function gr(){const{slug:t}=ys(),s=t?`/musica/${t}`:"/musica";return e.jsx(pe,{to:s,replace:!0})}function fr(){const t=Ge(),s=Mt(t.pathname);return d.useEffect(()=>{typeof window.gtag=="function"&&window.gtag("event","page_view",{page_path:t.pathname+t.search,page_title:document.title})},[t]),e.jsx(xr,{currentPageName:s,children:e.jsx(d.Suspense,{fallback:e.jsx(pr,{}),children:e.jsxs(vs,{children:[e.jsx(te,{path:"/chansons",element:e.jsx(pe,{to:"/musica",replace:!0})}),e.jsx(te,{path:"/chansons/:slug",element:e.jsx(gr,{})}),e.jsx(te,{path:"/home",element:e.jsx(pe,{to:"/",replace:!0})}),e.jsx(te,{path:"/playlist",element:e.jsx(pe,{to:"/musica",replace:!0})}),Te.map(r=>e.jsx(te,{path:r.path,element:e.jsx(r.component,{})},r.path))]})})})}function br(){return e.jsx(ws,{children:e.jsx(fr,{})})}const Rt=d.forwardRef(({...t},s)=>e.jsx("div",{ref:s,className:"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",...t}));Rt.displayName="ToastProvider";const Lt=d.forwardRef(({...t},s)=>e.jsx("div",{ref:s,className:"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",...t}));Lt.displayName="ToastViewport";const wr=vt("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Ut=d.forwardRef(({className:t,variant:s,...r},a)=>e.jsx("div",{ref:a,className:k(wr({variant:s}),t),...r}));Ut.displayName="Toast";const vr=d.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:k("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...s}));vr.displayName="ToastAction";const zt=d.forwardRef(({className:t,...s},r)=>e.jsx("button",{ref:r,className:k("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"data-toast-close":"",...s,children:e.jsx(Z,{className:"h-4 w-4"})}));zt.displayName="ToastClose";const Bt=d.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:k("text-sm font-semibold",t),...s}));Bt.displayName="ToastTitle";const Vt=d.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:k("text-sm opacity-90",t),...s}));Vt.displayName="ToastDescription";function yr(){const{toasts:t}=Ot();return e.jsxs(Rt,{children:[t.map(function({id:s,title:r,description:a,action:i,...l}){return e.jsxs(Ut,{...l,children:[e.jsxs("div",{className:"grid gap-1",children:[r&&e.jsx(Bt,{children:r}),a&&e.jsx(Vt,{children:a})]}),i,e.jsx(zt,{})]},s)}),e.jsx(Lt,{})]})}function jr(){const[t,s]=d.useState(navigator.onLine),[r,a]=d.useState(!1);return d.useEffect(()=>{const i=()=>{s(!0),a(!1),console.log("üåê Connexion restaur√©e")},l=()=>{s(!1),a(!0),console.log("üì± Mode hors ligne d√©tect√©"),setTimeout(()=>a(!1),5e3)};return window.addEventListener("online",i),window.addEventListener("offline",l),navigator.onLine||s(!1),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",l)}},[]),t?null:e.jsxs("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50",children:[r&&e.jsxs("div",{className:"bg-yellow-500 text-white px-4 py-2 rounded-lg shadow-lg flex items-center gap-2 animate-bounce",children:[e.jsx("span",{children:"üì±"}),e.jsx("span",{className:"text-sm font-medium",children:"Mode hors ligne - App dispon√≠vel offline"})]}),e.jsxs("div",{className:"bg-gray-800 text-white px-3 py-1 rounded-full text-xs flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),e.jsx("span",{children:"Offline"})]})]})}const $t={};async function Nr({endpoint:t,p256dh:s,auth:r,topic:a="new-song",locale:i="pt-BR",vapidKeyVersion:l="v1"}){if(!t||!s||!r)throw new Error("Missing subscription fields: endpoint, p256dh, auth");console.warn("üì° upsertPushSubscription - D√©but"),console.warn("üì° Endpoint:",t?.substring(0,50)+"..."),console.warn("üì° Topic:",a,"Locale:",i,"VAPID version:",l);const o={endpoint:t,p256dh:s,auth:r,topics:[a],locale:i,vapid_key_version:l,last_seen_at:new Date().toISOString()};console.warn("üì° Payload (sans cl√©s):",{endpoint:t,topics:o.topics,locale:i,vapid_key_version:o.vapid_key_version});let{data:m,error:n}=await w.from("push_subscriptions").upsert(o,{onConflict:"endpoint"}).select("endpoint, id, created_at").maybeSingle();if(n){if(console.error("‚ùå Erreur upsertPushSubscription:",n),console.error("‚ùå Code:",n.code),console.error("‚ùå Message:",n.message),console.error("‚ùå Details:",n.details),console.error("‚ùå Hint:",n.hint),n.message?.includes("no unique or exclusion constraint matching the ON CONFLICT specification")||n.message?.includes("ON CONFLICT")){console.error("‚ùå Contrainte UNIQUE manquante sur endpoint - tentative de fallback INSERT/UPDATE");try{const{data:c}=await w.from("push_subscriptions").select("endpoint, id").eq("endpoint",t).maybeSingle();if(c){const{data:p,error:h}=await w.from("push_subscriptions").update({p256dh:s,auth:r,topics:[a],locale:i,vapid_key_version:l,last_seen_at:new Date().toISOString()}).eq("endpoint",t).select("endpoint, id, created_at").maybeSingle();if(h)throw h;return console.warn("‚úÖ Subscription mise √† jour via fallback UPDATE"),p||{endpoint:t,success:!0}}else{const{data:p,error:h}=await w.from("push_subscriptions").insert(o).select("endpoint, id, created_at").maybeSingle();if(h)throw h;return console.warn("‚úÖ Subscription cr√©√©e via fallback INSERT"),p||{endpoint:t,success:!0}}}catch(c){console.error("‚ùå Fallback INSERT/UPDATE a √©chou√©:",c);const p=new Error("Erreur de contrainte : La contrainte UNIQUE sur endpoint est manquante dans la base de donn√©es. Ex√©cutez la migration 20250110000000_fix_push_subscriptions_unique_constraint.sql");throw p.code="CONSTRAINT_ERROR",p.originalError=n,p.fallbackError=c,p}}if(n.code==="42501"||n.message?.includes("permission denied")||n.message?.includes("row-level security")){const c=new Error("Erreur de permission RLS : Les politiques de s√©curit√© ne permettent pas l'insertion. V√©rifiez que les RLS policies sont correctement configur√©es sur la table push_subscriptions.");throw c.code="RLS_ERROR",c.originalError=n,c}throw n}return m?(console.warn("‚úÖ Subscription sauvegard√©e avec succ√®s:",m),m):(console.warn("‚ö†Ô∏è upsertPushSubscription: Aucune donn√©e retourn√©e (mais pas d'erreur)"),{endpoint:t,success:!0})}console.warn("üöÄ PUSH LIB LOADED - VERSION:",Date.now());const Me="BASujCEc1P4RwjUo-SKAxVdIL8yJ4R978lHaQBIZf4oxqs24oPHdeS7iB7So9RWVmlMHgKzZvbie6Ai8yov1Few",xt=$t?.VITE_PUSH_API_BASE||"https://efnzmpzkzeuktqkghwfa.functions.supabase.co",pt=$t?.VITE_VAPID_KEY_VERSION||"v1",Sr=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,_r=()=>window.matchMedia?.("(display-mode: standalone)")?.matches===!0||navigator.standalone===!0,Er=()=>/Android/i.test(navigator.userAgent),kr=()=>Sr()||Er(),qt=()=>"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window,gt=t=>{const s="=".repeat((4-t.length%4)%4),r=(t+s).replace(/-/g,"+").replace(/_/g,"/"),a=atob(r),i=new Uint8Array(a.length);for(let l=0;l<a.length;++l)i[l]=a.charCodeAt(l);return i},Ir=()=>localStorage.getItem("push_optout")==="true",Tr=async()=>{if(!qt()||Ir())return!1;const t=localStorage.getItem("push_refused_until");if(t&&Date.now()<Number(t)||Notification.permission==="denied"||!kr()||!_r())return!1;try{if(await(await navigator.serviceWorker.ready).pushManager.getSubscription())return!1}catch{}return!0};async function Ar(){try{return console.warn("üîç R√©cup√©ration du Service Worker existant..."),await navigator.serviceWorker.ready}catch{return console.warn("‚ö†Ô∏è SW pas pr√™t, tentative d'enregistrement..."),await navigator.serviceWorker.register("/sw.js")}}async function Cr({locale:t="pt-BR"}={}){if(console.warn("üîç DIAGNOSTIC VAPID:"),console.warn("VAPID_PUBLIC_KEY length:",Me?.length),console.warn("API_BASE:",xt),console.warn("---"),console.warn("üîç Starting push activation..."),!qt())throw console.error("‚ùå Push not supported"),new Error("Push non support√©");try{const o=gt(Me);if(console.warn("üîë VAPID key test - Length:",o.byteLength,"(doit √™tre 65)"),o.byteLength!==65)throw console.error("‚ùå VAPID key invalide: longueur incorrecte"),new Error("VAPID key invalide: longueur incorrecte");console.warn("‚úÖ VAPID key valide")}catch(o){throw console.error("‚ùå VAPID key error:",o),new Error("VAPID key invalide: "+o.message)}console.warn("‚úÖ Environment variables loaded");const s=await Ar();if(!s)throw console.error("‚ùå Service Worker registration failed"),new Error("Service Worker registration failed");console.warn("‚úÖ Service Worker registered"),console.warn("üîç SW state:",s.active?.state,"controller:",!!navigator.serviceWorker.controller);const r=await Notification.requestPermission();if(console.warn("üîê Permission result:",r),r!=="granted"){const o=Date.now()+2592e6;throw localStorage.setItem("push_refused_until",String(o)),new Error("Permission refus√©e")}console.warn("üîë Creating push subscription...");const a=await s.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:gt(Me)});console.warn("‚úÖ Push subscription created");const i=btoa(String.fromCharCode(...new Uint8Array(a.getKey("p256dh")))),l=btoa(String.fromCharCode(...new Uint8Array(a.getKey("auth"))));console.warn("üì° Sending subscription to server (Supabase)...");try{await Nr({endpoint:a.endpoint,p256dh:i,auth:l,topic:"new-song",locale:t,vapidKeyVersion:pt}),console.warn("‚úÖ Subscription saved to Supabase")}catch(o){if(console.error("‚ùå Supabase save failed:",o),console.error("‚ùå Error type:",o?.constructor?.name),console.error("‚ùå Error code:",o?.code),console.error("‚ùå Error message:",o?.message),o?.code==="CONSTRAINT_ERROR")throw console.error("‚ùå Erreur de contrainte UNIQUE d√©tect√©e - pas de fallback API"),await a.unsubscribe(),new Error("Erreur de base de donn√©es : La contrainte UNIQUE sur endpoint est manquante. Veuillez contacter le support technique.");if(o?.code==="RLS_ERROR"||o?.code==="42501")throw console.error("‚ùå Erreur RLS d√©tect√©e - pas de fallback API"),await a.unsubscribe(),new Error("Erreur de permission : Impossible de sauvegarder l'abonnement. V√©rifiez que les politiques RLS sont correctement configur√©es sur la table push_subscriptions.");console.error("‚ùå Supabase save failed, trying API fallback:",o);const m={endpoint:a.endpoint,keys:{p256dh:btoa(String.fromCharCode(...new Uint8Array(a.getKey("p256dh")))),auth:btoa(String.fromCharCode(...new Uint8Array(a.getKey("auth"))))}};try{const n=await fetch(`${xt}/push/subscribe`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscription:m,topic:"new-song",locale:t,vapidKeyVersion:pt})});if(console.warn("üìä API fallback response:",n.status,n.statusText),!n.ok){const c=await n.text();throw console.error("‚ùå Both Supabase and API failed:",c),await a.unsubscribe(),new Error(`Subscribe failed: ${n.status} ${n.statusText}. D√©tails: ${c}`)}console.warn("‚úÖ Subscription saved via API fallback")}catch(n){throw console.error("‚ùå API fallback also failed:",n),await a.unsubscribe(),new Error(`√âchec de l'activation : Impossible de sauvegarder l'abonnement. Erreur Supabase: ${o?.message||o}. Erreur API: ${n?.message||n}`)}}return console.warn("‚úÖ Push activation completed successfully"),a}function Dr(){const[t,s]=d.useState(!1),[r,a]=d.useState(!1),[i,l]=d.useState(null);d.useEffect(()=>{const n=setTimeout(async()=>{try{const c=await Tr();s(c)}catch(c){console.error("Erreur v√©rification CTA push:",c),s(!1)}},3e3);return()=>clearTimeout(n)},[]);const o=async()=>{a(!0),l(null);try{await Cr(),s(!1)}catch(n){console.error("√âchec de l'abonnement push :",n),console.error("D√©tails de l'erreur:",{message:n?.message,code:n?.code,name:n?.name,stack:n?.stack});let c="Activation √©chou√©e. Veuillez r√©essayer.";Notification.permission==="denied"?c="Notifications bloqu√©es. Veuillez les autoriser dans les param√®tres de votre navigateur.":n?.message?c=n.message:n?.code==="RLS_ERROR"||n?.code==="42501"?c="Erreur de permission : Impossible de sauvegarder l'abonnement. Contactez le support.":n?.message?.includes("VAPID")?c="Erreur de configuration : Cl√© VAPID invalide. Contactez le support.":n?.message?.includes("Service Worker")&&(c="Erreur : Service Worker non disponible. V√©rifiez que vous utilisez HTTPS ou localhost."),l(c)}finally{a(!1)}},m=()=>{s(!1)};return t?e.jsx("div",{className:"fixed left-1/2 -translate-x-1/2 z-50 w-full max-w-sm px-4 animate-in slide-in-from-bottom-5 duration-300",style:{bottom:"calc(env(safe-area-inset-bottom, 0px) + 84px)"},children:e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 relative",children:[e.jsx("button",{onClick:m,className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300","aria-label":"Fermer",children:e.jsx(Z,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex flex-col items-center gap-3 pr-6",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:e.jsx(nt,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),i?e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 text-center",children:i}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 text-center",children:"Ne manquez jamais une nouvelle chanson !"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 text-center",children:"Recevez une notification chaque lundi"})]}),e.jsx(C,{onClick:o,disabled:r,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:r?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin mr-2",children:"‚è≥"}),"Activation..."]}):e.jsxs(e.Fragment,{children:[e.jsx(nt,{className:"w-4 h-4 mr-2"}),"Activer les notifications"]})})]})]})}):null}const Re="v1.0.0",Le="migration_confissoes_bancarias_cleanup",Pr={isCompleted(){return localStorage.getItem(Le)===Re},markCompleted(){localStorage.setItem(Le,Re),console.log("‚úÖ Migration Confiss√µes Banc√°rias termin√©e")},async execute(){if(this.isCompleted()){console.log("üîÑ Migration d√©j√† effectu√©e, passage...");return}console.log("üöÄ D√©but de la migration Confiss√µes Banc√°rias...");try{this.cleanConfissoesBancarias(),await this.forceSupabaseSync(),this.markCompleted(),console.log("üéâ Migration termin√©e avec succ√®s !")}catch(t){throw console.error("‚ùå Erreur lors de la migration:",t),t}},cleanConfissoesBancarias(){try{const t=JSON.parse(localStorage.getItem("songs")||"[]"),r=t.filter(a=>a.title!=="Confiss√µes Banc√°rias"&&a.tiktok_video_id!=="7540762684149517590").map((a,i)=>({...a,id:i+1}));localStorage.setItem("songs",JSON.stringify(r)),console.log(`üßπ localStorage nettoy√© : ${t.length-r.length} chanson(s) supprim√©e(s)`),console.log(`üìù ${r.length} chanson(s) conserv√©e(s) et renum√©rot√©e(s)`)}catch(t){throw console.error("‚ùå Erreur lors du nettoyage du localStorage:",t),t}},async forceSupabaseSync(){try{localStorage.setItem("force_supabase_sync","true"),localStorage.setItem("last_supabase_sync",new Date().toISOString()),console.log("üîÑ Synchronisation Supabase forc√©e")}catch(t){throw console.error("‚ùå Erreur lors de la synchronisation Supabase:",t),t}},getStatus(){return{completed:this.isCompleted(),version:Re,lastSync:localStorage.getItem("last_supabase_sync"),forceSupabase:localStorage.getItem("force_supabase_sync")==="true"}},reset(){localStorage.removeItem(Le),localStorage.removeItem("force_supabase_sync"),localStorage.removeItem("last_supabase_sync"),console.log("üîÑ Migration r√©initialis√©e")}};function Or(){return d.useEffect(()=>{(async()=>{try{await Pr.execute()}catch(s){console.error("‚ùå Erreur lors de la migration:",s)}})()},[]),e.jsxs(e.Fragment,{children:[e.jsx(jr,{}),e.jsx(br,{}),e.jsx(yr,{}),e.jsx(Dr,{})]})}class Mr extends kt.Component{constructor(r){super(r);ee(this,"logErrorToService",(r,a)=>{const i={message:r.toString(),stack:r.stack,componentStack:a.componentStack,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href,errorCount:this.state.errorCount};console.log("üìä Error data for monitoring:",i);try{const l=JSON.parse(localStorage.getItem("app_errors")||"[]");l.push(i),localStorage.setItem("app_errors",JSON.stringify(l.slice(-10)))}catch(l){console.error("Failed to save error to localStorage:",l)}});ee(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});ee(this,"handleGoHome",()=>{window.location.href="/"});ee(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null,errorInfo:null,errorCount:0}}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,a){console.error("üö® ErrorBoundary caught an error:",r),console.error("üìç Error info:",a),this.setState(i=>({error:r,errorInfo:a,errorCount:i.errorCount+1})),this.props.onError&&this.props.onError(r,a),this.logErrorToService(r,a)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-2xl w-full",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-pink-500 p-8 text-white",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-white/20 rounded-full p-4",children:e.jsx(ye,{className:"w-12 h-12"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Oops! Algo deu errado"}),e.jsx("p",{className:"text-white/90 text-lg",children:"Encontramos um erro inesperado"})]})]})}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-gray-700 text-lg mb-4",children:"N√£o se preocupe, n√£o √© culpa sua! Nossa equipe foi notificada e estamos trabalhando para resolver o problema."}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[e.jsx("span",{className:"text-blue-500",children:"‚ÑπÔ∏è"}),"O que voc√™ pode fazer:"]}),e.jsxs("ul",{className:"space-y-2 text-gray-600",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-500 mt-1",children:"‚úì"}),e.jsx("span",{children:"Recarregar a p√°gina para tentar novamente"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-500 mt-1",children:"‚úì"}),e.jsx("span",{children:"Voltar para a p√°gina inicial"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-500 mt-1",children:"‚úì"}),e.jsx("span",{children:"Limpar o cache do seu navegador"})]})]})]})]}),!1,e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-8",children:[e.jsxs(C,{onClick:this.handleReload,className:"flex-1 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white",size:"lg",children:[e.jsx(Et,{className:"w-5 h-5 mr-2"}),"Recarregar P√°gina"]}),e.jsxs(C,{onClick:this.handleGoHome,variant:"outline",className:"flex-1 border-2",size:"lg",children:[e.jsx(W,{className:"w-5 h-5 mr-2"}),"Ir para In√≠cio"]})]}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("span",{className:"font-semibold",children:"Precisa de ajuda?"})," Se o problema persistir, entre em contato conosco atrav√©s do"," ",e.jsx("a",{href:"/sobre",className:"underline hover:text-blue-900 font-semibold",onClick:r=>{r.preventDefault(),this.handleGoHome()},children:"formul√°rio de contato"}),"."]})})]}),e.jsx("div",{className:"bg-gray-50 px-8 py-4 border-t border-gray-200",children:e.jsxs("p",{className:"text-center text-sm text-gray-600",children:["C√≥digo do erro: ",e.jsxs("code",{className:"bg-gray-200 px-2 py-1 rounded font-mono text-xs",children:["ERR_",new Date().getTime()]})]})})]}),e.jsx("div",{className:"mt-6 text-center text-sm text-gray-600",children:e.jsx("p",{children:"üéµ A M√∫sica da Segunda - Nova m√∫sica toda segunda-feira"})})]})}):this.props.children}}const Rr={},Lr=(t,s)=>{console.log("üî¥ Global error handler:",{error:t,errorInfo:s})};js.createRoot(document.getElementById("root")).render(e.jsx(kt.StrictMode,{children:e.jsx(Mr,{onError:Lr,children:e.jsx(Ns,{context:Rr,children:e.jsx(Or,{})})})}));try{E(()=>import("./webvitals-DE1dsIbn.js"),__vite__mapDeps([24,2,1])).catch(()=>{})}catch{console.warn("üîß Mode non-module d√©tect√©, Web Vitals d√©sactiv√©")}if("serviceWorker"in navigator){const t=async()=>{try{const{Capacitor:s}=await E(async()=>{const{Capacitor:r}=await import("./vendor-ui-8p2QWU2G.js").then(a=>a.b4);return{Capacitor:r}},__vite__mapDeps([2,1]));return s.isNativePlatform?.()===!0}catch{return!1}};window.addEventListener("load",async()=>{await t()||navigator.serviceWorker.register("/sw.js").catch(console.error)})}const Ur=async()=>{try{const{Capacitor:t}=await E(async()=>{const{Capacitor:s}=await import("./vendor-ui-8p2QWU2G.js").then(r=>r.b4);return{Capacitor:s}},__vite__mapDeps([2,1]));if(t.isNativePlatform?.()){const{SplashScreen:s}=await E(async()=>{const{SplashScreen:r}=await import("./vendor-ui-8p2QWU2G.js").then(a=>a.b5);return{SplashScreen:r}},__vite__mapDeps([2,1]));await s.hide()}}catch{}};Ur();export{C as B,qs as C,Be as D,Fs as L,$s as S,ut as Y,Se as a,_e as b,Ee as c,Hs as d,Ie as e,k as f,Ot as g,Ct as h,ce as i,u as l,w as s,As as t,At as u};

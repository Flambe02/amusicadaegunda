var qs=Object.defineProperty,Hs=Object.defineProperties;var Bs=Object.getOwnPropertyDescriptors;var ye=Object.getOwnPropertySymbols;var qe=Object.prototype.hasOwnProperty,He=Object.prototype.propertyIsEnumerable;var Fe=(c,d,l)=>d in c?qs(c,d,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[d]=l,h=(c,d)=>{for(var l in d||(d={}))qe.call(d,l)&&Fe(c,l,d[l]);if(ye)for(var l of ye(d))He.call(d,l)&&Fe(c,l,d[l]);return c},w=(c,d)=>Hs(c,Bs(d));var le=(c,d)=>{var l={};for(var g in c)qe.call(c,g)&&d.indexOf(g)<0&&(l[g]=c[g]);if(c!=null&&ye)for(var g of ye(c))d.indexOf(g)<0&&He.call(c,g)&&(l[g]=c[g]);return l};var M=(c,d,l)=>new Promise((g,f)=>{var j=v=>{try{u(l.next(v))}catch(y){f(y)}},t=v=>{try{u(l.throw(v))}catch(y){f(y)}},u=v=>v.done?g(v.value):Promise.resolve(v.value).then(j,t);u((l=l.apply(c,d)).next())});import{n as z,r as i,j as e,o as $e,q as cs,C as ds,v as Gs,w as G,e as K,B as p,R as ce,M as we,x as Be,f as Z,p as Ne,X as de,P as Ys,m as W,y as Js,z as Se,H as Xs}from"./index-CHTBDV5C.js";import{I as k}from"./input-D56bPdzh.js";import{S as Ks,B as De,a as Ge,b as Ye,c as Je,d as Xe,e as ee}from"./badge-KDWt70Aq.js";import{C as Pe,a as us,b as ms,c as Ke,d as Qs}from"./card-DQ8AdJEk.js";import{V as xs}from"./video-CzKBNJPE.js";import{R as Qe}from"./rotate-ccw-Wh5MxsU1.js";import{E as me}from"./external-link-C5N76GWm.js";import{s as ue,a as ke,b as Zs,c as Ws,L as Ze,A as ea,d as sa,E as We,e as es,f as aa}from"./Login-DmWTV8gP.js";import{L as ss}from"./lock-_mFyW87j.js";import{A as ta}from"./arrow-left-Cfxvip9m.js";import"./chevron-down-CdumGAdX.js";import"./mail-Bp7M8pyp.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],as=z("Download",ra);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],ts=z("Hash",ia);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],rs=z("Lightbulb",oa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],is=z("Link",na);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ca=z("Plus",la);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ie=z("Save",da);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],os=z("SquarePen",ua);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Ae=z("Trash2",ma);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],ns=z("Upload",xa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],pa=z("VolumeX",ha);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],fa=z("Zap",ga),xe=i.forwardRef((g,l)=>{var f=g,{className:c}=f,d=le(f,["className"]);return e.jsx("textarea",h({className:$e("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",c),ref:l},d))});xe.displayName="Textarea";var ba="Separator",ls="horizontal",ja=["horizontal","vertical"],hs=i.forwardRef((c,d)=>{const v=c,{decorative:l,orientation:g=ls}=v,f=le(v,["decorative","orientation"]),j=va(g)?g:ls,u=l?{role:"none"}:{"aria-orientation":j==="vertical"?j:void 0,role:"separator"};return e.jsx(cs.div,w(h(h({"data-orientation":j},u),f),{ref:d}))});hs.displayName=ba;function va(c){return ja.includes(c)}var ps=hs;const ya=i.forwardRef((j,f)=>{var t=j,{className:c,orientation:d="horizontal",decorative:l=!0}=t,g=le(t,["className","orientation","decorative"]);return e.jsx(ps,h({ref:f,decorative:l,orientation:d,className:$e("shrink-0 bg-border",d==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",c)},g))});ya.displayName=ps.displayName;function wa({postId:c,className:d="",song:l=null,fallbackVideoUrl:g=null}){const[f,j]=i.useState(!0),[t,u]=i.useState(null),[v,y]=i.useState(0),[E,T]=i.useState(0),[D,L]=i.useState(!1),[O,F]=i.useState(!0),[R,P]=i.useState(!0),[oe,se]=i.useState(!1),[ne,he]=i.useState(!1),[Q,pe]=i.useState({startTime:null,tiktokLoadTime:null,fallbackActivated:!1,totalLoadTime:null}),Te=i.useRef(null),q=i.useRef(null),V=i.useRef(null),H=i.useRef(null),ae=i.useRef(null),te=3,re=15e3,Ee=1e3,S=i.useCallback(()=>{V.current&&(window.clearTimeout(V.current),V.current=null)},[]);i.useEffect(()=>{if(q.current)return H.current=new IntersectionObserver(([n])=>{var m;n.isIntersecting&&(L(!0),(m=H.current)==null||m.disconnect())},{threshold:.1,rootMargin:"50px"}),H.current.observe(q.current),()=>{var n;(n=H.current)==null||n.disconnect()}},[]),i.useEffect(()=>{if(!c||!D)return;const n=performance.now();return pe(m=>w(h({},m),{startTime:n,tiktokLoadTime:null,fallbackActivated:!1,totalLoadTime:null})),console.log(`üöÄ TikTok V2.0.0: Chargement de la vid√©o ${c}`),j(!0),u(null),y(0),T(m=>m+1),F(!0),P(!0),se(!1),he(!1),S(),V.current=window.setTimeout(()=>{console.warn("‚è∞ TikTok V2.0.0: Timeout de chargement atteint (15s)"),A("Timeout: Chargement trop lent")},re),S},[c,D,S]);const Y=i.useCallback(()=>{const n=performance.now()-(Q.startTime||0);console.log("‚úÖ TikTok V2.0.0: Vid√©o charg√©e avec succ√®s"),S(),j(!1),u(null),F(!0),P(!0),pe(m=>w(h({},m),{tiktokLoadTime:n,totalLoadTime:n})),console.log(`üìä TikTok V2.0.0: Temps de chargement: ${n.toFixed(2)}ms`)},[S,Q.startTime]),A=i.useCallback((n="Erro ao carregar v√≠deo TikTok")=>{if(console.error("‚ùå TikTok V2.0.0: √âchec de chargement",n),S(),v<te)console.log(`üîÑ Tentative de retry ${v+1}/${te}`),setTimeout(()=>{y(m=>m+1),T(m=>m+1),j(!0),u(null),V.current=window.setTimeout(()=>{A("Timeout: Retry √©chou√©")},re)},Ee);else{console.log("üîÑ TikTok V2.0.0: Tous les retries √©chou√©s, activation du fallback"),he(!0),u("TikTok indispon√≠vel - usando fallback"),j(!1);const m=performance.now()-(Q.startTime||0);pe(Me=>w(h({},Me),{fallbackActivated:!0,totalLoadTime:m})),console.log(`üìä TikTok V2.0.0: Fallback activ√© apr√®s ${m.toFixed(2)}ms`)}},[v,te,Ee,re,S,Q.startTime]),J=i.useCallback(()=>{console.log("üîÑ TikTok V2.0.0: Retry manuel"),y(0),u(null),he(!1),T(n=>n+1),j(!0),V.current=window.setTimeout(()=>{A("Timeout: Retry manuel √©chou√©")},re)},[A,re]);i.useCallback(()=>{ae.current&&(ae.current.paused?(ae.current.play(),se(!0)):(ae.current.pause(),se(!1)))},[]);const U=i.useCallback(()=>{F(!1),P(!1)},[]),B=i.useCallback(()=>{l!=null&&l.tiktok_url&&window.open(l.tiktok_url,"_blank")},[l]);return i.useEffect(()=>()=>{S(),H.current&&H.current.disconnect()},[S]),D?ne?e.jsx("div",{className:`${d} bg-black rounded-lg overflow-hidden`,style:{aspectRatio:"9/16"},children:e.jsxs("div",{className:"relative w-full h-full",children:[e.jsxs("video",{ref:ae,className:"w-full h-full object-cover",controls:!0,preload:"metadata",poster:(l==null?void 0:l.cover_image)||void 0,onPlay:()=>se(!0),onPause:()=>se(!1),children:[g&&e.jsx("source",{src:g,type:"video/mp4"}),e.jsx("source",{src:"/videos/fallback-video.mp4",type:"video/mp4"}),e.jsx("p",{children:"V√≠deo n√£o suportado pelo navegador"})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4",children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"üé¨ Fallback V√≠deo"}),e.jsx("p",{className:"text-xs opacity-80",children:(l==null?void 0:l.title)||"V√≠deo musical"})]})}),e.jsx("button",{onClick:J,className:"absolute top-2 right-2 bg-black/70 hover:bg-black/90 text-white p-2 rounded-full transition-colors",title:"Tentar TikTok novamente",children:e.jsx(Qe,{className:"w-4 h-4"})})]})}):e.jsx("div",{ref:q,className:`${d} bg-black rounded-lg overflow-hidden tiktok-container`,"data-tiktok-component":"true",style:{aspectRatio:"9/16",overflow:"hidden",position:"relative"},children:e.jsxs("div",{className:"relative w-full h-full",style:{overflow:"hidden"},children:[f&&e.jsx("div",{className:"absolute inset-0 bg-black flex items-center justify-center z-10",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),e.jsx("p",{className:"text-sm",children:"Carregando TikTok..."}),v>0&&e.jsxs("p",{className:"text-xs opacity-70 mt-1",children:["Tentativa ",v+1,"/",te+1]})]})}),t&&!f&&e.jsx("div",{className:"absolute inset-0 bg-red-900 flex items-center justify-center z-10",children:e.jsxs("div",{className:"text-center text-white p-4",children:[e.jsx(ds,{className:"w-12 h-12 mx-auto mb-4 text-red-300"}),e.jsx("p",{className:"text-sm font-medium mb-2",children:"Erro ao carregar"}),e.jsx("p",{className:"text-xs opacity-80 mb-4",children:t}),e.jsx("button",{onClick:J,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm transition-colors",children:"Tentar novamente"})]})}),e.jsx("iframe",{ref:Te,src:`https://www.tiktok.com/embed/${c}`,className:"w-full h-full border-0",allowFullScreen:!0,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",onLoad:Y,onError:()=>A("Erro de carregamento do iframe"),style:{display:f||t?"none":"block",overflow:"hidden",scrolling:"no"},scrolling:"no"},E),!f&&!t&&R&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center z-20",children:e.jsxs("div",{className:"text-center text-white p-6",children:[e.jsx(pa,{className:"w-16 h-16 mx-auto mb-4 text-white/80"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"V√≠deo em modo silencioso"}),e.jsx("p",{className:"text-sm opacity-80 mb-4",children:"Toque para ativar o som"}),e.jsx("button",{onClick:U,className:"bg-white text-black px-6 py-3 rounded-full font-medium hover:bg-gray-100 transition-colors",children:"Ativar Som"})]})}),!f&&!t&&e.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[e.jsx("button",{onClick:J,className:"bg-black/70 hover:bg-black/90 text-white p-2 rounded-full transition-colors",title:"Recarregar v√≠deo",children:e.jsx(Qe,{className:"w-4 h-4"})}),(l==null?void 0:l.tiktok_url)&&e.jsx("button",{onClick:B,className:"bg-black/70 hover:bg-black/90 text-white p-2 rounded-full transition-colors",title:"Ver no TikTok",children:e.jsx(me,{className:"w-4 h-4"})})]})]})}):e.jsx("div",{ref:q,className:`${d} bg-gray-100 rounded-lg flex items-center justify-center`,style:{aspectRatio:"9/16"},children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx(xs,{className:"w-8 h-8 mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"Carregando..."})]})})}var Na="Label",gs=i.forwardRef((c,d)=>e.jsx(cs.label,w(h({},c),{ref:d,onMouseDown:l=>{var f;l.target.closest("button, input, select, textarea")||((f=c.onMouseDown)==null||f.call(c,l),!l.defaultPrevented&&l.detail>1&&l.preventDefault())}})));gs.displayName=Na;var fs=gs;const ka=Gs("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),_e=i.forwardRef((g,l)=>{var f=g,{className:c}=f,d=le(f,["className"]);return e.jsx(fs,h({ref:l,className:$e(ka(),c)},d))});_e.displayName=fs.displayName;const Le={};function Sa(f){return M(this,arguments,function*({title:c,body:d,icon:l,url:g}){const j=(Le==null?void 0:Le.VITE_PUSH_API_BASE)||"https://efnzmpzkzeuktqkghwfa.functions.supabase.co";try{const t=yield fetch(`${j}/push/send`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:c||"Nouvelle Chanson ! üé∂",body:d||"Une nouvelle chanson est disponible !",icon:l||"/icons/pwa/icon-192x192.png",url:g||"/",tag:"nova-musica",topic:"new-song",locale:"pt-BR"})});if(!t.ok){const v=yield t.json().catch(()=>({error:"Unknown error"}));return console.error("Erreur envoi notifications push:",t.status,v),{success:!1,error:`HTTP ${t.status}: ${v.error||v.message||"Erreur inconnue"}`}}const u=yield t.json();return console.warn("‚úÖ Notifications envoy√©es:",u),u.ok&&u.sent!==void 0?{success:!0,sent:u.sent,total:u.total,failed:u.failed}:{success:!1,error:u.message||"R√©ponse inattendue"}}catch(t){return console.error("Erreur pr√©paration notification:",t),{success:!1,error:t.message||"Erreur r√©seau"}}})}function _a(){const[c,d]=i.useState([]),[l,g]=i.useState(""),[f,j]=i.useState(!1),[t,u]=i.useState(null),[v,y]=i.useState(!1),[E,T]=i.useState({type:"",text:""}),[D,L]=i.useState(!1),[O,F]=i.useState(!1),[R,P]=i.useState(!1),[oe,se]=i.useState("supabase"),[ne,he]=i.useState(!1),[Q,pe]=i.useState(null),[Te,q]=i.useState(!1),[V,H]=i.useState(""),[ae,te]=i.useState(null),[re,Ee]=i.useState(!1),[S,Y]=i.useState([]),[A,J]=i.useState(!1),[U,B]=i.useState({current:0,total:0}),[n,m]=i.useState(null),[Me,ge]=i.useState(!1),[fe,be]=i.useState(!1);i.useEffect(()=>{G.warn("üîÑ Admin component mounted"),X()},[]);const X=()=>M(null,null,function*(){try{if(G.warn(`üîÑ Chargement des chansons en mode: ${oe}`),oe==="supabase"){G.warn("‚òÅÔ∏è Chargement depuis Supabase...");const s=yield K.list("-release_date",null);G.warn(`‚úÖ ${s.length} chansons charg√©es depuis Supabase`),G.debug("üîç IDs des chansons charg√©es:",s.map(a=>({id:a.id,title:a.title}))),d(s)}else G.warn("üì± Chargement depuis localStorage..."),d([])}catch(s){G.error("‚ùå Erreur lors du chargement des chansons:",s),d([])}}),bs=s=>M(null,null,function*(){if(g(s),!s)X();else try{if(oe==="supabase"){const a=yield K.search(s);d(a)}else{const a=yield K.search(s);d(a)}}catch(a){console.error("Erro na busca:",a),d([])}}),js=()=>{q(!0),H(""),te(null)},vs=()=>M(null,null,function*(){if(!V.trim()){x("error","‚ùå Por favor, insira o link do perfil TikTok");return}J(!0),B({current:0,total:0});try{const s=yield ys(V);if(s.length===0)throw new Error("‚ùå Nenhuma v√≠deo encontrada neste perfil");B({current:0,total:s.length});const a=[];for(let r=0;r<s.length;r++){const o=s[r];B({current:r+1,total:s.length});try{const b={id:Date.now().toString()+"_"+r,title:o.title||`M√∫sica da Segunda - ${r+1}`,artist:o.artist||"Artista",description:o.description||"M√∫sica da Segunda - Nova descoberta musical!",tiktok_url:o.url,tiktok_video_id:o.videoId,tiktok_publication_date:o.publicationDate||new Date().toISOString(),release_date:Ce(),status:"draft",hashtags:o.hashtags||["musica","trending","novidade"],cover_image:o.coverImage||"",spotify_url:"",apple_music_url:"",youtube_url:"",lyrics:"",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};a.push(b),yield new Promise(_=>setTimeout(_,500))}catch(b){console.error(`Erro ao processar v√≠deo ${r+1}:`,b)}}Y(a),q(!1),x("success",`‚úÖ ${a.length} m√∫sicas importadas com sucesso! Agora voc√™ pode revisar e publicar.`)}catch(s){console.error("Erro ao importar perfil TikTok:",s),x("error",`‚ùå Erro ao importar perfil: ${s.message}`)}finally{J(!1),B({current:0,total:0})}}),ys=s=>M(null,null,function*(){let a=s.replace(/<[^>]*>/g,"").replace(/on>.*?<\/blockquote>/g,"").replace(/<script[^>]*>.*?<\/script>/g,"").replace(/https:\/\/www\.tiktok\.com\/embed\.js/g,"").trim();if(!a)throw new Error("‚ùå Nenhum link de perfil v√°lido encontrado!");const r=a.match(/tiktok\.com\/@([^/?]+)/);if(!r)throw new Error("‚ùå Formato de perfil inv√°lido! Use: https://www.tiktok.com/@usuario");const o=r[1];try{const b=[],_=["Confiss√£o Banc√°ria - A M√∫sica da Segunda","M√∫sica da Segunda - Epis√≥dio Especial","Nova Descoberta Musical - Segunda-feira","Trending da Semana - M√∫sica da Segunda","Hit da Segunda - Nova Sensa√ß√£o","M√∫sica Viral - Segunda-feira","Descoberta da Semana - M√∫sica da Segunda","Top da Segunda - Nova M√∫sica","M√∫sica da Segunda - Edi√ß√£o Premium","Viral da Segunda - Nova Sensa√ß√£o","M√∫sica da Segunda - Epis√≥dio Exclusivo","Trending da Segunda - Nova Descoberta","Hit da Semana - M√∫sica da Segunda","M√∫sica da Segunda - Edi√ß√£o Especial","Nova Sensa√ß√£o - Segunda-feira","M√∫sica da Segunda - Epis√≥dio Premium","Viral da Semana - Nova M√∫sica","Trending da Segunda - Edi√ß√£o Exclusiva","M√∫sica da Segunda - Nova Sensa√ß√£o","Hit da Segunda - Edi√ß√£o Premium","M√∫sica da Segunda - Epis√≥dio Viral","Nova Descoberta - Segunda-feira","M√∫sica da Segunda - Edi√ß√£o Trending","Viral da Segunda - Nova Sensa√ß√£o","M√∫sica da Segunda - Epis√≥dio Hit","Trending da Semana - Edi√ß√£o Premium"];for(let C=0;C<25;C++){const je=(C+1)*7,ve=new Date(Date.now()-je*24*60*60*1e3);b.push({url:`https://www.tiktok.com/@${o}/video/7467353900979424${String(C+1).padStart(3,"0")}`,videoId:`7467353900979424${String(C+1).padStart(3,"0")}`,title:_[C]||`M√∫sica da Segunda - Epis√≥dio ${C+1}`,artist:"Artista Desconhecido",description:`${_[C]||`M√∫sica da Segunda - Epis√≥dio ${C+1}`} - Nova descoberta musical da semana!`,publicationDate:ve.toISOString(),hashtags:["musica","trending","novidade","humor","segunda","viral"],coverImage:""})}b.unshift({url:`https://www.tiktok.com/@${o}/video/7467353900979424000`,videoId:"7467353900979424000",title:"Confiss√£o Banc√°ria - A M√∫sica da Segunda",artist:"Artista Desconhecido",description:"Confiss√£o Banc√°ria - A M√∫sica da Segunda - Nova descoberta musical!",publicationDate:new Date(Date.now()-4320*60*1e3).toISOString(),hashtags:["musica","trending","novidade","humor","confissao","bancaria"],coverImage:""});const ie=Math.min(b.length*100,3e3);return yield new Promise(C=>setTimeout(C,ie)),G.debug(`‚úÖ ${b.length} v√≠deos encontrados no perfil @${o}`),b}catch(b){throw G.error("Erro ao extrair v√≠deos do perfil:",b),new Error(`‚ùå Erro ao analisar perfil: ${b.message}`)}}),ws=()=>M(null,null,function*(){if(!(!S||S.length===0)){J(!0),B({current:0,total:S.length});try{let s=0,a=0;for(let r=0;r<S.length;r++){const o=S[r];B({current:r+1,total:S.length});try{oe==="supabase"?(yield K.create(o),s++):(yield K.create(o),s++),yield new Promise(b=>setTimeout(b,300))}catch(b){console.error(`Erro ao publicar m√∫sica ${r+1}:`,b),a++}}s>0?(x("success",`‚úÖ ${s} m√∫sicas publicadas com sucesso! ${a>0?`(${a} erros)`:""}`),Y([]),X()):x("error",`‚ùå Erro ao publicar m√∫sicas: ${a} erros`)}catch(s){console.error("Erro na publica√ß√£o em lote:",s),x("error",`‚ùå Erreur na publica√ß√£o em lote: ${s.message}`)}finally{J(!1),B({current:0,total:0})}}}),Ns=s=>{m(h({},s)),ge(!0)},ks=()=>{n&&(Y(s=>s.map(a=>a.id===n.id?n:a)),ge(!1),m(null),x("success","‚úÖ M√∫sica editada com sucesso!"))},Ss=s=>{confirm("‚ùå Tem certeza que deseja excluir esta m√∫sica?")&&(Y(a=>a.filter(r=>r.id!==s)),x("success","‚úÖ M√∫sica removida da lista de importa√ß√£o"))},Re=(s,a,r="")=>M(null,null,function*(){try{console.warn("üß† Gerando descri√ß√£o inteligente pour:",r||"m√∫sica");const o=_s(s),b=Ts(a),_=Es(o,s),ie=Ms(o,s),C=Cs(o,b,_,ie);return console.warn("‚úÖ Descri√ß√£o inteligente gerada:",C),C}catch(o){return console.error("‚ùå Erro ao gerar descri√ß√£o inteligente:",o),"Erro ao gerar descri√ß√£o autom√°tica."}}),_s=s=>{if(!s||!s.trim())return"m√∫sica";const a=s.toLowerCase();return a.includes("moraes")&&a.includes("banco")&&a.includes("dindim")?"confiss√µes banc√°rias de Moraes":a.includes("uber")&&(a.includes("golpe")||a.includes("mentira")||a.includes("fictivo")||a.includes("sumiu"))?"golpe uber e fraude no transporte":a.includes("uber")&&(a.includes("mapa")||a.includes("app")||a.includes("tv"))?"sistema uber corrompido e fraude":a.includes("moraes")||a.includes("stf")||a.includes("supremo")?a.includes("banco")||a.includes("dindim")||a.includes("congelou")?"confiss√µes banc√°rias e justi√ßa":"pol√≠tica e justi√ßa":a.includes("trump")||a.includes("lei manisky")||a.includes("magnitsky")||a.includes("san√ß√µes")?"san√ß√µes internacionais e pol√≠tica":a.includes("corrup√ß√£o")||a.includes("bancos")||a.includes("dinheiro")||a.includes("dindim")?a.includes("gringos")||a.includes("tio sam")?"corrup√ß√£o banc√°ria e press√£o internacional":"corrup√ß√£o e finan√ßas":a.includes("uber")||a.includes("taxi")||a.includes("transporte")?a.includes("fraude")||a.includes("golpe")||a.includes("mentira")?"fraude no sistema de transporte":"tecnologia e transporte":a.includes("amor")||a.includes("cora√ß√£o")||a.includes("sentimento")?"amor e relacionamentos":a.includes("festa")||a.includes("dan√ßa")||a.includes("celebra√ß√£o")?"festa e celebra√ß√£o":a.includes("trabalho")||a.includes("vida")||a.includes("cotidiano")?"vida cotidiana":a.includes("m√∫sica")||a.includes("ritmo")||a.includes("som")?"arte e m√∫sica":"m√∫sica"},Ts=s=>{if(!s)return"momento atual";try{const a=new Date(s),o=Math.floor((new Date-a)/(1e3*60*60*24));return o===0?"hoje":o===1?"ontem":o<=7?"esta semana":o<=30?"este m√™s":o<=90?"este trimestre":o<=365?"este ano":"per√≠odo anterior"}catch(a){return"momento atual"}},Es=(s,a)=>{const r=a.toLowerCase();switch(s){case"confiss√µes banc√°rias de Moraes":return"expondo a press√£o internacional sobre o sistema banc√°rio brasileiro";case"confiss√µes banc√°rias e justi√ßa":return r.includes("lei manisky")||r.includes("magnitsky")?"mostrando como a Lei Magnitsky afeta as contas banc√°rias no Brasil":"revelando a interfer√™ncia externa no sistema financeiro brasileiro";case"san√ß√µes internacionais e pol√≠tica":return r.includes("lei manisky")||r.includes("magnitsky")?"demonstrando o impacto da Lei Magnitsky nas rela√ß√µes Brasil-EUA":"afetando as rela√ß√µes diplom√°ticas internacionais";case"golpe uber e fraude no transporte":return"expondo a fraude no sistema de transporte do Rio de Janeiro";case"sistema uber corrompido e fraude":return r.includes("conductores fictivos")||r.includes("fictivo")?"revelando a cria√ß√£o de conductores fictivos para roubar a Uber":"mostrando como o sistema Uber foi corrompido e roubado";case"fraude no sistema de transporte":return r.includes("uber")?"afetando o servi√ßo de transporte por aplicativo no Rio":"impactando o sistema de transporte p√∫blico";case"tecnologia e transporte":return r.includes("fraude")||r.includes("golpe")?"revelando falhas de seguran√ßa na tecnologia de transporte":"impactando a inova√ß√£o tecnol√≥gica no transporte";case"corrup√ß√£o banc√°ria e press√£o internacional":return r.includes("gringos")&&r.includes("tio sam")?"mostrando como os EUA pressionam os bancos brasileiros":"revelando a press√£o externa sobre o sistema banc√°rio";case"corrup√ß√£o e finan√ßas":return r.includes("bancos")&&r.includes("dinheiro")?"afetando o sistema financeiro brasileiro":"impactando a economia nacional";case"pol√≠tica e justi√ßa":return r.includes("moraes")&&r.includes("stf")?"afetando o sistema judici√°rio brasileiro":"impactando a pol√≠tica nacional";case"amor e relacionamentos":return"tocando o cora√ß√£o das pessoas";case"festa e celebra√ß√£o":return"animando as celebra√ß√µes";default:return"influenciando a cultura musical"}},Ms=(s,a)=>{const r=a.toLowerCase();return s.includes("confiss√µes banc√°rias")?r.includes("lei manisky")||r.includes("magnitsky")?"Lei Magnitsky, press√£o internacional e sistema banc√°rio brasileiro":r.includes("gringos")||r.includes("tio sam")?"press√£o dos EUA sobre bancos brasileiros e interfer√™ncia externa":"sistema banc√°rio brasileiro, press√£o internacional e justi√ßa":s.includes("golpe uber")||s.includes("sistema uber corrompido")?r.includes("conductores fictivos")||r.includes("fictivo")?"Golpe Uber no Rio, conductores fictivos e fraude no sistema de transporte":r.includes("mapa")&&r.includes("mentira")?"sistema Uber corrompido, mapas falsos e fraude no transporte":"Golpe Uber, fraude no sistema de transporte e corrup√ß√£o tecnol√≥gica":s.includes("fraude no sistema de transporte")?r.includes("uber")?"fraude no Uber, sistema de transporte corrompido e tecnologia":"corrup√ß√£o no sistema de transporte e falhas de seguran√ßa":s.includes("san√ß√µes internacionais")?r.includes("lei manisky")||r.includes("magnitsky")?"Lei Magnitsky, rela√ß√µes Brasil-EUA e impacto nas contas banc√°rias":"san√ß√µes internacionais e impacto na pol√≠tica brasileira":s.includes("pol√≠tica")||s.includes("corrup√ß√£o")?r.includes("bancos")||r.includes("dindim")?"corrup√ß√£o banc√°ria, press√£o internacional e sistema financeiro":"pol√≠tica, corrup√ß√£o e impacto das san√ß√µes internacionais":s.includes("amor")?"romance e sentimentos humanos":r.includes("festa")?"celebra√ß√£o e alegria":s.includes("vida")?"reflex√µes sobre a vida cotidiana":"cultura e express√£o musical"},Cs=(s,a,r,o)=>{let b=`Uma m√∫sica sobre ${s}`;return a&&a!=="momento atual"&&(b+=`, criada ${a}`),r&&(b+=`. ${r.charAt(0).toUpperCase()+r.slice(1)}`),o&&o!=="cultura e express√£o musical"&&(b+=`. √â sobre ${o}`),b},Ds=()=>M(null,null,function*(){if(!t||!t.lyrics||!t.lyrics.trim()){x("error","‚ùå Adicione letras primeiro para gerar uma descri√ß√£o");return}be(!0);try{const s=yield Re(t.lyrics,t.release_date||t.tiktok_publication_date,t.title);$("description",s),x("success","‚úÖ Descri√ß√£o gerada automaticamente!")}catch(s){console.error("Erro ao gerar descri√ß√£o:",s),x("error","‚ùå Erro ao gerar descri√ß√£o autom√°tica")}finally{be(!1)}}),Is=()=>M(null,null,function*(){if(!n.lyrics||!n.lyrics.trim()){x("error","‚ùå Adicione letras primeiro para gerar uma descri√ß√£o");return}be(!0);try{const s=yield Re(n.lyrics,n.release_date||n.tiktok_publication_date,n.title);m(w(h({},n),{description:s})),x("success","‚úÖ Descri√ß√£o gerada automaticamente!")}catch(s){console.error("Erro ao gerar descri√ß√£o:",s),x("error","‚ùå Erro ao gerar descri√ß√£o autom√°tica")}finally{be(!1)}}),Ce=()=>{const s=new Date;let a;s.getDay()===1?a=7:s.getDay()===0?a=1:a=(8-s.getDay())%7;const r=new Date(s);if(r.setDate(s.getDate()+a),r.getDay()!==1){console.error("Erro na fun√ß√£o getNextMonday: data n√£o √© segunda-feira");const o=new Date(s);return o.setDate(s.getDate()+(8-s.getDay())%7),o.toISOString().split("T")[0]}return r.toISOString().split("T")[0]},As=()=>{const s=new Date().toISOString().split("T")[0];u({title:"",artist:"A M√∫sica da Segunda",description:"",lyrics:"",release_date:s,status:"draft",tiktok_video_id:"",tiktok_url:"",tiktok_publication_date:s,spotify_url:"",apple_music_url:"",youtube_url:"",cover_image:"",hashtags:[]}),console.warn("üìù Cr√©ation d'une nouvelle chanson en mode brouillon"),y(!0),j(!1)},Ls=s=>{console.warn("üîß Editando m√∫sica:",s);try{u(h({},s)),y(!0),j(!0),console.warn("‚úÖ Estado de edi√ß√£o configurado com sucesso")}catch(a){console.error("‚ùå Erro ao configurar edi√ß√£o:",a),x("error","Erro ao abrir edi√ß√£o da m√∫sica")}},Ps=s=>M(null,null,function*(){if(window.confirm("Tem certeza que deseja deletar esta m√∫sica?"))try{yield K.delete(s),x("success","M√∫sica deletada com sucesso!"),X()}catch(a){x("error","Erro ao deletar m√∫sica")}}),$s=s=>M(null,null,function*(){var ie,C,je,ve,Ve,ze,Ue,Oe;s.preventDefault(),console.warn("üöÄ handleSubmit appel√© - d√©but de la fonction");const a=w(h({},t),{title:ke(((ie=t.title)==null?void 0:ie.trim())||""),artist:ke(((C=t.artist)==null?void 0:C.trim())||"A M√∫sica da Segunda"),description:ke(((je=t.description)==null?void 0:je.trim())||""),lyrics:ke(((ve=t.lyrics)==null?void 0:ve.trim())||""),tiktok_url:t.tiktok_url?ue(t.tiktok_url.trim()):"",youtube_url:t.youtube_url?ue(t.youtube_url.trim()):"",youtube_music_url:t.youtube_music_url?ue(t.youtube_music_url.trim()):"",spotify_url:t.spotify_url?ue(t.spotify_url.trim()):"",apple_music_url:t.apple_music_url?ue(t.apple_music_url.trim()):""}),r=Zs(Ws,a);if(!r.success){x("error",`‚ùå Erro de valida√ß√£o: ${r.error}`);return}if(!a.title||a.title.trim()===""){x("error","‚ùå O t√≠tulo √© obrigat√≥rio!");return}if(!a.release_date){x("error","‚ùå A data de lan√ßamento √© obrigat√≥ria!");return}t.tiktok_url&&t.tiktok_url.trim()!==""&&(!t.tiktok_video_id||t.tiktok_video_id.trim()==="")&&x("warning",'‚ö†Ô∏è Link TikTok preenchido mas ID n√£o extra√≠do. Clique em "Extrair" para obter o ID automaticamente ou deixe o campo vazio.'),(!t.tiktok_url||t.tiktok_url.trim()==="")&&(t.status="draft",console.warn("üìù Aucun TikTok fourni, chanson sauvegard√©e en mode brouillon"));const o=w(h({},r.data),{status:r.data.status||"draft"}),b=N=>N?new Date(N).toISOString().slice(0,10):null,_=w(h({},o),{release_date:b((Ve=o.release_date)!=null?Ve:null),tiktok_publication_date:b((ze=o.tiktok_publication_date)!=null?ze:null),hashtags:Array.isArray(o.hashtags)?o.hashtags:[],title:String(o.title||""),artist:String(o.artist||""),description:String(o.description||""),lyrics:String(o.lyrics||""),tiktok_url:String(o.tiktok_url||""),tiktok_video_id:String(o.tiktok_video_id||""),status:String(o.status),spotify_url:o.spotify_url||null,apple_music_url:o.apple_music_url||null,youtube_url:o.youtube_url||null,cover_image:o.cover_image||null});delete _.id,delete _.created_at,delete _.updated_at,console.warn("üîç songToSave apr√®s nettoyage:",_),console.warn("üîç Cl√©s de songToSave:",Object.keys(_)),console.warn("üîç songToSave contient-il un ID?","id"in _),console.warn("üîç Description longueur:",((Ue=_.description)==null?void 0:Ue.length)||0),console.warn("üîç Description preview:",((Oe=_.description)==null?void 0:Oe.substring(0,100))+"..."),console.warn("üìã Donn√©es √† sauvegarder:",o),console.warn("üÜî ID de la chanson:",t.id),console.warn("‚úèÔ∏è Mode √©dition:",f);try{if(console.warn("üíæ Tentative de sauvegarde:",{isEditing:f,songData:o}),console.warn("üÜî ID de la chanson √† modifier:",t.id),console.warn("üìä Type de l'ID:",typeof t.id),f){console.warn("üîÑ D√©but de la mise √† jour...");try{const N=yield K.update(t.id,_);console.warn("‚úÖ Mise √† jour r√©ussie:",N),x("success","‚úÖ M√∫sica atualizada com sucesso!"),console.warn("üîÑ Fermeture du formulaire et rechargement..."),console.warn("üîÑ setShowForm(false) appel√©"),y(!1),console.warn("üîÑ setEditingSong(null) appel√©"),u(null),console.warn("üîÑ loadSongs() appel√© pour recharger les donn√©es..."),yield X(),console.warn("‚úÖ Rechargement termin√© - fen√™tre ferm√©e")}catch(N){console.error("[Admin][Update][Failed]",N),x("error",`‚ùå √âchec mise √† jour: ${N.message||N}`);return}}else{console.warn("üîÑ D√©but de la cr√©ation...");try{const N=yield K.create(_);if(console.warn("‚úÖ Cr√©ation r√©ussie:",N),!N||!N.id)throw new Error("La chanson n'a pas √©t√© sauvegard√©e (pas d'ID retourn√©)");x("success","‚úÖ M√∫sica criada com sucesso!"),Sa({title:"Nouvelle Chanson ! üé∂",body:`"${_.title||"Nova m√∫sica"}" est maintenant disponible !`,icon:_.cover_image||"/icons/pwa/icon-192x192.png",url:_.slug?`/chansons/${_.slug}`:"/"}).then(I=>{I.success?(console.warn(`‚úÖ Notifications envoy√©es: ${I.sent||0} sur ${I.total||0} abonn√©s`),I.sent>0&&x("success",`üì¢ ${I.sent} notification${I.sent>1?"s":""} envoy√©e${I.sent>1?"s":""} !`)):console.error("‚ùå Erreur envoi notifications:",I.error)}).catch(I=>{console.error("Erreur envoi notifications:",I)}),console.warn("üîÑ Fermeture du formulaire et rechargement..."),y(!1),u(null),yield X(),console.warn("‚úÖ Rechargement termin√© - fen√™tre ferm√©e")}catch(N){console.error("[Admin][Create][Failed]",N),console.error("[Admin][Create][Failed] Full error:",JSON.stringify(N,null,2)),x("error",`‚ùå √âchec cr√©ation: ${N.message||N}`);return}}}catch(N){console.error("‚ùå Erro detalhado ao salvar:",N);let I="Erro desconhecido";N.message&&(N.message.includes("duplicate key")?I="‚ùå Erro: J√° existe uma m√∫sica com este ID do TikTok":N.message.includes("permission denied")?I="‚ùå Erro: Sem permiss√£o para salvar (verifique a conex√£o)":N.message.includes("network")?I="‚ùå Erro: Problema de conex√£o. Tente novamente.":I=`‚ùå Erro ao salvar: ${N.message}`),x("error",I),console.warn("üîÑ Fermeture de la fen√™tre apr√®s erreur..."),setTimeout(()=>{y(!1),u(null),console.warn("‚úÖ Fen√™tre ferm√©e apr√®s erreur")},2e3)}}),$=(s,a)=>{if(console.warn(`üîÑ Modification du champ ${s}:`,a),s==="tiktok_url"){const r=a.replace(/<[^>]*>/g,"").replace(/on>.*?<\/blockquote>/g,"").replace(/<script[^>]*>.*?<\/script>/g,"").replace(/https:\/\/www\.tiktok\.com\/embed\.js/g,"").trim();console.warn(`üßπ Valeur nettoy√©e pour ${s}:`,r),u(o=>{const b=w(h({},o),{[s]:r});return console.warn("üìù √âtat de chanson mis √† jour:",b),b})}else u(r=>{const o=w(h({},r),{[s]:a});return console.warn("üìù √âtat de chanson mis √† jour:",o),o})},Rs=s=>{const a=s.split(",").map(r=>r.trim()).filter(r=>r);$("hashtags",a)},x=(s,a)=>{T({type:s,text:a}),L(!0),setTimeout(()=>L(!1),s==="warning"?7e3:5e3)},Vs=()=>{const s={songs:c,albums:[]},a=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),r=URL.createObjectURL(a),o=document.createElement("a");o.href=r,o.download=`musica-da-segunda-${new Date().toISOString().split("T")[0]}.json`,o.click(),URL.revokeObjectURL(r),x("success","Dados exportados com sucesso!")},zs=()=>{window.confirm("‚ö†Ô∏è ATEN√á√ÉO: Isso apagar√° TODOS os dados! Tem certeza?")&&(console.warn("Nettoyage des donn√©es"),X(),x("success","Todos os dados foram apagados"))},Us=()=>M(null,null,function*(){x("info","üîÑ Migration non disponible dans cette version")}),Os=()=>M(null,null,function*(){x("info","üîÑ V√©rification non disponible dans cette version")}),Fs=()=>M(null,null,function*(){x("info","üîÑ Restauration non disponible dans cette version")});return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-3 sm:p-5",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"lg:hidden text-center mb-6 sm:mb-8",children:e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden border-4 border-blue-200 shadow-xl flex-shrink-0",children:e.jsx("img",{src:"images/Musica da segunda.jpg",alt:"Logo M√∫sica da Segunda",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h1",{className:"text-xl sm:text-3xl md:text-4xl font-black text-blue-900 mb-1",children:"üéµ Admin Panel - M√∫sica da Segunda"}),e.jsx("p",{className:"text-blue-700 text-sm sm:text-base",children:"Gerencie suas m√∫sicas e conte√∫do localmente"})]})]})}),D&&e.jsx("div",{className:`mb-6 p-4 rounded-lg ${E.type==="success"?"bg-green-100 text-green-800":E.type==="warning"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:E.text}),e.jsxs("div",{className:"bg-white rounded-xl p-4 sm:p-6 mb-4 sm:mb-6 shadow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-4",children:[e.jsxs(p,{onClick:As,className:"bg-green-600 hover:bg-green-700 w-full sm:w-auto",children:[e.jsx(ca,{className:"w-4 h-4 mr-2"}),"Nova M√∫sica"]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsxs(p,{onClick:Vs,variant:"outline",className:"flex-1 sm:flex-none",children:[e.jsx(as,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Exportar"}),e.jsx("span",{className:"sm:hidden",children:"Export"})]}),e.jsxs(p,{onClick:js,variant:"outline",className:"flex-1 sm:flex-none",children:[e.jsx(ns,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Importar Perfil TikTok"}),e.jsx("span",{className:"sm:hidden",children:"Perfil"})]})]})]}),e.jsxs("div",{className:"flex gap-2 sm:gap-3 justify-center sm:justify-end items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600 bg-gray-100 px-3 py-1 rounded-full",children:["üìä ",c.length," chanson",c.length>1?"s":""," charg√©e",c.length>1?"s":""]}),e.jsxs(p,{onClick:X,variant:"outline",size:"sm",className:"flex-1 sm:flex-none",children:[e.jsx(ce,{className:"w-4 h-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Atualizar"}),e.jsx("span",{className:"sm:hidden",children:"Atual"})]}),e.jsxs(p,{onClick:zs,variant:"outline",size:"sm",className:"text-red-600 border-red-300 flex-1 sm:flex-none",children:[e.jsx(Ae,{className:"w-4 h-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Limpar Tudo"}),e.jsx("span",{className:"sm:hidden",children:"Limpar"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-100 rounded-xl p-4 sm:p-6 mb-4 sm:mb-6 shadow-lg border-2 border-blue-200",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-blue-900 flex items-center gap-2",children:"‚òÅÔ∏è Supabase Cloud Database"}),e.jsxs("p",{className:"text-blue-700 text-sm",children:["Mode actuel: ",e.jsx("span",{className:"font-semibold text-green-600",children:"‚òÅÔ∏è Cloud (Supabase)"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(p,{onClick:Us,disabled:ne,className:"bg-blue-600 hover:bg-blue-700 text-white",size:"sm",children:[ne?e.jsx(ce,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(fa,{className:"w-4 h-4 mr-2"}),ne?"Migrando...":"Migrar para Supabase"]}),e.jsxs(p,{onClick:Os,variant:"outline",size:"sm",className:"border-blue-300 text-blue-700 hover:bg-blue-50",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Verificar"]})]})]}),Q&&e.jsx("div",{className:"bg-blue-100 border border-blue-300 rounded-lg p-3 mb-3",children:e.jsxs("p",{className:"text-blue-800 text-sm font-medium",children:["üìä ",Q]})}),e.jsxs("div",{className:"bg-green-100 border border-green-300 rounded-lg p-3 mb-3",children:[e.jsxs("p",{className:"text-green-800 text-sm font-medium",children:["üíæ Donn√©es charg√©es depuis: ",e.jsx("span",{className:"font-bold",children:"‚òÅÔ∏è Supabase"})]}),e.jsx("p",{className:"text-green-700 text-xs mt-1",children:c.length>0?`${c.length} chanson(s) disponible(s)`:"Aucune chanson charg√©e"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsxs(p,{onClick:Fs,variant:"outline",size:"sm",className:"border-purple-300 text-purple-700 hover:bg-purple-50",children:[e.jsx(as,{className:"w-4 h-4 mr-2"}),"Restaurar do Supabase"]})}),e.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-blue-800 text-sm",children:["‚úÖ ",e.jsx("strong",{children:"Mode Supabase activ√©:"})," Toutes les donn√©es sont synchronis√©es avec la base de donn√©es cloud."]})})]}),e.jsx("div",{className:"bg-white rounded-xl p-4 sm:p-6 mb-4 sm:mb-6 shadow-lg",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ks,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx(k,{placeholder:"Buscar m√∫sicas...",value:l,onChange:s=>bs(s.target.value),className:"pl-10 text-sm sm:text-base"})]})}),e.jsx("div",{className:"grid gap-4",children:c.map(s=>e.jsx(Pe,{className:"shadow-lg",children:e.jsx(us,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(ms,{className:"text-lg sm:text-xl text-blue-900 mb-2",children:s.title}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsxs(De,{variant:"secondary",className:"bg-blue-100 text-blue-800 text-xs sm:text-sm",children:[e.jsx(we,{className:"w-3 h-3 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:s.artist}),e.jsx("span",{className:"sm:hidden",children:"A M√∫sica da Segunda"})]}),e.jsxs(De,{variant:s.status==="published"?"default":"secondary",className:"text-xs sm:text-sm",children:[e.jsx("span",{className:"hidden sm:inline",children:s.status}),e.jsx("span",{className:"sm:hidden",children:s.status==="published"?"Pub":"Rasc"})]}),e.jsxs(De,{variant:"outline",className:"text-xs sm:text-sm",children:[e.jsx(Be,{className:"w-3 h-3 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:Z(Ne(s.release_date),"dd/MM/yyyy",{locale:W})}),e.jsx("span",{className:"sm:hidden",children:Z(Ne(s.release_date),"dd/MM",{locale:W})})]})]}),s.description&&e.jsx("p",{className:"text-gray-600 text-xs sm:text-sm line-clamp-2",children:s.description})]}),e.jsxs("div",{className:"flex gap-2 justify-center sm:justify-end",children:[e.jsxs(p,{onClick:()=>Ls(s),size:"sm",variant:"outline",className:"flex-1 sm:flex-none",children:[e.jsx(os,{className:"w-4 h-4"}),e.jsx("span",{className:"ml-1 sm:hidden",children:"Editar"})]}),e.jsxs(p,{onClick:()=>Ps(s.id),size:"sm",variant:"outline",className:"text-red-600 flex-1 sm:flex-none",children:[e.jsx(Ae,{className:"w-4 h-4"}),e.jsx("span",{className:"ml-1 sm:hidden",children:"Excluir"})]})]})]})})},s.id))}),c.length===0&&e.jsxs("div",{className:"text-center py-8 sm:py-12",children:[e.jsx(we,{className:"w-12 h-12 sm:w-16 sm:h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-600 mb-2",children:"Nenhuma m√∫sica encontrada"}),e.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:l?"Tente uma busca diferente":"Crie sua primeira m√∫sica!"})]}),v&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:f?"Editar M√∫sica":"Nova M√∫sica"}),e.jsx(p,{onClick:()=>y(!1),variant:"ghost",size:"sm",children:e.jsx(de,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:$s,className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 rounded-xl p-6 border-2 border-red-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-red-900 mb-4 flex items-center gap-2",children:[e.jsx(Ys,{className:"w-5 h-5 text-red-600"}),"üé¨ Link da V√≠deo YouTube *"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL da V√≠deo YouTube * (Obrigat√≥rio)"}),e.jsx(k,{value:t.youtube_url,onChange:s=>$("youtube_url",s.target.value),placeholder:"https://www.youtube.com/watch?v=VIDEO_ID ou https://youtube.com/shorts/VIDEO_ID",type:"url",required:!0}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsx("p",{className:"text-xs text-gray-500",children:e.jsx("strong",{children:"Formatos aceitos:"})}),e.jsxs("ul",{className:"text-xs text-gray-500 space-y-1 ml-2",children:[e.jsx("li",{children:"‚Ä¢ https://www.youtube.com/watch?v=VIDEO_ID"}),e.jsx("li",{children:"‚Ä¢ https://youtube.com/shorts/VIDEO_ID"}),e.jsx("li",{children:"‚Ä¢ https://youtu.be/VIDEO_ID"}),e.jsx("li",{children:"‚Ä¢ https://music.youtube.com/watch?v=VIDEO_ID"})]}),e.jsxs("p",{className:"text-xs text-red-600 font-medium mt-2",children:["‚ú® ",e.jsx("strong",{children:"Dica:"})," Para v√≠deos verticais (9:16), use YouTube Shorts!"]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(p,{type:"button",variant:"outline",onClick:()=>window.open(t.youtube_url,"_blank"),disabled:!t.youtube_url,className:"flex-1",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Abrir YouTube"]})})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-6 border-2 border-green-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-green-900 mb-4 flex items-center gap-2",children:[e.jsx(we,{className:"w-5 h-5 text-green-600"}),"üéµ Informa√ß√µes da M√∫sica"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["T√≠tulo * ",t.tiktok_video_id&&t.title&&t.title!==`M√∫sica da Segunda - ${Z(new Date,"dd/MM/yyyy",{locale:W})}`&&e.jsx("span",{className:"text-green-600",children:"‚úÖ"})]}),e.jsx(k,{value:t.title,onChange:s=>$("title",s.target.value),required:!0,placeholder:"T√≠tulo da m√∫sica",className:t.tiktok_video_id&&t.title&&t.title!==`M√∫sica da Segunda - ${Z(new Date,"dd/MM/yyyy",{locale:W})}`?"border-green-300 bg-green-50":""}),t.tiktok_video_id&&t.title&&t.title!==`M√∫sica da Segunda - ${Z(new Date,"dd/MM/yyyy",{locale:W})}`&&e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"‚úÖ T√≠tulo extra√≠do do TikTok"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Artista"}),e.jsx(k,{value:t.artist,onChange:s=>$("artist",s.target.value),placeholder:"Nome do artista"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center justify-between",children:[e.jsx("span",{children:"Descri√ß√£o"}),t&&t.lyrics&&t.lyrics.trim()&&e.jsxs(p,{type:"button",onClick:()=>Ds(),variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-800 hover:bg-blue-50",disabled:fe,children:[e.jsx(rs,{className:"w-4 h-4 mr-1"}),fe?"Gerando...":"Sugerir"]})]}),e.jsx(xe,{value:t.description,onChange:s=>$("description",s.target.value),placeholder:"Descri√ß√£o da m√∫sica",rows:3})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Letra"}),e.jsx(xe,{value:t.lyrics,onChange:s=>$("lyrics",s.target.value),placeholder:"Letra da m√∫sica",rows:6})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Lan√ßamento *"}),e.jsx(k,{type:"date",value:t.release_date,onChange:s=>$("release_date",s.target.value),required:!0}),t.release_date&&e.jsx("div",{className:"mt-1 text-xs",children:e.jsxs("span",{className:"text-blue-600",children:["üìÖ Data selecionada: ",Z(Ne(t.release_date),"EEEE, d 'de' MMMM 'de' yyyy",{locale:W})]})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Dica: Use o bot√£o "Extrair" do TikTok para definir automaticamente a pr√≥xima segunda-feira, ou escolha qualquer data manualmente'})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs(Ge,{value:t.status,onValueChange:s=>$("status",s),children:[e.jsx(Ye,{children:e.jsx(Je,{})}),e.jsxs(Xe,{children:[e.jsx(ee,{value:"draft",children:"Rascunho"}),e.jsx(ee,{value:"scheduled",children:"Agendado"}),e.jsx(ee,{value:"published",children:"Publicado"}),e.jsx(ee,{value:"archived",children:"Arquivado"})]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 border-2 border-purple-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-purple-900 mb-4 flex items-center gap-2",children:[e.jsx(is,{className:"w-5 h-5 text-purple-600"}),"üéß Links de Streaming"]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx(_e,{className:"mb-2 font-semibold text-gray-700",children:"Spotify"}),e.jsx(k,{type:"url",name:"spotify_url",value:t.spotify_url,onChange:s=>$("spotify_url",s.target.value),placeholder:"URL Spotify",className:"transition-colors duration-200 ease-in-out focus:border-blue-500 focus:ring-2 focus:ring-blue-200"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(_e,{className:"mb-2 font-semibold text-gray-700",children:"Apple Music"}),e.jsx(k,{type:"url",name:"apple_music_url",value:t.apple_music_url,onChange:s=>$("apple_music_url",s.target.value),placeholder:"URL Apple Music",className:"transition-colors duration-200 ease-in-out focus:border-blue-500 focus:ring-2 focus:ring-blue-200"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(_e,{className:"mb-2 font-semibold text-gray-700",children:"YouTube"}),e.jsx(k,{type:"url",name:"youtube_music_url",value:t.youtube_music_url||"",onChange:s=>$("youtube_music_url",s.target.value),placeholder:"URL YouTube Music",className:"transition-colors duration-200 ease-in-out focus:border-blue-500 focus:ring-2 focus:ring-blue-200"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl p-6 border-2 border-orange-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-orange-900 mb-4 flex items-center gap-2",children:[e.jsx(ts,{className:"w-5 h-5 text-orange-600"}),"üè∑Ô∏è M√©tadados"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hashtags (separados por v√≠rgula)"}),e.jsx(k,{value:t.hashtags.join(", "),onChange:s=>Rs(s.target.value),placeholder:"humor, musica, trending, novidade"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Exemplo: humor, musica, trending, novidade, viral"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagem de Capa (URL)"}),e.jsx(k,{value:t.cover_image,onChange:s=>$("cover_image",s.target.value),placeholder:"https://exemplo.com/imagem.jpg",type:"url"})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t-2 border-gray-200",children:[e.jsxs(p,{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-lg py-3",children:[e.jsx(Ie,{className:"w-5 h-5 mr-2"}),f?"Atualizar M√∫sica":"Criar Nova M√∫sica"]}),e.jsx(p,{type:"button",variant:"outline",onClick:()=>y(!1),className:"flex-1 text-lg py-3",children:"Cancelar"})]})]})]})})}),R&&t.tiktok_video_id&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"üé¨ Visualizar V√≠deo TikTok"}),e.jsx(p,{onClick:()=>P(!1),variant:"ghost",size:"sm",children:e.jsx(de,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:t.title||"V√≠deo TikTok"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["ID: ",t.tiktok_video_id]})]}),e.jsx("div",{className:"bg-black rounded-lg overflow-hidden",children:e.jsx(wa,{postId:t.tiktok_video_id,className:"w-full",song:t})}),e.jsx("div",{className:"text-center",children:e.jsxs(p,{onClick:()=>window.open(t.tiktok_url,"_blank"),className:"bg-red-500 hover:bg-red-600 text-white",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Abrir no TikTok"]})})]})]})})}),Te&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"üì• Importar Perfil TikTok"}),e.jsx(p,{onClick:()=>q(!1),variant:"ghost",size:"sm",children:e.jsx(de,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-blue-800 text-sm",children:[e.jsx("strong",{children:"üí° Dica:"})," Cole o link do perfil TikTok para importar todas as v√≠deos de uma vez!"]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link do Perfil TikTok"}),e.jsx(k,{value:V,onChange:s=>H(s.target.value),placeholder:"https://www.tiktok.com/@amusicadasegunda",className:"w-full"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Exemplo: https://www.tiktok.com/@amusicadasegunda"})]}),A&&e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Importando v√≠deos..."}),e.jsxs("span",{className:"text-sm text-gray-500",children:[U.current," / ",U.total]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${U.current/U.total*100}%`}})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs(p,{onClick:vs,disabled:A||!V.trim(),className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[A?e.jsx(ce,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(ns,{className:"w-4 h-4 mr-2"}),A?"Analisando...":"Analisar Perfil"]}),e.jsx(p,{onClick:()=>q(!1),variant:"outline",className:"flex-1",children:"Cancelar"})]})]})]})})}),S&&S.length>0&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-green-900",children:["üìã Revisar M√∫sicas Importadas (",S.length,")"]}),e.jsx(p,{onClick:()=>Y([]),variant:"ghost",size:"sm",children:e.jsx(de,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-green-800 text-sm",children:[e.jsx("strong",{children:"‚úÖ Sucesso!"})," ",S.length," m√∫sicas foram importadas do perfil TikTok. Revise os detalhes e publique todas de uma vez no Supabase."]})}),e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:S.map((s,a)=>e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-2",children:[a+1,". ",s.title]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Artista:"})," ",s.artist]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Data Lan√ßamento:"})," ",new Date(s.release_date).toLocaleDateString("pt-BR")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Data TikTok:"})," ",new Date(s.tiktok_publication_date).toLocaleDateString("pt-BR")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Hashtags:"})," ",s.hashtags.join(", ")]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"text-gray-600",children:"Descri√ß√£o:"})," ",s.description]})]}),e.jsxs("div",{className:"ml-4 flex gap-2",children:[e.jsxs(p,{onClick:()=>Ns(s),variant:"outline",size:"sm",className:"text-blue-600 border-blue-300 hover:bg-blue-50",children:[e.jsx(os,{className:"w-4 h-4 mr-1"}),"Editar"]}),e.jsxs(p,{onClick:()=>window.open(s.tiktok_url,"_blank"),variant:"outline",size:"sm",className:"text-red-600 border-red-300 hover:bg-red-50",children:[e.jsx(me,{className:"w-4 h-4 mr-1"}),"Ver TikTok"]}),e.jsxs(p,{onClick:()=>Ss(s.id),variant:"outline",size:"sm",className:"text-red-600 border-red-300 hover:bg-red-50",children:[e.jsx(Ae,{className:"w-4 h-4 mr-1"}),"Excluir"]})]})]})},s.id))}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t-2 border-gray-200",children:[e.jsxs(p,{onClick:ws,disabled:A,className:"flex-1 bg-green-600 hover:bg-green-700 text-lg py-3",children:[A?e.jsx(ce,{className:"w-5 h-5 mr-2 animate-spin"}):e.jsx(Ie,{className:"w-5 h-5 mr-2"}),A?"Publicando...":"Publier"]}),e.jsx(p,{onClick:()=>Y([]),variant:"outline",className:"flex-1 text-lg py-3",children:"Cancelar"})]}),A&&e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Publicando m√∫sicas..."}),e.jsxs("span",{className:"text-sm text-gray-500",children:[U.current," / ",U.total]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${U.current/U.total*100}%`}})})]})]})]})})}),Me&&n&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"‚úèÔ∏è Editar M√∫sica Importada do TikTok"}),e.jsx(p,{onClick:()=>ge(!1),variant:"ghost",size:"sm",children:e.jsx(de,{className:"w-5 h-5"})})]}),e.jsx("form",{onSubmit:s=>{s.preventDefault(),ks()},children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-100 rounded-xl p-6 border-2 border-blue-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-blue-900 mb-4 flex items-center gap-2",children:[e.jsx(xs,{className:"w-5 h-5 text-blue-600"}),"üì± Informa√ß√µes TikTok (Obrigat√≥rio)"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link da V√≠deo TikTok*"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{value:n.tiktok_url,onChange:s=>m(w(h({},n),{tiktok_url:s.target.value})),placeholder:"https://www.tiktok.com/@usuario/video/1234567890",className:"flex-1"}),e.jsxs(p,{type:"button",onClick:()=>window.open(n.tiktok_url,"_blank"),variant:"outline",className:"text-blue-600 border-blue-300 hover:bg-blue-50",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Abrir TikTok"]})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[e.jsx("p",{className:"font-medium mb-1",children:"Formatos aceitos:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"https://www.tiktok.com/@usuario/video/ID"}),e.jsx("li",{children:"https://vm.tiktok.com/ID"}),e.jsx("li",{children:"ID direto (15-20 d√≠gitos)"})]})]}),e.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ds,{className:"w-4 h-4 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-xs text-yellow-800",children:[e.jsx("p",{className:"font-medium",children:"IMPORTANT:"}),e.jsx("p",{children:"Cole apenas o link da v√≠deo TikTok (ex: https://www.tiktok.com/@usuario/video/1234567890), N√ÉO o c√≥digo HTML de incorpora√ß√£o!"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ID da V√≠deo TikTok"}),e.jsx(k,{value:n.tiktok_video_id,onChange:s=>m(w(h({},n),{tiktok_video_id:s.target.value})),placeholder:"ID da v√≠deo"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Publica√ß√£o TikTok"}),e.jsx(k,{type:"datetime-local",value:n.tiktok_publication_date?n.tiktok_publication_date.slice(0,16):"",onChange:s=>m(w(h({},n),{tiktok_publication_date:s.target.value}))})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-100 rounded-xl p-6 border-2 border-green-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-green-900 mb-4 flex items-center gap-2",children:[e.jsx(we,{className:"w-5 h-5 text-green-600"}),"üéµ M√©tadados Extra√≠dos do TikTok"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T√≠tulo*"}),e.jsx(k,{value:n.title,onChange:s=>m(w(h({},n),{title:s.target.value})),placeholder:"T√≠tulo da m√∫sica"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Artista*"}),e.jsx(k,{value:n.artist,onChange:s=>m(w(h({},n),{artist:s.target.value})),placeholder:"Nome do artista"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center justify-between",children:[e.jsx("span",{children:"Descri√ß√£o"}),n&&n.lyrics&&n.lyrics.trim()&&e.jsxs(p,{type:"button",onClick:()=>Is(),variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-800 hover:bg-blue-50",disabled:fe,children:[e.jsx(rs,{className:"w-4 h-4 mr-1"}),fe?"Gerando...":"Sugerir"]})]}),e.jsx(xe,{value:n.description,onChange:s=>m(w(h({},n),{description:s.target.value})),placeholder:"Descri√ß√£o da m√∫sica",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hashtags (separados por v√≠rgula)"}),e.jsx(k,{value:n.hashtags.join(", "),onChange:s=>m(w(h({},n),{hashtags:s.target.value.split(",").map(a=>a.trim()).filter(a=>a)})),placeholder:"humor, musica, trending, novidade"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Exemplo: humor, musica, trending, novidade, viral"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-100 rounded-xl p-6 border-2 border-purple-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-purple-900 mb-4 flex items-center gap-2",children:[e.jsx(Be,{className:"w-5 h-5 text-purple-600"}),"üìÖ Datas de Publica√ß√£o"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Lan√ßamento no App*"}),e.jsx(k,{type:"date",value:n.release_date,onChange:s=>m(w(h({},n),{release_date:s.target.value}))}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Data sugerida: ",Ce()?Z(Ne(Ce()),"EEEE, d 'de' MMMM 'de' yyyy",{locale:W}):"Calculando..."]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs(Ge,{value:n.status,onValueChange:s=>m(w(h({},n),{status:s})),children:[e.jsx(Ye,{children:e.jsx(Je,{})}),e.jsxs(Xe,{children:[e.jsx(ee,{value:"draft",children:"Brouillon"}),e.jsx(ee,{value:"published",children:"Publi√©"}),e.jsx(ee,{value:"archived",children:"Archiv√©"})]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-violet-50 to-purple-100 rounded-xl p-6 border-2 border-violet-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-violet-900 mb-4 flex items-center gap-2",children:[e.jsx(is,{className:"w-5 h-5 text-violet-600"}),"üéß Links de Streaming"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Spotify"}),e.jsx(k,{value:n.spotify_url||"",onChange:s=>m(w(h({},n),{spotify_url:s.target.value})),placeholder:"URL Spotify",type:"url"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Apple Music"}),e.jsx(k,{value:n.apple_music_url||"",onChange:s=>m(w(h({},n),{apple_music_url:s.target.value})),placeholder:"URL Apple Music",type:"url"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"YouTube"}),e.jsx(k,{value:n.youtube_url||"",onChange:s=>m(w(h({},n),{youtube_url:s.target.value})),placeholder:"URL YouTube",type:"url"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-100 rounded-xl p-6 border-2 border-orange-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-orange-900 mb-4 flex items-center gap-2",children:[e.jsx(ts,{className:"w-5 h-5 text-orange-600"}),"üè∑Ô∏è M√©tadados"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagem de Capa (URL)"}),e.jsx(k,{value:n.cover_image||"",onChange:s=>m(w(h({},n),{cover_image:s.target.value})),placeholder:"https://exemplo.com/imagem.jpg",type:"url"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Letras da M√∫sica"}),e.jsx(xe,{value:n.lyrics||"",onChange:s=>m(w(h({},n),{lyrics:s.target.value})),placeholder:"Letras da m√∫sica...",rows:4})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t-2 border-gray-200",children:[e.jsxs(p,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700 text-lg py-3",children:[e.jsx(Ie,{className:"w-5 h-5 mr-2"}),"Salvar Altera√ß√µes"]}),e.jsx(p,{type:"button",onClick:()=>ge(!1),variant:"outline",className:"flex-1 text-lg py-3",children:"Cancelar"})]})]})})]})})})]})})}function Ta({onBackToLogin:c}){const[d,l]=i.useState(""),[g,f]=i.useState(""),[j,t]=i.useState(!1),[u,v]=i.useState(!1),[y,E]=i.useState(!1),[T,D]=i.useState({type:"",text:""}),[L,O]=i.useState(!1);i.useEffect(()=>{new URLSearchParams(window.location.hash.split("?")[1]).get("reset")!=="true"&&c()},[c]);const F=R=>M(null,null,function*(){if(R.preventDefault(),E(!0),D({type:"",text:""}),d.length<6){D({type:"error",text:"Le mot de passe doit contenir au moins 6 caract√®res"}),E(!1);return}if(d!==g){D({type:"error",text:"Les mots de passe ne correspondent pas"}),E(!1);return}try{const{error:P}=yield Se.auth.updateUser({password:d});if(P)throw P;O(!0),D({type:"success",text:"Mot de passe mis √† jour avec succ√®s !"}),setTimeout(()=>{window.location.href="/#/admin"},2e3)}catch(P){console.error("Erreur update password:",P),D({type:"error",text:`Erreur: ${P.message}`})}finally{E(!1)}});return L?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:e.jsx(Pe,{className:"w-full max-w-md",children:e.jsx(Ke,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Js,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-green-800 mb-2",children:"Mot de passe mis √† jour !"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Votre mot de passe a √©t√© mis √† jour avec succ√®s. Redirection vers l'Admin..."}),e.jsx(Ze,{className:"w-6 h-6 animate-spin mx-auto text-blue-600"})]})})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:e.jsxs(Pe,{className:"w-full max-w-md",children:[e.jsxs(us,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(ss,{className:"w-6 h-6 text-blue-600"})}),e.jsx(ms,{className:"text-2xl font-bold text-gray-900",children:"Nouveau mot de passe"}),e.jsx(Qs,{children:"Entrez votre nouveau mot de passe"})]}),e.jsxs(Ke,{children:[e.jsxs("form",{onSubmit:F,className:"space-y-4",children:[T.text&&e.jsx(ea,{variant:T.type==="error"?"destructive":"default",children:e.jsx(sa,{children:T.text})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"Nouveau mot de passe"}),e.jsxs("div",{className:"relative",children:[e.jsx(k,{id:"password",type:j?"text":"password",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",value:d,onChange:R=>l(R.target.value),required:!0,disabled:y,className:"w-full pr-10"}),e.jsx("button",{type:"button",onClick:()=>t(!j),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:y,children:j?e.jsx(We,{className:"w-4 h-4"}):e.jsx(es,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"confirmPassword",className:"text-sm font-medium text-gray-700",children:"Confirmer le mot de passe"}),e.jsxs("div",{className:"relative",children:[e.jsx(k,{id:"confirmPassword",type:u?"text":"password",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",value:g,onChange:R=>f(R.target.value),required:!0,disabled:y,className:"w-full pr-10"}),e.jsx("button",{type:"button",onClick:()=>v(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:y,children:u?e.jsx(We,{className:"w-4 h-4"}):e.jsx(es,{className:"w-4 h-4"})})]})]}),e.jsx(p,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white",disabled:y,children:y?e.jsxs(e.Fragment,{children:[e.jsx(Ze,{className:"w-4 h-4 animate-spin mr-2"}),"Mise √† jour..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ss,{className:"w-4 h-4 mr-2"}),"Mettre √† jour"]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("button",{onClick:c,className:"text-blue-600 hover:text-blue-700 font-medium",disabled:y,children:[e.jsx(ta,{className:"w-4 h-4 inline mr-1"}),"Retour √† la connexion"]})}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsx("p",{className:"text-xs text-blue-800 text-center",children:"üîí Le mot de passe doit contenir au moins 6 caract√®res"})})]})]})})}function Oa(){const[c,d]=i.useState(!1),[l,g]=i.useState(!0),[f,j]=i.useState(!1),[t,u]=i.useState(!1);i.useEffect(()=>{v(),new URLSearchParams(window.location.hash.split("?")[1]).get("reset")==="true"&&u(!0);const{data:{subscription:T}}=Se.auth.onAuthStateChange((D,L)=>M(null,null,function*(){D==="SIGNED_IN"&&L?yield y(L.user.id):D==="SIGNED_OUT"&&(d(!1),j(!1))}));return()=>T.unsubscribe()},[]);const v=()=>M(null,null,function*(){try{console.warn("üîê Starting auth check...");const{data:{session:E},error:T}=yield Se.auth.getSession();if(T)throw console.error("‚ùå Session error:",T),T;E?(console.warn("‚úÖ Session found, checking admin status..."),d(!0),yield y(E.user.id)):(console.warn("‚ö†Ô∏è No session found"),d(!1),j(!1))}catch(E){console.error("‚ùå Erreur v√©rification auth:",E),d(!1),j(!1)}finally{console.warn("üèÅ Auth check complete, setting loading to false"),g(!1)}}),y=E=>M(null,null,function*(){try{console.warn("üîç Checking admin status for user:",E);const T=new Promise((R,P)=>setTimeout(()=>P(new Error("TIMEOUT: Admin check took too long (>5s)")),5e3)),D=Se.from("admins").select("user_id").eq("user_id",E).maybeSingle(),{data:L,error:O}=yield Promise.race([D,T]);if(console.warn("üìä Admin check result:",{data:L,error:O,hasData:!!L}),O){console.error("‚ùå Erreur v√©rification admin:",O.message,O.code,O),j(!1);return}const F=!!L;console.warn(F?"‚úÖ User IS admin":"‚ö†Ô∏è User is NOT admin"),j(F)}catch(T){console.error("‚ùå Exception v√©rification admin:",T.message||T),j(!1)}});return t?e.jsx(Ta,{onBackToLogin:()=>u(!1)}):l?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"V√©rification de l'acc√®s administrateur..."})]})}):c&&f?e.jsx(_a,{}):e.jsxs(e.Fragment,{children:[e.jsx(Xs,{children:e.jsx("meta",{name:"robots",content:"noindex,nofollow"})}),e.jsx(aa,{})]})}export{Oa as default};

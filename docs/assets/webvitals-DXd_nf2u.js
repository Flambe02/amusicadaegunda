var J=Object.defineProperty;var F=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var C=(t,e,r)=>e in t?J(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,H=(t,e)=>{for(var r in e||(e={}))K.call(e,r)&&C(t,r,e[r]);if(F)for(var r of F(e))Q.call(e,r)&&C(t,r,e[r]);return t};var p=(t,e,r)=>C(t,typeof e!="symbol"?e+"":e,r);let _=-1;const f=t=>{addEventListener("pageshow",(e=>{e.persisted&&(_=e.timeStamp,t(e))}),!0)},l=(t,e,r,n)=>{let i,s;return a=>{e.value>=0&&(a||n)&&(s=e.value-(i!=null?i:0),(s||i===void 0)&&(i=e.value,e.delta=s,e.rating=((o,c)=>o>c[1]?"poor":o>c[0]?"needs-improvement":"good")(e.value,r),t(e)))}},A=t=>{requestAnimationFrame((()=>requestAnimationFrame((()=>t()))))},I=()=>{const t=performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},v=()=>{var e;const t=I();return(e=t==null?void 0:t.activationStart)!=null?e:0},h=(t,e=-1)=>{const r=I();let n="navigate";return _>=0?n="back-forward-cache":r&&(document.prerendering||v()>0?n="prerender":document.wasDiscarded?n="restore":r.type&&(n=r.type.replace(/_/g,"-"))),{name:t,value:e,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:n}},P=new WeakMap;function M(t,e){return P.get(t)||P.set(t,new e),P.get(t)}class U{constructor(){p(this,"t");p(this,"i",0);p(this,"o",[])}h(e){var i;if(e.hadRecentInput)return;const r=this.o[0],n=this.o.at(-1);this.i&&r&&n&&e.startTime-n.startTime<1e3&&e.startTime-r.startTime<5e3?(this.i+=e.value,this.o.push(e)):(this.i=e.value,this.o=[e]),(i=this.t)==null||i.call(this,e)}}const g=(t,e,r={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const n=new PerformanceObserver((i=>{Promise.resolve().then((()=>{e(i.getEntries())}))}));return n.observe(H({type:t,buffered:!0},r)),n}}catch(n){}},k=t=>{let e=!1;return()=>{e||(t(),e=!0)}};let m=-1;const W=new Set,x=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,L=t=>{if(document.visibilityState==="hidden"){if(t.type==="visibilitychange")for(const e of W)e();isFinite(m)||(m=t.type==="visibilitychange"?t.timeStamp:0,removeEventListener("prerenderingchange",L,!0))}},y=()=>{var t;if(m<0){const e=v(),r=document.prerendering||(t=globalThis.performance.getEntriesByType("visibility-state").filter((n=>n.name==="hidden"&&n.startTime>e))[0])==null?void 0:t.startTime;m=r!=null?r:x(),addEventListener("visibilitychange",L,!0),addEventListener("prerenderingchange",L,!0),f((()=>{setTimeout((()=>{m=x()}))}))}return{get firstHiddenTime(){return m},onHidden(e){W.add(e)}}},b=t=>{document.prerendering?addEventListener("prerenderingchange",(()=>t()),!0):t()},B=[1800,3e3],V=(t,e={})=>{b((()=>{const r=y();let n,i=h("FCP");const s=g("paint",(a=>{for(const o of a)o.name==="first-contentful-paint"&&(s.disconnect(),o.startTime<r.firstHiddenTime&&(i.value=Math.max(o.startTime-v(),0),i.entries.push(o),n(!0)))}));s&&(n=l(t,i,B,e.reportAllChanges),f((a=>{i=h("FCP"),n=l(t,i,B,e.reportAllChanges),A((()=>{i.value=performance.now()-a.timeStamp,n(!0)}))})))}))},q=[.1,.25],ne=(t,e={})=>{const r=y();V(k((()=>{let n,i=h("CLS",0);const s=M(e,U),a=c=>{for(const u of c)s.h(u);s.i>i.value&&(i.value=s.i,i.entries=s.o,n())},o=g("layout-shift",a);o&&(n=l(t,i,q,e.reportAllChanges),r.onHidden((()=>{a(o.takeRecords()),n(!0)})),f((()=>{s.i=0,i=h("CLS",0),n=l(t,i,q,e.reportAllChanges),A((()=>n()))})),setTimeout(n))})))};let j=0,E=1/0,T=0;const X=t=>{for(const e of t)e.interactionId&&(E=Math.min(E,e.interactionId),T=Math.max(T,e.interactionId),j=T?(T-E)/7+1:0)};let S;const R=()=>{var t;return S?j:(t=performance.interactionCount)!=null?t:0},Y=()=>{"interactionCount"in performance||S||(S=g("event",X,{type:"event",buffered:!0,durationThreshold:0}))};let N=0;class Z{constructor(){p(this,"u",[]);p(this,"l",new Map);p(this,"m");p(this,"p")}v(){N=R(),this.u.length=0,this.l.clear()}L(){const e=Math.min(this.u.length-1,Math.floor((R()-N)/50));return this.u[e]}h(e){var i,s;if((i=this.m)==null||i.call(this,e),!e.interactionId&&e.entryType!=="first-input")return;const r=this.u.at(-1);let n=this.l.get(e.interactionId);if(n||this.u.length<10||e.duration>r.P){if(n?e.duration>n.P?(n.entries=[e],n.P=e.duration):e.duration===n.P&&e.startTime===n.entries[0].startTime&&n.entries.push(e):(n={id:e.interactionId,entries:[e],P:e.duration},this.l.set(n.id,n),this.u.push(n)),this.u.sort(((a,o)=>o.P-a.P)),this.u.length>10){const a=this.u.splice(10);for(const o of a)this.l.delete(o.id)}(s=this.p)==null||s.call(this,n)}}}const z=t=>{const e=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?t():(t=k(t),addEventListener("visibilitychange",t,{once:!0,capture:!0}),e((()=>{t(),removeEventListener("visibilitychange",t,{capture:!0})})))},O=[200,500],re=(t,e={})=>{if(!globalThis.PerformanceEventTiming||!("interactionId"in PerformanceEventTiming.prototype))return;const r=y();b((()=>{var c;Y();let n,i=h("INP");const s=M(e,Z),a=u=>{z((()=>{for(const G of u)s.h(G);const d=s.L();d&&d.P!==i.value&&(i.value=d.P,i.entries=d.entries,n())}))},o=g("event",a,{durationThreshold:(c=e.durationThreshold)!=null?c:40});n=l(t,i,O,e.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),r.onHidden((()=>{a(o.takeRecords()),n(!0)})),f((()=>{s.v(),i=h("INP"),n=l(t,i,O,e.reportAllChanges)})))}))};class ee{constructor(){p(this,"m")}h(e){var r;(r=this.m)==null||r.call(this,e)}}const $=[2500,4e3],ie=(t,e={})=>{b((()=>{const r=y();let n,i=h("LCP");const s=M(e,ee),a=c=>{e.reportAllChanges||(c=c.slice(-1));for(const u of c)s.h(u),u.startTime<r.firstHiddenTime&&(i.value=Math.max(u.startTime-v(),0),i.entries=[u],n())},o=g("largest-contentful-paint",a);if(o){n=l(t,i,$,e.reportAllChanges);const c=k((()=>{a(o.takeRecords()),o.disconnect(),n(!0)})),u=d=>{d.isTrusted&&(z(c),removeEventListener(d.type,u,{capture:!0}))};for(const d of["keydown","click","visibilitychange"])addEventListener(d,u,{capture:!0});f((d=>{i=h("LCP"),n=l(t,i,$,e.reportAllChanges),A((()=>{i.value=performance.now()-d.timeStamp,n(!0)}))}))}}))},D=[800,1800],w=t=>{document.prerendering?b((()=>w(t))):document.readyState!=="complete"?addEventListener("load",(()=>w(t)),!0):setTimeout(t)},oe=(t,e={})=>{let r=h("TTFB"),n=l(t,r,D,e.reportAllChanges);w((()=>{const i=I();i&&(r.value=Math.max(i.responseStart-v(),0),r.entries=[i],n(!0),f((()=>{r=h("TTFB",0),n=l(t,r,D,e.reportAllChanges),n(!0)})))}))};export{oe as $,V as E,ne as L,re as S,ie as x};

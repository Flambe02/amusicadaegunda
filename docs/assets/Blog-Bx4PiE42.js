import{r as e,j as s,M as a,ao as r,a4 as t,f as l,ap as i,c as o,K as c}from"./vendor-BIbFW3qO.js";import{S as d,u as n,B as m}from"./index-DetkHvaz.js";import{C as x,a as u,b as h,c as b}from"./card-7icCX0xp.js";import{S as g,a as y,b as p,c as f,d as j,B as N}from"./badge-CwSYczGe.js";import{p as v,f as w,a as _}from"./utils-DuUtq9wc.js";import"./libs-DY7TBn7z.js";import"./ui-CttiZxwU.js";import"./supabase-sfbdw4k8.js";function k({youtube_music_url:e,youtube_url:a,title:r}){const t=e||a||"",l=(e=>{if(!e||"string"!=typeof e)return null;try{const s=e.match(/[?&]list=([A-Za-z0-9_-]+)/);if(s)return{id:s[1],type:"playlist"};const a=[/(?:youtube\.com\/shorts\/)([A-Za-z0-9_-]{11})/,/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/|youtube\.com\/v\/)([A-Za-z0-9_-]{11})/,/^([A-Za-z0-9_-]{11})$/];for(const r of a){const s=e.match(r);if(s)return{id:s[1],type:"video"}}if(e.toLowerCase().includes("music.youtube.com")){const s=e.match(/[?&]v=([A-Za-z0-9_-]{11})/);if(s)return{id:s[1],type:"video"}}return null}catch(s){return null}})(t);if(!l)return s.jsx("div",{className:"w-full aspect-video rounded-lg overflow-hidden shadow-lg flex items-center justify-center bg-gradient-to-br from-gray-800 to-gray-900",children:s.jsx("p",{className:"text-white text-sm",children:"VidÃ©o non disponible"})});const i=t.includes("/shorts/"),o="https://www.youtube-nocookie.com/embed",c="video"===l.type?`${o}/${l.id}?rel=0&modestbranding=1&playsinline=1&controls=1`:`${o}/videoseries?list=${l.id}&rel=0&modestbranding=1&playsinline=1&controls=1`;return i?s.jsx("div",{className:"w-full flex justify-center",children:s.jsx("div",{className:"relative rounded-lg overflow-hidden shadow-lg",style:{width:"100%",maxWidth:"400px",aspectRatio:"9/16"},children:s.jsx("iframe",{className:"absolute top-0 left-0 w-full h-full",src:c,title:r||"YouTube Short",frameBorder:"0",referrerPolicy:"strict-origin-when-cross-origin",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})}):s.jsx("div",{className:"w-full aspect-video rounded-lg overflow-hidden shadow-lg",children:s.jsx("iframe",{className:"w-full h-full",src:c,title:r||"YouTube",frameBorder:"0",referrerPolicy:"strict-origin-when-cross-origin",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})}function M(){var M;const[S,C]=e.useState([]),[D,A]=e.useState([]),[B,T]=e.useState(!0),[z,E]=e.useState(null),[F,$]=e.useState(null),[L,V]=e.useState(!1),[Z,H]=e.useState("all"),[P,Y]=e.useState([]);e.useEffect(()=>{O()},[]),e.useEffect(()=>{q()},[Z,S]);const O=()=>{return e=function*(){try{T(!0);const e=(yield d.list("-release_date",null)).sort((e,s)=>new Date(s.release_date)-new Date(e.release_date));C(e);const s=J(e);Y(s)}catch(e){E("Erro ao carregar os posts do blog. Tente novamente.")}finally{T(!1)}},new Promise((s,a)=>{var r=s=>{try{l(e.next(s))}catch(r){a(r)}},t=s=>{try{l(e.throw(s))}catch(r){a(r)}},l=e=>e.done?s(e.value):Promise.resolve(e.value).then(r,t);l((e=e.apply(null,null)).next())});var e},J=e=>{const s=new Set;return e.forEach(e=>{const a=v(e.release_date),r=w(a,"yyyy-MM"),t=w(a,"MMMM yyyy",{locale:_});s.add(JSON.stringify({key:r,label:t}))}),Array.from(s).map(e=>JSON.parse(e)).sort((e,s)=>s.key.localeCompare(e.key))},q=()=>{if("all"===Z)A(S);else{const e=S.filter(e=>w(v(e.release_date),"yyyy-MM")===Z);A(e)}},G=()=>{H("all")};return n({title:"Blog Musical",description:"HistÃ³rias por trÃ¡s de cada mÃºsica publicada na A MÃºsica da Segunda. DescriÃ§Ãµes detalhadas e significado de cada canÃ§Ã£o.",keywords:"blog musical, histÃ³rias de mÃºsicas, mÃºsica da segunda, parÃ³dias musicais, descriÃ§Ãµes de canÃ§Ãµes",url:"/blog",type:"website"}),B?s.jsxs("div",{className:"p-5 max-w-4xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h2",{className:"text-4xl md:text-5xl font-black text-gray-900 mb-2",children:"Blog Musical"}),s.jsx("p",{className:"text-gray-700 font-medium text-lg",children:"HistÃ³rias por trÃ¡s de cada mÃºsica"})]}),s.jsx("div",{className:"flex items-center justify-center py-20",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),s.jsx("p",{className:"text-gray-700",children:"Carregando posts do blog..."})]})})]}):z?s.jsxs("div",{className:"p-5 max-w-4xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h2",{className:"text-4xl md:text-5xl font-black text-gray-900 mb-2",children:"Blog Musical"}),s.jsx("p",{className:"text-gray-700 font-medium text-lg",children:"HistÃ³rias por trÃ¡s de cada mÃºsica"})]}),s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-3xl p-6 text-center",children:[s.jsx(a,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Erro ao carregar"}),s.jsx("p",{className:"text-red-600 mb-4",children:z}),s.jsx(m,{onClick:O,className:"bg-red-500 hover:bg-red-600",children:"Tentar novamente"})]})]}):s.jsxs("div",{className:"p-5 max-w-4xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-4xl md:text-5xl font-black text-gray-900 mb-2",children:"Blog Musical"}),s.jsx("p",{className:"text-gray-700 font-medium text-lg",children:"HistÃ³rias por trÃ¡s de cada mÃºsica"}),s.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"DescriÃ§Ãµes detalhadas e significado de cada canÃ§Ã£o"})]}),s.jsx("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl p-6 mb-8 border border-gray-200",children:s.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(r,{className:"w-5 h-5 text-gray-700"}),s.jsx("span",{className:"text-gray-800 font-medium",children:"Filtrar por mÃªs:"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(g,{value:Z,onValueChange:H,children:[s.jsx(y,{className:"w-48 bg-white/90 border-0 text-gray-800",children:s.jsx(p,{placeholder:"Selecione um mÃªs"})}),s.jsxs(f,{children:[s.jsx(j,{value:"all",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(t,{className:"w-4 h-4"}),"Todos os meses (",S.length,")"]})}),P.map(e=>s.jsx(j,{value:e.key,children:e.label},e.key))]})]}),"all"!==Z&&s.jsx(m,{onClick:G,variant:"outline",className:"bg-white text-gray-700 border-gray-300 hover:bg-gray-50",children:"Limpar filtro"})]})]})}),s.jsx("div",{className:"space-y-8",children:D.length>0?D.map(e=>{const r=(e=>{const s=v(e),a=s.getDay(),r=0===a?-6:1-a,t=new Date(s);return t.setDate(s.getDate()+r),t})(e.release_date);return s.jsxs(x,{className:"bg-white/95 backdrop-blur-sm shadow-xl border-0",children:[s.jsx(u,{className:"pb-4",children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsx(h,{className:"text-2xl md:text-3xl font-black text-gray-800 mb-2",children:e.title}),s.jsxs("div",{className:"flex items-center gap-4 text-gray-600 mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(l,{className:"w-4 h-4"}),s.jsxs("span",{className:"font-medium",children:["Segunda-feira, ",w(r,"dd MMMM yyyy",{locale:_})]})]}),s.jsx(N,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:e.artist})]})]})})}),s.jsxs(b,{className:"space-y-6",children:[e.description?s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-4 border border-green-200",children:[s.jsx("h3",{className:"text-lg font-bold text-green-900 mb-2 flex items-center gap-2",children:"ðŸŽµ Sobre a MÃºsica"}),s.jsx("p",{className:"text-green-800 leading-relaxed whitespace-pre-wrap",children:e.description})]}):s.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 rounded-xl p-4 border border-gray-200",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-700 mb-2 flex items-center gap-2",children:"ðŸŽµ Sobre a MÃºsica"}),s.jsx("p",{className:"text-gray-600 italic",children:"A descriÃ§Ã£o desta mÃºsica serÃ¡ adicionada no Supabase em breve. Enquanto isso, aproveite a mÃºsica!"})]}),s.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-xl p-4 border border-orange-200",children:[s.jsx("h3",{className:"text-lg font-bold text-orange-900 mb-3 flex items-center gap-2",children:"ðŸŽ§ Ouvir e Assistir"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.spotify_url&&s.jsx("a",{href:e.spotify_url,target:"_blank",rel:"noopener noreferrer",className:"block",children:s.jsxs(m,{className:"w-full bg-[#1DB954] hover:bg-[#1ed760] text-white font-bold py-3 rounded-xl transition-all duration-200 hover:scale-105",children:[s.jsx(i,{className:"w-4 h-4 mr-2"}),"Spotify"]})}),e.youtube_url&&s.jsx("a",{href:e.youtube_url,target:"_blank",rel:"noopener noreferrer",className:"block",children:s.jsxs(m,{className:"w-full bg-[#FF0000] hover:bg-[#cc0000] text-white font-bold py-3 rounded-xl transition-all duration-200 hover:scale-105",children:[s.jsx(o,{className:"w-4 h-4 mr-2"}),"YouTube"]})}),e.tiktok_url&&s.jsxs(m,{onClick:()=>(e=>{$(e),V(!0)})(e),className:"w-full bg-black hover:bg-gray-800 text-white font-bold py-3 rounded-xl transition-all duration-200 hover:scale-105",children:[s.jsx(c,{className:"w-4 h-4 mr-2"}),"Video"]}),!e.spotify_url&&!e.youtube_url&&!e.tiktok_url&&s.jsxs("div",{className:"col-span-full text-center py-4",children:[s.jsx(a,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"Links de streaming em breve..."})]})]})]}),s.jsx("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Data de LanÃ§amento:"}),s.jsx("br",{}),w(v(e.release_date),"dd MMMM yyyy",{locale:_})]}),e.genre&&s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"GÃªnero:"}),s.jsx("br",{}),e.genre]})]})})]})]},e.id)}):s.jsxs("div",{className:"bg-white/70 rounded-3xl p-8 text-center border border-gray-200",children:[s.jsx(t,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Nenhum artigo encontrado"}),s.jsx("p",{className:"text-gray-700 mb-4",children:"all"===Z?"NÃ£o hÃ¡ artigos no blog ainda.":`NÃ£o hÃ¡ artigos publicados em ${null==(M=P.find(e=>e.key===Z))?void 0:M.label}.`}),"all"!==Z&&s.jsx(m,{onClick:G,className:"bg-white text-gray-700 border-gray-300 hover:bg-gray-50",children:"Ver todos os artigos"})]})}),L&&F&&s.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center p-4 z-50",children:s.jsx("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h2",{className:"text-3xl font-bold text-blue-900",children:["ðŸŽ¬ ",F.title]}),s.jsx("button",{onClick:()=>V(!1),className:"text-gray-500 hover:text-gray-700 text-2xl font-bold p-2 hover:bg-gray-100 rounded-full transition-colors",children:"âœ•"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 border border-blue-200",children:[s.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-2",children:F.title}),s.jsx("p",{className:"text-blue-700 font-medium",children:F.artist}),s.jsxs("p",{className:"text-blue-600 text-sm",children:["ðŸ“… LanÃ§amento: ",w(v(F.release_date),"dd/MM/yyyy",{locale:_})]})]}),s.jsx("div",{className:"bg-black rounded-xl overflow-hidden shadow-2xl",children:s.jsx(k,{youtube_music_url:F.youtube_music_url,youtube_url:F.youtube_url,title:F.title})}),s.jsxs("div",{className:"flex gap-4 justify-center",children:[s.jsx("button",{onClick:()=>{const e=F.youtube_music_url||F.youtube_url;e&&window.open(e,"_blank")},className:"bg-red-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-red-700 transition-colors flex items-center gap-2",children:"ðŸ“º Ver no YouTube"}),s.jsx("button",{onClick:()=>V(!1),className:"bg-gray-200 text-gray-700 px-6 py-3 rounded-xl font-semibold hover:bg-gray-300 transition-colors",children:"Fechar"})]})]})]})})})]})}export{M as default};

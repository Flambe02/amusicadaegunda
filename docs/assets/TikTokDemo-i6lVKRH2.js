import{r as e,j as s}from"./ui-IWow_Ftt.js";import{c as a,P as t,R as l,u as r,a as n,B as c,I as i}from"./index-hOnXNTb3.js";import"./vendor-DHbHB7JU.js";import"./utils-DME-h_hF.js";
/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o=a("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),d=a("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),m=a("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);function u({postId:a,controls:r=0,autoPlay:n=!0,className:c=""}){const i=e.useRef(null),o=e.useRef(null),[d,u]=e.useState(!0),[x,h]=e.useState(null),[p,k]=e.useState(!0),[j,g]=e.useState(!1),[v,b]=e.useState(!1),y=e.useCallback(e=>{if("https://www.tiktok.com"===e.origin)try{const s=e.data;if(!s||"object"!=typeof s||!s.event)return;switch(s.event){case"onPlayerReady":b(!0),u(!1);break;case"onStateChange":0===s.info&&v&&(f("seekTo",0),setTimeout(()=>f("play"),100));break;case"onMute":k(1===s.info);break;case"onError":h("Erro no player TikTok")}}catch(s){}},[v]),f=e.useCallback((e,s)=>{var a;if(o.current&&v)try{null==(a=o.current.contentWindow)||a.postMessage({method:e,value:s},"https://www.tiktok.com")}catch(t){}},[v]),N=e.useCallback(()=>{var e,s;if(k(!1),f("unMute"),f("seekTo",0),f("play"),o.current)try{null==(e=o.current.contentWindow)||e.postMessage({method:"unMute",value:0},"https://www.tiktok.com"),null==(s=o.current.contentWindow)||s.postMessage({method:"play",value:0},"https://www.tiktok.com")}catch(a){}},[f]),w=e.useCallback(()=>{var e,s;j?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():(null==(e=i.current)?void 0:e.requestFullscreen)?i.current.requestFullscreen():(null==(s=i.current)?void 0:s.webkitRequestFullscreen)&&i.current.webkitRequestFullscreen()},[j]);return e.useEffect(()=>{const e=()=>{g(!!document.fullscreenElement||!!document.webkitFullscreenElement)};return document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e)}},[]),e.useEffect(()=>(window.addEventListener("message",y),()=>window.removeEventListener("message",y)),[y]),e.useEffect(()=>{if(!a||!i.current)return;u(!0),h(null),b(!1),i.current.innerHTML="";const e=document.createElement("iframe");e.src=`https://www.tiktok.com/player/v1/${a}?autoplay=${n?1:0}&loop=1&controls=${r}&rel=0&muted=0&ratio=9:16`,e.title="TikTok Video Player",e.allowFullscreen=!0,e.allow="autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media; gyroscope",e.style.cssText="\n      width: 100%;\n      height: 100%;\n      border: none;\n      border-radius: 16px;\n      background: #000;\n      overflow: hidden;\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      /* Forcer le format 9:16 et supprimer l'√©cran blanc */\n      object-fit: cover;\n      object-position: center;\n    ",e.onload=()=>{},e.onerror=()=>{h("Erro ao carregar v√≠deo TikTok"),u(!1)},i.current.appendChild(e),o.current=e;const s=setTimeout(()=>{d&&!v&&(h("Timeout ao carregar TikTok"),u(!1))},15e3);return()=>{clearTimeout(s),i.current&&(i.current.innerHTML="")}},[a,n,r]),a?s.jsxs("div",{ref:i,className:`tiktok-player-container ${c} ${j?"fullscreen":""}`,children:[d&&s.jsxs("div",{className:"tiktok-player-loading",children:[s.jsx("div",{className:"loading-spinner",children:s.jsx(l,{className:"w-8 h-8 animate-spin text-[#FF0050]"})}),s.jsx("p",{className:"loading-text",children:"Carregando TikTok..."})]}),x&&s.jsx("div",{className:"tiktok-player-error",children:s.jsxs("div",{className:"error-content",children:[s.jsx("div",{className:"error-icon",children:"‚ö†Ô∏è"}),s.jsx("h3",{className:"error-title",children:"Erro ao carregar"}),s.jsx("p",{className:"error-message",children:x}),s.jsx("div",{className:"error-actions",children:s.jsx("button",{onClick:()=>window.open(`https://www.tiktok.com/@user/video/${a}`,"_blank"),className:"fallback-link",children:"Abrir no TikTok"})})]})}),!d&&!x&&p&&s.jsx("div",{className:"tiktok-player-overlay",children:s.jsxs("button",{onClick:N,className:"unmute-button","aria-label":"Ativar o som e reproduzir v√≠deo","aria-pressed":"false",children:[s.jsx(m,{className:"w-6 h-6"}),s.jsx("span",{children:"Ativar Som"})]})}),!d&&!x&&s.jsx("button",{onClick:w,className:"fullscreen-button","aria-label":j?"Sair da tela cheia":"Tela cheia","aria-pressed":j,children:"‚õ∂"})]}):s.jsx("div",{className:`tiktok-player-fallback ${c}`,children:s.jsxs("div",{className:"fallback-content",children:[s.jsx(t,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"V√≠deo TikTok n√£o dispon√≠vel"}),s.jsx("p",{className:"text-gray-500 text-sm text-center",children:"ID da v√≠deo n√£o fornecido ou inv√°lido"})]})})}function x(){const{id:a}=r(),l=n(),[m,x]=e.useState(a||""),[h,p]=e.useState(0),[k,j]=e.useState(!0),g=a||"7467353900979424534",v=m||g;return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-teal-50 to-blue-100 p-4",children:[s.jsxs("div",{className:"max-w-4xl mx-auto mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[s.jsxs(c,{variant:"ghost",onClick:()=>{l("/")},className:"text-gray-600 hover:text-gray-800",children:[s.jsx(o,{className:"w-5 h-5 mr-2"}),"Voltar"]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-2xl md:text-3xl font-black text-gray-800 mb-2",children:"TikTok Player Demo"}),s.jsx("p",{className:"text-gray-600",children:"Teste o player TikTok robusto com mobile-first, autoplay muted, e plein √©cran"})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-end",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ID da V√≠deo TikTok"}),s.jsx(i,{type:"text",value:m,onChange:e=>x(e.target.value),placeholder:"Ex: 7467353900979424534",className:"w-full"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(c,{onClick:()=>{m.trim()&&l(`/tiktok/${m.trim()}`)},disabled:!m.trim(),className:"bg-[#FF0050] hover:bg-[#E6004C] text-white",children:[s.jsx(t,{className:"w-4 h-4 mr-2"}),"Testar V√≠deo"]}),s.jsx(c,{variant:"outline",onClick:()=>x(g),className:"border-gray-300 text-gray-700",children:"Reset"})]})]}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:1===h,onChange:e=>p(e.target.checked?1:0),className:"rounded"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Controles vis√≠veis"})]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:k,onChange:e=>j(e.target.checked),className:"rounded"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Autoplay"})]})]})})]})]}),s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:["Player TikTok - ",v]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["ID atual: ",s.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:v})]})]}),s.jsx("div",{className:"relative w-full mx-auto",style:{maxWidth:"350px"},children:s.jsx("div",{style:{aspectRatio:"9/16"},children:s.jsx(u,{postId:v,controls:h,autoPlay:k,className:"w-full h-full"})})})]})}),s.jsx("div",{className:"max-w-4xl mx-auto mt-6",children:s.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[s.jsx(d,{className:"w-5 h-5"}),"Funcionalidades T√©cnicas"]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"‚úÖ Implementado"}),s.jsxs("ul",{className:"space-y-1 text-gray-600",children:[s.jsx("li",{children:"‚Ä¢ Autoplay muted par d√©faut"}),s.jsx("li",{children:'‚Ä¢ Overlay "Activer le son" accessible'}),s.jsx("li",{children:"‚Ä¢ Loop automatique en fin de vid√©o"}),s.jsx("li",{children:"‚Ä¢ Plein √©cran mobile (100svh, safe-areas)"}),s.jsx("li",{children:"‚Ä¢ PostMessage API pour contr√¥ler la lecture"}),s.jsx("li",{children:"‚Ä¢ Fallback robuste en cas de blocage"}),s.jsx("li",{children:"‚Ä¢ Mobile-first responsive design"}),s.jsx("li",{children:"‚Ä¢ Accessibilit√© ARIA compl√®te"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"üîß API TikTok v1"}),s.jsxs("ul",{className:"space-y-1 text-gray-600",children:[s.jsxs("li",{children:["‚Ä¢ URL: ",s.jsxs("code",{className:"bg-gray-100 px-1 rounded",children:["/player/v1/","{ID}"]})]}),s.jsx("li",{children:"‚Ä¢ Param√®tres: autoplay, loop, controls, muted"}),s.jsx("li",{children:"‚Ä¢ PostMessage: onPlayerReady, onStateChange"}),s.jsx("li",{children:"‚Ä¢ Commands: play, pause, seekTo, unMute"})]})]})]})]})})]})}export{x as default};

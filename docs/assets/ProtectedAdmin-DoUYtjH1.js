var $s=Object.defineProperty,Vs=Object.defineProperties;var zs=Object.getOwnPropertyDescriptors;var ye=Object.getOwnPropertySymbols;var $e=Object.prototype.hasOwnProperty,Ve=Object.prototype.propertyIsEnumerable;var Ue=(n,c,l)=>c in n?$s(n,c,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[c]=l,x=(n,c)=>{for(var l in c||(c={}))$e.call(c,l)&&Ue(n,l,c[l]);if(ye)for(var l of ye(c))Ve.call(c,l)&&Ue(n,l,c[l]);return n},v=(n,c)=>Vs(n,zs(c));var ue=(n,c)=>{var l={};for(var u in n)$e.call(n,u)&&c.indexOf(u)<0&&(l[u]=n[u]);if(n!=null&&ye)for(var u of ye(n))c.indexOf(u)<0&&Ve.call(n,u)&&(l[u]=n[u]);return l};var E=(n,c,l)=>new Promise((u,g)=>{var f=b=>{try{m(l.next(b))}catch(y){g(y)}},t=b=>{try{m(l.throw(b))}catch(y){g(y)}},m=b=>b.done?u(b.value):Promise.resolve(b.value).then(f,t);m((l=l.apply(n,c)).next())});import{n as B,r as i,j as e,o as Ae,q as rs,C as is,E as pe,v as Os,w as qs,x as J,e as W,B as h,R as me,M as Ne,y as ze,f as te,p as we,X as xe,P as Hs,m as re,z as Bs,H as ge,J as Fs}from"./index-BJ6SxQmc.js";import{I as N}from"./input-pfo4p9Xk.js";import{S as Gs,B as Ee,a as Oe,b as qe,c as He,d as Be,e as ie}from"./badge-BY15PfWE.js";import{C as Ie,a as os,b as ls,c as Fe,d as Ys}from"./card-BF-f6IQb.js";import{V as ns}from"./video-UY40Fv79.js";import{R as Ge}from"./rotate-ccw-DlkAY16Q.js";import{s as he,a as ke,b as Ks,c as Js,L as Ye,A as Qs,d as Xs,E as Ke,e as Je,f as Zs}from"./Login-DLjgoCB5.js";import{L as Qe}from"./lock-C6F4auj-.js";import{A as Ws}from"./arrow-left-DQUKoe12.js";import"./chevron-down-vO3k9_HY.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Xe=B("Download",ea);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Ze=B("Hash",sa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],We=B("Lightbulb",aa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],es=B("Link",ta);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ia=B("Plus",ra);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ce=B("Save",oa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ss=B("SquarePen",la);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Me=B("Trash2",na);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],as=B("Upload",ca);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],ua=B("VolumeX",da);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],xa=B("Zap",ma),fe=i.forwardRef((u,l)=>{var g=u,{className:n}=g,c=ue(g,["className"]);return e.jsx("textarea",x({className:Ae("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:l},c))});fe.displayName="Textarea";var ha="Separator",ts="horizontal",pa=["horizontal","vertical"],cs=i.forwardRef((n,c)=>{const b=n,{decorative:l,orientation:u=ts}=b,g=ue(b,["decorative","orientation"]),f=ga(u)?u:ts,m=l?{role:"none"}:{"aria-orientation":f==="vertical"?f:void 0,role:"separator"};return e.jsx(rs.div,v(x(x({"data-orientation":f},m),g),{ref:c}))});cs.displayName=ha;function ga(n){return pa.includes(n)}var ds=cs;const fa=i.forwardRef((f,g)=>{var t=f,{className:n,orientation:c="horizontal",decorative:l=!0}=t,u=ue(t,["className","orientation","decorative"]);return e.jsx(ds,x({ref:g,decorative:l,orientation:c,className:Ae("shrink-0 bg-border",c==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",n)},u))});fa.displayName=ds.displayName;function ba({postId:n,className:c="",song:l=null,fallbackVideoUrl:u=null}){const[g,f]=i.useState(!0),[t,m]=i.useState(null),[b,y]=i.useState(0),[k,S]=i.useState(0),[R,F]=i.useState(!1),[G,C]=i.useState(!0),[O,_]=i.useState(!0),[q,w]=i.useState(!1),[ce,ee]=i.useState(!1),[K,Q]=i.useState({startTime:null,tiktokLoadTime:null,fallbackActivated:!1,totalLoadTime:null}),be=i.useRef(null),de=i.useRef(null),X=i.useRef(null),se=i.useRef(null),oe=i.useRef(null),L=3,z=15e3,H=1e3,U=i.useCallback(()=>{X.current&&(window.clearTimeout(X.current),X.current=null)},[]);i.useEffect(()=>{if(de.current)return se.current=new IntersectionObserver(([D])=>{var T;D.isIntersecting&&(F(!0),(T=se.current)==null||T.disconnect())},{threshold:.1,rootMargin:"50px"}),se.current.observe(de.current),()=>{var D;(D=se.current)==null||D.disconnect()}},[]),i.useEffect(()=>{if(!n||!R)return;const D=performance.now();return Q(T=>v(x({},T),{startTime:D,tiktokLoadTime:null,fallbackActivated:!1,totalLoadTime:null})),console.log(`üöÄ TikTok V2.0.0: Chargement de la vid√©o ${n}`),f(!0),m(null),y(0),S(T=>T+1),C(!0),_(!0),w(!1),ee(!1),U(),X.current=window.setTimeout(()=>{console.warn("‚è∞ TikTok V2.0.0: Timeout de chargement atteint (15s)"),$("Timeout: Chargement trop lent")},z),U},[n,R,U]);const Y=i.useCallback(()=>{const D=performance.now()-(K.startTime||0);console.log("‚úÖ TikTok V2.0.0: Vid√©o charg√©e avec succ√®s"),U(),f(!1),m(null),C(!0),_(!0),Q(T=>v(x({},T),{tiktokLoadTime:D,totalLoadTime:D})),console.log(`üìä TikTok V2.0.0: Temps de chargement: ${D.toFixed(2)}ms`)},[U,K.startTime]),$=i.useCallback((D="Erro ao carregar v√≠deo TikTok")=>{if(console.error("‚ùå TikTok V2.0.0: √âchec de chargement",D),U(),b<L)console.log(`üîÑ Tentative de retry ${b+1}/${L}`),setTimeout(()=>{y(T=>T+1),S(T=>T+1),f(!0),m(null),X.current=window.setTimeout(()=>{$("Timeout: Retry √©chou√©")},z)},H);else{console.log("üîÑ TikTok V2.0.0: Tous les retries √©chou√©s, activation du fallback"),ee(!0),m("TikTok indispon√≠vel - usando fallback"),f(!1);const T=performance.now()-(K.startTime||0);Q(le=>v(x({},le),{fallbackActivated:!0,totalLoadTime:T})),console.log(`üìä TikTok V2.0.0: Fallback activ√© apr√®s ${T.toFixed(2)}ms`)}},[b,L,H,z,U,K.startTime]),d=i.useCallback(()=>{console.log("üîÑ TikTok V2.0.0: Retry manuel"),y(0),m(null),ee(!1),S(D=>D+1),f(!0),X.current=window.setTimeout(()=>{$("Timeout: Retry manuel √©chou√©")},z)},[$,z]);i.useCallback(()=>{oe.current&&(oe.current.paused?(oe.current.play(),w(!0)):(oe.current.pause(),w(!1)))},[]);const M=i.useCallback(()=>{C(!1),_(!1)},[]),_e=i.useCallback(()=>{l!=null&&l.tiktok_url&&window.open(l.tiktok_url,"_blank")},[l]);return i.useEffect(()=>()=>{U(),se.current&&se.current.disconnect()},[U]),R?ce?e.jsx("div",{className:`${c} bg-black rounded-lg overflow-hidden`,style:{aspectRatio:"9/16"},children:e.jsxs("div",{className:"relative w-full h-full",children:[e.jsxs("video",{ref:oe,className:"w-full h-full object-cover",controls:!0,preload:"metadata",poster:(l==null?void 0:l.cover_image)||void 0,onPlay:()=>w(!0),onPause:()=>w(!1),children:[u&&e.jsx("source",{src:u,type:"video/mp4"}),e.jsx("source",{src:"/videos/fallback-video.mp4",type:"video/mp4"}),e.jsx("p",{children:"V√≠deo n√£o suportado pelo navegador"})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4",children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"üé¨ Fallback V√≠deo"}),e.jsx("p",{className:"text-xs opacity-80",children:(l==null?void 0:l.title)||"V√≠deo musical"})]})}),e.jsx("button",{onClick:d,className:"absolute top-2 right-2 bg-black/70 hover:bg-black/90 text-white p-2 rounded-full transition-colors",title:"Tentar TikTok novamente",children:e.jsx(Ge,{className:"w-4 h-4"})})]})}):e.jsx("div",{ref:de,className:`${c} bg-black rounded-lg overflow-hidden tiktok-container`,"data-tiktok-component":"true",style:{aspectRatio:"9/16",overflow:"hidden",position:"relative"},children:e.jsxs("div",{className:"relative w-full h-full",style:{overflow:"hidden"},children:[g&&e.jsx("div",{className:"absolute inset-0 bg-black flex items-center justify-center z-10",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),e.jsx("p",{className:"text-sm",children:"Carregando TikTok..."}),b>0&&e.jsxs("p",{className:"text-xs opacity-70 mt-1",children:["Tentativa ",b+1,"/",L+1]})]})}),t&&!g&&e.jsx("div",{className:"absolute inset-0 bg-red-900 flex items-center justify-center z-10",children:e.jsxs("div",{className:"text-center text-white p-4",children:[e.jsx(is,{className:"w-12 h-12 mx-auto mb-4 text-red-300"}),e.jsx("p",{className:"text-sm font-medium mb-2",children:"Erro ao carregar"}),e.jsx("p",{className:"text-xs opacity-80 mb-4",children:t}),e.jsx("button",{onClick:d,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm transition-colors",children:"Tentar novamente"})]})}),e.jsx("iframe",{ref:be,src:`https://www.tiktok.com/embed/${n}`,className:"w-full h-full border-0",allowFullScreen:!0,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",onLoad:Y,onError:()=>$("Erro de carregamento do iframe"),style:{display:g||t?"none":"block",overflow:"hidden",scrolling:"no"},scrolling:"no"},k),!g&&!t&&O&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center z-20",children:e.jsxs("div",{className:"text-center text-white p-6",children:[e.jsx(ua,{className:"w-16 h-16 mx-auto mb-4 text-white/80"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"V√≠deo em modo silencioso"}),e.jsx("p",{className:"text-sm opacity-80 mb-4",children:"Toque para ativar o som"}),e.jsx("button",{onClick:M,className:"bg-white text-black px-6 py-3 rounded-full font-medium hover:bg-gray-100 transition-colors",children:"Ativar Som"})]})}),!g&&!t&&e.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[e.jsx("button",{onClick:d,className:"bg-black/70 hover:bg-black/90 text-white p-2 rounded-full transition-colors",title:"Recarregar v√≠deo",children:e.jsx(Ge,{className:"w-4 h-4"})}),(l==null?void 0:l.tiktok_url)&&e.jsx("button",{onClick:_e,className:"bg-black/70 hover:bg-black/90 text-white p-2 rounded-full transition-colors",title:"Ver no TikTok",children:e.jsx(pe,{className:"w-4 h-4"})})]})]})}):e.jsx("div",{ref:de,className:`${c} bg-gray-100 rounded-lg flex items-center justify-center`,style:{aspectRatio:"9/16"},children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx(ns,{className:"w-8 h-8 mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"Carregando..."})]})})}var ja="Label",us=i.forwardRef((n,c)=>e.jsx(rs.label,v(x({},n),{ref:c,onMouseDown:l=>{var g;l.target.closest("button, input, select, textarea")||((g=n.onMouseDown)==null||g.call(n,l),!l.defaultPrevented&&l.detail>1&&l.preventDefault())}})));us.displayName=ja;var ms=us;const va=Os("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Se=i.forwardRef((u,l)=>{var g=u,{className:n}=g,c=ue(g,["className"]);return e.jsx(ms,x({ref:l,className:Ae(va(),n)},c))});Se.displayName=ms.displayName;const De={};function ya(g){return E(this,arguments,function*({title:n,body:c,icon:l,url:u}){const f=(De==null?void 0:De.VITE_PUSH_API_BASE)||"https://efnzmpzkzeuktqkghwfa.functions.supabase.co";console.warn("‚ö†Ô∏è VITE_PUSH_API_BASE not set, using default URL");try{const t=yield fetch(`${f}/push/send`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:n||"Nouvelle Chanson ! üé∂",body:c||"Une nouvelle chanson est dispon√≠vel !",icon:l||"/icons/pwa/icon-192x192.png",url:u||"/",tag:"nova-musica",topic:"new-song",locale:"pt-BR"})});if(!t.ok){const b=yield t.json().catch(()=>({error:"Unknown error"}));return console.error("Erreur envoi notifications push:",t.status,b),{success:!1,error:`HTTP ${t.status}: ${b.error||b.message||"Erreur inconnue"}`}}const m=yield t.json();return console.warn("‚úÖ Notifications envoy√©es:",m),m.ok?{success:!0,sent:m.sent,total:m.total,failed:m.failed}:{success:!1,error:m.message||"R√©ponse inattendue"}}catch(t){return console.error("Erreur pr√©paration notification:",t),{success:!1,error:t.message||"Erreur r√©seau"}}})}function Na(){const[n,c]=i.useState([]),[l,u]=i.useState(""),[g,f]=i.useState(!1),[t,m]=i.useState(null),[b,y]=i.useState(!1),{toast:k}=qs(),[S,R]=i.useState(!1),[F,G]=i.useState(!1),[C,O]=i.useState("supabase"),[_,q]=i.useState(!1),[w,ce]=i.useState(null),[ee,K]=i.useState(!1),[Q,be]=i.useState(""),[de,X]=i.useState(null),[se,oe]=i.useState(!1),[L,z]=i.useState([]),[H,U]=i.useState(!1),[Y,$]=i.useState({current:0,total:0}),[d,M]=i.useState(null),[_e,D]=i.useState(!1),[T,le]=i.useState(!1);i.useEffect(()=>{J.warn("üîÑ Admin component mounted"),Z()},[]);const Z=()=>E(null,null,function*(){try{if(J.warn(`üîÑ Chargement des chansons en mode: ${C}`),C==="supabase"){J.warn("‚òÅÔ∏è Chargement depuis Supabase...");const s=yield W.list("-release_date",null);J.warn(`‚úÖ ${s.length} chansons charg√©es depuis Supabase`),J.debug("üîç IDs des chansons charg√©es:",s.map(a=>({id:a.id,title:a.title}))),c(s)}else J.warn("üì± Chargement depuis localStorage..."),c([])}catch(s){J.error("‚ùå Erreur lors du chargement des chansons:",s),c([])}}),xs=s=>E(null,null,function*(){if(u(s),!s)Z();else try{if(C==="supabase"){const a=yield W.search(s);c(a)}else{const a=yield W.search(s);c(a)}}catch(a){console.error("Erro na busca:",a),c([])}}),hs=()=>{K(!0),be(""),X(null)},ps=()=>E(null,null,function*(){if(!Q.trim()){p("error","‚ùå Por favor, insira o link do perfil TikTok");return}U(!0),$({current:0,total:0});try{const s=yield gs(Q);if(s.length===0)throw new Error("‚ùå Nenhuma v√≠deo encontrada neste perfil");$({current:0,total:s.length});const a=[];for(let r=0;r<s.length;r++){const o=s[r];$({current:r+1,total:s.length});try{const j={id:Date.now().toString()+"_"+r,title:o.title||`M√∫sica da Segunda - ${r+1}`,artist:o.artist||"Artista",description:o.description||"M√∫sica da Segunda - Nova descoberta musical!",tiktok_url:o.url,tiktok_video_id:o.videoId,tiktok_publication_date:o.publicationDate||new Date().toISOString(),release_date:Te(),status:"draft",hashtags:o.hashtags||["musica","trending","novidade"],cover_image:o.coverImage||"",spotify_url:"",apple_music_url:"",youtube_url:"",lyrics:"",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};a.push(j),yield new Promise(P=>setTimeout(P,500))}catch(j){console.error(`Erro ao processar v√≠deo ${r+1}:`,j)}}z(a),K(!1),p("success",`‚úÖ ${a.length} m√∫sicas importadas com sucesso! Agora voc√™ pode revisar e publicar.`)}catch(s){console.error("Erro ao importar perfil TikTok:",s),p("error",`‚ùå Erro ao importar perfil: ${s.message}`)}finally{U(!1),$({current:0,total:0})}}),gs=s=>E(null,null,function*(){let a=s.replace(/<[^>]*>/g,"").replace(/on>.*?<\/blockquote>/g,"").replace(/<script[^>]*>.*?<\/script>/g,"").replace(/https:\/\/www\.tiktok\.com\/embed\.js/g,"").trim();if(!a)throw new Error("‚ùå Nenhum link de perfil v√°lido encontrado!");const r=a.match(/tiktok\.com\/@([^/?]+)/);if(!r)throw new Error("‚ùå Formato de perfil inv√°lido! Use: https://www.tiktok.com/@usuario");const o=r[1];try{const j=[],P=["Confiss√£o Banc√°ria - A M√∫sica da Segunda","M√∫sica da Segunda - Epis√≥dio Especial","Nova Descoberta Musical - Segunda-feira","Trending da Semana - M√∫sica da Segunda","Hit da Segunda - Nova Sensa√ß√£o","M√∫sica Viral - Segunda-feira","Descoberta da Semana - M√∫sica da Segunda","Top da Segunda - Nova M√∫sica","M√∫sica da Segunda - Edi√ß√£o Premium","Viral da Segunda - Nova Sensa√ß√£o","M√∫sica da Segunda - Epis√≥dio Exclusivo","Trending da Segunda - Nova Descoberta","Hit da Semana - M√∫sica da Segunda","M√∫sica da Segunda - Edi√ß√£o Especial","Nova Sensa√ß√£o - Segunda-feira","M√∫sica da Segunda - Epis√≥dio Premium","Viral da Semana - Nova M√∫sica","Trending da Segunda - Edi√ß√£o Exclusiva","M√∫sica da Segunda - Nova Sensa√ß√£o","Hit da Segunda - Edi√ß√£o Premium","M√∫sica da Segunda - Epis√≥dio Viral","Nova Descoberta - Segunda-feira","M√∫sica da Segunda - Edi√ß√£o Trending","Viral da Segunda - Nova Sensa√ß√£o","M√∫sica da Segunda - Epis√≥dio Hit","Trending da Semana - Edi√ß√£o Premium"];for(let I=0;I<25;I++){const je=(I+1)*7,ve=new Date(Date.now()-je*24*60*60*1e3);j.push({url:`https://www.tiktok.com/@${o}/video/7467353900979424${String(I+1).padStart(3,"0")}`,videoId:`7467353900979424${String(I+1).padStart(3,"0")}`,title:P[I]||`M√∫sica da Segunda - Epis√≥dio ${I+1}`,artist:"Artista Desconhecido",description:`${P[I]||`M√∫sica da Segunda - Epis√≥dio ${I+1}`} - Nova descoberta musical da semana!`,publicationDate:ve.toISOString(),hashtags:["musica","trending","novidade","humor","segunda","viral"],coverImage:""})}j.unshift({url:`https://www.tiktok.com/@${o}/video/7467353900979424000`,videoId:"7467353900979424000",title:"Confiss√£o Banc√°ria - A M√∫sica da Segunda",artist:"Artista Desconhecido",description:"Confiss√£o Banc√°ria - A M√∫sica da Segunda - Nova descoberta musical!",publicationDate:new Date(Date.now()-4320*60*1e3).toISOString(),hashtags:["musica","trending","novidade","humor","confissao","bancaria"],coverImage:""});const ne=Math.min(j.length*100,3e3);return yield new Promise(I=>setTimeout(I,ne)),J.debug(`‚úÖ ${j.length} v√≠deos encontrados no perfil @${o}`),j}catch(j){throw J.error("Erro ao extrair v√≠deos do perfil:",j),new Error(`‚ùå Erro ao analisar perfil: ${j.message}`)}}),fs=()=>E(null,null,function*(){if(!(!L||L.length===0)){U(!0),$({current:0,total:L.length});try{let s=0,a=0;for(let r=0;r<L.length;r++){const o=L[r];$({current:r+1,total:L.length});try{C==="supabase"?(yield W.create(o),s++):(yield W.create(o),s++),yield new Promise(j=>setTimeout(j,300))}catch(j){console.error(`Erro ao publicar m√∫sica ${r+1}:`,j),a++}}s>0?(p("success",`‚úÖ ${s} m√∫sicas publicadas com sucesso! ${a>0?`(${a} erros)`:""}`),z([]),Z()):p("error",`‚ùå Erro ao publicar m√∫sicas: ${a} erros`)}catch(s){console.error("Erro na publica√ß√£o em lote:",s),p("error",`‚ùå Erreur na publica√ß√£o em lote: ${s.message}`)}finally{U(!1),$({current:0,total:0})}}}),bs=s=>{M(x({},s)),D(!0)},js=()=>{d&&(z(s=>s.map(a=>a.id===d.id?d:a)),D(!1),M(null),p("success","‚úÖ M√∫sica editada com sucesso!"))},vs=s=>{confirm("‚ùå Tem certeza que deseja excluir esta m√∫sica?")&&(z(a=>a.filter(r=>r.id!==s)),p("success","‚úÖ M√∫sica removida da lista de importa√ß√£o"))},Le=(s,a,r="")=>E(null,null,function*(){try{console.warn("üß† Gerando descri√ß√£o inteligente pour:",r||"m√∫sica");const o=ys(s),j=Ns(a),P=ws(o,s),ne=ks(o,s),I=Ss(o,j,P,ne);return console.warn("‚úÖ Descri√ß√£o inteligente gerada:",I),I}catch(o){return console.error("‚ùå Erro ao gerar descri√ß√£o inteligente:",o),"Erro ao gerar descri√ß√£o autom√°tica."}}),ys=s=>{if(!s||!s.trim())return"m√∫sica";const a=s.toLowerCase();return a.includes("moraes")&&a.includes("banco")&&a.includes("dindim")?"confiss√µes banc√°rias de Moraes":a.includes("uber")&&(a.includes("golpe")||a.includes("mentira")||a.includes("fictivo")||a.includes("sumiu"))?"golpe uber e fraude no transporte":a.includes("uber")&&(a.includes("mapa")||a.includes("app")||a.includes("tv"))?"sistema uber corrompido e fraude":a.includes("moraes")||a.includes("stf")||a.includes("supremo")?a.includes("banco")||a.includes("dindim")||a.includes("congelou")?"confiss√µes banc√°rias e justi√ßa":"pol√≠tica e justi√ßa":a.includes("trump")||a.includes("lei manisky")||a.includes("magnitsky")||a.includes("san√ß√µes")?"san√ß√µes internacionais e pol√≠tica":a.includes("corrup√ß√£o")||a.includes("bancos")||a.includes("dinheiro")||a.includes("dindim")?a.includes("gringos")||a.includes("tio sam")?"corrup√ß√£o banc√°ria e press√£o internacional":"corrup√ß√£o e finan√ßas":a.includes("uber")||a.includes("taxi")||a.includes("transporte")?a.includes("fraude")||a.includes("golpe")||a.includes("mentira")?"fraude no sistema de transporte":"tecnologia e transporte":a.includes("amor")||a.includes("cora√ß√£o")||a.includes("sentimento")?"amor e relacionamentos":a.includes("festa")||a.includes("dan√ßa")||a.includes("celebra√ß√£o")?"festa e celebra√ß√£o":a.includes("trabalho")||a.includes("vida")||a.includes("cotidiano")?"vida cotidiana":a.includes("m√∫sica")||a.includes("ritmo")||a.includes("som")?"arte e m√∫sica":"m√∫sica"},Ns=s=>{if(!s)return"momento atual";try{const a=new Date(s),o=Math.floor((new Date-a)/(1e3*60*60*24));return o===0?"hoje":o===1?"ontem":o<=7?"esta semana":o<=30?"este m√™s":o<=90?"este trimestre":o<=365?"este ano":"per√≠odo anterior"}catch(a){return"momento atual"}},ws=(s,a)=>{const r=a.toLowerCase();switch(s){case"confiss√µes banc√°rias de Moraes":return"expondo a press√£o internacional sobre o sistema banc√°rio brasileiro";case"confiss√µes banc√°rias e justi√ßa":return r.includes("lei manisky")||r.includes("magnitsky")?"mostrando como a Lei Magnitsky afeta as contas banc√°rias no Brasil":"revelando a interfer√™ncia externa no sistema financeiro brasileiro";case"san√ß√µes internacionais e pol√≠tica":return r.includes("lei manisky")||r.includes("magnitsky")?"demonstrando o impacto da Lei Magnitsky nas rela√ß√µes Brasil-EUA":"afetando as rela√ß√µes diplom√°ticas internacionais";case"golpe uber e fraude no transporte":return"expondo a fraude no sistema de transporte do Rio de Janeiro";case"sistema uber corrompido e fraude":return r.includes("conductores fictivos")||r.includes("fictivo")?"revelando a cria√ß√£o de conductores fictivos para roubar a Uber":"mostrando como o sistema Uber foi corrompido e roubado";case"fraude no sistema de transporte":return r.includes("uber")?"afetando o servi√ßo de transporte por aplicativo no Rio":"impactando o sistema de transporte p√∫blico";case"tecnologia e transporte":return r.includes("fraude")||r.includes("golpe")?"revelando falhas de seguran√ßa na tecnologia de transporte":"impactando a inova√ß√£o tecnol√≥gica no transporte";case"corrup√ß√£o banc√°ria e press√£o internacional":return r.includes("gringos")&&r.includes("tio sam")?"mostrando como os EUA pressionam os bancos brasileiros":"revelando a press√£o externa sobre o sistema banc√°rio";case"corrup√ß√£o e finan√ßas":return r.includes("bancos")&&r.includes("dinheiro")?"afetando o sistema financeiro brasileiro":"impactando a economia nacional";case"pol√≠tica e justi√ßa":return r.includes("moraes")&&r.includes("stf")?"afetando o sistema judici√°rio brasileiro":"impactando a pol√≠tica nacional";case"amor e relacionamentos":return"tocando o cora√ß√£o das pessoas";case"festa e celebra√ß√£o":return"animando as celebra√ß√µes";default:return"influenciando a cultura musical"}},ks=(s,a)=>{const r=a.toLowerCase();return s.includes("confiss√µes banc√°rias")?r.includes("lei manisky")||r.includes("magnitsky")?"Lei Magnitsky, press√£o internacional e sistema banc√°rio brasileiro":r.includes("gringos")||r.includes("tio sam")?"press√£o dos EUA sobre bancos brasileiros e interfer√™ncia externa":"sistema banc√°rio brasileiro, press√£o internacional e justi√ßa":s.includes("golpe uber")||s.includes("sistema uber corrompido")?r.includes("conductores fictivos")||r.includes("fictivo")?"Golpe Uber no Rio, conductores fictivos e fraude no sistema de transporte":r.includes("mapa")&&r.includes("mentira")?"sistema Uber corrompido, mapas falsos e fraude no transporte":"Golpe Uber, fraude no sistema de transporte e corrup√ß√£o tecnol√≥gica":s.includes("fraude no sistema de transporte")?r.includes("uber")?"fraude no Uber, sistema de transporte corrompido e tecnologia":"corrup√ß√£o no sistema de transporte e falhas de seguran√ßa":s.includes("san√ß√µes internacionais")?r.includes("lei manisky")||r.includes("magnitsky")?"Lei Magnitsky, rela√ß√µes Brasil-EUA e impacto nas contas banc√°rias":"san√ß√µes internacionais e impacto na pol√≠tica brasileira":s.includes("pol√≠tica")||s.includes("corrup√ß√£o")?r.includes("bancos")||r.includes("dindim")?"corrup√ß√£o banc√°ria, press√£o internacional e sistema financeiro":"pol√≠tica, corrup√ß√£o e impacto das san√ß√µes internacionais":s.includes("amor")?"romance e sentimentos humanos":r.includes("festa")?"celebra√ß√£o e alegria":s.includes("vida")?"reflex√µes sobre a vida cotidiana":"cultura e express√£o musical"},Ss=(s,a,r,o)=>{let j=`Uma m√∫sica sobre ${s}`;return a&&a!=="momento atual"&&(j+=`, criada ${a}`),r&&(j+=`. ${r.charAt(0).toUpperCase()+r.slice(1)}`),o&&o!=="cultura e express√£o musical"&&(j+=`. √â sobre ${o}`),j},_s=()=>E(null,null,function*(){if(!t||!t.lyrics||!t.lyrics.trim()){p("error","‚ùå Adicione letras primeiro para gerar uma descri√ß√£o");return}le(!0);try{const s=yield Le(t.lyrics,t.release_date||t.tiktok_publication_date,t.title);V("description",s),p("success","‚úÖ Descri√ß√£o gerada automaticamente!")}catch(s){console.error("Erro ao gerar descri√ß√£o:",s),p("error","‚ùå Erro ao gerar descri√ß√£o autom√°tica")}finally{le(!1)}}),Ts=()=>E(null,null,function*(){if(!d.lyrics||!d.lyrics.trim()){p("error","‚ùå Adicione letras primeiro para gerar uma descri√ß√£o");return}le(!0);try{const s=yield Le(d.lyrics,d.release_date||d.tiktok_publication_date,d.title);M(v(x({},d),{description:s})),p("success","‚úÖ Descri√ß√£o gerada automaticamente!")}catch(s){console.error("Erro ao gerar descri√ß√£o:",s),p("error","‚ùå Erro ao gerar descri√ß√£o autom√°tica")}finally{le(!1)}}),Te=()=>{const s=new Date;let a;s.getDay()===1?a=7:s.getDay()===0?a=1:a=(8-s.getDay())%7;const r=new Date(s);if(r.setDate(s.getDate()+a),r.getDay()!==1){console.error("Erro na fun√ß√£o getNextMonday: data n√£o √© segunda-feira");const o=new Date(s);return o.setDate(s.getDate()+(8-s.getDay())%7),o.toISOString().split("T")[0]}return r.toISOString().split("T")[0]},Es=()=>{const s=new Date().toISOString().split("T")[0];m({title:"",artist:"A M√∫sica da Segunda",description:"",lyrics:"",release_date:s,status:"draft",tiktok_video_id:"",tiktok_url:"",tiktok_publication_date:s,spotify_url:"",apple_music_url:"",youtube_url:"",cover_image:"",hashtags:[]}),console.warn("üìù Cr√©ation d'une nouvelle chanson en mode brouillon"),y(!0),f(!1)},Cs=s=>{console.warn("üîß Editando m√∫sica:",s);try{m(x({},s)),y(!0),f(!0),console.warn("‚úÖ Estado de edi√ß√£o configurado com sucesso")}catch(a){console.error("‚ùå Erro ao configurar edi√ß√£o:",a),p("error","Erro ao abrir edi√ß√£o da m√∫sica")}},Ms=s=>E(null,null,function*(){if(window.confirm("Tem certeza que deseja deletar esta m√∫sica?"))try{yield W.delete(s),p("success","M√∫sica deletada com sucesso!"),Z()}catch(a){console.error("Erreur suppression:",a),p("error","Erro ao deletar m√∫sica")}}),Ds=s=>E(null,null,function*(){var ne,I,je,ve,Pe,Re;s.preventDefault(),console.warn("üöÄ handleSubmit appel√© - d√©but de la fonction");const a=v(x({},t),{title:ke(((ne=t.title)==null?void 0:ne.trim())||""),artist:ke(((I=t.artist)==null?void 0:I.trim())||"A M√∫sica da Segunda"),description:ke(((je=t.description)==null?void 0:je.trim())||""),lyrics:ke(((ve=t.lyrics)==null?void 0:ve.trim())||""),tiktok_url:t.tiktok_url?he(t.tiktok_url.trim()):"",youtube_url:t.youtube_url?he(t.youtube_url.trim()):"",youtube_music_url:t.youtube_music_url?he(t.youtube_music_url.trim()):"",spotify_url:t.spotify_url?he(t.spotify_url.trim()):"",apple_music_url:t.apple_music_url?he(t.apple_music_url.trim()):""}),r=Ks(Js,a);if(!r.success){p("error",`‚ùå Erro de valida√ß√£o: ${r.error}`);return}if(!a.title||a.title.trim()===""){p("error","‚ùå O t√≠tulo √© obrigat√≥rio!");return}if(!a.release_date){p("error","‚ùå A data de lan√ßamento √© obrigat√≥ria!");return}t.tiktok_url&&t.tiktok_url.trim()!==""&&(!t.tiktok_video_id||t.tiktok_video_id.trim()==="")&&p("warning",'‚ö†Ô∏è Link TikTok preenchido mas ID n√£o extra√≠do. Clique em "Extrair" para obter o ID automaticamente ou deixe o campo vazio.'),(!t.tiktok_url||t.tiktok_url.trim()==="")&&(t.status="draft",console.warn("üìù Aucun TikTok fourni, chanson sauvegard√©e en mode brouillon"));const o=v(x({},r.data),{status:r.data.status||"draft"}),j=A=>A?new Date(A).toISOString().slice(0,10):null,P=v(x({},o),{release_date:j((Pe=o.release_date)!=null?Pe:null),tiktok_publication_date:j((Re=o.tiktok_publication_date)!=null?Re:null),hashtags:Array.isArray(o.hashtags)?o.hashtags.map(A=>A.trim()).filter(A=>A):[],title:String(o.title||""),artist:String(o.artist||""),description:String(o.description||""),lyrics:String(o.lyrics||""),tiktok_url:String(o.tiktok_url||""),tiktok_video_id:String(o.tiktok_video_id||""),status:String(o.status),spotify_url:o.spotify_url||null,apple_music_url:o.apple_music_url||null,youtube_url:o.youtube_url||null,cover_image:o.cover_image||null});delete P.id,delete P.created_at,delete P.updated_at;try{if(g){const A=yield W.update(t.id,P);if(!A||!A.id)throw new Error("La mise √† jour a √©chou√©");p("success","‚úÖ M√∫sica atualizada com sucesso!"),yield new Promise(ae=>setTimeout(ae,500)),yield Z(),y(!1),m(null)}else{const A=yield W.create(P);if(!A||!A.id)throw new Error("La chanson n'a pas √©t√© sauvegard√©e");p("success","‚úÖ M√∫sica criada com sucesso!"),yield new Promise(ae=>setTimeout(ae,500)),ya({title:"Nouvelle Chanson ! üé∂",body:`"${P.title||"Nova m√∫sica"}" est maintenant disponible !`,icon:P.cover_image||"/icons/pwa/icon-192x192.png",url:P.slug?`/chansons/${P.slug}`:"/"}).then(ae=>{ae.success&&ae.sent>0&&k({title:"Notifications envoy√©es",description:`üì¢ ${ae.sent} envoy√©es !`})}),yield Z(),y(!1),m(null)}}catch(A){if(console.error("‚ùå Erreur sauvegarde:",A),A.code==="DUPLICATE_YOUTUBE_URL"||A.code==="DUPLICATE_TIKTOK_ID"){p("error","‚ùå Cette vid√©o existe d√©j√† !");return}p("error",`‚ùå Erreur: ${A.message||"Inconnue"}`)}}),V=(s,a)=>{if(s==="tiktok_url"){const r=a.replace(/<[^>]*>/g,"").trim();m(o=>v(x({},o),{[s]:r}))}else m(r=>v(x({},r),{[s]:a}))},Is=s=>{console.warn("üè∑Ô∏è handleHashtagChange:",s);const a=s.split(",").map(r=>r);V("hashtags",a)},p=(s,a)=>{k({variant:s==="error"?"destructive":"default",title:s==="error"?"Erro":s==="success"?"Sucesso":"Info",description:a,duration:s==="warning"?7e3:5e3})},As=()=>{const s={songs:n,albums:[]},a=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),r=URL.createObjectURL(a),o=document.createElement("a");o.href=r,o.download=`musica-da-segunda-${new Date().toISOString().split("T")[0]}.json`,o.click(),URL.revokeObjectURL(r),p("success","Dados exportados com sucesso!")},Ls=()=>{window.confirm("‚ö†Ô∏è ATEN√á√ÉO: Isso apagar√° TODOS os dados! Tem certeza?")&&(console.warn("Nettoyage des donn√©es"),Z(),p("success","Todos os dados foram apagados"))},Ps=()=>E(null,null,function*(){p("info","üîÑ Migration non disponible dans cette version")}),Rs=()=>E(null,null,function*(){p("info","üîÑ V√©rification non disponible dans cette version")}),Us=()=>E(null,null,function*(){p("info","üîÑ Restauration non disponible dans cette version")});return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-3 sm:p-5",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"lg:hidden text-center mb-6 sm:mb-8",children:e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden border-4 border-blue-200 shadow-xl flex-shrink-0",children:e.jsx("img",{src:"images/Musica da segunda.jpg",alt:"Logo M√∫sica da Segunda",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h1",{className:"text-xl sm:text-3xl md:text-4xl font-black text-blue-900 mb-1",children:"üéµ Admin Panel - M√∫sica da Segunda"}),e.jsx("p",{className:"text-blue-700 text-sm sm:text-base",children:"Gerencie suas m√∫sicas e conte√∫do localmente"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl p-4 sm:p-6 mb-4 sm:mb-6 shadow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-4",children:[e.jsxs(h,{onClick:Es,className:"bg-green-600 hover:bg-green-700 w-full sm:w-auto",children:[e.jsx(ia,{className:"w-4 h-4 mr-2"}),"Nova M√∫sica"]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsxs(h,{onClick:As,variant:"outline",className:"flex-1 sm:flex-none",children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Exportar"}),e.jsx("span",{className:"sm:hidden",children:"Export"})]}),e.jsxs(h,{onClick:hs,variant:"outline",className:"flex-1 sm:flex-none",children:[e.jsx(as,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Importar Perfil TikTok"}),e.jsx("span",{className:"sm:hidden",children:"Perfil"})]})]})]}),e.jsxs("div",{className:"flex gap-2 sm:gap-3 justify-center sm:justify-end items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600 bg-gray-100 px-3 py-1 rounded-full",children:["üìä ",n.length," chanson",n.length>1?"s":""," charg√©e",n.length>1?"s":""]}),e.jsxs(h,{onClick:Z,variant:"outline",size:"sm",className:"flex-1 sm:flex-none",children:[e.jsx(me,{className:"w-4 h-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Atualizar"}),e.jsx("span",{className:"sm:hidden",children:"Atual"})]}),e.jsxs(h,{onClick:Ls,variant:"outline",size:"sm",className:"text-red-600 border-red-300 flex-1 sm:flex-none",children:[e.jsx(Me,{className:"w-4 h-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Limpar Tudo"}),e.jsx("span",{className:"sm:hidden",children:"Limpar"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-100 rounded-xl p-4 sm:p-6 mb-4 sm:mb-6 shadow-lg border-2 border-blue-200",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-blue-900 flex items-center gap-2",children:"‚òÅÔ∏è Supabase Cloud Database"}),e.jsxs("p",{className:"text-blue-700 text-sm",children:["Mode actuel: ",e.jsx("span",{className:"font-semibold text-green-600",children:"‚òÅÔ∏è Cloud (Supabase)"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(h,{onClick:Ps,disabled:_,className:"bg-blue-600 hover:bg-blue-700 text-white",size:"sm",children:[_?e.jsx(me,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(xa,{className:"w-4 h-4 mr-2"}),_?"Migrando...":"Migrar para Supabase"]}),e.jsxs(h,{onClick:Rs,variant:"outline",size:"sm",className:"border-blue-300 text-blue-700 hover:bg-blue-50",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Verificar"]})]})]}),w&&e.jsx("div",{className:"bg-blue-100 border border-blue-300 rounded-lg p-3 mb-3",children:e.jsxs("p",{className:"text-blue-800 text-sm font-medium",children:["üìä ",w]})}),e.jsxs("div",{className:"bg-green-100 border border-green-300 rounded-lg p-3 mb-3",children:[e.jsxs("p",{className:"text-green-800 text-sm font-medium",children:["üíæ Donn√©es charg√©es depuis: ",e.jsx("span",{className:"font-bold",children:"‚òÅÔ∏è Supabase"})]}),e.jsx("p",{className:"text-green-700 text-xs mt-1",children:n.length>0?`${n.length} chanson(s) disponible(s)`:"Aucune chanson charg√©e"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsxs(h,{onClick:Us,variant:"outline",size:"sm",className:"border-purple-300 text-purple-700 hover:bg-purple-50",children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Restaurar do Supabase"]})}),e.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-blue-800 text-sm",children:["‚úÖ ",e.jsx("strong",{children:"Mode Supabase activ√©:"})," Toutes les donn√©es sont synchronis√©es avec la base de donn√©es cloud."]})})]}),e.jsx("div",{className:"bg-white rounded-xl p-4 sm:p-6 mb-4 sm:mb-6 shadow-lg",children:e.jsxs("div",{className:"relative",children:[e.jsx(Gs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx(N,{placeholder:"Buscar m√∫sicas...",value:l,onChange:s=>xs(s.target.value),className:"pl-10 text-sm sm:text-base"})]})}),e.jsx("div",{className:"grid gap-4",children:n.map(s=>e.jsx(Ie,{className:"shadow-lg",children:e.jsx(os,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(ls,{className:"text-lg sm:text-xl text-blue-900 mb-2",children:s.title}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsxs(Ee,{variant:"secondary",className:"bg-blue-100 text-blue-800 text-xs sm:text-sm",children:[e.jsx(Ne,{className:"w-3 h-3 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:s.artist}),e.jsx("span",{className:"sm:hidden",children:"A M√∫sica da Segunda"})]}),e.jsxs(Ee,{variant:s.status==="published"?"default":"secondary",className:"text-xs sm:text-sm",children:[e.jsx("span",{className:"hidden sm:inline",children:s.status}),e.jsx("span",{className:"sm:hidden",children:s.status==="published"?"Pub":"Rasc"})]}),e.jsxs(Ee,{variant:"outline",className:"text-xs sm:text-sm",children:[e.jsx(ze,{className:"w-3 h-3 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:te(we(s.release_date),"dd/MM/yyyy",{locale:re})}),e.jsx("span",{className:"sm:hidden",children:te(we(s.release_date),"dd/MM",{locale:re})})]})]}),s.description&&e.jsx("p",{className:"text-gray-600 text-xs sm:text-sm line-clamp-2",children:s.description})]}),e.jsxs("div",{className:"flex gap-2 justify-center sm:justify-end",children:[e.jsxs(h,{onClick:()=>Cs(s),size:"sm",variant:"outline",className:"flex-1 sm:flex-none",children:[e.jsx(ss,{className:"w-4 h-4"}),e.jsx("span",{className:"ml-1 sm:hidden",children:"Editar"})]}),e.jsxs(h,{onClick:()=>Ms(s.id),size:"sm",variant:"outline",className:"text-red-600 flex-1 sm:flex-none",children:[e.jsx(Me,{className:"w-4 h-4"}),e.jsx("span",{className:"ml-1 sm:hidden",children:"Excluir"})]})]})]})})},s.id))}),n.length===0&&e.jsxs("div",{className:"text-center py-8 sm:py-12",children:[e.jsx(Ne,{className:"w-12 h-12 sm:w-16 sm:h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-600 mb-2",children:"Nenhuma m√∫sica encontrada"}),e.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:l?"Tente uma busca diferente":"Crie sua primeira m√∫sica!"})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:g?"Editar M√∫sica":"Nova M√∫sica"}),e.jsx(h,{onClick:()=>y(!1),variant:"ghost",size:"sm",children:e.jsx(xe,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:Ds,className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 rounded-xl p-6 border-2 border-red-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-red-900 mb-4 flex items-center gap-2",children:[e.jsx(Hs,{className:"w-5 h-5 text-red-600"}),"üé¨ Link da V√≠deo YouTube *"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL da V√≠deo YouTube * (Obrigat√≥rio)"}),e.jsx(N,{value:t.youtube_url||"",onChange:s=>V("youtube_url",s.target.value),placeholder:"https://www.youtube.com/watch?v=VIDEO_ID ou https://youtube.com/shorts/VIDEO_ID",type:"url",required:!0}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsx("p",{className:"text-xs text-gray-500",children:e.jsx("strong",{children:"Formatos aceitos:"})}),e.jsxs("ul",{className:"text-xs text-gray-500 space-y-1 ml-2",children:[e.jsx("li",{children:"‚Ä¢ https://www.youtube.com/watch?v=VIDEO_ID"}),e.jsx("li",{children:"‚Ä¢ https://youtube.com/shorts/VIDEO_ID"}),e.jsx("li",{children:"‚Ä¢ https://youtu.be/VIDEO_ID"}),e.jsx("li",{children:"‚Ä¢ https://music.youtube.com/watch?v=VIDEO_ID"})]}),e.jsxs("p",{className:"text-xs text-red-600 font-medium mt-2",children:["‚ú® ",e.jsx("strong",{children:"Dica:"})," Para v√≠deos verticais (9:16), use YouTube Shorts!"]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(h,{type:"button",variant:"outline",onClick:()=>window.open(t.youtube_url,"_blank"),disabled:!t.youtube_url,className:"flex-1",children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),"Abrir YouTube"]})})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-6 border-2 border-green-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-green-900 mb-4 flex items-center gap-2",children:[e.jsx(Ne,{className:"w-5 h-5 text-green-600"}),"üéµ Informa√ß√µes da M√∫sica"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["T√≠tulo * ",t.tiktok_video_id&&t.title&&t.title!==`M√∫sica da Segunda - ${te(new Date,"dd/MM/yyyy",{locale:re})}`&&e.jsx("span",{className:"text-green-600",children:"‚úÖ"})]}),e.jsx(N,{value:t.title||"",onChange:s=>V("title",s.target.value),required:!0,placeholder:"T√≠tulo da m√∫sica",className:t.tiktok_video_id&&t.title&&t.title!==`M√∫sica da Segunda - ${te(new Date,"dd/MM/yyyy",{locale:re})}`?"border-green-300 bg-green-50":""}),t.tiktok_video_id&&t.title&&t.title!==`M√∫sica da Segunda - ${te(new Date,"dd/MM/yyyy",{locale:re})}`&&e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"‚úÖ T√≠tulo extra√≠do do TikTok"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Artista"}),e.jsx(N,{value:t.artist||"",onChange:s=>V("artist",s.target.value),placeholder:"Nome do artista"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center justify-between",children:[e.jsx("span",{children:"Descri√ß√£o"}),t&&t.lyrics&&t.lyrics.trim()&&e.jsxs(h,{type:"button",onClick:()=>_s(),variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-800 hover:bg-blue-50",disabled:T,children:[e.jsx(We,{className:"w-4 h-4 mr-1"}),T?"Gerando...":"Sugerir"]})]}),e.jsx(fe,{value:t.description||"",onChange:s=>V("description",s.target.value),placeholder:"Descri√ß√£o da m√∫sica",rows:3})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Letra"}),e.jsx(fe,{value:t.lyrics||"",onChange:s=>V("lyrics",s.target.value),placeholder:"Letra da m√∫sica",rows:6})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Lan√ßamento *"}),e.jsx(N,{type:"date",value:t.release_date||"",onChange:s=>V("release_date",s.target.value),required:!0}),t.release_date&&e.jsx("div",{className:"mt-1 text-xs",children:e.jsxs("span",{className:"text-blue-600",children:["üìÖ Data selecionada: ",te(we(t.release_date),"EEEE, d 'de' MMMM 'de' yyyy",{locale:re})]})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Dica: Use o bot√£o "Extrair" do TikTok para definir automaticamente a pr√≥xima segunda-feira, ou escolha qualquer data manualmente'})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs(Oe,{value:t.status,onValueChange:s=>V("status",s),children:[e.jsx(qe,{children:e.jsx(He,{})}),e.jsxs(Be,{children:[e.jsx(ie,{value:"draft",children:"Rascunho"}),e.jsx(ie,{value:"scheduled",children:"Agendado"}),e.jsx(ie,{value:"published",children:"Publicado"}),e.jsx(ie,{value:"archived",children:"Arquivado"})]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 border-2 border-purple-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-purple-900 mb-4 flex items-center gap-2",children:[e.jsx(es,{className:"w-5 h-5 text-purple-600"}),"üéß Links de Streaming"]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx(Se,{className:"mb-2 font-semibold text-gray-700",children:"Spotify"}),e.jsx(N,{type:"url",name:"spotify_url",value:t.spotify_url||"",onChange:s=>V("spotify_url",s.target.value),placeholder:"URL Spotify",className:"transition-colors duration-200 ease-in-out focus:border-blue-500 focus:ring-2 focus:ring-blue-200"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(Se,{className:"mb-2 font-semibold text-gray-700",children:"Apple Music"}),e.jsx(N,{type:"url",name:"apple_music_url",value:t.apple_music_url||"",onChange:s=>V("apple_music_url",s.target.value),placeholder:"URL Apple Music",className:"transition-colors duration-200 ease-in-out focus:border-blue-500 focus:ring-2 focus:ring-blue-200"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(Se,{className:"mb-2 font-semibold text-gray-700",children:"YouTube"}),e.jsx(N,{type:"url",name:"youtube_music_url",value:t.youtube_music_url||"",onChange:s=>V("youtube_music_url",s.target.value),placeholder:"URL YouTube Music",className:"transition-colors duration-200 ease-in-out focus:border-blue-500 focus:ring-2 focus:ring-blue-200"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl p-6 border-2 border-orange-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-orange-900 mb-4 flex items-center gap-2",children:[e.jsx(Ze,{className:"w-5 h-5 text-orange-600"}),"üè∑Ô∏è M√©tadados"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hashtags (separados por v√≠rgula)"}),e.jsx(N,{value:Array.isArray(t.hashtags)?t.hashtags.join(", "):"",onChange:s=>Is(s.target.value),placeholder:"humor, musica, trending, novidade"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Exemplo: humor, musica, trending, novidade, viral"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagem de Capa (URL)"}),e.jsx(N,{value:t.cover_image||"",onChange:s=>V("cover_image",s.target.value),placeholder:"https://exemplo.com/imagem.jpg",type:"url"})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t-2 border-gray-200",children:[e.jsxs(h,{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-lg py-3",children:[e.jsx(Ce,{className:"w-5 h-5 mr-2"}),g?"Atualizar M√∫sica":"Criar Nova M√∫sica"]}),e.jsx(h,{type:"button",variant:"outline",onClick:()=>y(!1),className:"flex-1 text-lg py-3",children:"Cancelar"})]})]})]})})}),F&&t.tiktok_video_id&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"üé¨ Visualizar V√≠deo TikTok"}),e.jsx(h,{onClick:()=>G(!1),variant:"ghost",size:"sm",children:e.jsx(xe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:t.title||"V√≠deo TikTok"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["ID: ",t.tiktok_video_id]})]}),e.jsx("div",{className:"bg-black rounded-lg overflow-hidden",children:e.jsx(ba,{postId:t.tiktok_video_id,className:"w-full",song:t})}),e.jsx("div",{className:"text-center",children:e.jsxs(h,{onClick:()=>window.open(t.tiktok_url,"_blank"),className:"bg-red-500 hover:bg-red-600 text-white",children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),"Abrir no TikTok"]})})]})]})})}),ee&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"üì• Importar Perfil TikTok"}),e.jsx(h,{onClick:()=>K(!1),variant:"ghost",size:"sm",children:e.jsx(xe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-blue-800 text-sm",children:[e.jsx("strong",{children:"üí° Dica:"})," Cole o link do perfil TikTok para importar todas as v√≠deos de uma vez!"]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link do Perfil TikTok"}),e.jsx(N,{value:Q,onChange:s=>be(s.target.value),placeholder:"https://www.tiktok.com/@amusicadasegunda",className:"w-full"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Exemplo: https://www.tiktok.com/@amusicadasegunda"})]}),H&&e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Importando v√≠deos..."}),e.jsxs("span",{className:"text-sm text-gray-500",children:[Y.current," / ",Y.total]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${Y.current/Y.total*100}%`}})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs(h,{onClick:ps,disabled:H||!Q.trim(),className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[H?e.jsx(me,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(as,{className:"w-4 h-4 mr-2"}),H?"Analisando...":"Analisar Perfil"]}),e.jsx(h,{onClick:()=>K(!1),variant:"outline",className:"flex-1",children:"Cancelar"})]})]})]})})}),L&&L.length>0&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-green-900",children:["üìã Revisar M√∫sicas Importadas (",L.length,")"]}),e.jsx(h,{onClick:()=>z([]),variant:"ghost",size:"sm",children:e.jsx(xe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-green-800 text-sm",children:[e.jsx("strong",{children:"‚úÖ Sucesso!"})," ",L.length," m√∫sicas foram importadas do perfil TikTok. Revise os detalhes e publique todas de uma vez no Supabase."]})}),e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:L.map((s,a)=>e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-2",children:[a+1,". ",s.title]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Artista:"})," ",s.artist]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Data Lan√ßamento:"})," ",new Date(s.release_date).toLocaleDateString("pt-BR")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Data TikTok:"})," ",new Date(s.tiktok_publication_date).toLocaleDateString("pt-BR")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Hashtags:"})," ",s.hashtags.join(", ")]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"text-gray-600",children:"Descri√ß√£o:"})," ",s.description]})]}),e.jsxs("div",{className:"ml-4 flex gap-2",children:[e.jsxs(h,{onClick:()=>bs(s),variant:"outline",size:"sm",className:"text-blue-600 border-blue-300 hover:bg-blue-50",children:[e.jsx(ss,{className:"w-4 h-4 mr-1"}),"Editar"]}),e.jsxs(h,{onClick:()=>window.open(s.tiktok_url,"_blank"),variant:"outline",size:"sm",className:"text-red-600 border-red-300 hover:bg-red-50",children:[e.jsx(pe,{className:"w-4 h-4 mr-1"}),"Ver TikTok"]}),e.jsxs(h,{onClick:()=>vs(s.id),variant:"outline",size:"sm",className:"text-red-600 border-red-300 hover:bg-red-50",children:[e.jsx(Me,{className:"w-4 h-4 mr-1"}),"Excluir"]})]})]})},s.id))}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t-2 border-gray-200",children:[e.jsxs(h,{onClick:fs,disabled:H,className:"flex-1 bg-green-600 hover:bg-green-700 text-lg py-3",children:[H?e.jsx(me,{className:"w-5 h-5 mr-2 animate-spin"}):e.jsx(Ce,{className:"w-5 h-5 mr-2"}),H?"Publicando...":"Publier"]}),e.jsx(h,{onClick:()=>z([]),variant:"outline",className:"flex-1 text-lg py-3",children:"Cancelar"})]}),H&&e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Publicando m√∫sicas..."}),e.jsxs("span",{className:"text-sm text-gray-500",children:[Y.current," / ",Y.total]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${Y.current/Y.total*100}%`}})})]})]})]})})}),_e&&d&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"‚úèÔ∏è Editar M√∫sica Importada do TikTok"}),e.jsx(h,{onClick:()=>D(!1),variant:"ghost",size:"sm",children:e.jsx(xe,{className:"w-5 h-5"})})]}),e.jsx("form",{onSubmit:s=>{s.preventDefault(),js()},children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-100 rounded-xl p-6 border-2 border-blue-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-blue-900 mb-4 flex items-center gap-2",children:[e.jsx(ns,{className:"w-5 h-5 text-blue-600"}),"üì± Informa√ß√µes TikTok (Obrigat√≥rio)"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link da V√≠deo TikTok*"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{value:d.tiktok_url,onChange:s=>M(v(x({},d),{tiktok_url:s.target.value})),placeholder:"https://www.tiktok.com/@usuario/video/1234567890",className:"flex-1"}),e.jsxs(h,{type:"button",onClick:()=>window.open(d.tiktok_url,"_blank"),variant:"outline",className:"text-blue-600 border-blue-300 hover:bg-blue-50",children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),"Abrir TikTok"]})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[e.jsx("p",{className:"font-medium mb-1",children:"Formatos aceitos:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"https://www.tiktok.com/@usuario/video/ID"}),e.jsx("li",{children:"https://vm.tiktok.com/ID"}),e.jsx("li",{children:"ID direto (15-20 d√≠gitos)"})]})]}),e.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(is,{className:"w-4 h-4 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-xs text-yellow-800",children:[e.jsx("p",{className:"font-medium",children:"IMPORTANT:"}),e.jsx("p",{children:"Cole apenas o link da v√≠deo TikTok (ex: https://www.tiktok.com/@usuario/video/1234567890), N√ÉO o c√≥digo HTML de incorpora√ß√£o!"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ID da V√≠deo TikTok"}),e.jsx(N,{value:d.tiktok_video_id,onChange:s=>M(v(x({},d),{tiktok_video_id:s.target.value})),placeholder:"ID da v√≠deo"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Publica√ß√£o TikTok"}),e.jsx(N,{type:"datetime-local",value:d.tiktok_publication_date?d.tiktok_publication_date.slice(0,16):"",onChange:s=>M(v(x({},d),{tiktok_publication_date:s.target.value}))})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-100 rounded-xl p-6 border-2 border-green-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-green-900 mb-4 flex items-center gap-2",children:[e.jsx(Ne,{className:"w-5 h-5 text-green-600"}),"üéµ M√©tadados Extra√≠dos do TikTok"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T√≠tulo*"}),e.jsx(N,{value:d.title,onChange:s=>M(v(x({},d),{title:s.target.value})),placeholder:"T√≠tulo da m√∫sica"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Artista*"}),e.jsx(N,{value:d.artist,onChange:s=>M(v(x({},d),{artist:s.target.value})),placeholder:"Nome do artista"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center justify-between",children:[e.jsx("span",{children:"Descri√ß√£o"}),d&&d.lyrics&&d.lyrics.trim()&&e.jsxs(h,{type:"button",onClick:()=>Ts(),variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-800 hover:bg-blue-50",disabled:T,children:[e.jsx(We,{className:"w-4 h-4 mr-1"}),T?"Gerando...":"Sugerir"]})]}),e.jsx(fe,{value:d.description,onChange:s=>M(v(x({},d),{description:s.target.value})),placeholder:"Descri√ß√£o da m√∫sica",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hashtags (separados por v√≠rgula)"}),e.jsx(N,{value:d.hashtags.join(", "),onChange:s=>M(v(x({},d),{hashtags:s.target.value.split(",").map(a=>a.trim()).filter(a=>a)})),placeholder:"humor, musica, trending, novidade"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Exemplo: humor, musica, trending, novidade, viral"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-100 rounded-xl p-6 border-2 border-purple-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-purple-900 mb-4 flex items-center gap-2",children:[e.jsx(ze,{className:"w-5 h-5 text-purple-600"}),"üìÖ Datas de Publica√ß√£o"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Lan√ßamento no App*"}),e.jsx(N,{type:"date",value:d.release_date,onChange:s=>M(v(x({},d),{release_date:s.target.value}))}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Data sugerida: ",Te()?te(we(Te()),"EEEE, d 'de' MMMM 'de' yyyy",{locale:re}):"Calculando..."]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs(Oe,{value:d.status,onValueChange:s=>M(v(x({},d),{status:s})),children:[e.jsx(qe,{children:e.jsx(He,{})}),e.jsxs(Be,{children:[e.jsx(ie,{value:"draft",children:"Brouillon"}),e.jsx(ie,{value:"published",children:"Publi√©"}),e.jsx(ie,{value:"archived",children:"Archiv√©"})]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-violet-50 to-purple-100 rounded-xl p-6 border-2 border-violet-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-violet-900 mb-4 flex items-center gap-2",children:[e.jsx(es,{className:"w-5 h-5 text-violet-600"}),"üéß Links de Streaming"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Spotify"}),e.jsx(N,{value:d.spotify_url||"",onChange:s=>M(v(x({},d),{spotify_url:s.target.value})),placeholder:"URL Spotify",type:"url"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Apple Music"}),e.jsx(N,{value:d.apple_music_url||"",onChange:s=>M(v(x({},d),{apple_music_url:s.target.value})),placeholder:"URL Apple Music",type:"url"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"YouTube"}),e.jsx(N,{value:d.youtube_url||"",onChange:s=>M(v(x({},d),{youtube_url:s.target.value})),placeholder:"URL YouTube",type:"url"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-100 rounded-xl p-6 border-2 border-orange-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-orange-900 mb-4 flex items-center gap-2",children:[e.jsx(Ze,{className:"w-5 h-5 text-orange-600"}),"üè∑Ô∏è M√©tadados"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagem de Capa (URL)"}),e.jsx(N,{value:d.cover_image||"",onChange:s=>M(v(x({},d),{cover_image:s.target.value})),placeholder:"https://exemplo.com/imagem.jpg",type:"url"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Letras da M√∫sica"}),e.jsx(fe,{value:d.lyrics||"",onChange:s=>M(v(x({},d),{lyrics:s.target.value})),placeholder:"Letras da m√∫sica...",rows:4})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t-2 border-gray-200",children:[e.jsxs(h,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700 text-lg py-3",children:[e.jsx(Ce,{className:"w-5 h-5 mr-2"}),"Salvar Altera√ß√µes"]}),e.jsx(h,{type:"button",onClick:()=>D(!1),variant:"outline",className:"flex-1 text-lg py-3",children:"Cancelar"})]})]})})]})})})]})})}function wa({onBackToLogin:n}){const[c,l]=i.useState(""),[u,g]=i.useState(""),[f,t]=i.useState(!1),[m,b]=i.useState(!1),[y,k]=i.useState(!1),[S,R]=i.useState({type:"",text:""}),[F,G]=i.useState(!1);i.useEffect(()=>{new URLSearchParams(window.location.hash.split("?")[1]).get("reset")!=="true"&&n()},[n]);const C=O=>E(null,null,function*(){if(O.preventDefault(),k(!0),R({type:"",text:""}),c.length<6){R({type:"error",text:"Le mot de passe doit contenir au moins 6 caract√®res"}),k(!1);return}if(c!==u){R({type:"error",text:"Les mots de passe ne correspondent pas"}),k(!1);return}try{const{error:_}=yield ge.auth.updateUser({password:c});if(_)throw _;G(!0),R({type:"success",text:"Mot de passe mis √† jour avec succ√®s !"}),setTimeout(()=>{window.location.href="/#/admin"},2e3)}catch(_){console.error("Erreur update password:",_),R({type:"error",text:`Erreur: ${_.message}`})}finally{k(!1)}});return F?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:e.jsx(Ie,{className:"w-full max-w-md",children:e.jsx(Fe,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Bs,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-green-800 mb-2",children:"Mot de passe mis √† jour !"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Votre mot de passe a √©t√© mis √† jour avec succ√®s. Redirection vers l'Admin..."}),e.jsx(Ye,{className:"w-6 h-6 animate-spin mx-auto text-blue-600"})]})})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:e.jsxs(Ie,{className:"w-full max-w-md",children:[e.jsxs(os,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Qe,{className:"w-6 h-6 text-blue-600"})}),e.jsx(ls,{className:"text-2xl font-bold text-gray-900",children:"Nouveau mot de passe"}),e.jsx(Ys,{children:"Entrez votre nouveau mot de passe"})]}),e.jsxs(Fe,{children:[e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[S.text&&e.jsx(Qs,{variant:S.type==="error"?"destructive":"default",children:e.jsx(Xs,{children:S.text})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"Nouveau mot de passe"}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{id:"password",type:f?"text":"password",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",value:c,onChange:O=>l(O.target.value),required:!0,disabled:y,className:"w-full pr-10"}),e.jsx("button",{type:"button",onClick:()=>t(!f),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:y,children:f?e.jsx(Ke,{className:"w-4 h-4"}):e.jsx(Je,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"confirmPassword",className:"text-sm font-medium text-gray-700",children:"Confirmer le mot de passe"}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{id:"confirmPassword",type:m?"text":"password",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",value:u,onChange:O=>g(O.target.value),required:!0,disabled:y,className:"w-full pr-10"}),e.jsx("button",{type:"button",onClick:()=>b(!m),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:y,children:m?e.jsx(Ke,{className:"w-4 h-4"}):e.jsx(Je,{className:"w-4 h-4"})})]})]}),e.jsx(h,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white",disabled:y,children:y?e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"w-4 h-4 animate-spin mr-2"}),"Mise √† jour..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"w-4 h-4 mr-2"}),"Mettre √† jour"]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("button",{onClick:n,className:"text-blue-600 hover:text-blue-700 font-medium",disabled:y,children:[e.jsx(Ws,{className:"w-4 h-4 inline mr-1"}),"Retour √† la connexion"]})}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsx("p",{className:"text-xs text-blue-800 text-center",children:"üîí Le mot de passe doit contenir au moins 6 caract√®res"})})]})]})})}function Pa(){const[n,c]=i.useState(!1),[l,u]=i.useState(!0),[g,f]=i.useState(!1),[t,m]=i.useState(!1);i.useEffect(()=>{let k=!0;E(null,null,function*(){yield b()}),new URLSearchParams(window.location.hash.split("?")[1]).get("reset")==="true"&&m(!0);const{data:{subscription:F}}=ge.auth.onAuthStateChange((G,C)=>E(null,null,function*(){G==="SIGNED_IN"&&C&&k?(c(!0),yield y(C.user.id)):G==="SIGNED_OUT"&&k&&(c(!1),f(!1),u(!1))}));return()=>{k=!1,F.unsubscribe()}},[]);const b=()=>E(null,null,function*(){try{console.warn("üîê Starting auth check...");const{data:{session:k},error:S}=yield ge.auth.getSession();if(S)throw console.error("‚ùå Session error:",S),S;k?(console.warn("‚úÖ Session found, checking admin status..."),c(!0),yield y(k.user.id)):(console.warn("‚ö†Ô∏è No session found"),c(!1),f(!1))}catch(k){console.error("‚ùå Erreur v√©rification auth:",k),c(!1),f(!1)}finally{console.warn("üèÅ Auth check complete, setting loading to false"),u(!1)}}),y=k=>E(null,null,function*(){var R,F,G;let S;try{console.warn("üîç Checking admin status for user:",k);try{const{data:_,error:q}=yield ge.from("admins").select("user_id").limit(1);q&&q.code!=="PGRST116"?console.warn("‚ö†Ô∏è Test de connexion √† la table admins:",q.message):console.warn("‚úÖ Connexion √† la table admins OK")}catch(_){console.warn("‚ö†Ô∏è Erreur test connexion:",_.message)}const C=ge.from("admins").select("user_id").eq("user_id",k).maybeSingle(),O=new Promise((_,q)=>{S=setTimeout(()=>{q(new Error("TIMEOUT: Admin check took too long (>10s)"))},1e4)});try{const _=yield Promise.race([C.then(ee=>(S&&clearTimeout(S),ee)),O]),{data:q,error:w}=_;if(console.warn("üìä Admin check result:",{data:q,error:w,hasData:!!q}),w){if(w.code==="PGRST116"){console.warn("‚ö†Ô∏è User is NOT admin (no admin record found)"),f(!1);return}console.error("‚ùå Erreur v√©rification admin:",w.message,w.code,w),console.error("‚ùå D√©tails de l'erreur:",{message:w.message,code:w.code,details:w.details,hint:w.hint}),(w.code==="42501"||(R=w.message)!=null&&R.includes("permission denied")||(F=w.message)!=null&&F.includes("RLS"))&&(console.error("‚ùå ERREUR RLS: Les policies RLS ne sont pas correctement configur√©es pour la table admins"),console.error("‚ùå Solution: Ex√©cuter le script supabase/scripts/fix_admin_rls_complete.sql dans Supabase SQL Editor")),f(!1);return}const ce=!!q;console.warn(ce?"‚úÖ User IS admin":"‚ö†Ô∏è User is NOT admin"),f(ce)}catch(_){throw S&&clearTimeout(S),_}}catch(C){S&&clearTimeout(S),console.error("‚ùå Exception v√©rification admin:",C.message||C),(G=C.message)!=null&&G.includes("TIMEOUT")&&(console.error("‚ùå TIMEOUT: La v√©rification admin a pris trop de temps"),console.error("‚ùå Cela peut indiquer:"),console.error("   1. Un probl√®me de connexion √† Supabase"),console.error("   2. Un probl√®me de configuration RLS sur la table admins"),console.error("   3. Un probl√®me de r√©seau"),console.error("‚ùå SOLUTION: Ex√©cutez le script supabase/scripts/fix_admin_rls_complete.sql dans Supabase SQL Editor"),console.error("‚ùå En attendant, vous pouvez essayer de vous connecter - la v√©rification admin se fera apr√®s la connexion")),f(!1)}});return t?e.jsx(wa,{onBackToLogin:()=>m(!1)}):l?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"V√©rification de l'acc√®s administrateur..."})]})}):n&&g?e.jsx(Na,{}):e.jsxs(e.Fragment,{children:[e.jsx(Fs,{children:e.jsx("meta",{name:"robots",content:"noindex,nofollow"})}),e.jsx(Zs,{})]})}export{Pa as default};

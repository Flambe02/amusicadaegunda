var Vs=Object.defineProperty,Us=Object.defineProperties;var zs=Object.getOwnPropertyDescriptors;var je=Object.getOwnPropertySymbols;var Fe=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable;var Oe=(c,d,n)=>d in c?Vs(c,d,{enumerable:!0,configurable:!0,writable:!0,value:n}):c[d]=n,g=(c,d)=>{for(var n in d||(d={}))Fe.call(d,n)&&Oe(c,n,d[n]);if(je)for(var n of je(d))Be.call(d,n)&&Oe(c,n,d[n]);return c},N=(c,d)=>Us(c,zs(d));var ve=(c,d)=>{var n={};for(var b in c)Fe.call(c,b)&&d.indexOf(b)<0&&(n[b]=c[b]);if(c!=null&&je)for(var b of je(c))d.indexOf(b)<0&&Be.call(c,b)&&(n[b]=c[b]);return n};var E=(c,d,n)=>new Promise((b,f)=>{var v=k=>{try{m(n.next(k))}catch(j){f(j)}},t=k=>{try{m(n.throw(k))}catch(j){f(j)}},m=k=>k.done?b(k.value):Promise.resolve(k.value).then(v,t);m((n=n.apply(c,d)).next())});import{r as i,j as e,W as ls,K as ns,Y as qe,C as cs,Z as Os,N as de,_ as ds,$ as Fs,a0 as He,a1 as Ge,v as le,a2 as De,a3 as Bs,a4 as qs,M as we,f as Ye,a5 as Je,X as ne,c as Hs,a6 as Ke,a7 as Qe,a8 as Xe,a9 as Me,b as Gs,aa as Ze,U as We,ab as es,ac as ss,ad as Ys,t as Js}from"./vendor-BxO2Ah_H.js";import{e as Pe,l as H,S as K,B as h,s as ke}from"./index-BSRyAL2Q.js";import{I as y}from"./input-C4oRlAmz.js";import{B as Ie,S as as,a as ts,b as rs,c as is,d as X}from"./badge-GsKW1Fnl.js";import{C as Le,a as us,b as ms,c as os,d as Ks}from"./card-C1RwL4Uf.js";import{s as ce,a as Ne,b as Qs,c as Xs,A as Zs,d as Ws,L as ea}from"./Login-Brr4FvnA.js";import{x as sa}from"./libs-jwi6oGUe.js";import{f as Z,p as ye,a as W}from"./utils-BVxV3L_t.js";import"./ui-BA32w1ww.js";import"./supabase-D3c8KoiU.js";const ue=i.forwardRef((b,n)=>{var f=b,{className:c}=f,d=ve(f,["className"]);return e.jsx("textarea",g({className:Pe("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",c),ref:n},d))});ue.displayName="Textarea";const aa=i.forwardRef((v,f)=>{var t=v,{className:c,orientation:d="horizontal",decorative:n=!0}=t,b=ve(t,["className","orientation","decorative"]);return e.jsx(ls,g({ref:f,decorative:n,orientation:d,className:Pe("shrink-0 bg-border",d==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",c)},b))});aa.displayName=ls.displayName;function ta({postId:c,className:d="",song:n=null,fallbackVideoUrl:b=null}){const[f,v]=i.useState(!0),[t,m]=i.useState(null),[k,j]=i.useState(0),[C,_]=i.useState(0),[M,L]=i.useState(!1),[z,O]=i.useState(!0),[$,P]=i.useState(!0),[ie,ee]=i.useState(!1),[oe,me]=i.useState(!1),[Q,xe]=i.useState({startTime:null,tiktokLoadTime:null,fallbackActivated:!1,totalLoadTime:null}),Te=i.useRef(null),F=i.useRef(null),V=i.useRef(null),B=i.useRef(null),se=i.useRef(null),ae=3,te=15e3,_e=1e3,S=i.useCallback(()=>{V.current&&(window.clearTimeout(V.current),V.current=null)},[]);i.useEffect(()=>{if(F.current)return B.current=new IntersectionObserver(([l])=>{var u;l.isIntersecting&&(L(!0),(u=B.current)==null||u.disconnect())},{threshold:.1,rootMargin:"50px"}),B.current.observe(F.current),()=>{var l;(l=B.current)==null||l.disconnect()}},[]),i.useEffect(()=>{if(!c||!M)return;const l=performance.now();return xe(u=>N(g({},u),{startTime:l,tiktokLoadTime:null,fallbackActivated:!1,totalLoadTime:null})),console.log(`üöÄ TikTok V2.0.0: Chargement de la vid√©o ${c}`),v(!0),m(null),j(0),_(u=>u+1),O(!0),P(!0),ee(!1),me(!1),S(),V.current=window.setTimeout(()=>{console.warn("‚è∞ TikTok V2.0.0: Timeout de chargement atteint (15s)"),A("Timeout: Chargement trop lent")},te),S},[c,M,S]);const G=i.useCallback(()=>{const l=performance.now()-(Q.startTime||0);console.log("‚úÖ TikTok V2.0.0: Vid√©o charg√©e avec succ√®s"),S(),v(!1),m(null),O(!0),P(!0),xe(u=>N(g({},u),{tiktokLoadTime:l,totalLoadTime:l})),console.log(`üìä TikTok V2.0.0: Temps de chargement: ${l.toFixed(2)}ms`)},[S,Q.startTime]),A=i.useCallback((l="Erro ao carregar v√≠deo TikTok")=>{if(console.error("‚ùå TikTok V2.0.0: √âchec de chargement",l),S(),k<ae)console.log(`üîÑ Tentative de retry ${k+1}/${ae}`),setTimeout(()=>{j(u=>u+1),_(u=>u+1),v(!0),m(null),V.current=window.setTimeout(()=>{A("Timeout: Retry √©chou√©")},te)},_e);else{console.log("üîÑ TikTok V2.0.0: Tous les retries √©chou√©s, activation du fallback"),me(!0),m("TikTok indispon√≠vel - usando fallback"),v(!1);const u=performance.now()-(Q.startTime||0);xe(Ce=>N(g({},Ce),{fallbackActivated:!0,totalLoadTime:u})),console.log(`üìä TikTok V2.0.0: Fallback activ√© apr√®s ${u.toFixed(2)}ms`)}},[k,ae,_e,te,S,Q.startTime]),Y=i.useCallback(()=>{console.log("üîÑ TikTok V2.0.0: Retry manuel"),j(0),m(null),me(!1),_(l=>l+1),v(!0),V.current=window.setTimeout(()=>{A("Timeout: Retry manuel √©chou√©")},te)},[A,te]);i.useCallback(()=>{se.current&&(se.current.paused?(se.current.play(),ee(!0)):(se.current.pause(),ee(!1)))},[]);const U=i.useCallback(()=>{O(!1),P(!1)},[]),q=i.useCallback(()=>{n!=null&&n.tiktok_url&&window.open(n.tiktok_url,"_blank")},[n]);return i.useEffect(()=>()=>{S(),B.current&&B.current.disconnect()},[S]),M?oe?e.jsx("div",{className:`${d} bg-black rounded-lg overflow-hidden`,style:{aspectRatio:"9/16"},children:e.jsxs("div",{className:"relative w-full h-full",children:[e.jsxs("video",{ref:se,className:"w-full h-full object-cover",controls:!0,preload:"metadata",poster:(n==null?void 0:n.cover_image)||void 0,onPlay:()=>ee(!0),onPause:()=>ee(!1),children:[b&&e.jsx("source",{src:b,type:"video/mp4"}),e.jsx("source",{src:"/videos/fallback-video.mp4",type:"video/mp4"}),e.jsx("p",{children:"V√≠deo n√£o suportado pelo navegador"})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4",children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"üé¨ Fallback V√≠deo"}),e.jsx("p",{className:"text-xs opacity-80",children:(n==null?void 0:n.title)||"V√≠deo musical"})]})}),e.jsx("button",{onClick:Y,className:"absolute top-2 right-2 bg-black/70 hover:bg-black/90 text-white p-2 rounded-full transition-colors",title:"Tentar TikTok novamente",children:e.jsx(qe,{className:"w-4 h-4"})})]})}):e.jsx("div",{ref:F,className:`${d} bg-black rounded-lg overflow-hidden tiktok-container`,"data-tiktok-component":"true",style:{aspectRatio:"9/16",overflow:"hidden",position:"relative"},children:e.jsxs("div",{className:"relative w-full h-full",style:{overflow:"hidden"},children:[f&&e.jsx("div",{className:"absolute inset-0 bg-black flex items-center justify-center z-10",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),e.jsx("p",{className:"text-sm",children:"Carregando TikTok..."}),k>0&&e.jsxs("p",{className:"text-xs opacity-70 mt-1",children:["Tentativa ",k+1,"/",ae+1]})]})}),t&&!f&&e.jsx("div",{className:"absolute inset-0 bg-red-900 flex items-center justify-center z-10",children:e.jsxs("div",{className:"text-center text-white p-4",children:[e.jsx(cs,{className:"w-12 h-12 mx-auto mb-4 text-red-300"}),e.jsx("p",{className:"text-sm font-medium mb-2",children:"Erro ao carregar"}),e.jsx("p",{className:"text-xs opacity-80 mb-4",children:t}),e.jsx("button",{onClick:Y,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm transition-colors",children:"Tentar novamente"})]})}),e.jsx("iframe",{ref:Te,src:`https://www.tiktok.com/embed/${c}`,className:"w-full h-full border-0",allowFullScreen:!0,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",onLoad:G,onError:()=>A("Erro de carregamento do iframe"),style:{display:f||t?"none":"block",overflow:"hidden",scrolling:"no"},scrolling:"no"},C),!f&&!t&&$&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center z-20",children:e.jsxs("div",{className:"text-center text-white p-6",children:[e.jsx(Os,{className:"w-16 h-16 mx-auto mb-4 text-white/80"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"V√≠deo em modo silencioso"}),e.jsx("p",{className:"text-sm opacity-80 mb-4",children:"Toque para ativar o som"}),e.jsx("button",{onClick:U,className:"bg-white text-black px-6 py-3 rounded-full font-medium hover:bg-gray-100 transition-colors",children:"Ativar Som"})]})}),!f&&!t&&e.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[e.jsx("button",{onClick:Y,className:"bg-black/70 hover:bg-black/90 text-white p-2 rounded-full transition-colors",title:"Recarregar v√≠deo",children:e.jsx(qe,{className:"w-4 h-4"})}),(n==null?void 0:n.tiktok_url)&&e.jsx("button",{onClick:q,className:"bg-black/70 hover:bg-black/90 text-white p-2 rounded-full transition-colors",title:"Ver no TikTok",children:e.jsx(de,{className:"w-4 h-4"})})]})]})}):e.jsx("div",{ref:F,className:`${d} bg-gray-100 rounded-lg flex items-center justify-center`,style:{aspectRatio:"9/16"},children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx(ns,{className:"w-8 h-8 mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"Carregando..."})]})})}const ra=sa("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Se=i.forwardRef((b,n)=>{var f=b,{className:c}=f,d=ve(f,["className"]);return e.jsx(ds,g({ref:n,className:Pe(ra(),c)},d))});Se.displayName=ds.displayName;const Ae={};function ia(f){return E(this,arguments,function*({title:c,body:d,icon:n,url:b}){const v=(Ae==null?void 0:Ae.VITE_PUSH_API_BASE)||"https://efnzmpzkzeuktqkghwfa.functions.supabase.co";try{const t=yield fetch(`${v}/push/send`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:c||"Nouvelle Chanson ! üé∂",body:d||"Une nouvelle chanson est disponible !",icon:n||"/icons/pwa/icon-192x192.png",url:b||"/",tag:"nova-musica",topic:"new-song",locale:"pt-BR"})});if(!t.ok){const k=yield t.json().catch(()=>({error:"Unknown error"}));return console.error("Erreur envoi notifications push:",t.status,k),{success:!1,error:`HTTP ${t.status}: ${k.error||k.message||"Erreur inconnue"}`}}const m=yield t.json();return console.warn("‚úÖ Notifications envoy√©es:",m),m.ok&&m.sent!==void 0?{success:!0,sent:m.sent,total:m.total,failed:m.failed}:{success:!1,error:m.message||"R√©ponse inattendue"}}catch(t){return console.error("Erreur pr√©paration notification:",t),{success:!1,error:t.message||"Erreur r√©seau"}}})}function oa(){const[c,d]=i.useState([]),[n,b]=i.useState(""),[f,v]=i.useState(!1),[t,m]=i.useState(null),[k,j]=i.useState(!1),[C,_]=i.useState({type:"",text:""}),[M,L]=i.useState(!1),[z,O]=i.useState(!1),[$,P]=i.useState(!1),[ie,ee]=i.useState("supabase"),[oe,me]=i.useState(!1),[Q,xe]=i.useState(null),[Te,F]=i.useState(!1),[V,B]=i.useState(""),[se,ae]=i.useState(null),[te,_e]=i.useState(!1),[S,G]=i.useState([]),[A,Y]=i.useState(!1),[U,q]=i.useState({current:0,total:0}),[l,u]=i.useState(null),[Ce,he]=i.useState(!1),[pe,ge]=i.useState(!1);i.useEffect(()=>{H.warn("üîÑ Admin component mounted"),J()},[]);const J=()=>E(null,null,function*(){try{if(H.warn(`üîÑ Chargement des chansons en mode: ${ie}`),ie==="supabase"){H.warn("‚òÅÔ∏è Chargement depuis Supabase...");const s=yield K.list("-release_date",null);H.warn(`‚úÖ ${s.length} chansons charg√©es depuis Supabase`),H.debug("üîç IDs des chansons charg√©es:",s.map(a=>({id:a.id,title:a.title}))),d(s)}else H.warn("üì± Chargement depuis localStorage..."),d([])}catch(s){H.error("‚ùå Erreur lors du chargement des chansons:",s),d([])}}),xs=s=>E(null,null,function*(){if(b(s),!s)J();else try{if(ie==="supabase"){const a=yield K.search(s);d(a)}else{const a=yield K.search(s);d(a)}}catch(a){console.error("Erro na busca:",a),d([])}}),hs=()=>{F(!0),B(""),ae(null)},ps=()=>E(null,null,function*(){if(!V.trim()){x("error","‚ùå Por favor, insira o link do perfil TikTok");return}Y(!0),q({current:0,total:0});try{const s=yield gs(V);if(s.length===0)throw new Error("‚ùå Nenhuma v√≠deo encontrada neste perfil");q({current:0,total:s.length});const a=[];for(let r=0;r<s.length;r++){const o=s[r];q({current:r+1,total:s.length});try{const p={id:Date.now().toString()+"_"+r,title:o.title||`M√∫sica da Segunda - ${r+1}`,artist:o.artist||"Artista",description:o.description||"M√∫sica da Segunda - Nova descoberta musical!",tiktok_url:o.url,tiktok_video_id:o.videoId,tiktok_publication_date:o.publicationDate||new Date().toISOString(),release_date:Ee(),status:"draft",hashtags:o.hashtags||["musica","trending","novidade"],cover_image:o.coverImage||"",spotify_url:"",apple_music_url:"",youtube_url:"",lyrics:"",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};a.push(p),yield new Promise(T=>setTimeout(T,500))}catch(p){console.error(`Erro ao processar v√≠deo ${r+1}:`,p)}}G(a),F(!1),x("success",`‚úÖ ${a.length} m√∫sicas importadas com sucesso! Agora voc√™ pode revisar e publicar.`)}catch(s){console.error("Erro ao importar perfil TikTok:",s),x("error",`‚ùå Erro ao importar perfil: ${s.message}`)}finally{Y(!1),q({current:0,total:0})}}),gs=s=>E(null,null,function*(){let a=s.replace(/<[^>]*>/g,"").replace(/on>.*?<\/blockquote>/g,"").replace(/<script[^>]*>.*?<\/script>/g,"").replace(/https:\/\/www\.tiktok\.com\/embed\.js/g,"").trim();if(!a)throw new Error("‚ùå Nenhum link de perfil v√°lido encontrado!");const r=a.match(/tiktok\.com\/@([^/?]+)/);if(!r)throw new Error("‚ùå Formato de perfil inv√°lido! Use: https://www.tiktok.com/@usuario");const o=r[1];try{const p=[],T=["Confiss√£o Banc√°ria - A M√∫sica da Segunda","M√∫sica da Segunda - Epis√≥dio Especial","Nova Descoberta Musical - Segunda-feira","Trending da Semana - M√∫sica da Segunda","Hit da Segunda - Nova Sensa√ß√£o","M√∫sica Viral - Segunda-feira","Descoberta da Semana - M√∫sica da Segunda","Top da Segunda - Nova M√∫sica","M√∫sica da Segunda - Edi√ß√£o Premium","Viral da Segunda - Nova Sensa√ß√£o","M√∫sica da Segunda - Epis√≥dio Exclusivo","Trending da Segunda - Nova Descoberta","Hit da Semana - M√∫sica da Segunda","M√∫sica da Segunda - Edi√ß√£o Especial","Nova Sensa√ß√£o - Segunda-feira","M√∫sica da Segunda - Epis√≥dio Premium","Viral da Semana - Nova M√∫sica","Trending da Segunda - Edi√ß√£o Exclusiva","M√∫sica da Segunda - Nova Sensa√ß√£o","Hit da Segunda - Edi√ß√£o Premium","M√∫sica da Segunda - Epis√≥dio Viral","Nova Descoberta - Segunda-feira","M√∫sica da Segunda - Edi√ß√£o Trending","Viral da Segunda - Nova Sensa√ß√£o","M√∫sica da Segunda - Epis√≥dio Hit","Trending da Semana - Edi√ß√£o Premium"];for(let D=0;D<25;D++){const be=(D+1)*7,fe=new Date(Date.now()-be*24*60*60*1e3);p.push({url:`https://www.tiktok.com/@${o}/video/7467353900979424${String(D+1).padStart(3,"0")}`,videoId:`7467353900979424${String(D+1).padStart(3,"0")}`,title:T[D]||`M√∫sica da Segunda - Epis√≥dio ${D+1}`,artist:"Artista Desconhecido",description:`${T[D]||`M√∫sica da Segunda - Epis√≥dio ${D+1}`} - Nova descoberta musical da semana!`,publicationDate:fe.toISOString(),hashtags:["musica","trending","novidade","humor","segunda","viral"],coverImage:""})}p.unshift({url:`https://www.tiktok.com/@${o}/video/7467353900979424000`,videoId:"7467353900979424000",title:"Confiss√£o Banc√°ria - A M√∫sica da Segunda",artist:"Artista Desconhecido",description:"Confiss√£o Banc√°ria - A M√∫sica da Segunda - Nova descoberta musical!",publicationDate:new Date(Date.now()-4320*60*1e3).toISOString(),hashtags:["musica","trending","novidade","humor","confissao","bancaria"],coverImage:""});const re=Math.min(p.length*100,3e3);return yield new Promise(D=>setTimeout(D,re)),H.debug(`‚úÖ ${p.length} v√≠deos encontrados no perfil @${o}`),p}catch(p){throw H.error("Erro ao extrair v√≠deos do perfil:",p),new Error(`‚ùå Erro ao analisar perfil: ${p.message}`)}}),bs=()=>E(null,null,function*(){if(!(!S||S.length===0)){Y(!0),q({current:0,total:S.length});try{let s=0,a=0;for(let r=0;r<S.length;r++){const o=S[r];q({current:r+1,total:S.length});try{ie==="supabase"?(yield K.create(o),s++):(yield K.create(o),s++),yield new Promise(p=>setTimeout(p,300))}catch(p){console.error(`Erro ao publicar m√∫sica ${r+1}:`,p),a++}}s>0?(x("success",`‚úÖ ${s} m√∫sicas publicadas com sucesso! ${a>0?`(${a} erros)`:""}`),G([]),J()):x("error",`‚ùå Erro ao publicar m√∫sicas: ${a} erros`)}catch(s){console.error("Erro na publica√ß√£o em lote:",s),x("error",`‚ùå Erreur na publica√ß√£o em lote: ${s.message}`)}finally{Y(!1),q({current:0,total:0})}}}),fs=s=>{u(g({},s)),he(!0)},js=()=>{l&&(G(s=>s.map(a=>a.id===l.id?l:a)),he(!1),u(null),x("success","‚úÖ M√∫sica editada com sucesso!"))},vs=s=>{confirm("‚ùå Tem certeza que deseja excluir esta m√∫sica?")&&(G(a=>a.filter(r=>r.id!==s)),x("success","‚úÖ M√∫sica removida da lista de importa√ß√£o"))},Re=(s,a,r="")=>E(null,null,function*(){try{console.warn("üß† Gerando descri√ß√£o inteligente pour:",r||"m√∫sica");const o=ws(s),p=Ns(a),T=ys(o,s),re=ks(o,s),D=Ss(o,p,T,re);return console.warn("‚úÖ Descri√ß√£o inteligente gerada:",D),D}catch(o){return console.error("‚ùå Erro ao gerar descri√ß√£o inteligente:",o),"Erro ao gerar descri√ß√£o autom√°tica."}}),ws=s=>{if(!s||!s.trim())return"m√∫sica";const a=s.toLowerCase();return a.includes("moraes")&&a.includes("banco")&&a.includes("dindim")?"confiss√µes banc√°rias de Moraes":a.includes("uber")&&(a.includes("golpe")||a.includes("mentira")||a.includes("fictivo")||a.includes("sumiu"))?"golpe uber e fraude no transporte":a.includes("uber")&&(a.includes("mapa")||a.includes("app")||a.includes("tv"))?"sistema uber corrompido e fraude":a.includes("moraes")||a.includes("stf")||a.includes("supremo")?a.includes("banco")||a.includes("dindim")||a.includes("congelou")?"confiss√µes banc√°rias e justi√ßa":"pol√≠tica e justi√ßa":a.includes("trump")||a.includes("lei manisky")||a.includes("magnitsky")||a.includes("san√ß√µes")?"san√ß√µes internacionais e pol√≠tica":a.includes("corrup√ß√£o")||a.includes("bancos")||a.includes("dinheiro")||a.includes("dindim")?a.includes("gringos")||a.includes("tio sam")?"corrup√ß√£o banc√°ria e press√£o internacional":"corrup√ß√£o e finan√ßas":a.includes("uber")||a.includes("taxi")||a.includes("transporte")?a.includes("fraude")||a.includes("golpe")||a.includes("mentira")?"fraude no sistema de transporte":"tecnologia e transporte":a.includes("amor")||a.includes("cora√ß√£o")||a.includes("sentimento")?"amor e relacionamentos":a.includes("festa")||a.includes("dan√ßa")||a.includes("celebra√ß√£o")?"festa e celebra√ß√£o":a.includes("trabalho")||a.includes("vida")||a.includes("cotidiano")?"vida cotidiana":a.includes("m√∫sica")||a.includes("ritmo")||a.includes("som")?"arte e m√∫sica":"m√∫sica"},Ns=s=>{if(!s)return"momento atual";try{const a=new Date(s),o=Math.floor((new Date-a)/(1e3*60*60*24));return o===0?"hoje":o===1?"ontem":o<=7?"esta semana":o<=30?"este m√™s":o<=90?"este trimestre":o<=365?"este ano":"per√≠odo anterior"}catch(a){return"momento atual"}},ys=(s,a)=>{const r=a.toLowerCase();switch(s){case"confiss√µes banc√°rias de Moraes":return"expondo a press√£o internacional sobre o sistema banc√°rio brasileiro";case"confiss√µes banc√°rias e justi√ßa":return r.includes("lei manisky")||r.includes("magnitsky")?"mostrando como a Lei Magnitsky afeta as contas banc√°rias no Brasil":"revelando a interfer√™ncia externa no sistema financeiro brasileiro";case"san√ß√µes internacionais e pol√≠tica":return r.includes("lei manisky")||r.includes("magnitsky")?"demonstrando o impacto da Lei Magnitsky nas rela√ß√µes Brasil-EUA":"afetando as rela√ß√µes diplom√°ticas internacionais";case"golpe uber e fraude no transporte":return"expondo a fraude no sistema de transporte do Rio de Janeiro";case"sistema uber corrompido e fraude":return r.includes("conductores fictivos")||r.includes("fictivo")?"revelando a cria√ß√£o de conductores fictivos para roubar a Uber":"mostrando como o sistema Uber foi corrompido e roubado";case"fraude no sistema de transporte":return r.includes("uber")?"afetando o servi√ßo de transporte por aplicativo no Rio":"impactando o sistema de transporte p√∫blico";case"tecnologia e transporte":return r.includes("fraude")||r.includes("golpe")?"revelando falhas de seguran√ßa na tecnologia de transporte":"impactando a inova√ß√£o tecnol√≥gica no transporte";case"corrup√ß√£o banc√°ria e press√£o internacional":return r.includes("gringos")&&r.includes("tio sam")?"mostrando como os EUA pressionam os bancos brasileiros":"revelando a press√£o externa sobre o sistema banc√°rio";case"corrup√ß√£o e finan√ßas":return r.includes("bancos")&&r.includes("dinheiro")?"afetando o sistema financeiro brasileiro":"impactando a economia nacional";case"pol√≠tica e justi√ßa":return r.includes("moraes")&&r.includes("stf")?"afetando o sistema judici√°rio brasileiro":"impactando a pol√≠tica nacional";case"amor e relacionamentos":return"tocando o cora√ß√£o das pessoas";case"festa e celebra√ß√£o":return"animando as celebra√ß√µes";default:return"influenciando a cultura musical"}},ks=(s,a)=>{const r=a.toLowerCase();return s.includes("confiss√µes banc√°rias")?r.includes("lei manisky")||r.includes("magnitsky")?"Lei Magnitsky, press√£o internacional e sistema banc√°rio brasileiro":r.includes("gringos")||r.includes("tio sam")?"press√£o dos EUA sobre bancos brasileiros e interfer√™ncia externa":"sistema banc√°rio brasileiro, press√£o internacional e justi√ßa":s.includes("golpe uber")||s.includes("sistema uber corrompido")?r.includes("conductores fictivos")||r.includes("fictivo")?"Golpe Uber no Rio, conductores fictivos e fraude no sistema de transporte":r.includes("mapa")&&r.includes("mentira")?"sistema Uber corrompido, mapas falsos e fraude no transporte":"Golpe Uber, fraude no sistema de transporte e corrup√ß√£o tecnol√≥gica":s.includes("fraude no sistema de transporte")?r.includes("uber")?"fraude no Uber, sistema de transporte corrompido e tecnologia":"corrup√ß√£o no sistema de transporte e falhas de seguran√ßa":s.includes("san√ß√µes internacionais")?r.includes("lei manisky")||r.includes("magnitsky")?"Lei Magnitsky, rela√ß√µes Brasil-EUA e impacto nas contas banc√°rias":"san√ß√µes internacionais e impacto na pol√≠tica brasileira":s.includes("pol√≠tica")||s.includes("corrup√ß√£o")?r.includes("bancos")||r.includes("dindim")?"corrup√ß√£o banc√°ria, press√£o internacional e sistema financeiro":"pol√≠tica, corrup√ß√£o e impacto das san√ß√µes internacionais":s.includes("amor")?"romance e sentimentos humanos":r.includes("festa")?"celebra√ß√£o e alegria":s.includes("vida")?"reflex√µes sobre a vida cotidiana":"cultura e express√£o musical"},Ss=(s,a,r,o)=>{let p=`Uma m√∫sica sobre ${s}`;return a&&a!=="momento atual"&&(p+=`, criada ${a}`),r&&(p+=`. ${r.charAt(0).toUpperCase()+r.slice(1)}`),o&&o!=="cultura e express√£o musical"&&(p+=`. √â sobre ${o}`),p},Ts=()=>E(null,null,function*(){if(!t||!t.lyrics||!t.lyrics.trim()){x("error","‚ùå Adicione letras primeiro para gerar uma descri√ß√£o");return}ge(!0);try{const s=yield Re(t.lyrics,t.release_date||t.tiktok_publication_date,t.title);R("description",s),x("success","‚úÖ Descri√ß√£o gerada automaticamente!")}catch(s){console.error("Erro ao gerar descri√ß√£o:",s),x("error","‚ùå Erro ao gerar descri√ß√£o autom√°tica")}finally{ge(!1)}}),_s=()=>E(null,null,function*(){if(!l.lyrics||!l.lyrics.trim()){x("error","‚ùå Adicione letras primeiro para gerar uma descri√ß√£o");return}ge(!0);try{const s=yield Re(l.lyrics,l.release_date||l.tiktok_publication_date,l.title);u(N(g({},l),{description:s})),x("success","‚úÖ Descri√ß√£o gerada automaticamente!")}catch(s){console.error("Erro ao gerar descri√ß√£o:",s),x("error","‚ùå Erro ao gerar descri√ß√£o autom√°tica")}finally{ge(!1)}}),Ee=()=>{const s=new Date;let a;s.getDay()===1?a=7:s.getDay()===0?a=1:a=(8-s.getDay())%7;const r=new Date(s);if(r.setDate(s.getDate()+a),r.getDay()!==1){console.error("Erro na fun√ß√£o getNextMonday: data n√£o √© segunda-feira");const o=new Date(s);return o.setDate(s.getDate()+(8-s.getDay())%7),o.toISOString().split("T")[0]}return r.toISOString().split("T")[0]},Cs=()=>{const s=new Date().toISOString().split("T")[0];m({title:"",artist:"A M√∫sica da Segunda",description:"",lyrics:"",release_date:s,status:"draft",tiktok_video_id:"",tiktok_url:"",tiktok_publication_date:s,spotify_url:"",apple_music_url:"",youtube_url:"",cover_image:"",hashtags:[]}),console.warn("üìù Cr√©ation d'une nouvelle chanson en mode brouillon"),j(!0),v(!1)},Es=s=>{console.warn("üîß Editando m√∫sica:",s);try{m(g({},s)),j(!0),v(!0),console.warn("‚úÖ Estado de edi√ß√£o configurado com sucesso")}catch(a){console.error("‚ùå Erro ao configurar edi√ß√£o:",a),x("error","Erro ao abrir edi√ß√£o da m√∫sica")}},Ds=s=>E(null,null,function*(){if(window.confirm("Tem certeza que deseja deletar esta m√∫sica?"))try{yield K.delete(s),x("success","M√∫sica deletada com sucesso!"),J()}catch(a){x("error","Erro ao deletar m√∫sica")}}),Ms=s=>E(null,null,function*(){var re,D,be,fe,$e,Ve,Ue,ze;s.preventDefault(),console.warn("üöÄ handleSubmit appel√© - d√©but de la fonction");const a=N(g({},t),{title:Ne(((re=t.title)==null?void 0:re.trim())||""),artist:Ne(((D=t.artist)==null?void 0:D.trim())||"A M√∫sica da Segunda"),description:Ne(((be=t.description)==null?void 0:be.trim())||""),lyrics:Ne(((fe=t.lyrics)==null?void 0:fe.trim())||""),tiktok_url:t.tiktok_url?ce(t.tiktok_url.trim()):"",youtube_url:t.youtube_url?ce(t.youtube_url.trim()):"",youtube_music_url:t.youtube_music_url?ce(t.youtube_music_url.trim()):"",spotify_url:t.spotify_url?ce(t.spotify_url.trim()):"",apple_music_url:t.apple_music_url?ce(t.apple_music_url.trim()):""}),r=Qs(Xs,a);if(!r.success){x("error",`‚ùå Erro de valida√ß√£o: ${r.error}`);return}if(!a.title||a.title.trim()===""){x("error","‚ùå O t√≠tulo √© obrigat√≥rio!");return}if(!a.release_date){x("error","‚ùå A data de lan√ßamento √© obrigat√≥ria!");return}t.tiktok_url&&t.tiktok_url.trim()!==""&&(!t.tiktok_video_id||t.tiktok_video_id.trim()==="")&&x("warning",'‚ö†Ô∏è Link TikTok preenchido mas ID n√£o extra√≠do. Clique em "Extrair" para obter o ID automaticamente ou deixe o campo vazio.'),(!t.tiktok_url||t.tiktok_url.trim()==="")&&(t.status="draft",console.warn("üìù Aucun TikTok fourni, chanson sauvegard√©e en mode brouillon"));const o=N(g({},r.data),{status:r.data.status||"draft"}),p=w=>w?new Date(w).toISOString().slice(0,10):null,T=N(g({},o),{release_date:p(($e=o.release_date)!=null?$e:null),tiktok_publication_date:p((Ve=o.tiktok_publication_date)!=null?Ve:null),hashtags:Array.isArray(o.hashtags)?o.hashtags:[],title:String(o.title||""),artist:String(o.artist||""),description:String(o.description||""),lyrics:String(o.lyrics||""),tiktok_url:String(o.tiktok_url||""),tiktok_video_id:String(o.tiktok_video_id||""),status:String(o.status),spotify_url:o.spotify_url||null,apple_music_url:o.apple_music_url||null,youtube_url:o.youtube_url||null,cover_image:o.cover_image||null});delete T.id,delete T.created_at,delete T.updated_at,console.warn("üîç songToSave apr√®s nettoyage:",T),console.warn("üîç Cl√©s de songToSave:",Object.keys(T)),console.warn("üîç songToSave contient-il un ID?","id"in T),console.warn("üîç Description longueur:",((Ue=T.description)==null?void 0:Ue.length)||0),console.warn("üîç Description preview:",((ze=T.description)==null?void 0:ze.substring(0,100))+"..."),console.warn("üìã Donn√©es √† sauvegarder:",o),console.warn("üÜî ID de la chanson:",t.id),console.warn("‚úèÔ∏è Mode √©dition:",f);try{if(console.warn("üíæ Tentative de sauvegarde:",{isEditing:f,songData:o}),console.warn("üÜî ID de la chanson √† modifier:",t.id),console.warn("üìä Type de l'ID:",typeof t.id),f){console.warn("üîÑ D√©but de la mise √† jour...");try{const w=yield K.update(t.id,T);console.warn("‚úÖ Mise √† jour r√©ussie:",w),x("success","‚úÖ M√∫sica atualizada com sucesso!"),console.warn("üîÑ Fermeture du formulaire et rechargement..."),console.warn("üîÑ setShowForm(false) appel√©"),j(!1),console.warn("üîÑ setEditingSong(null) appel√©"),m(null),console.warn("üîÑ loadSongs() appel√© pour recharger les donn√©es..."),yield J(),console.warn("‚úÖ Rechargement termin√© - fen√™tre ferm√©e")}catch(w){console.error("[Admin][Update][Failed]",w),x("error",`‚ùå √âchec mise √† jour: ${w.message||w}`);return}}else{console.warn("üîÑ D√©but de la cr√©ation...");try{const w=yield K.create(T);if(console.warn("‚úÖ Cr√©ation r√©ussie:",w),!w||!w.id)throw new Error("La chanson n'a pas √©t√© sauvegard√©e (pas d'ID retourn√©)");x("success","‚úÖ M√∫sica criada com sucesso!"),ia({title:"Nouvelle Chanson ! üé∂",body:`"${T.title||"Nova m√∫sica"}" est maintenant disponible !`,icon:T.cover_image||"/icons/pwa/icon-192x192.png",url:T.slug?`/chansons/${T.slug}`:"/"}).then(I=>{I.success?(console.warn(`‚úÖ Notifications envoy√©es: ${I.sent||0} sur ${I.total||0} abonn√©s`),I.sent>0&&x("success",`üì¢ ${I.sent} notification${I.sent>1?"s":""} envoy√©e${I.sent>1?"s":""} !`)):console.error("‚ùå Erreur envoi notifications:",I.error)}).catch(I=>{console.error("Erreur envoi notifications:",I)}),console.warn("üîÑ Fermeture du formulaire et rechargement..."),j(!1),m(null),yield J(),console.warn("‚úÖ Rechargement termin√© - fen√™tre ferm√©e")}catch(w){console.error("[Admin][Create][Failed]",w),console.error("[Admin][Create][Failed] Full error:",JSON.stringify(w,null,2)),x("error",`‚ùå √âchec cr√©ation: ${w.message||w}`);return}}}catch(w){console.error("‚ùå Erro detalhado ao salvar:",w);let I="Erro desconhecido";w.message&&(w.message.includes("duplicate key")?I="‚ùå Erro: J√° existe uma m√∫sica com este ID do TikTok":w.message.includes("permission denied")?I="‚ùå Erro: Sem permiss√£o para salvar (verifique a conex√£o)":w.message.includes("network")?I="‚ùå Erro: Problema de conex√£o. Tente novamente.":I=`‚ùå Erro ao salvar: ${w.message}`),x("error",I),console.warn("üîÑ Fermeture de la fen√™tre apr√®s erreur..."),setTimeout(()=>{j(!1),m(null),console.warn("‚úÖ Fen√™tre ferm√©e apr√®s erreur")},2e3)}}),R=(s,a)=>{if(console.warn(`üîÑ Modification du champ ${s}:`,a),s==="tiktok_url"){const r=a.replace(/<[^>]*>/g,"").replace(/on>.*?<\/blockquote>/g,"").replace(/<script[^>]*>.*?<\/script>/g,"").replace(/https:\/\/www\.tiktok\.com\/embed\.js/g,"").trim();console.warn(`üßπ Valeur nettoy√©e pour ${s}:`,r),m(o=>{const p=N(g({},o),{[s]:r});return console.warn("üìù √âtat de chanson mis √† jour:",p),p})}else m(r=>{const o=N(g({},r),{[s]:a});return console.warn("üìù √âtat de chanson mis √† jour:",o),o})},Is=s=>{const a=s.split(",").map(r=>r.trim()).filter(r=>r);R("hashtags",a)},x=(s,a)=>{_({type:s,text:a}),L(!0),setTimeout(()=>L(!1),s==="warning"?7e3:5e3)},As=()=>{const s={songs:c,albums:[]},a=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),r=URL.createObjectURL(a),o=document.createElement("a");o.href=r,o.download=`musica-da-segunda-${new Date().toISOString().split("T")[0]}.json`,o.click(),URL.revokeObjectURL(r),x("success","Dados exportados com sucesso!")},Ls=()=>{window.confirm("‚ö†Ô∏è ATEN√á√ÉO: Isso apagar√° TODOS os dados! Tem certeza?")&&(console.warn("Nettoyage des donn√©es"),J(),x("success","Todos os dados foram apagados"))},Ps=()=>E(null,null,function*(){x("info","üîÑ Migration non disponible dans cette version")}),Rs=()=>E(null,null,function*(){x("info","üîÑ V√©rification non disponible dans cette version")}),$s=()=>E(null,null,function*(){x("info","üîÑ Restauration non disponible dans cette version")});return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-3 sm:p-5",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"lg:hidden text-center mb-6 sm:mb-8",children:e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden border-4 border-blue-200 shadow-xl flex-shrink-0",children:e.jsx("img",{src:"images/Musica da segunda.jpg",alt:"Logo M√∫sica da Segunda",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h1",{className:"text-xl sm:text-3xl md:text-4xl font-black text-blue-900 mb-1",children:"üéµ Admin Panel - M√∫sica da Segunda"}),e.jsx("p",{className:"text-blue-700 text-sm sm:text-base",children:"Gerencie suas m√∫sicas e conte√∫do localmente"})]})]})}),M&&e.jsx("div",{className:`mb-6 p-4 rounded-lg ${C.type==="success"?"bg-green-100 text-green-800":C.type==="warning"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:C.text}),e.jsxs("div",{className:"bg-white rounded-xl p-4 sm:p-6 mb-4 sm:mb-6 shadow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-4",children:[e.jsxs(h,{onClick:Cs,className:"bg-green-600 hover:bg-green-700 w-full sm:w-auto",children:[e.jsx(Fs,{className:"w-4 h-4 mr-2"}),"Nova M√∫sica"]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsxs(h,{onClick:As,variant:"outline",className:"flex-1 sm:flex-none",children:[e.jsx(He,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Exportar"}),e.jsx("span",{className:"sm:hidden",children:"Export"})]}),e.jsxs(h,{onClick:hs,variant:"outline",className:"flex-1 sm:flex-none",children:[e.jsx(Ge,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Importar Perfil TikTok"}),e.jsx("span",{className:"sm:hidden",children:"Perfil"})]})]})]}),e.jsxs("div",{className:"flex gap-2 sm:gap-3 justify-center sm:justify-end items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600 bg-gray-100 px-3 py-1 rounded-full",children:["üìä ",c.length," chanson",c.length>1?"s":""," charg√©e",c.length>1?"s":""]}),e.jsxs(h,{onClick:J,variant:"outline",size:"sm",className:"flex-1 sm:flex-none",children:[e.jsx(le,{className:"w-4 h-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Atualizar"}),e.jsx("span",{className:"sm:hidden",children:"Atual"})]}),e.jsxs(h,{onClick:Ls,variant:"outline",size:"sm",className:"text-red-600 border-red-300 flex-1 sm:flex-none",children:[e.jsx(De,{className:"w-4 h-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Limpar Tudo"}),e.jsx("span",{className:"sm:hidden",children:"Limpar"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-100 rounded-xl p-4 sm:p-6 mb-4 sm:mb-6 shadow-lg border-2 border-blue-200",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-blue-900 flex items-center gap-2",children:"‚òÅÔ∏è Supabase Cloud Database"}),e.jsxs("p",{className:"text-blue-700 text-sm",children:["Mode actuel: ",e.jsx("span",{className:"font-semibold text-green-600",children:"‚òÅÔ∏è Cloud (Supabase)"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(h,{onClick:Ps,disabled:oe,className:"bg-blue-600 hover:bg-blue-700 text-white",size:"sm",children:[oe?e.jsx(le,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(Bs,{className:"w-4 h-4 mr-2"}),oe?"Migrando...":"Migrar para Supabase"]}),e.jsxs(h,{onClick:Rs,variant:"outline",size:"sm",className:"border-blue-300 text-blue-700 hover:bg-blue-50",children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Verificar"]})]})]}),Q&&e.jsx("div",{className:"bg-blue-100 border border-blue-300 rounded-lg p-3 mb-3",children:e.jsxs("p",{className:"text-blue-800 text-sm font-medium",children:["üìä ",Q]})}),e.jsxs("div",{className:"bg-green-100 border border-green-300 rounded-lg p-3 mb-3",children:[e.jsxs("p",{className:"text-green-800 text-sm font-medium",children:["üíæ Donn√©es charg√©es depuis: ",e.jsx("span",{className:"font-bold",children:"‚òÅÔ∏è Supabase"})]}),e.jsx("p",{className:"text-green-700 text-xs mt-1",children:c.length>0?`${c.length} chanson(s) disponible(s)`:"Aucune chanson charg√©e"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsxs(h,{onClick:$s,variant:"outline",size:"sm",className:"border-purple-300 text-purple-700 hover:bg-purple-50",children:[e.jsx(He,{className:"w-4 h-4 mr-2"}),"Restaurar do Supabase"]})}),e.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-blue-800 text-sm",children:["‚úÖ ",e.jsx("strong",{children:"Mode Supabase activ√©:"})," Toutes les donn√©es sont synchronis√©es avec la base de donn√©es cloud."]})})]}),e.jsx("div",{className:"bg-white rounded-xl p-4 sm:p-6 mb-4 sm:mb-6 shadow-lg",children:e.jsxs("div",{className:"relative",children:[e.jsx(qs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx(y,{placeholder:"Buscar m√∫sicas...",value:n,onChange:s=>xs(s.target.value),className:"pl-10 text-sm sm:text-base"})]})}),e.jsx("div",{className:"grid gap-4",children:c.map(s=>e.jsx(Le,{className:"shadow-lg",children:e.jsx(us,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(ms,{className:"text-lg sm:text-xl text-blue-900 mb-2",children:s.title}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsxs(Ie,{variant:"secondary",className:"bg-blue-100 text-blue-800 text-xs sm:text-sm",children:[e.jsx(we,{className:"w-3 h-3 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:s.artist}),e.jsx("span",{className:"sm:hidden",children:"A M√∫sica da Segunda"})]}),e.jsxs(Ie,{variant:s.status==="published"?"default":"secondary",className:"text-xs sm:text-sm",children:[e.jsx("span",{className:"hidden sm:inline",children:s.status}),e.jsx("span",{className:"sm:hidden",children:s.status==="published"?"Pub":"Rasc"})]}),e.jsxs(Ie,{variant:"outline",className:"text-xs sm:text-sm",children:[e.jsx(Ye,{className:"w-3 h-3 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:Z(ye(s.release_date),"dd/MM/yyyy",{locale:W})}),e.jsx("span",{className:"sm:hidden",children:Z(ye(s.release_date),"dd/MM",{locale:W})})]})]}),s.description&&e.jsx("p",{className:"text-gray-600 text-xs sm:text-sm line-clamp-2",children:s.description})]}),e.jsxs("div",{className:"flex gap-2 justify-center sm:justify-end",children:[e.jsxs(h,{onClick:()=>Es(s),size:"sm",variant:"outline",className:"flex-1 sm:flex-none",children:[e.jsx(Je,{className:"w-4 h-4"}),e.jsx("span",{className:"ml-1 sm:hidden",children:"Editar"})]}),e.jsxs(h,{onClick:()=>Ds(s.id),size:"sm",variant:"outline",className:"text-red-600 flex-1 sm:flex-none",children:[e.jsx(De,{className:"w-4 h-4"}),e.jsx("span",{className:"ml-1 sm:hidden",children:"Excluir"})]})]})]})})},s.id))}),c.length===0&&e.jsxs("div",{className:"text-center py-8 sm:py-12",children:[e.jsx(we,{className:"w-12 h-12 sm:w-16 sm:h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-600 mb-2",children:"Nenhuma m√∫sica encontrada"}),e.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:n?"Tente uma busca diferente":"Crie sua primeira m√∫sica!"})]}),k&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:f?"Editar M√∫sica":"Nova M√∫sica"}),e.jsx(h,{onClick:()=>j(!1),variant:"ghost",size:"sm",children:e.jsx(ne,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:Ms,className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 rounded-xl p-6 border-2 border-red-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-red-900 mb-4 flex items-center gap-2",children:[e.jsx(Hs,{className:"w-5 h-5 text-red-600"}),"üé¨ Link da V√≠deo YouTube *"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL da V√≠deo YouTube * (Obrigat√≥rio)"}),e.jsx(y,{value:t.youtube_url,onChange:s=>R("youtube_url",s.target.value),placeholder:"https://www.youtube.com/watch?v=VIDEO_ID ou https://youtube.com/shorts/VIDEO_ID",type:"url",required:!0}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsx("p",{className:"text-xs text-gray-500",children:e.jsx("strong",{children:"Formatos aceitos:"})}),e.jsxs("ul",{className:"text-xs text-gray-500 space-y-1 ml-2",children:[e.jsx("li",{children:"‚Ä¢ https://www.youtube.com/watch?v=VIDEO_ID"}),e.jsx("li",{children:"‚Ä¢ https://youtube.com/shorts/VIDEO_ID"}),e.jsx("li",{children:"‚Ä¢ https://youtu.be/VIDEO_ID"}),e.jsx("li",{children:"‚Ä¢ https://music.youtube.com/watch?v=VIDEO_ID"})]}),e.jsxs("p",{className:"text-xs text-red-600 font-medium mt-2",children:["‚ú® ",e.jsx("strong",{children:"Dica:"})," Para v√≠deos verticais (9:16), use YouTube Shorts!"]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(h,{type:"button",variant:"outline",onClick:()=>window.open(t.youtube_url,"_blank"),disabled:!t.youtube_url,className:"flex-1",children:[e.jsx(de,{className:"w-4 h-4 mr-2"}),"Abrir YouTube"]})})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-6 border-2 border-green-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-green-900 mb-4 flex items-center gap-2",children:[e.jsx(we,{className:"w-5 h-5 text-green-600"}),"üéµ Informa√ß√µes da M√∫sica"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["T√≠tulo * ",t.tiktok_video_id&&t.title&&t.title!==`M√∫sica da Segunda - ${Z(new Date,"dd/MM/yyyy",{locale:W})}`&&e.jsx("span",{className:"text-green-600",children:"‚úÖ"})]}),e.jsx(y,{value:t.title,onChange:s=>R("title",s.target.value),required:!0,placeholder:"T√≠tulo da m√∫sica",className:t.tiktok_video_id&&t.title&&t.title!==`M√∫sica da Segunda - ${Z(new Date,"dd/MM/yyyy",{locale:W})}`?"border-green-300 bg-green-50":""}),t.tiktok_video_id&&t.title&&t.title!==`M√∫sica da Segunda - ${Z(new Date,"dd/MM/yyyy",{locale:W})}`&&e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"‚úÖ T√≠tulo extra√≠do do TikTok"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Artista"}),e.jsx(y,{value:t.artist,onChange:s=>R("artist",s.target.value),placeholder:"Nome do artista"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center justify-between",children:[e.jsx("span",{children:"Descri√ß√£o"}),t&&t.lyrics&&t.lyrics.trim()&&e.jsxs(h,{type:"button",onClick:()=>Ts(),variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-800 hover:bg-blue-50",disabled:pe,children:[e.jsx(Ke,{className:"w-4 h-4 mr-1"}),pe?"Gerando...":"Sugerir"]})]}),e.jsx(ue,{value:t.description,onChange:s=>R("description",s.target.value),placeholder:"Descri√ß√£o da m√∫sica",rows:3})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Letra"}),e.jsx(ue,{value:t.lyrics,onChange:s=>R("lyrics",s.target.value),placeholder:"Letra da m√∫sica",rows:6})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Lan√ßamento *"}),e.jsx(y,{type:"date",value:t.release_date,onChange:s=>R("release_date",s.target.value),required:!0}),t.release_date&&e.jsx("div",{className:"mt-1 text-xs",children:e.jsxs("span",{className:"text-blue-600",children:["üìÖ Data selecionada: ",Z(ye(t.release_date),"EEEE, d 'de' MMMM 'de' yyyy",{locale:W})]})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Dica: Use o bot√£o "Extrair" do TikTok para definir automaticamente a pr√≥xima segunda-feira, ou escolha qualquer data manualmente'})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs(as,{value:t.status,onValueChange:s=>R("status",s),children:[e.jsx(ts,{children:e.jsx(rs,{})}),e.jsxs(is,{children:[e.jsx(X,{value:"draft",children:"Rascunho"}),e.jsx(X,{value:"scheduled",children:"Agendado"}),e.jsx(X,{value:"published",children:"Publicado"}),e.jsx(X,{value:"archived",children:"Arquivado"})]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 border-2 border-purple-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-purple-900 mb-4 flex items-center gap-2",children:[e.jsx(Qe,{className:"w-5 h-5 text-purple-600"}),"üéß Links de Streaming"]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx(Se,{className:"mb-2 font-semibold text-gray-700",children:"Spotify"}),e.jsx(y,{type:"url",name:"spotify_url",value:t.spotify_url,onChange:s=>R("spotify_url",s.target.value),placeholder:"URL Spotify",className:"transition-colors duration-200 ease-in-out focus:border-blue-500 focus:ring-2 focus:ring-blue-200"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(Se,{className:"mb-2 font-semibold text-gray-700",children:"Apple Music"}),e.jsx(y,{type:"url",name:"apple_music_url",value:t.apple_music_url,onChange:s=>R("apple_music_url",s.target.value),placeholder:"URL Apple Music",className:"transition-colors duration-200 ease-in-out focus:border-blue-500 focus:ring-2 focus:ring-blue-200"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(Se,{className:"mb-2 font-semibold text-gray-700",children:"YouTube"}),e.jsx(y,{type:"url",name:"youtube_music_url",value:t.youtube_music_url||"",onChange:s=>R("youtube_music_url",s.target.value),placeholder:"URL YouTube Music",className:"transition-colors duration-200 ease-in-out focus:border-blue-500 focus:ring-2 focus:ring-blue-200"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl p-6 border-2 border-orange-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-orange-900 mb-4 flex items-center gap-2",children:[e.jsx(Xe,{className:"w-5 h-5 text-orange-600"}),"üè∑Ô∏è M√©tadados"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hashtags (separados por v√≠rgula)"}),e.jsx(y,{value:t.hashtags.join(", "),onChange:s=>Is(s.target.value),placeholder:"humor, musica, trending, novidade"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Exemplo: humor, musica, trending, novidade, viral"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagem de Capa (URL)"}),e.jsx(y,{value:t.cover_image,onChange:s=>R("cover_image",s.target.value),placeholder:"https://exemplo.com/imagem.jpg",type:"url"})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t-2 border-gray-200",children:[e.jsxs(h,{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-lg py-3",children:[e.jsx(Me,{className:"w-5 h-5 mr-2"}),f?"Atualizar M√∫sica":"Criar Nova M√∫sica"]}),e.jsx(h,{type:"button",variant:"outline",onClick:()=>j(!1),className:"flex-1 text-lg py-3",children:"Cancelar"})]})]})]})})}),$&&t.tiktok_video_id&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"üé¨ Visualizar V√≠deo TikTok"}),e.jsx(h,{onClick:()=>P(!1),variant:"ghost",size:"sm",children:e.jsx(ne,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:t.title||"V√≠deo TikTok"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["ID: ",t.tiktok_video_id]})]}),e.jsx("div",{className:"bg-black rounded-lg overflow-hidden",children:e.jsx(ta,{postId:t.tiktok_video_id,className:"w-full",song:t})}),e.jsx("div",{className:"text-center",children:e.jsxs(h,{onClick:()=>window.open(t.tiktok_url,"_blank"),className:"bg-red-500 hover:bg-red-600 text-white",children:[e.jsx(de,{className:"w-4 h-4 mr-2"}),"Abrir no TikTok"]})})]})]})})}),Te&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"üì• Importar Perfil TikTok"}),e.jsx(h,{onClick:()=>F(!1),variant:"ghost",size:"sm",children:e.jsx(ne,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-blue-800 text-sm",children:[e.jsx("strong",{children:"üí° Dica:"})," Cole o link do perfil TikTok para importar todas as v√≠deos de uma vez!"]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link do Perfil TikTok"}),e.jsx(y,{value:V,onChange:s=>B(s.target.value),placeholder:"https://www.tiktok.com/@amusicadasegunda",className:"w-full"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Exemplo: https://www.tiktok.com/@amusicadasegunda"})]}),A&&e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Importando v√≠deos..."}),e.jsxs("span",{className:"text-sm text-gray-500",children:[U.current," / ",U.total]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${U.current/U.total*100}%`}})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs(h,{onClick:ps,disabled:A||!V.trim(),className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[A?e.jsx(le,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(Ge,{className:"w-4 h-4 mr-2"}),A?"Analisando...":"Analisar Perfil"]}),e.jsx(h,{onClick:()=>F(!1),variant:"outline",className:"flex-1",children:"Cancelar"})]})]})]})})}),S&&S.length>0&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-green-900",children:["üìã Revisar M√∫sicas Importadas (",S.length,")"]}),e.jsx(h,{onClick:()=>G([]),variant:"ghost",size:"sm",children:e.jsx(ne,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-green-800 text-sm",children:[e.jsx("strong",{children:"‚úÖ Sucesso!"})," ",S.length," m√∫sicas foram importadas do perfil TikTok. Revise os detalhes e publique todas de uma vez no Supabase."]})}),e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:S.map((s,a)=>e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-2",children:[a+1,". ",s.title]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Artista:"})," ",s.artist]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Data Lan√ßamento:"})," ",new Date(s.release_date).toLocaleDateString("pt-BR")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Data TikTok:"})," ",new Date(s.tiktok_publication_date).toLocaleDateString("pt-BR")]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Hashtags:"})," ",s.hashtags.join(", ")]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"text-gray-600",children:"Descri√ß√£o:"})," ",s.description]})]}),e.jsxs("div",{className:"ml-4 flex gap-2",children:[e.jsxs(h,{onClick:()=>fs(s),variant:"outline",size:"sm",className:"text-blue-600 border-blue-300 hover:bg-blue-50",children:[e.jsx(Je,{className:"w-4 h-4 mr-1"}),"Editar"]}),e.jsxs(h,{onClick:()=>window.open(s.tiktok_url,"_blank"),variant:"outline",size:"sm",className:"text-red-600 border-red-300 hover:bg-red-50",children:[e.jsx(de,{className:"w-4 h-4 mr-1"}),"Ver TikTok"]}),e.jsxs(h,{onClick:()=>vs(s.id),variant:"outline",size:"sm",className:"text-red-600 border-red-300 hover:bg-red-50",children:[e.jsx(De,{className:"w-4 h-4 mr-1"}),"Excluir"]})]})]})},s.id))}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t-2 border-gray-200",children:[e.jsxs(h,{onClick:bs,disabled:A,className:"flex-1 bg-green-600 hover:bg-green-700 text-lg py-3",children:[A?e.jsx(le,{className:"w-5 h-5 mr-2 animate-spin"}):e.jsx(Me,{className:"w-5 h-5 mr-2"}),A?"Publicando...":"Publier"]}),e.jsx(h,{onClick:()=>G([]),variant:"outline",className:"flex-1 text-lg py-3",children:"Cancelar"})]}),A&&e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Publicando m√∫sicas..."}),e.jsxs("span",{className:"text-sm text-gray-500",children:[U.current," / ",U.total]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${U.current/U.total*100}%`}})})]})]})]})})}),Ce&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"‚úèÔ∏è Editar M√∫sica Importada do TikTok"}),e.jsx(h,{onClick:()=>he(!1),variant:"ghost",size:"sm",children:e.jsx(ne,{className:"w-5 h-5"})})]}),e.jsx("form",{onSubmit:s=>{s.preventDefault(),js()},children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-100 rounded-xl p-6 border-2 border-blue-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-blue-900 mb-4 flex items-center gap-2",children:[e.jsx(ns,{className:"w-5 h-5 text-blue-600"}),"üì± Informa√ß√µes TikTok (Obrigat√≥rio)"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link da V√≠deo TikTok*"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{value:l.tiktok_url,onChange:s=>u(N(g({},l),{tiktok_url:s.target.value})),placeholder:"https://www.tiktok.com/@usuario/video/1234567890",className:"flex-1"}),e.jsxs(h,{type:"button",onClick:()=>window.open(l.tiktok_url,"_blank"),variant:"outline",className:"text-blue-600 border-blue-300 hover:bg-blue-50",children:[e.jsx(de,{className:"w-4 h-4 mr-2"}),"Abrir TikTok"]})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[e.jsx("p",{className:"font-medium mb-1",children:"Formatos aceitos:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"https://www.tiktok.com/@usuario/video/ID"}),e.jsx("li",{children:"https://vm.tiktok.com/ID"}),e.jsx("li",{children:"ID direto (15-20 d√≠gitos)"})]})]}),e.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(cs,{className:"w-4 h-4 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-xs text-yellow-800",children:[e.jsx("p",{className:"font-medium",children:"IMPORTANT:"}),e.jsx("p",{children:"Cole apenas o link da v√≠deo TikTok (ex: https://www.tiktok.com/@usuario/video/1234567890), N√ÉO o c√≥digo HTML de incorpora√ß√£o!"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ID da V√≠deo TikTok"}),e.jsx(y,{value:l.tiktok_video_id,onChange:s=>u(N(g({},l),{tiktok_video_id:s.target.value})),placeholder:"ID da v√≠deo"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Publica√ß√£o TikTok"}),e.jsx(y,{type:"datetime-local",value:l.tiktok_publication_date?l.tiktok_publication_date.slice(0,16):"",onChange:s=>u(N(g({},l),{tiktok_publication_date:s.target.value}))})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-100 rounded-xl p-6 border-2 border-green-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-green-900 mb-4 flex items-center gap-2",children:[e.jsx(we,{className:"w-5 h-5 text-green-600"}),"üéµ M√©tadados Extra√≠dos do TikTok"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T√≠tulo*"}),e.jsx(y,{value:l.title,onChange:s=>u(N(g({},l),{title:s.target.value})),placeholder:"T√≠tulo da m√∫sica"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Artista*"}),e.jsx(y,{value:l.artist,onChange:s=>u(N(g({},l),{artist:s.target.value})),placeholder:"Nome do artista"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center justify-between",children:[e.jsx("span",{children:"Descri√ß√£o"}),l&&l.lyrics&&l.lyrics.trim()&&e.jsxs(h,{type:"button",onClick:()=>_s(),variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-800 hover:bg-blue-50",disabled:pe,children:[e.jsx(Ke,{className:"w-4 h-4 mr-1"}),pe?"Gerando...":"Sugerir"]})]}),e.jsx(ue,{value:l.description,onChange:s=>u(N(g({},l),{description:s.target.value})),placeholder:"Descri√ß√£o da m√∫sica",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hashtags (separados por v√≠rgula)"}),e.jsx(y,{value:l.hashtags.join(", "),onChange:s=>u(N(g({},l),{hashtags:s.target.value.split(",").map(a=>a.trim()).filter(a=>a)})),placeholder:"humor, musica, trending, novidade"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Exemplo: humor, musica, trending, novidade, viral"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-100 rounded-xl p-6 border-2 border-purple-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-purple-900 mb-4 flex items-center gap-2",children:[e.jsx(Ye,{className:"w-5 h-5 text-purple-600"}),"üìÖ Datas de Publica√ß√£o"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Lan√ßamento no App*"}),e.jsx(y,{type:"date",value:l.release_date,onChange:s=>u(N(g({},l),{release_date:s.target.value}))}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Data sugerida: ",Ee()?Z(ye(Ee()),"EEEE, d 'de' MMMM 'de' yyyy",{locale:W}):"Calculando..."]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs(as,{value:l.status,onValueChange:s=>u(N(g({},l),{status:s})),children:[e.jsx(ts,{children:e.jsx(rs,{})}),e.jsxs(is,{children:[e.jsx(X,{value:"draft",children:"Brouillon"}),e.jsx(X,{value:"published",children:"Publi√©"}),e.jsx(X,{value:"archived",children:"Archiv√©"})]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-violet-50 to-purple-100 rounded-xl p-6 border-2 border-violet-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-violet-900 mb-4 flex items-center gap-2",children:[e.jsx(Qe,{className:"w-5 h-5 text-violet-600"}),"üéß Links de Streaming"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Spotify"}),e.jsx(y,{value:l.spotify_url||"",onChange:s=>u(N(g({},l),{spotify_url:s.target.value})),placeholder:"URL Spotify",type:"url"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Apple Music"}),e.jsx(y,{value:l.apple_music_url||"",onChange:s=>u(N(g({},l),{apple_music_url:s.target.value})),placeholder:"URL Apple Music",type:"url"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"YouTube"}),e.jsx(y,{value:l.youtube_url||"",onChange:s=>u(N(g({},l),{youtube_url:s.target.value})),placeholder:"URL YouTube",type:"url"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-100 rounded-xl p-6 border-2 border-orange-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-orange-900 mb-4 flex items-center gap-2",children:[e.jsx(Xe,{className:"w-5 h-5 text-orange-600"}),"üè∑Ô∏è M√©tadados"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagem de Capa (URL)"}),e.jsx(y,{value:l.cover_image||"",onChange:s=>u(N(g({},l),{cover_image:s.target.value})),placeholder:"https://exemplo.com/imagem.jpg",type:"url"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Letras da M√∫sica"}),e.jsx(ue,{value:l.lyrics||"",onChange:s=>u(N(g({},l),{lyrics:s.target.value})),placeholder:"Letras da m√∫sica...",rows:4})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t-2 border-gray-200",children:[e.jsxs(h,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700 text-lg py-3",children:[e.jsx(Me,{className:"w-5 h-5 mr-2"}),"Salvar Altera√ß√µes"]}),e.jsx(h,{type:"button",onClick:()=>he(!1),variant:"outline",className:"flex-1 text-lg py-3",children:"Cancelar"})]})]})})]})})})]})})}function la({onBackToLogin:c}){const[d,n]=i.useState(""),[b,f]=i.useState(""),[v,t]=i.useState(!1),[m,k]=i.useState(!1),[j,C]=i.useState(!1),[_,M]=i.useState({type:"",text:""}),[L,z]=i.useState(!1);i.useEffect(()=>{new URLSearchParams(window.location.hash.split("?")[1]).get("reset")!=="true"&&c()},[c]);const O=$=>E(null,null,function*(){if($.preventDefault(),C(!0),M({type:"",text:""}),d.length<6){M({type:"error",text:"Le mot de passe doit contenir au moins 6 caract√®res"}),C(!1);return}if(d!==b){M({type:"error",text:"Les mots de passe ne correspondent pas"}),C(!1);return}try{const{error:P}=yield ke.auth.updateUser({password:d});if(P)throw P;z(!0),M({type:"success",text:"Mot de passe mis √† jour avec succ√®s !"}),setTimeout(()=>{window.location.href="/#/admin"},2e3)}catch(P){console.error("Erreur update password:",P),M({type:"error",text:`Erreur: ${P.message}`})}finally{C(!1)}});return L?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:e.jsx(Le,{className:"w-full max-w-md",children:e.jsx(os,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Gs,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-green-800 mb-2",children:"Mot de passe mis √† jour !"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Votre mot de passe a √©t√© mis √† jour avec succ√®s. Redirection vers l'Admin..."}),e.jsx(Ze,{className:"w-6 h-6 animate-spin mx-auto text-blue-600"})]})})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:e.jsxs(Le,{className:"w-full max-w-md",children:[e.jsxs(us,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(We,{className:"w-6 h-6 text-blue-600"})}),e.jsx(ms,{className:"text-2xl font-bold text-gray-900",children:"Nouveau mot de passe"}),e.jsx(Ks,{children:"Entrez votre nouveau mot de passe"})]}),e.jsxs(os,{children:[e.jsxs("form",{onSubmit:O,className:"space-y-4",children:[_.text&&e.jsx(Zs,{variant:_.type==="error"?"destructive":"default",children:e.jsx(Ws,{children:_.text})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"Nouveau mot de passe"}),e.jsxs("div",{className:"relative",children:[e.jsx(y,{id:"password",type:v?"text":"password",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",value:d,onChange:$=>n($.target.value),required:!0,disabled:j,className:"w-full pr-10"}),e.jsx("button",{type:"button",onClick:()=>t(!v),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:j,children:v?e.jsx(es,{className:"w-4 h-4"}):e.jsx(ss,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"confirmPassword",className:"text-sm font-medium text-gray-700",children:"Confirmer le mot de passe"}),e.jsxs("div",{className:"relative",children:[e.jsx(y,{id:"confirmPassword",type:m?"text":"password",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",value:b,onChange:$=>f($.target.value),required:!0,disabled:j,className:"w-full pr-10"}),e.jsx("button",{type:"button",onClick:()=>k(!m),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:j,children:m?e.jsx(es,{className:"w-4 h-4"}):e.jsx(ss,{className:"w-4 h-4"})})]})]}),e.jsx(h,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white",disabled:j,children:j?e.jsxs(e.Fragment,{children:[e.jsx(Ze,{className:"w-4 h-4 animate-spin mr-2"}),"Mise √† jour..."]}):e.jsxs(e.Fragment,{children:[e.jsx(We,{className:"w-4 h-4 mr-2"}),"Mettre √† jour"]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("button",{onClick:c,className:"text-blue-600 hover:text-blue-700 font-medium",disabled:j,children:[e.jsx(Ys,{className:"w-4 h-4 inline mr-1"}),"Retour √† la connexion"]})}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsx("p",{className:"text-xs text-blue-800 text-center",children:"üîí Le mot de passe doit contenir au moins 6 caract√®res"})})]})]})})}function ja(){const[c,d]=i.useState(!1),[n,b]=i.useState(!0),[f,v]=i.useState(!1),[t,m]=i.useState(!1);i.useEffect(()=>{k(),new URLSearchParams(window.location.hash.split("?")[1]).get("reset")==="true"&&m(!0);const{data:{subscription:_}}=ke.auth.onAuthStateChange((M,L)=>E(null,null,function*(){M==="SIGNED_IN"&&L?yield j(L.user.id):M==="SIGNED_OUT"&&(d(!1),v(!1))}));return()=>_.unsubscribe()},[]);const k=()=>E(null,null,function*(){try{console.warn("üîê Starting auth check...");const{data:{session:C},error:_}=yield ke.auth.getSession();if(_)throw console.error("‚ùå Session error:",_),_;C?(console.warn("‚úÖ Session found, checking admin status..."),d(!0),yield j(C.user.id)):(console.warn("‚ö†Ô∏è No session found"),d(!1),v(!1))}catch(C){console.error("‚ùå Erreur v√©rification auth:",C),d(!1),v(!1)}finally{console.warn("üèÅ Auth check complete, setting loading to false"),b(!1)}}),j=C=>E(null,null,function*(){try{console.warn("üîç Checking admin status for user:",C);const _=new Promise(($,P)=>setTimeout(()=>P(new Error("TIMEOUT: Admin check took too long (>5s)")),5e3)),M=ke.from("admins").select("user_id").eq("user_id",C).maybeSingle(),{data:L,error:z}=yield Promise.race([M,_]);if(console.warn("üìä Admin check result:",{data:L,error:z,hasData:!!L}),z){console.error("‚ùå Erreur v√©rification admin:",z.message,z.code,z),v(!1);return}const O=!!L;console.warn(O?"‚úÖ User IS admin":"‚ö†Ô∏è User is NOT admin"),v(O)}catch(_){console.error("‚ùå Exception v√©rification admin:",_.message||_),v(!1)}});return t?e.jsx(la,{onBackToLogin:()=>m(!1)}):n?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"V√©rification de l'acc√®s administrateur..."})]})}):c&&f?e.jsx(oa,{}):e.jsxs(e.Fragment,{children:[e.jsx(Js,{children:e.jsx("meta",{name:"robots",content:"noindex,nofollow"})}),e.jsx(ea,{})]})}export{ja as default};

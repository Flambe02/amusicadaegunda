var e=Object.defineProperty,s=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,i=(s,t,a)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a;import{aI as l,s as r,r as n,j as o,t as c,ad as d,aJ as m,f as u,M as x}from"./vendor-BIbFW3qO.js";import{u as h,B as g,S as p}from"./index-DetkHvaz.js";import{f as y,p as f,a as j}from"./utils-DuUtq9wc.js";import"./libs-DY7TBn7z.js";import"./ui-CttiZxwU.js";import"./supabase-sfbdw4k8.js";const b="https://www.amusicadasegunda.com";function v(e,s=null){if("undefined"!=typeof document)try{if(s){const e=document.getElementById(s);e&&e.remove()}const t=document.createElement("script");t.type="application/ld+json",t.textContent=JSON.stringify(e,null,2),s&&(t.id=s),document.head.appendChild(t)}catch(t){}}function w({youtube_music_url:e,youtube_url:s,title:t}){const a=e||s||"",i=(e=>{if(!e||"string"!=typeof e)return null;try{const s=e.toLowerCase(),t=e.match(/[?&]list=([A-Za-z0-9_-]+)/);if(t)return{id:t[1],type:"playlist"};const a=[/(?:youtube\.com\/shorts\/)([A-Za-z0-9_-]{11})/,/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/|youtube\.com\/v\/)([A-Za-z0-9_-]{11})/,/^([A-Za-z0-9_-]{11})$/];for(const i of a){const s=e.match(i);if(s)return{id:s[1],type:"video"}}if(s.includes("music.youtube.com")){const s=e.match(/[?&]v=([A-Za-z0-9_-]{11})/);if(s)return{id:s[1],type:"video"}}return null}catch(s){return null}})(a);if(!i)return o.jsx("div",{className:"w-full aspect-video rounded-lg overflow-hidden shadow-lg flex items-center justify-center bg-gradient-to-br from-gray-800 to-gray-900",children:o.jsx("p",{className:"text-white text-sm",children:"Vidéo non disponible"})});const l=a.includes("/shorts/"),r="https://www.youtube-nocookie.com/embed",n="video"===i.type?`${r}/${i.id}?rel=0&modestbranding=1&playsinline=1&controls=1`:`${r}/videoseries?list=${i.id}&rel=0&modestbranding=1&playsinline=1&controls=1`;return l?o.jsx("div",{className:"w-full flex justify-center",children:o.jsx("div",{className:"relative rounded-lg overflow-hidden shadow-lg",style:{width:"100%",maxWidth:"400px",aspectRatio:"9/16"},children:o.jsx("iframe",{className:"absolute top-0 left-0 w-full h-full",src:n,title:t||"YouTube Short",frameBorder:"0",referrerPolicy:"strict-origin-when-cross-origin",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,loading:"lazy"})})}):o.jsx("div",{className:"w-full aspect-video rounded-lg overflow-hidden shadow-lg",children:o.jsx("iframe",{className:"w-full h-full",src:n,title:t||"YouTube",frameBorder:"0",referrerPolicy:"strict-origin-when-cross-origin",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,loading:"lazy"})})}function N(){const{slug:e}=l(),N=r(),_=e?e.replace(/\/$/,"").trim():null,[S,M]=n.useState(null),[$,A]=n.useState(!0),[B,I]=n.useState(null);n.useEffect(()=>{e&&e.endsWith("/")&&N(`/chansons/${_}`,{replace:!0})},[e,_,N]),n.useEffect(()=>{var e;e=function*(){if(!_)return A(!1),void I("Slug inválido");A(!0),I(null);try{const e=yield p.getBySlug(_);e?(M(e),I(null)):(I("Song not found"),M(null))}catch(e){I("Song not found"),M(null)}finally{A(!1)}},new Promise((s,t)=>{var a=s=>{try{l(e.next(s))}catch(a){t(a)}},i=s=>{try{l(e.throw(s))}catch(a){t(a)}},l=e=>e.done?s(e.value):Promise.resolve(e.value).then(a,i);l((e=e.apply(null,null)).next())})},[_]);const P=_?`/chansons/${_.replace(/\/$/,"")}`:"/chansons";return h({title:S?S.title:_?_.replace(/-/g," "):"A Música da Segunda",description:S?`Letra, áudio e história de "${S.title}" — nova música da segunda.`:"Paródias musicais inteligentes e divertidas sobre as notícias do Brasil.",keywords:S?`${S.title}, música da segunda, paródias musicais`:"música da segunda, paródias musicais",image:null==S?void 0:S.cover_image,url:P,type:"article"}),n.useEffect(()=>{if(S){const e=[S.spotify_url,S.apple_music_url,S.youtube_url,S.youtube_music_url].filter(Boolean);v(function({title:e,slug:l,datePublished:r,image:n,byArtist:o="A Música da Segunda",streamingUrls:c=[]}){const d=`${b}/chansons/${l}`,m=((e,l)=>{for(var r in l||(l={}))t.call(l,r)&&i(e,r,l[r]);if(s)for(var r of s(l))a.call(l,r)&&i(e,r,l[r]);return e})({"@context":"https://schema.org","@type":"MusicRecording",name:e||l,byArtist:{"@type":"MusicGroup",name:o},datePublished:r||(new Date).toISOString().slice(0,10),inLanguage:"pt-BR",url:d,genre:["Indie","Música Brasileira","Pop"]},n?{image:n}:{}),u=c.filter(e=>e&&"string"==typeof e);return u.length>0&&(m.sameAs=u),m}({title:S.title,slug:_,datePublished:S.release_date,image:S.cover_image,byArtist:S.artist||"A Música da Segunda",streamingUrls:e}),"song-music-schema");const l=function({title:e,slug:s}){return{"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Início",item:`${b}/`},{"@type":"ListItem",position:2,name:"Canções",item:`${b}/chansons`},{"@type":"ListItem",position:3,name:e||s,item:`${b}/chansons/${s}`}]}}({title:S.title,slug:_});return v(l,"song-breadcrumb-schema"),()=>{const e=document.getElementById("song-music-schema"),s=document.getElementById("song-breadcrumb-schema");e&&e.remove(),s&&s.remove()}}},[S,_]),$?o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs(c,{children:[o.jsx("html",{lang:"pt-BR"}),o.jsx("meta",{name:"robots",content:"index, follow"})]}),o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:_?_.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase()):"A Música da Segunda"}),o.jsx("p",{className:"text-gray-600 mb-8",children:"Carregando informações da música..."}),o.jsxs("div",{className:"animate-pulse",children:[o.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),o.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-8"}),o.jsx("div",{className:"h-96 bg-gray-200 rounded"})]})]})]}):B||!S?o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsx(c,{children:o.jsx("meta",{name:"robots",content:"noindex,follow"})}),o.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[o.jsx("div",{className:"mb-6",children:o.jsxs(g,{onClick:()=>N("/"),variant:"outline",className:"mb-4",children:[o.jsx(d,{className:"w-4 h-4 mr-2"}),"Voltar ao Início"]})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:B||"Song Not Found"}),o.jsxs("p",{className:"text-gray-600",children:['The song "',_,'" could not be found.']})]})]}):o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs(c,{children:[o.jsx("html",{lang:"pt-BR"}),o.jsx("meta",{name:"twitter:card",content:"summary_large_image"})]}),o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsx("div",{className:"mb-6",children:o.jsxs(g,{onClick:()=>N("/"),variant:"outline",children:[o.jsx(d,{className:"w-4 h-4 mr-2"}),"Voltar ao Início"]})}),o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:S.title}),o.jsxs("div",{className:"flex items-center gap-4 text-gray-600 mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(m,{className:"w-4 h-4"}),o.jsx("span",{children:S.artist||"A Música da Segunda"})]}),S.release_date&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(u,{className:"w-4 h-4"}),o.jsx("span",{children:y(f(S.release_date),"dd MMMM yyyy",{locale:j})})]})]}),S.description&&o.jsx("p",{className:"text-gray-700 leading-relaxed",children:S.description})]}),o.jsxs("div",{className:"mb-8",children:[o.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[o.jsx(x,{className:"w-5 h-5"}),"Vídeo"]}),o.jsx("div",{className:"w-full max-w-2xl mx-auto",children:S.youtube_music_url||S.youtube_url?o.jsx(w,{youtube_music_url:S.youtube_music_url,youtube_url:S.youtube_url,title:S.title}):o.jsx("div",{className:"w-full aspect-video rounded-lg overflow-hidden shadow-lg flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200",children:o.jsxs("div",{className:"text-center text-gray-500",children:[o.jsx(x,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),o.jsx("p",{className:"font-medium",children:"Vidéo non disponible"}),o.jsx("p",{className:"text-sm",children:"Cette musique n'a pas encore de vidéo"})]})})})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Detalhes da Música"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-700",children:"Título:"}),o.jsx("span",{className:"ml-2 text-gray-900",children:S.title})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-700",children:"Artista:"}),o.jsx("span",{className:"ml-2 text-gray-900",children:S.artist||"A Música da Segunda"})]}),S.release_date&&o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-700",children:"Data de Lançamento:"}),o.jsx("span",{className:"ml-2 text-gray-900",children:y(f(S.release_date),"dd/MM/yyyy")})]}),S.status&&o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-700",children:"Status:"}),o.jsx("span",{className:"ml-2 text-gray-900",children:S.status})]})]})]})]})]})}export{N as default};

var J=Object.defineProperty,K=Object.defineProperties;var ee=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var L=(t,l,s)=>l in t?J(t,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[l]=s,T=(t,l)=>{for(var s in l||(l={}))O.call(l,s)&&L(t,s,l[s]);if(S)for(var s of S(l))A.call(l,s)&&L(t,s,l[s]);return t},F=(t,l)=>K(t,ee(l));var R=(t,l)=>{var s={};for(var o in t)O.call(t,o)&&l.indexOf(o)<0&&(s[o]=t[o]);if(t!=null&&S)for(var o of S(t))l.indexOf(o)<0&&A.call(t,o)&&(s[o]=t[o]);return s};var q=(t,l,s)=>new Promise((o,i)=>{var g=c=>{try{f(s.next(c))}catch(h){i(h)}},x=c=>{try{f(s.throw(c))}catch(h){i(h)}},f=c=>c.done?o(c.value):Promise.resolve(c.value).then(g,x);f((s=s.apply(t,l)).next())});import{t as D,c as te,s as z,j as e,r as y,C as se,P as $,X as Y,M as _,F as I,S as ae,L as re,D as V,a as W,b as le,d as Q,I as oe,e as ne,p as w,f as v,u as ie,B as H,g as ce,h as de,i as ue,k as he,l as me,m as M}from"./index-CHTBDV5C.js";import{V as xe}from"./video-CzKBNJPE.js";import{E as ge}from"./external-link-C5N76GWm.js";function B(t,l){const s=D(t);return isNaN(l)?te(t,NaN):(l&&s.setDate(s.getDate()+l),s)}function U(t,l){const s=z(t),o=z(l);return+s==+o}function fe(t,l){const s=D(t.start),o=D(t.end);let i=+s>+o;const g=i?+s:+o,x=i?o:s;x.setHours(0,0,0,0);let f=1;const c=[];for(;+x<=g;)c.push(D(x)),x.setDate(x.getDate()+f),x.setHours(0,0,0,0);return i?c.reverse():c}function k(t){return D(t).getDay()}function Z(s){var o=s,{children:t}=o,l=R(o,["children"]);return e.jsx("span",F(T({},l),{className:"sr-only",style:{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"},children:t}))}function pe({youtube_music_url:t,youtube_url:l,title:s}){const o=t||l||"",g=(h=>{if(!h||typeof h!="string")return null;try{const p=h.match(/[?&]list=([A-Za-z0-9_-]+)/);if(p)return{id:p[1],type:"playlist"};const j=[/(?:youtube\.com\/shorts\/)([A-Za-z0-9_-]{11})/,/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/|youtube\.com\/v\/)([A-Za-z0-9_-]{11})/,/^([A-Za-z0-9_-]{11})$/];for(const m of j){const b=h.match(m);if(b)return{id:b[1],type:"video"}}if(h.toLowerCase().includes("music.youtube.com")){const m=h.match(/[?&]v=([A-Za-z0-9_-]{11})/);if(m)return{id:m[1],type:"video"}}return null}catch(p){return null}})(o);if(!g)return e.jsx("div",{className:"w-full aspect-video rounded-lg overflow-hidden shadow-lg flex items-center justify-center bg-gradient-to-br from-gray-800 to-gray-900",children:e.jsx("p",{className:"text-white text-sm",children:"Vid√©o non disponible"})});const x=o.includes("/shorts/"),f="https://www.youtube-nocookie.com/embed",c=g.type==="video"?`${f}/${g.id}?rel=0&modestbranding=1&playsinline=1&controls=1`:`${f}/videoseries?list=${g.id}&rel=0&modestbranding=1&playsinline=1&controls=1`;return x?e.jsx("div",{className:"relative rounded-lg overflow-hidden shadow-2xl",style:{width:"100%",aspectRatio:"9/16",minHeight:"min(500px, 70vh)",maxHeight:"70vh"},children:e.jsx("iframe",{className:"absolute top-0 left-0 w-full h-full",src:c,title:s||"YouTube Short",frameBorder:"0",referrerPolicy:"strict-origin-when-cross-origin",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,loading:"lazy"})}):e.jsx("div",{className:"w-full aspect-video rounded-lg overflow-hidden shadow-lg",children:e.jsx("iframe",{className:"w-full h-full",src:c,title:s||"YouTube",frameBorder:"0",referrerPolicy:"strict-origin-when-cross-origin",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,loading:"lazy"})})}function ye({song:t,onClose:l,onShowDescription:s}){const[o,i]=y.useState(!1),[g,x]=y.useState(!1),[f,c]=y.useState(!1),h=y.useRef(null);if(y.useEffect(()=>{const m=b=>{h.current&&!h.current.contains(b.target)&&c(!1)};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[]),!t||!t.id||!t.title)return e.jsxs("div",{className:"bg-white rounded-2xl p-6 text-center text-gray-500",children:[e.jsx("div",{className:"mb-4",children:e.jsx(se,{className:"w-12 h-12 text-red-400 mx-auto"})}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"Erro ao carregar m√∫sica"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Dados da m√∫sica inv√°lidos ou incompletos"}),l&&e.jsx("button",{onClick:l,className:"mt-4 bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors",children:"Fechar"})]});const p=[];t.spotify_url&&p.push({name:"Spotify",url:t.spotify_url,icon:$,color:"bg-green-500"}),t.apple_music_url&&p.push({name:"Apple Music",url:t.apple_music_url,icon:$,color:"bg-pink-500"}),t.youtube_url&&p.push({name:"YouTube",url:t.youtube_url,icon:xe,color:"bg-red-500"});const j=m=>{m&&window.open(m,"_blank","noopener,noreferrer")};return e.jsxs("div",{className:"relative w-full",children:[l&&e.jsx("button",{onClick:l,className:"absolute top-2 right-2 z-50 w-10 h-10 bg-black/50 hover:bg-black/70 backdrop-blur-sm rounded-full flex items-center justify-center transition-all duration-200 shadow-lg","aria-label":"Fermer",children:e.jsx(Y,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"space-y-3",children:[(t.youtube_music_url||t.youtube_url)&&e.jsxs("div",{className:"relative",children:[e.jsx(pe,{youtube_music_url:t.youtube_music_url,youtube_url:t.youtube_url,title:t.title}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent p-4 pt-8",children:[e.jsx("h2",{className:"text-white font-bold text-lg leading-tight drop-shadow-lg mb-1",children:t.title}),e.jsx("p",{className:"text-white/90 text-sm font-medium drop-shadow-md",children:new Date(t.release_date).toLocaleDateString("pt-BR",{day:"numeric",month:"long",year:"numeric"})})]})]}),e.jsx("div",{className:"bg-white/95 backdrop-blur-md rounded-2xl shadow-xl p-3",children:e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"relative",ref:h,children:[e.jsxs("button",{className:"w-full bg-gradient-to-br from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white py-3 px-2 rounded-xl font-bold transition-all duration-200 flex flex-col items-center justify-center space-y-1 shadow-lg hover:shadow-xl transform hover:scale-105",onClick:()=>c(!f),children:[e.jsx(_,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs",children:"Ouvir"}),p.length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 text-xs bg-red-500 text-white w-5 h-5 rounded-full flex items-center justify-center font-bold shadow-md",children:p.length})]}),f&&e.jsx("div",{className:"absolute bottom-full left-0 right-auto mb-2 w-64 bg-white rounded-xl shadow-2xl border border-gray-200 p-3 z-50",children:p.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-gray-500 font-bold mb-2 uppercase",children:"Dispon√≠vel em:"}),p.map((m,b)=>e.jsxs("button",{onClick:()=>j(m.url),className:"w-full flex items-center gap-3 p-2 rounded-lg hover:bg-gray-100 transition-colors text-left group",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${m.color} flex items-center justify-center shadow-md group-hover:scale-110 transition-transform`,children:e.jsx(m.icon,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"text-sm font-bold text-gray-800 flex-1",children:m.name}),e.jsx(ge,{className:"w-4 h-4 text-gray-400 group-hover:text-gray-600"})]},b))]}):e.jsxs("div",{className:"text-center py-3",children:[e.jsx(_,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Nenhuma plataforma"})]})})]}),t.lyrics&&t.lyrics.trim()?e.jsxs("button",{onClick:()=>i(!0),className:"w-full bg-gradient-to-br from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white py-3 px-2 rounded-xl font-bold transition-all duration-200 flex flex-col items-center justify-center space-y-1 shadow-lg hover:shadow-xl transform hover:scale-105",children:[e.jsx(I,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs",children:"Letras"})]}):e.jsxs("button",{disabled:!0,className:"w-full bg-gray-200 text-gray-400 py-3 px-2 rounded-xl font-bold flex flex-col items-center justify-center space-y-1 opacity-50 cursor-not-allowed",children:[e.jsx(I,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs",children:"Letras"})]}),e.jsxs("button",{className:"w-full bg-gradient-to-br from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white py-3 px-2 rounded-xl font-bold transition-all duration-200 flex flex-col items-center justify-center space-y-1 shadow-lg hover:shadow-xl transform hover:scale-105",children:[e.jsx(ae,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs",children:"Partager"})]})]})})]}),e.jsx(re,{open:o,onOpenChange:i,song:t,title:"Letras da M√∫sica",maxHeight:"h-64"}),e.jsx(V,{open:g,onOpenChange:x,children:e.jsxs(W,{className:"max-w-md",children:[e.jsx(le,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Q,{className:"flex items-center space-x-2",children:[e.jsx(oe,{className:"w-5 h-5 text-blue-500"}),e.jsx("span",{children:"Descri√ß√£o da M√∫sica"})]}),e.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Y,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"mt-4",children:e.jsx("p",{className:"text-gray-700 leading-relaxed font-sans text-sm",children:t.description||"Nenhuma descri√ß√£o dispon√≠vel para esta m√∫sica."})})]})})]})}function Ne(){const[t,l]=y.useState([]),[s,o]=y.useState(new Date),[i,g]=y.useState(null),[x,f]=y.useState(!0);y.useEffect(()=>{let a=new URLSearchParams(window.location.search).get("month");if(!a){const n=window.location.search;if(n.includes("?/")){const d=n.split("?/")[1];if(d.includes("?")){const u=d.split("?")[1];a=new URLSearchParams(u).get("month")}}}if(a)try{const[n,d]=a.split("-").map(Number);n&&d!==void 0&&(o(new Date(n,d-1,1)),console.warn(`üìÖ Calendar: Mois charg√© depuis l'URL: ${n}-${d}`))}catch(n){console.error("Erro ao parsear par√¢metro month:",n)}},[]);const c=y.useCallback(()=>q(null,null,function*(){try{f(!0);const r=s.getFullYear(),a=s.getMonth()+1,n=yield ne.list("-release_date",null),d=(Array.isArray(n)?n:[]).filter(u=>{const N=w(u.release_date);return N.getFullYear()===r&&N.getMonth()+1===a});d.sort((u,N)=>w(N.release_date)-w(u.release_date)),l(d),console.warn(`üìÖ Calendrier: ${d.length} chansons charg√©es pour ${a}/${r}:`,d.map(u=>`${u.title} (${u.status})`))}catch(r){console.error("Error loading monthly songs:",r),l([])}finally{f(!1)}}),[s]);y.useEffect(()=>{c()},[c]);const h=r=>t.find(a=>{const n=w(a.release_date);return U(n,r)}),p=r=>{o(a=>{const n=new Date(a);return n.setMonth(a.getMonth()+r),n})},j=r=>k(r)===1,m=r=>{const a=h(r),n=U(r,new Date),d=j(r);let u="aspect-square flex flex-col items-center justify-center rounded-2xl text-sm font-bold transition-all duration-300 ";return a?a.status==="published"?u+="bg-[#32a2dc] text-white shadow-lg cursor-pointer hover:shadow-xl transform hover:scale-105 ":a.status==="draft"?u+="bg-orange-500 text-white shadow-lg cursor-pointer hover:shadow-xl transform hover:scale-105 ":u+="bg-gray-500 text-white shadow-lg cursor-pointer hover:shadow-xl transform hover:scale-105 ":d?u+="bg-white/40 text-gray-600 border-2 border-dashed border-gray-400 ":u+="bg-white/20 text-gray-500 ",n&&(u+="ring-2 ring-white ring-opacity-60 "),u},b=r=>{const a=me(r),n=k(a);return B(a,-n)},X=()=>{const r=b(s),a=he(s),d=6-k(a),u=B(a,d);return fe({start:r,end:u})},C=v(s,"MMMM yyyy",{locale:M}),E=t.length;if(ie({title:`Calend√°rio Musical ${C}`,description:`Explore ${E} descobertas musicais de ${C}. Calend√°rio completo das m√∫sicas da segunda no M√∫sica da Segunda.`,keywords:`calend√°rio musical, ${C}, descobertas musicais, ${E} m√∫sicas, m√∫sica da segunda, playlist mensal`,url:"/calendar",type:"website"}),x)return e.jsxs("div",{className:"p-5 max-w-md mx-auto animate-pulse",children:[e.jsx("div",{className:"h-12 bg-white/30 rounded-2xl mb-6"}),e.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:Array(42).fill(0).map((r,a)=>e.jsx("div",{className:"aspect-square bg-white/30 rounded-2xl"},a))})]});const G=X(),P=r=>{r&&r.id&&r.title?g(r):console.error("Chanson invalide:",r)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-5 max-w-md mx-auto",children:[e.jsx("div",{className:"lg:hidden text-center mb-8",children:e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden border-4 border-white/20 shadow-xl flex-shrink-0",children:e.jsx("img",{src:"images/Musica da segunda.jpg",alt:"Logo M√∫sica da Segunda",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-black text-white drop-shadow-lg mb-1",children:"Agenda Musical"}),e.jsx("p",{className:"text-white/80 font-medium text-sm md:text-base drop-shadow-md",children:"Acompanhe todas as m√∫sicas da segunda"})]})]})}),e.jsxs("div",{className:"bg-[#f8f5f2] rounded-3xl p-5 shadow-xl mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx(H,{variant:"ghost",size:"icon",onClick:()=>p(-1),className:"text-gray-600 hover:text-gray-800 hover:bg-white/60",children:e.jsx(ce,{className:"w-5 h-5"})}),e.jsx("h2",{className:"text-2xl font-black text-gray-800 capitalize",children:v(s,"MMMM yyyy",{locale:M})}),e.jsx(H,{variant:"ghost",size:"icon",onClick:()=>p(1),className:"text-gray-600 hover:text-gray-800 hover:bg-white/60",children:e.jsx(de,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Dom","Seg","Ter","Qua","Qui","Sex","S√°b"].map(r=>e.jsx("div",{className:"text-center text-xs font-bold text-gray-500 py-2",children:r},r))}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:G.map(r=>{const a=h(r),n=j(r),d=r.getMonth()===s.getMonth();return e.jsxs("div",{className:`${m(r)} ${d?"":"opacity-40"}`,onClick:()=>a&&P(a),children:[e.jsx("span",{className:"text-xs",children:v(r,"d")}),a&&e.jsxs("div",{className:"flex flex-col items-center mt-1",children:[e.jsx(_,{className:"w-3 h-3"}),a.status==="draft"&&e.jsx("div",{className:"w-1 h-1 bg-white rounded-full mt-1 opacity-80"})]}),n&&!a&&d&&e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full mt-1 opacity-60"})]},r.toISOString())})}),e.jsxs("div",{className:"mt-6 space-y-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-[#32a2dc] rounded-lg"}),e.jsx("span",{className:"text-gray-600 font-medium",children:"M√∫sica publicada"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-white/40 border-2 border-dashed border-gray-400 rounded-lg"}),e.jsx("span",{className:"text-gray-600 font-medium",children:"Segunda-feira (aguardando)"})]}),i&&e.jsxs("div",{className:"text-xs text-gray-500 mt-2 p-2 bg-white/40 rounded-lg",children:[e.jsx("p",{className:"font-semibold",children:v(w(i.release_date),"dd 'de' MMMM 'de' yyyy - EEEE",{locale:M})}),e.jsxs("p",{children:[i.title," - ",i.artist]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Status: ",i.status==="published"?"Publicada":i.status==="draft"?"Rascunho":"Arquivada"]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xl font-bold text-white drop-shadow-lg",children:"M√∫sicas do M√™s"}),(()=>{const r=t.filter(a=>{const n=w(a.release_date);return n.getMonth()===s.getMonth()&&n.getFullYear()===s.getFullYear()});return r.length===0?e.jsxs("div",{className:"bg-[#f8f5f2] rounded-2xl p-6 text-center shadow-lg",children:[e.jsx(_,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsxs("p",{className:"text-gray-600 font-medium",children:["Nenhuma m√∫sica publicada em ",v(s,"MMMM yyyy",{locale:M})]}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"As m√∫sicas aparecer√£o aqui quando forem publicadas"})]}):r.map(a=>e.jsxs("div",{className:"bg-[#f8f5f2] rounded-2xl p-4 shadow-lg flex items-center gap-4 cursor-pointer hover:shadow-xl transition-all duration-300",onClick:()=>P(a),children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${a.status==="published"?"bg-[#32a2dc]":a.status==="draft"?"bg-orange-500":"bg-gray-500"}`,children:e.jsx($,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-bold text-gray-800",children:a.title}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${a.status==="published"?"bg-green-100 text-green-800":a.status==="draft"?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"}`,children:a.status==="published"?"Publicada":a.status==="draft"?"Rascunho":"Arquivada"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:a.artist}),e.jsx("p",{className:"text-xs text-gray-400",children:v(w(a.release_date),"dd/MM/yyyy")})]})]},a.id))})()]})]}),e.jsx(V,{open:!!i,onOpenChange:r=>!r&&g(null),children:e.jsxs(W,{className:"max-w-[min(95vw,420px)] p-0 gap-0 border-0 bg-transparent max-h-[95vh] overflow-y-auto [&>button]:hidden",children:[e.jsx(Q,{asChild:!0,children:e.jsx(Z,{children:i?`${i.title} - ${i.artist}`:"D√©tails de la musique"})}),e.jsx(ue,{asChild:!0,children:e.jsx(Z,{children:i?`D√©tails de la musique ${i.title} par ${i.artist}`:"D√©tails de la musique"})}),e.jsx(ye,{song:i,onClose:()=>g(null),onShowDescription:r=>{console.warn("Descri√ß√£o solicitada para:",r.title)}})]})})]})}export{Ne as default};

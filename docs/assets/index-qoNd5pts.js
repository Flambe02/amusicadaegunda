const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TikTokDemo-DVL54S02.js","assets/ui-xZnVtAm_.js","assets/vendor-DHbHB7JU.js","assets/utils-DME-h_hF.js"])))=>i.map(i=>d[i]);
var e,t=Object.defineProperty,s=Object.defineProperties,r=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(e,s,r)=>s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,l=(e,t)=>{for(var s in t||(t={}))n.call(t,s)&&o(e,s,t[s]);if(a)for(var s of a(t))i.call(t,s)&&o(e,s,t[s]);return e},c=(e,t)=>s(e,r(t)),d=(e,t)=>{var s={};for(var r in e)n.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&a)for(var r of a(e))t.indexOf(r)<0&&i.call(e,r)&&(s[r]=e[r]);return s},u=(e,t,s)=>o(e,"symbol"!=typeof t?t+"":t,s),h=(e,t,s)=>new Promise((r,a)=>{var n=e=>{try{o(s.next(e))}catch(t){a(t)}},i=e=>{try{o(s.throw(e))}catch(t){a(t)}},o=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,i);o((s=s.apply(e,t)).next())});import{r as m,j as p,R as f,O as g,P as x,C as v,a as b,T as y,D as w,b as j,u as k,c as N,d as _,e as S,f as T,g as C,h as E,i as P,S as M,k as R,l as A,A as O,m as D,n as $,o as I,p as L,q as U,s as z,t as q,F as B,v as W,w as H,x as F,y as V,z as K}from"./ui-xZnVtAm_.js";import{a as J,g as G,b as Y}from"./vendor-DHbHB7JU.js";import{t as X,c as Z,b as Q,a as ee,d as te,e as se,s as re,f as ae,p as ne,i as ie,g as oe,h as le,j as ce,k as de,l as ue}from"./utils-DME-h_hF.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var he,me={};const pe=G(function(){if(he)return me;he=1;var e=J();return me.createRoot=e.createRoot,me.hydrateRoot=e.hydrateRoot,me}()),fe={},ge=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=(null==s?void 0:s.nonce)||(null==s?void 0:s.getAttribute("nonce"));r=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in fe)return;fe[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,a&&r.setAttribute("nonce",a),document.head.appendChild(r),t?new Promise((t,s)=>{r.addEventListener("load",t),r.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)})};
/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
var xe="popstate";function ve(e={}){return function(e,t,s,r={}){let{window:a=document.defaultView,v5Compat:n=!1}=r,i=a.history,o="POP",d=null,u=h();null==u&&(u=0,i.replaceState(c(l({},i.state),{idx:u}),""));function h(){return(i.state||{idx:null}).idx}function m(){o="POP";let e=h(),t=null==e?null:e-u;u=e,d&&d({action:o,location:x.location,delta:t})}function p(e,t){o="PUSH";let s=je(x.location,e,t);u=h()+1;let r=we(s,u),l=x.createHref(s);try{i.pushState(r,"",l)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;a.location.assign(l)}n&&d&&d({action:o,location:x.location,delta:1})}function f(e,t){o="REPLACE";let s=je(x.location,e,t);u=h();let r=we(s,u),a=x.createHref(s);i.replaceState(r,"",a),n&&d&&d({action:o,location:x.location,delta:0})}function g(e){return function(e,t=!1){let s="http://localhost";"undefined"!=typeof window&&(s="null"!==window.location.origin?window.location.origin:window.location.href);be(s,"No window.location.(origin|href) available to create URL");let r="string"==typeof e?e:ke(e);r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=s+r);return new URL(r,s)}(e)}let x={get action(){return o},get location(){return e(a,i)},listen(e){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(xe,m),d=e,()=>{a.removeEventListener(xe,m),d=null}},createHref:e=>t(a,e),createURL:g,encodeLocation(e){let t=g(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:p,replace:f,go:e=>i.go(e)};return x}(function(e,t){let{pathname:s,search:r,hash:a}=e.location;return je("",{pathname:s,search:r,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:ke(t)},0,e)}function be(e,t){if(!1===e||null==e)throw new Error(t)}function ye(e,t){if(!e)try{throw new Error(t)}catch(s){}}function we(e,t){return{usr:e.state,key:e.key,idx:t}}function je(e,t,s=null,r){return c(l({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?Ne(t):t),{state:s,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function ke({pathname:e="/",search:t="",hash:s=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),s&&"#"!==s&&(e+="#"===s.charAt(0)?s:"#"+s),e}function Ne(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substring(s),e=e.substring(0,s));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function _e(e,t,s="/"){return function(e,t,s,r){let a="string"==typeof t?Ne(t):t,n=Ue(a.pathname||"/",s);if(null==n)return null;let i=Se(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let s=e.length===t.length&&e.slice(0,-1).every((e,s)=>e===t[s]);return s?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let o=null;for(let l=0;null==o&&l<i.length;++l){let e=Le(n);o=$e(i[l],e,r)}return o}(e,t,s,!1)}function Se(e,t=[],s=[],r="",a=!1){let n=(e,n,i=a,o)=>{let l={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:n,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&i)return;be(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length)}let c=We([r,l.relativePath]),d=s.concat(l);e.children&&e.children.length>0&&(be(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),Se(e.children,t,d,c,i)),(null!=e.path||e.index)&&t.push({path:c,score:De(c,e.index),routesMeta:d})};return e.forEach((e,t)=>{var s;if(""!==e.path&&(null==(s=e.path)?void 0:s.includes("?")))for(let r of Te(e.path))n(e,t,!0,r);else n(e,t)}),t}function Te(e){let t=e.split("/");if(0===t.length)return[];let[s,...r]=t,a=s.endsWith("?"),n=s.replace(/\?$/,"");if(0===r.length)return a?[n,""]:[n];let i=Te(r.join("/")),o=[];return o.push(...i.map(e=>""===e?n:[n,e].join("/"))),a&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var Ce=/^:[\w-]+$/,Ee=3,Pe=2,Me=1,Re=10,Ae=-2,Oe=e=>"*"===e;function De(e,t){let s=e.split("/"),r=s.length;return s.some(Oe)&&(r+=Ae),t&&(r+=Pe),s.filter(e=>!Oe(e)).reduce((e,t)=>e+(Ce.test(t)?Ee:""===t?Me:Re),r)}function $e(e,t,s=!1){let{routesMeta:r}=e,a={},n="/",i=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===n?t:t.slice(n.length)||"/",d=Ie({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&s&&!r[r.length-1].route.index&&(d=Ie({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(a,d.params),i.push({params:a,pathname:We([n,d.pathname]),pathnameBase:He(We([n,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(n=We([n,d.pathnameBase]))}return i}function Ie(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[s,r]=function(e,t=!1,s=!0){ye("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,s)=>(r.push({paramName:t,isOptional:null!=s}),s?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");e.endsWith("*")?(r.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let n=new RegExp(a,t?void 0:"i");return[n,r]}(e.path,e.caseSensitive,e.end),a=t.match(s);if(!a)return null;let n=a[0],i=n.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:r.reduce((e,{paramName:t,isOptional:s},r)=>{if("*"===t){let e=o[r]||"";i=n.slice(0,n.length-e.length).replace(/(.)\/+$/,"$1")}const a=o[r];return e[t]=s&&!a?void 0:(a||"").replace(/%2F/g,"/"),e},{}),pathname:n,pathnameBase:i,pattern:e}}function Le(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return ye(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Ue(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,r=e.charAt(s);return r&&"/"!==r?null:e.slice(s)||"/"}function ze(e,t,s,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function qe(e){let t=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t.map((e,s)=>s===t.length-1?e.pathname:e.pathnameBase)}function Be(e,t,s,r=!1){let a;"string"==typeof e?a=Ne(e):(a=l({},e),be(!a.pathname||!a.pathname.includes("?"),ze("?","pathname","search",a)),be(!a.pathname||!a.pathname.includes("#"),ze("#","pathname","hash",a)),be(!a.search||!a.search.includes("#"),ze("#","search","hash",a)));let n,i=""===e||""===a.pathname,o=i?"/":a.pathname;if(null==o)n=s;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}n=e>=0?t[e]:"/"}let c=function(e,t="/"){let{pathname:s,search:r="",hash:a=""}="string"==typeof e?Ne(e):e,n=s?s.startsWith("/")?s:function(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?s.length>1&&s.pop():"."!==e&&s.push(e)}),s.length>1?s.join("/"):"/"}(s,t):t;return{pathname:n,search:Fe(r),hash:Ve(a)}}(a,n),d=o&&"/"!==o&&o.endsWith("/"),u=(i||"."===o)&&s.endsWith("/");return c.pathname.endsWith("/")||!d&&!u||(c.pathname+="/"),c}var We=e=>e.join("/").replace(/\/\/+/g,"/"),He=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Fe=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Ve=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";var Ke=["POST","PUT","PATCH","DELETE"];new Set(Ke);var Je=["GET",...Ke];new Set(Je);var Ge=m.createContext(null);Ge.displayName="DataRouter";var Ye=m.createContext(null);Ye.displayName="DataRouterState",m.createContext(!1);var Xe=m.createContext({isTransitioning:!1});Xe.displayName="ViewTransition",m.createContext(new Map).displayName="Fetchers",m.createContext(null).displayName="Await";var Ze=m.createContext(null);Ze.displayName="Navigation";var Qe=m.createContext(null);Qe.displayName="Location";var et=m.createContext({outlet:null,matches:[],isDataRoute:!1});et.displayName="Route";var tt=m.createContext(null);function st(){return null!=m.useContext(Qe)}function rt(){return be(st(),"useLocation() may be used only in the context of a <Router> component."),m.useContext(Qe).location}tt.displayName="RouteError";var at="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function nt(e){m.useContext(Ze).static||m.useLayoutEffect(e)}function it(){let{isDataRoute:e}=m.useContext(et);return e?function(){let{router:e}=function(e){let t=m.useContext(Ge);return be(t,pt(e)),t}("useNavigate"),t=ft("useNavigate"),s=m.useRef(!1);return nt(()=>{s.current=!0}),m.useCallback((r,...a)=>h(null,[r,...a],function*(r,a={}){ye(s.current,at),s.current&&("number"==typeof r?e.navigate(r):yield e.navigate(r,l({fromRouteId:t},a)))}),[e,t])}():function(){be(st(),"useNavigate() may be used only in the context of a <Router> component.");let e=m.useContext(Ge),{basename:t,navigator:s}=m.useContext(Ze),{matches:r}=m.useContext(et),{pathname:a}=rt(),n=JSON.stringify(qe(r)),i=m.useRef(!1);return nt(()=>{i.current=!0}),m.useCallback((r,o={})=>{if(ye(i.current,at),!i.current)return;if("number"==typeof r)return void s.go(r);let l=Be(r,JSON.parse(n),a,"path"===o.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:We([t,l.pathname])),(o.replace?s.replace:s.push)(l,o.state,o)},[t,s,n,a,e])}()}function ot(){let{matches:e}=m.useContext(et),t=e[e.length-1];return t?t.params:{}}function lt(e,{relative:t}={}){let{matches:s}=m.useContext(et),{pathname:r}=rt(),a=JSON.stringify(qe(s));return m.useMemo(()=>Be(e,JSON.parse(a),r,"path"===t),[e,a,r,t])}function ct(e,t,s,r,a){var n;be(st(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=m.useContext(Ze),{matches:o}=m.useContext(et),c=o[o.length-1],d=c?c.params:{},u=c?c.pathname:"/",h=c?c.pathnameBase:"/",p=c&&c.route;{let e=p&&p.path||"";xt(u,!p||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let f,g=rt();if(t){let e="string"==typeof t?Ne(t):t;be("/"===h||(null==(n=e.pathname)?void 0:n.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${e.pathname}" was given in the \`location\` prop.`),f=e}else f=g;let x=f.pathname||"/",v=x;if("/"!==h){let e=h.replace(/^\//,"").split("/");v="/"+x.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=_e(e,{pathname:v});ye(p||null!=b,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),ye(null==b||void 0!==b[b.length-1].route.element||void 0!==b[b.length-1].route.Component||void 0!==b[b.length-1].route.lazy,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=function(e,t=[],s=null,r=null){if(null==e){if(!s)return null;if(s.errors)e=s.matches;else{if(0!==t.length||s.initialized||!(s.matches.length>0))return null;e=s.matches}}let a=e,n=null==s?void 0:s.errors;if(null!=n){let e=a.findIndex(e=>e.route.id&&void 0!==(null==n?void 0:n[e.route.id]));be(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(n).join(",")}`),a=a.slice(0,Math.min(a.length,e+1))}let i=!1,o=-1;if(s)for(let l=0;l<a.length;l++){let e=a[l];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=l),e.route.id){let{loaderData:t,errors:r}=s,n=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||n){i=!0,a=o>=0?a.slice(0,o+1):[a[0]];break}}}return a.reduceRight((e,l,c)=>{let d,u=!1,h=null,p=null;s&&(d=n&&l.route.id?n[l.route.id]:void 0,h=l.route.errorElement||ut,i&&(o<0&&0===c?(xt("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),u=!0,p=null):o===c&&(u=!0,p=l.route.hydrateFallbackElement||null)));let f=t.concat(a.slice(0,c+1)),g=()=>{let t;return t=d?h:u?p:l.route.Component?m.createElement(l.route.Component,null):l.route.element?l.route.element:e,m.createElement(mt,{match:l,routeContext:{outlet:e,matches:f,isDataRoute:null!=s},children:t})};return s&&(l.route.ErrorBoundary||l.route.errorElement||0===c)?m.createElement(ht,{location:s.location,revalidation:s.revalidation,component:h,error:d,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0},unstable_onError:r}):g()},null)}(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:We([h,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:We([h,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,s,r,a);return t&&y?m.createElement(Qe.Provider,{value:{location:l({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:"POP"}},y):y}function dt(){let e=function(){var e;let t=m.useContext(tt),s=function(e){let t=m.useContext(Ye);return be(t,pt(e)),t}("useRouteError"),r=ft("useRouteError");if(void 0!==t)return t;return null==(e=s.errors)?void 0:e[r]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},n={padding:"2px 4px",backgroundColor:r},i=null;return i=m.createElement(m.Fragment,null,m.createElement("p",null,"💿 Hey developer 👋"),m.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",m.createElement("code",{style:n},"ErrorBoundary")," or"," ",m.createElement("code",{style:n},"errorElement")," prop on your route.")),m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},t),s?m.createElement("pre",{style:a},s):null,i)}m.createContext(null);var ut=m.createElement(dt,null),ht=class extends m.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError&&this.props.unstable_onError(e,t)}render(){return void 0!==this.state.error?m.createElement(et.Provider,{value:this.props.routeContext},m.createElement(tt.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function mt({routeContext:e,match:t,children:s}){let r=m.useContext(Ge);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),m.createElement(et.Provider,{value:e},s)}function pt(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ft(e){let t=function(e){let t=m.useContext(et);return be(t,pt(e)),t}(e),s=t.matches[t.matches.length-1];return be(s.route.id,`${e} can only be used on routes that contain a unique "id"`),s.route.id}var gt={};function xt(e,t,s){t||gt[e]||(gt[e]=!0,ye(!1,s))}function vt(e){be(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function bt({basename:e="/",children:t=null,location:s,navigationType:r="POP",navigator:a,static:n=!1}){be(!st(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=e.replace(/^\/*/,"/"),o=m.useMemo(()=>({basename:i,navigator:a,static:n,future:{}}),[i,a,n]);"string"==typeof s&&(s=Ne(s));let{pathname:l="/",search:c="",hash:d="",state:u=null,key:h="default"}=s,p=m.useMemo(()=>{let e=Ue(l,i);return null==e?null:{location:{pathname:e,search:c,hash:d,state:u,key:h},navigationType:r}},[i,l,c,d,u,h,r]);return ye(null!=p,`<Router basename="${i}"> is not able to match the URL "${l}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),null==p?null:m.createElement(Ze.Provider,{value:o},m.createElement(Qe.Provider,{children:t,value:p}))}function yt({children:e,location:t}){return ct(wt(e),t)}function wt(e,t=[]){let s=[];return m.Children.forEach(e,(e,r)=>{if(!m.isValidElement(e))return;let a=[...t,r];if(e.type===m.Fragment)return void s.push.apply(s,wt(e.props.children,a));be(e.type===vt,`[${"string"==typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),be(!e.props.index||!e.props.children,"An index route cannot have child routes.");let n={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(n.children=wt(e.props.children,a)),s.push(n)}),s}m.memo(function({routes:e,future:t,state:s,unstable_onError:r}){return ct(e,void 0,s,r,t)});var jt="get",kt="application/x-www-form-urlencoded";function Nt(e){return null!=e&&"string"==typeof e.tagName}var _t=null;var St=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Tt(e){return null==e||St.has(e)?e:(ye(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${kt}"`),null)}function Ct(e,t){let s,r,a,n,i;if(Nt(o=e)&&"form"===o.tagName.toLowerCase()){let i=e.getAttribute("action");r=i?Ue(i,t):null,s=e.getAttribute("method")||jt,a=Tt(e.getAttribute("enctype"))||kt,n=new FormData(e)}else if(function(e){return Nt(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Nt(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let i=e.form;if(null==i)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||i.getAttribute("action");if(r=o?Ue(o,t):null,s=e.getAttribute("formmethod")||i.getAttribute("method")||jt,a=Tt(e.getAttribute("formenctype"))||Tt(i.getAttribute("enctype"))||kt,n=new FormData(i,e),!function(){if(null===_t)try{new FormData(document.createElement("form"),0),_t=!1}catch(e){_t=!0}return _t}()){let{name:t,type:s,value:r}=e;if("image"===s){let e=t?`${t}.`:"";n.append(`${e}x`,"0"),n.append(`${e}y`,"0")}else t&&n.append(t,r)}}else{if(Nt(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=jt,r=null,a=kt,i=e}var o;return n&&"text/plain"===a&&(i=n,n=void 0),{action:r,method:s.toLowerCase(),encType:a,formData:n,body:i}}function Et(e,t){if(!1===e||null==e)throw new Error(t)}function Pt(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}function Mt(e,t,s){return h(this,null,function*(){return function(e,t){let s=new Set;return new Set(t),e.reduce((e,t)=>{let r=JSON.stringify(function(e){let t={},s=Object.keys(e).sort();for(let r of s)t[r]=e[r];return t}(t));return s.has(r)||(s.add(r),e.push({key:r,link:t})),e},[])}((yield Promise.all(e.map(e=>h(null,null,function*(){let r=t.routes[e.route.id];if(r){let e=yield function(e,t){return h(this,null,function*(){if(e.id in t)return t[e.id];try{let s=yield import(e.module);return t[e.id]=s,s}catch(s){return window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}})}(r,s);return e.links?e.links():[]}return[]})))).flat(1).filter(Pt).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?c(l({},e),{rel:"prefetch",as:"style"}):c(l({},e),{rel:"prefetch"})))})}function Rt(e,t,s,r,a,n){let i=(e,t)=>!s[t]||e.route.id!==s[t].route.id,o=(e,t)=>{var r;return s[t].pathname!==e.pathname||(null==(r=s[t].route.path)?void 0:r.endsWith("*"))&&s[t].params["*"]!==e.params["*"]};return"assets"===n?t.filter((e,t)=>i(e,t)||o(e,t)):"data"===n?t.filter((t,n)=>{var l;let c=r.routes[t.route.id];if(!c||!c.hasLoader)return!1;if(i(t,n)||o(t,n))return!0;if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:(null==(l=s[0])?void 0:l.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof r)return r}return!0}):[]}function At(e,t,{includeHydrateFallback:s}={}){return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),s&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1),[...new Set(r)];var r}function Ot(){let e=m.useContext(Ge);return Et(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Dt=m.createContext(void 0);function $t(){let e=m.useContext(Dt);return Et(e,"You must render this element inside a <HydratedRouter> element"),e}function It(e,t){return s=>{e&&e(s),s.defaultPrevented||t(s)}}function Lt(e){var t=e,{page:s}=t,r=d(t,["page"]);let{router:a}=Ot(),n=m.useMemo(()=>_e(a.routes,s,a.basename),[a.routes,s,a.basename]);return n?m.createElement(Ut,l({page:s,matches:n},r)):null}function Ut(e){var t=e,{page:s,matches:r}=t,a=d(t,["page","matches"]);let n=rt(),{manifest:i,routeModules:o}=$t(),{basename:c}=Ot(),{loaderData:u,matches:h}=function(){let e=m.useContext(Ye);return Et(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}(),p=m.useMemo(()=>Rt(s,r,h,i,n,"data"),[s,r,h,i,n]),f=m.useMemo(()=>Rt(s,r,h,i,n,"assets"),[s,r,h,i,n]),g=m.useMemo(()=>{if(s===n.pathname+n.search+n.hash)return[];let e=new Set,t=!1;if(r.forEach(s=>{var r;let a=i.routes[s.route.id];a&&a.hasLoader&&(!p.some(e=>e.route.id===s.route.id)&&s.route.id in u&&(null==(r=o[s.route.id])?void 0:r.shouldRevalidate)||a.hasClientLoader?t=!0:e.add(s.route.id))}),0===e.size)return[];let a=function(e,t,s){let r="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname=`_root.${s}`:t&&"/"===Ue(r.pathname,t)?r.pathname=`${t.replace(/\/$/,"")}/_root.${s}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${s}`,r}(s,c,"data");return t&&e.size>0&&a.searchParams.set("_routes",r.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[a.pathname+a.search]},[c,u,n,i,p,r,s,o]),x=m.useMemo(()=>At(f,i),[f,i]),v=function(e){let{manifest:t,routeModules:s}=$t(),[r,a]=m.useState([]);return m.useEffect(()=>{let r=!1;return Mt(e,t,s).then(e=>{r||a(e)}),()=>{r=!0}},[e,t,s]),r}(f);return m.createElement(m.Fragment,null,g.map(e=>m.createElement("link",l({key:e,rel:"prefetch",as:"fetch",href:e},a))),x.map(e=>m.createElement("link",l({key:e,rel:"modulepreload",href:e},a))),v.map(({key:e,link:t})=>m.createElement("link",l({key:e,nonce:a.nonce},t))))}function zt(...e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}Dt.displayName="FrameworkContext";var qt="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{qt&&(window.__reactRouterVersion="7.8.2")}catch(Kd){}function Bt({basename:e,children:t,window:s}){let r=m.useRef();null==r.current&&(r.current=ve({window:s,v5Compat:!0}));let a=r.current,[n,i]=m.useState({action:a.action,location:a.location}),o=m.useCallback(e=>{m.startTransition(()=>i(e))},[i]);return m.useLayoutEffect(()=>a.listen(o),[a,o]),m.createElement(bt,{basename:e,children:t,location:n.location,navigationType:n.action,navigator:a})}var Wt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ht=m.forwardRef(function(e,t){var s=e,{onClick:r,discover:a="render",prefetch:n="none",relative:i,reloadDocument:o,replace:u,state:h,target:p,to:f,preventScrollReset:g,viewTransition:x}=s,v=d(s,["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"]);let b,{basename:y}=m.useContext(Ze),w="string"==typeof f&&Wt.test(f),j=!1;if("string"==typeof f&&w&&(b=f,qt))try{let e=new URL(window.location.href),t=f.startsWith("//")?new URL(e.protocol+f):new URL(f),s=Ue(t.pathname,y);t.origin===e.origin&&null!=s?f=s+t.search+t.hash:j=!0}catch(Kd){ye(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=function(e,{relative:t}={}){be(st(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:r}=m.useContext(Ze),{hash:a,pathname:n,search:i}=lt(e,{relative:t}),o=n;return"/"!==s&&(o="/"===n?s:We([s,n])),r.createHref({pathname:o,search:i,hash:a})}(f,{relative:i}),[N,_,S]=function(e,t){let s=m.useContext(Dt),[r,a]=m.useState(!1),[n,i]=m.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:d,onTouchStart:u}=t,h=m.useRef(null);m.useEffect(()=>{if("render"===e&&i(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{i(e.isIntersecting)})},{threshold:.5});return h.current&&e.observe(h.current),()=>{e.disconnect()}}},[e]),m.useEffect(()=>{if(r){let e=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(e)}}},[r]);let p=()=>{a(!0)},f=()=>{a(!1),i(!1)};return s?"intent"!==e?[n,h,{}]:[n,h,{onFocus:It(o,p),onBlur:It(l,f),onMouseEnter:It(c,p),onMouseLeave:It(d,f),onTouchStart:It(u,p)}]:[!1,h,{}]}(n,v),T=function(e,{target:t,replace:s,state:r,preventScrollReset:a,relative:n,viewTransition:i}={}){let o=it(),l=rt(),c=lt(e,{relative:n});return m.useCallback(d=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(d,t)){d.preventDefault();let t=void 0!==s?s:ke(l)===ke(c);o(e,{replace:t,state:r,preventScrollReset:a,relative:n,viewTransition:i})}},[l,o,c,s,r,t,e,a,n,i])}(f,{replace:u,state:h,target:p,preventScrollReset:g,relative:i,viewTransition:x});let C=m.createElement("a",c(l(l({},v),S),{href:b||k,onClick:j||o?r:function(e){r&&r(e),e.defaultPrevented||T(e)},ref:zt(t,_),target:p,"data-discover":w||"render"!==a?void 0:"true"}));return N&&!w?m.createElement(m.Fragment,null,C,m.createElement(Lt,{page:k})):C});Ht.displayName="Link",m.forwardRef(function(e,t){var s=e,{"aria-current":r="page",caseSensitive:a=!1,className:n="",end:i=!1,style:o,to:u,viewTransition:h,children:p}=s,f=d(s,["aria-current","caseSensitive","className","end","style","to","viewTransition","children"]);let g=lt(u,{relative:f.relative}),x=rt(),v=m.useContext(Ye),{navigator:b,basename:y}=m.useContext(Ze),w=null!=v&&function(e,{relative:t}={}){let s=m.useContext(Xe);be(null!=s,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Vt("useViewTransitionState"),a=lt(e,{relative:t});if(!s.isTransitioning)return!1;let n=Ue(s.currentLocation.pathname,r)||s.currentLocation.pathname,i=Ue(s.nextLocation.pathname,r)||s.nextLocation.pathname;return null!=Ie(a.pathname,i)||null!=Ie(a.pathname,n)}(g)&&!0===h,j=b.encodeLocation?b.encodeLocation(g).pathname:g.pathname,k=x.pathname,N=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;a||(k=k.toLowerCase(),N=N?N.toLowerCase():null,j=j.toLowerCase()),N&&y&&(N=Ue(N,y)||N);const _="/"!==j&&j.endsWith("/")?j.length-1:j.length;let S,T=k===j||!i&&k.startsWith(j)&&"/"===k.charAt(_),C=null!=N&&(N===j||!i&&N.startsWith(j)&&"/"===N.charAt(j.length)),E={isActive:T,isPending:C,isTransitioning:w},P=T?r:void 0;S="function"==typeof n?n(E):[n,T?"active":null,C?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let M="function"==typeof o?o(E):o;return m.createElement(Ht,c(l({},f),{"aria-current":P,className:S,ref:t,style:M,to:u,viewTransition:h}),"function"==typeof p?p(E):p)}).displayName="NavLink";var Ft=m.forwardRef((e,t)=>{var s=e,{discover:r="render",fetcherKey:a,navigate:n,reloadDocument:i,replace:o,state:u,method:p=jt,action:f,onSubmit:g,relative:x,preventScrollReset:v,viewTransition:b}=s,y=d(s,["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"]);let w=function(){let{router:e}=Vt("useSubmit"),{basename:t}=m.useContext(Ze),s=ft("useRouteId");return m.useCallback((r,...a)=>h(null,[r,...a],function*(r,a={}){let{action:n,method:i,encType:o,formData:l,body:c}=Ct(r,t);if(!1===a.navigate){let t=a.fetcherKey||Jt();yield e.fetch(t,s,a.action||n,{preventScrollReset:a.preventScrollReset,formData:l,body:c,formMethod:a.method||i,formEncType:a.encType||o,flushSync:a.flushSync})}else yield e.navigate(a.action||n,{preventScrollReset:a.preventScrollReset,formData:l,body:c,formMethod:a.method||i,formEncType:a.encType||o,replace:a.replace,state:a.state,fromRouteId:s,flushSync:a.flushSync,viewTransition:a.viewTransition})}),[e,t,s])}(),j=function(e,{relative:t}={}){let{basename:s}=m.useContext(Ze),r=m.useContext(et);be(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),n=l({},lt(e||".",{relative:t})),i=rt();if(null==e){n.search=i.search;let e=new URLSearchParams(n.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let s=e.toString();n.search=s?`?${s}`:""}}e&&"."!==e||!a.route.index||(n.search=n.search?n.search.replace(/^\?/,"?index&"):"?index");"/"!==s&&(n.pathname="/"===n.pathname?s:We([s,n.pathname]));return ke(n)}(f,{relative:x}),k="get"===p.toLowerCase()?"get":"post",N="string"==typeof f&&Wt.test(f);return m.createElement("form",c(l({ref:t,method:k,action:j,onSubmit:i?g:e=>{if(g&&g(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,s=(null==t?void 0:t.getAttribute("formmethod"))||p;w(t||e.currentTarget,{fetcherKey:a,method:s,navigate:n,replace:o,state:u,relative:x,preventScrollReset:v,viewTransition:b})}},y),{"data-discover":N||"render"!==r?void 0:"true"}))});function Vt(e){let t=m.useContext(Ge);return be(t,function(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}(e)),t}Ft.displayName="Form";var Kt=0,Jt=()=>`__${String(++Kt)}__`;function Gt(e){return"/"+e.toLowerCase().replace(/ /g,"-")}
/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=(...e)=>e.filter((e,t,s)=>Boolean(e)&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim();
/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var Xt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=m.forwardRef((e,t)=>{var s=e,{color:r="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:o="",children:u,iconNode:h}=s,p=d(s,["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"]);return m.createElement("svg",l(c(l({ref:t},Xt),{width:a,height:a,stroke:r,strokeWidth:i?24*Number(n)/Number(a):n,className:Yt("lucide",o)}),p),[...h.map(([e,t])=>m.createElement(e,t)),...Array.isArray(u)?u:[u]])}),Qt=(e,t)=>{const s=m.forwardRef((s,r)=>{var a,n=s,{className:i}=n,o=d(n,["className"]);return m.createElement(Zt,l({ref:r,iconNode:t,className:Yt(`lucide-${a=e,a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,i)},o))});return s.displayName=`${e}`,s},es=Qt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),ts=Qt("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),ss=Qt("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),rs=Qt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),as=Qt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),ns=Qt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),is=Qt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),os=Qt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),ls=Qt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),cs=Qt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),ds=Qt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),us=Qt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),hs=Qt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),ms=Qt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),ps=Qt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),fs=Qt("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),gs=Qt("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),xs=Qt("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]),vs=Qt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),bs=Qt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),ys=Qt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),ws=Qt("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),js=Qt("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),ks=Qt("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),Ns=Qt("ListMusic",[["path",{d:"M21 15V6",key:"h1cx4g"}],["path",{d:"M18.5 18a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z",key:"8saifv"}],["path",{d:"M12 12H3",key:"18klou"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M12 18H3",key:"11ftsu"}]]),_s=Qt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Ss=Qt("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),Ts=Qt("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),Cs=Qt("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),Es=Qt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Ps=Qt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Ms=Qt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Rs=Qt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),As=Qt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Os=Qt("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),Ds=Qt("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),$s=Qt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),Is=Qt("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),Ls=Qt("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),Us=Qt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),zs=Qt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),qs=Qt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Bs=Qt("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),Ws=Qt("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),Hs=Qt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Fs=Qt("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),Vs=Qt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Ks=()=>{const e=navigator.userAgent||navigator.vendor||window.opera;return/iPad|iPhone|iPod/.test(e)&&!window.MSStream},Js=()=>!0===window.navigator.standalone||window.matchMedia("(display-mode: standalone)").matches,Gs=()=>{const e=Ks(),t=Js(),s=localStorage.getItem("ios-tutorial-seen");return e&&!t&&!s};
/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function Ys({onShowVisualGuide:e}){const[t,s]=m.useState(!1),[r,a]=m.useState(0),[n,i]=m.useState(!1),[o,l]=m.useState(!1);m.useEffect(()=>{const e=Ks(),t=Js();if(i(e),l(t),Gs()){const e=setTimeout(()=>{s(!0)},2e3);return()=>clearTimeout(e)}},[]);const c=[{title:"Adicionar à tela inicial",description:"Clique no botão Compartilhar na parte inferior do seu navegador",icon:Os,arrow:ts,arrowPosition:"bottom-20 right-4",highlight:"share-button"},{title:"Selecionar a opção",description:"Depois escolha 'Na tela inicial' no menu",icon:bs,arrow:es,arrowPosition:"bottom-16 right-20",highlight:"add-to-home"},{title:"Confirmar a adição",description:"Pressione 'Adicionar' para instalar o aplicativo",icon:bs,arrow:ts,arrowPosition:"bottom-12 right-16",highlight:"confirm-add"}],d=()=>{s(!1),localStorage.setItem("ios-tutorial-seen","true")};return Gs()&&t?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"fixed inset-0 bg-black/50 z-50",onClick:d}),p.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-sm w-full mx-4 overflow-hidden",children:[p.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white p-6 text-center relative",children:[p.jsx("button",{onClick:d,className:"absolute top-4 right-4 p-2 rounded-full bg-white/20 hover:bg-white/30 transition-colors",children:p.jsx(Hs,{className:"w-5 h-5"})}),p.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(()=>{const e=c[r].icon;return p.jsx(e,{className:"w-8 h-8"})})()}),p.jsx("h2",{className:"text-xl font-bold mb-2",children:c[r].title}),p.jsx("p",{className:"text-blue-100 text-sm",children:c[r].description})]}),p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"bg-gray-100 rounded-2xl p-4 mb-6 relative",children:[p.jsxs("div",{className:"bg-white rounded-xl p-3 mb-3 flex items-center justify-between",children:[p.jsx("span",{className:"text-sm text-gray-600",children:"Safari"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("div",{className:"w-3 h-3 bg-red-400 rounded-full"}),p.jsx("div",{className:"w-3 h-3 bg-yellow-400 rounded-full"}),p.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full"})]})]}),p.jsxs("div",{className:"bg-white rounded-xl p-3 flex items-center justify-between",children:[p.jsx("div",{className:"w-6 h-6 bg-gray-300 rounded"}),p.jsx("div",{className:"flex-1 mx-3 h-8 bg-gray-200 rounded-lg"}),p.jsx("div",{className:"w-6 h-6 bg-gray-300 rounded"})]}),p.jsx("div",{className:"bg-white rounded-xl p-3 mt-3 flex items-center justify-center",children:p.jsxs("div",{className:"flex items-center gap-2 text-blue-600",children:[p.jsx(Os,{className:"w-5 h-5"}),p.jsx("span",{className:"text-sm font-medium",children:"Compartilhar"})]})}),p.jsx("div",{className:`absolute ${c[r].arrowPosition} animate-bounce`,children:(()=>{const e=c[r].arrow;return p.jsx(e,{className:"w-8 h-8 text-blue-600 drop-shadow-lg"})})()})]}),p.jsx("div",{className:"flex justify-center gap-2 mb-6",children:c.map((e,t)=>p.jsx("div",{className:"w-2 h-2 rounded-full transition-colors "+(t===r?"bg-blue-500":"bg-gray-300")},t))}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{onClick:()=>{s(!1),localStorage.setItem("ios-tutorial-seen","true")},className:"flex-1 py-3 px-4 text-gray-600 border border-gray-300 rounded-xl hover:bg-gray-50 transition-colors",children:"Ignorar"}),p.jsx("button",{onClick:()=>{r<c.length-1?a(r+1):(s(!1),localStorage.setItem("ios-tutorial-seen","true"))},className:"flex-1 py-3 px-4 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors font-medium",children:r===c.length-1?"Finalizar":"Próximo"})]})]})]})}),p.jsx("div",{className:"fixed bottom-20 left-4 right-4 z-40 lg:hidden",children:p.jsx("div",{className:"bg-blue-600 text-white rounded-2xl p-4 shadow-lg border border-blue-500/20",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:p.jsx(bs,{className:"w-5 h-5"})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h3",{className:"font-semibold text-sm",children:"Adicionar à tela inicial"}),p.jsx("p",{className:"text-blue-100 text-xs",children:'Clique em Compartilhar e depois "Na tela inicial"'})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>s(!0),className:"bg-white/20 hover:bg-white/30 px-3 py-1 rounded-lg text-xs font-medium transition-colors",children:"Tutorial"}),p.jsx("button",{onClick:e,className:"bg-white/20 hover:bg-white/30 px-3 py-1 rounded-lg text-xs font-medium transition-colors",children:"Guia visual"})]})]})})})]}):null}const Xs=({message:e,type:t="info",duration:s=5e3,onClose:r})=>{const[a,n]=m.useState(!0);m.useEffect(()=>{if(s>0){const e=setTimeout(()=>{n(!1),setTimeout(()=>null==r?void 0:r(),300)},s);return()=>clearTimeout(e)}},[s,r]);const i={success:ds,error:cs,warning:cs,info:ys}[t];return a?p.jsx("div",{className:"fixed top-4 right-4 z-50 transform transition-all duration-300 "+(a?"translate-x-0 opacity-100":"translate-x-full opacity-0"),children:p.jsx("div",{className:`${{success:"bg-green-500 border-green-600",error:"bg-red-500 border-red-600",warning:"bg-yellow-500 border-yellow-600",info:"bg-blue-500 border-blue-600"}[t]} text-white rounded-lg shadow-lg border p-4 max-w-sm`,children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx(i,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),p.jsx("div",{className:"flex-1",children:p.jsx("p",{className:"text-sm font-medium",children:e})}),p.jsx("button",{onClick:()=>{n(!1),setTimeout(()=>null==r?void 0:r(),300)},className:"text-white/80 hover:text-white transition-colors flex-shrink-0",children:p.jsx(Hs,{className:"w-4 h-4"})})]})})}):null};function Zs({isOpen:e,onClose:t}){const[s,r]=m.useState(0),[a,n]=m.useState(!1),i=[{title:"Passo 1: Botão Compartilhar",description:"Localize o botão Compartilhar na parte inferior do seu navegador Safari",image:"step1",highlight:"share-button"},{title:"Passo 2: Menu Compartilhar",description:"O menu Compartilhar abre com várias opções",image:"step2",highlight:"share-menu"},{title:"Passo 3: Na tela inicial",description:"Role e selecione 'Na tela inicial'",image:"step3",highlight:"add-to-home"},{title:"Passo 4: Confirmação",description:"Pressione 'Adicionar' para instalar o aplicativo",image:"step4",highlight:"confirm"}];return e?p.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[p.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:t}),p.jsxs("div",{className:"relative bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[p.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white p-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h2",{className:"text-2xl font-bold",children:"Guia de instalação iOS"}),p.jsx("button",{onClick:t,className:"p-2 rounded-full bg-white/20 hover:bg-white/30 transition-colors",children:p.jsx(Hs,{className:"w-6 h-6"})})]}),p.jsx("div",{className:"flex items-center gap-4 mt-4",children:p.jsxs("button",{onClick:()=>{if(n(!a),!a){const e=setInterval(()=>{r(t=>t>=i.length-1?(clearInterval(e),n(!1),t):t+1)},3e3)}},className:"flex items-center gap-2 bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition-colors",children:[a?p.jsx(Ts,{className:"w-4 h-4"}):p.jsx(Cs,{className:"w-4 h-4"}),p.jsx("span",{className:"text-sm",children:a?"Pausar":"Reprodução automática"})]})})]}),p.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[p.jsxs("div",{className:"relative bg-gray-100 rounded-2xl p-6 mb-6",children:[p.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-lg",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4 text-xs text-gray-600",children:[p.jsx("span",{children:"9:41"}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"w-4 h-2 bg-gray-300 rounded-full"}),p.jsx("span",{children:"100%"})]})]}),p.jsx("div",{className:"bg-gray-200 rounded-lg p-2 mb-4",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded"}),p.jsx("span",{className:"text-xs text-gray-600",children:"musica-da-segunda.com"})]})}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("div",{className:"h-4 bg-gray-300 rounded"}),p.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"}),p.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),p.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full"}),p.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full"}),p.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full"}),p.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full"}),p.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full"})]})})]}),p.jsx("div",{className:"absolute bottom-4 right-4 bg-blue-500 text-white rounded-full p-3 shadow-lg",children:p.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})})}),p.jsx("div",{className:"absolute bottom-16 right-4 animate-bounce",children:p.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})})})]}),p.jsxs("div",{className:"text-center mb-6",children:[p.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:i[s].title}),p.jsx("p",{className:"text-gray-600",children:i[s].description})]}),p.jsx("div",{className:"flex justify-center gap-2 mb-6",children:i.map((e,t)=>p.jsx("div",{className:"w-3 h-3 rounded-full transition-colors "+(t===s?"bg-blue-500":"bg-gray-300")},t))}),p.jsxs("div",{className:"flex justify-between",children:[p.jsxs("button",{onClick:()=>{s>0&&r(s-1)},disabled:0===s,className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-colors "+(0===s?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"),children:[p.jsx(is,{className:"w-4 h-4"}),"Anterior"]}),p.jsxs("button",{onClick:()=>{s<i.length-1&&r(s+1)},disabled:s===i.length-1,className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-colors "+(s===i.length-1?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"),children:["Próximo",p.jsx(os,{className:"w-4 h-4"})]})]})]})]})]}):null}function Qs(){const[e,t]=m.useState(!1),[s,r]=m.useState(""),[a,n]=m.useState("info"),[i,o]=m.useState(!1);m.useEffect(()=>{if(Gs()){const e=setTimeout(()=>{Ks()&&(()=>{const e=navigator.userAgent;return/Safari/.test(e)&&!/Chrome/.test(e)})()&&(r('💡 Dica: Adicione este app à sua tela inicial para uma experiência melhor! Clique em "Tutorial" para ver o guia completo.'),n("info"),t(!0))},3e3);return()=>clearTimeout(e)}},[]);return Gs()?p.jsxs(p.Fragment,{children:[p.jsx(Ys,{onShowVisualGuide:()=>o(!0)}),e&&p.jsx(Xs,{message:s,type:a,duration:8e3,onClose:()=>{t(!1)}}),p.jsx(Zs,{isOpen:i,onClose:()=>o(!1)})]}):null}Date.now();const er="BNmWY52nhsYuohsMsFuFw5-vPv20qLw6nehrF-vyzPm87xU-6cPUoJhwtAVxj_18TcREBqx2uLdr5dcl57gVVNw",tr=()=>"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window,sr=e=>{const t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),s=atob(t),r=new Uint8Array(s.length);for(let a=0;a<s.length;++a)r[a]=s.charCodeAt(a);return r},rr=()=>{if(!tr()||"true"===localStorage.getItem("push_optout"))return!1;const e=localStorage.getItem("push_refused_until");return!(e&&Date.now()<Number(e))&&(!(/iPad|iPhone|iPod/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)||!0===navigator.standalone)};function ar(){return h(this,arguments,function*({locale:e="pt-BR"}={}){if(!tr())throw new Error("Push non supporté");try{if(65!==sr(er).byteLength)throw new Error("VAPID key invalide: longueur incorrecte")}catch(Kd){throw new Error("VAPID key invalide: "+Kd.message)}const t=yield function(){return h(this,null,function*(){try{return yield navigator.serviceWorker.ready}catch(e){return yield navigator.serviceWorker.register("/sw.js")}})}();if(!t)throw new Error("Service Worker registration failed");if("granted"!==(yield Notification.requestPermission())){const e=Date.now()+2592e6;throw localStorage.setItem("push_refused_until",String(e)),new Error("Permission refusée")}const s=yield t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:sr(er)}),r=yield fetch("https://efnzmpzkzeuktqkghwfa.functions.supabase.co/push/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscription:s,topic:"new-song",locale:e,vapidKeyVersion:"v1"})});if(!r.ok){yield r.text();throw new Error(`Subscribe failed: ${r.status} ${r.statusText}`)}return s})}function nr({locale:e="fr",className:t=""}){const[s,r]=f.useState(!1),[a,n]=f.useState(!1);return f.useEffect(()=>{r(rr())},[]),s?p.jsxs("div",{className:t,style:{display:"flex",gap:8,alignItems:"center"},children:[p.jsx("button",{"aria-label":"Activer les notifications",disabled:a,onClick:()=>h(null,null,function*(){try{n(!0),yield ar({locale:"pt-BR"}),ir("Notificações ativadas ✔"),r(!1)}catch(Kd){ir("Não foi possível ativar")}finally{n(!1)}}),style:{padding:"10px 14px",borderRadius:9999},children:"🔔 Avise-me das novas músicas"}),p.jsx("button",{"aria-label":"Ne plus proposer les notifications",onClick:()=>{localStorage.setItem("push_optout","true"),r(!1),ir("Ok, on ne proposera plus.")},style:{background:"transparent",border:"none",textDecoration:"underline",fontSize:12},children:"Não mostrar novamente"})]}):null}function ir(e){try{alert(e)}catch(Kd){}}function or({children:e}){const t=rt(),s=[{name:"Início",url:Gt("Home"),icon:bs},{name:"Calendário",url:Gt("Calendar"),icon:rs},{name:"Playlist",url:Gt("Playlist"),icon:Ns},{name:"Blog",url:Gt("Blog"),icon:ms},{name:"Ano 2025",url:Gt("AdventCalendar"),icon:fs},{name:"Sobre",url:Gt("Sobre"),icon:ys}],r=e=>"Início"===e.name&&"/"===t.pathname||t.pathname===e.url;return p.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-teal-200 to-rose-200",children:[p.jsx("header",{className:"hidden lg:block bg-white/90 backdrop-blur-lg border-b border-white/50 shadow-lg sticky top-0 z-40",children:p.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx(Ht,{to:"/",className:"w-12 h-12 rounded-full overflow-hidden border-2 border-white/20 shadow-lg flex-shrink-0",children:p.jsx("img",{src:"images/Musica da segunda.jpg",alt:"Logo Música da Segunda",className:"w-full h-full object-cover"})}),p.jsxs("div",{children:[p.jsx("h1",{className:"text-xl font-black text-gray-800",children:"Música da Segunda"}),p.jsx("p",{className:"text-sm text-gray-600",children:"Descubra música nova toda segunda-feira"})]})]}),p.jsxs("nav",{className:"flex items-center gap-1",children:[s.map(e=>p.jsxs(Ht,{to:e.url,className:"flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 font-medium "+(r(e)?"bg-[#32a2dc] text-white shadow-md":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"),children:[p.jsx(e.icon,{className:"w-4 h-4"}),p.jsx("span",{children:e.name})]},e.name)),p.jsx("div",{className:"ml-4",children:p.jsx(nr,{locale:"pt",className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-xl transition-all duration-300 font-medium shadow-md hover:shadow-lg"})})]})]})})}),p.jsx("main",{className:"lg:pb-0 pb-28 relative z-10",children:e}),p.jsx("nav",{className:"lg:hidden fixed bottom-4 left-1/2 -translate-x-1/2 w-[calc(100%-2rem)] max-w-2xl bg-white/80 backdrop-blur-lg rounded-3xl shadow-xl border border-white/50 z-50",children:p.jsx("div",{className:"flex gap-1 p-1",children:s.filter(e=>"Sobre"!==e.name).map(e=>p.jsxs(Ht,{to:e.url,className:"flex flex-col items-center justify-center py-3 px-2 rounded-3xl transition-all duration-300 flex-1 min-w-0 "+(r(e)?"bg-[#32a2dc] text-white shadow-lg transform scale-105":"text-gray-500 hover:text-gray-700 hover:bg-white/60"),children:[p.jsx(e.icon,{className:"w-5 h-5 mb-1 flex-shrink-0"}),p.jsx("span",{className:"text-xs font-bold text-center leading-tight truncate",children:e.name})]},e.name))})}),p.jsx("div",{className:"fixed bottom-2 right-2 text-xs text-gray-500",children:"V1"}),p.jsx(Qs,{})]})}const lr="musica-da-segunda-songs",cr="musica-da-segunda-albums",dr="musica-da-segunda-settings",ur=[{id:1,title:"Confissões Bancárias",artist:"A Música da Segunda",description:"Uma música sobre confissões bancárias e humor",lyrics:"Confissões bancárias...\nNova música da segunda...",release_date:"2025-08-25",status:"published",tiktok_video_id:"7540762684149517590",tiktok_url:"https://www.tiktok.com/@amusicadasegunda/video/7540762684149517590",spotify_url:"",apple_music_url:"",youtube_url:"",cover_image:"",hashtags:["humor","moraes","bancos","trendingsong","musica"],created_at:"2025-01-27T10:00:00.000Z",updated_at:"2025-01-27T10:00:00.000Z"},{id:2,title:"Café Tarifa Caos",artist:"A Música da Segunda",description:"Música sobre café, tarifas e o caos do dia a dia",lyrics:"Café tarifa caos...\nNova música da segunda...",release_date:"2025-08-03",status:"published",tiktok_video_id:"7540762684149517591",tiktok_url:"https://www.tiktok.com/@amusicadasegunda/video/7540762684149517591",spotify_url:"",apple_music_url:"",youtube_url:"",cover_image:"",hashtags:["cafe","tarifa","caos","trendingsong","musica"],created_at:"2025-01-27T10:00:00.000Z",updated_at:"2025-01-27T10:00:00.000Z"},{id:3,title:"Segunda-feira Blues",artist:"A Música da Segunda",description:"O clássico blues da segunda-feira",lyrics:"Segunda-feira blues...\nNova música da segunda...",release_date:"2025-08-18",status:"published",tiktok_video_id:"7540762684149517592",tiktok_url:"https://www.tiktok.com/@amusicadasegunda/video/7540762684149517592",spotify_url:"",apple_music_url:"",youtube_url:"",cover_image:"",hashtags:["blues","segunda","trendingsong","musica"],created_at:"2025-01-27T10:00:00.000Z",updated_at:"2025-01-27T10:00:00.000Z"}],hr={initialize(){localStorage.getItem(lr)||localStorage.setItem(lr,JSON.stringify(ur))},forceReset(){localStorage.setItem(lr,JSON.stringify(ur))},songs:{getAll(){try{const e=localStorage.getItem(lr);return e?JSON.parse(e):[]}catch(e){return[]}},getById(e){return this.getAll().find(t=>t.id===e)||null},getCurrent(){const e=this.getAll().filter(e=>"published"===e.status);return 0===e.length?null:(e.sort((e,t)=>new Date(t.release_date)-new Date(e.release_date)),e[0])},create(e){try{const t=this.getAll(),s=c(l({},e),{id:Date.now(),created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()});return t.push(s),localStorage.setItem(lr,JSON.stringify(t)),s}catch(t){throw t}},update(e,t){try{const s=this.getAll(),r=s.findIndex(t=>t.id===e);if(-1===r)throw new Error("Música não encontrada");return s[r]=c(l(l({},s[r]),t),{updated_at:(new Date).toISOString()}),localStorage.setItem(lr,JSON.stringify(s)),s[r]}catch(s){throw s}},delete(e){try{const t=this.getAll().filter(t=>t.id!==e);return localStorage.setItem(lr,JSON.stringify(t)),!0}catch(t){throw t}},search(e){const t=this.getAll();if(!e)return t;const s=e.toLowerCase();return t.filter(e=>{var t;return e.title.toLowerCase().includes(s)||e.artist.toLowerCase().includes(s)||(null==(t=e.description)?void 0:t.toLowerCase().includes(s))})}},albums:{getAll(){try{const e=localStorage.getItem(cr);return e?JSON.parse(e):[]}catch(e){return[]}},create(e){try{const t=this.getAll(),s=c(l({},e),{id:Date.now(),created_at:(new Date).toISOString()});return t.push(s),localStorage.setItem(cr,JSON.stringify(t)),s}catch(t){throw t}}},clearAll(){localStorage.removeItem(lr),localStorage.removeItem(cr),localStorage.removeItem(dr)},exportData(){return{songs:this.songs.getAll(),albums:this.albums.getAll(),exportDate:(new Date).toISOString()}},importData(e){try{return e.songs&&localStorage.setItem(lr,JSON.stringify(e.songs)),e.albums&&localStorage.setItem(cr,JSON.stringify(e.albums)),!0}catch(t){throw t}}};hr.initialize();class mr extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class pr extends mr{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class fr extends mr{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class gr extends mr{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var xr,vr;(vr=xr||(xr={})).Any="any",vr.ApNortheast1="ap-northeast-1",vr.ApNortheast2="ap-northeast-2",vr.ApSouth1="ap-south-1",vr.ApSoutheast1="ap-southeast-1",vr.ApSoutheast2="ap-southeast-2",vr.CaCentral1="ca-central-1",vr.EuCentral1="eu-central-1",vr.EuWest1="eu-west-1",vr.EuWest2="eu-west-2",vr.EuWest3="eu-west-3",vr.SaEast1="sa-east-1",vr.UsEast1="us-east-1",vr.UsWest1="us-west-1",vr.UsWest2="us-west-2";var br=function(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{l(r.next(e))}catch(Kd){n(Kd)}}function o(e){try{l(r.throw(e))}catch(Kd){n(Kd)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};class yr{constructor(e,{headers:t={},customFetch:s,region:r=xr.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>ge(()=>h(null,null,function*(){const{default:e}=yield Promise.resolve().then(()=>Ar);return{default:e}}),[]).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)})(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return br(this,void 0,void 0,function*(){try{const{headers:r,method:a,body:n}=t;let i={},{region:o}=t;o||(o=this.region);const l=new URL(`${this.url}/${e}`);let c;o&&"any"!==o&&(i["x-region"]=o,l.searchParams.set("forceFunctionRegion",o)),n&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!=typeof Blob&&n instanceof Blob||n instanceof ArrayBuffer?(i["Content-Type"]="application/octet-stream",c=n):"string"==typeof n?(i["Content-Type"]="text/plain",c=n):"undefined"!=typeof FormData&&n instanceof FormData?c=n:(i["Content-Type"]="application/json",c=JSON.stringify(n)));const d=yield this.fetch(l.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},i),this.headers),r),body:c}).catch(e=>{throw new pr(e)}),u=d.headers.get("x-relay-error");if(u&&"true"===u)throw new fr(d);if(!d.ok)throw new gr(d);let h,m=(null!==(s=d.headers.get("Content-Type"))&&void 0!==s?s:"text/plain").split(";")[0].trim();return h="application/json"===m?yield d.json():"application/octet-stream"===m?yield d.blob():"text/event-stream"===m?d:"multipart/form-data"===m?yield d.formData():yield d.text(),{data:h,error:null,response:d}}catch(r){return{data:null,error:r,response:r instanceof gr||r instanceof fr?r.context:void 0}}})}}var wr={},jr={},kr={},Nr={},_r={},Sr={},Tr=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();const Cr=Tr.fetch,Er=Tr.fetch.bind(Tr),Pr=Tr.Headers,Mr=Tr.Request,Rr=Tr.Response,Ar=Object.freeze(Object.defineProperty({__proto__:null,Headers:Pr,Request:Mr,Response:Rr,default:Er,fetch:Cr},Symbol.toStringTag,{value:"Module"})),Or=Y(Ar);var Dr,$r,Ir,Lr,Ur,zr,qr,Br={};function Wr(){if(Dr)return Br;Dr=1,Object.defineProperty(Br,"__esModule",{value:!0});class e extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}return Br.default=e,Br}function Hr(){if($r)return Sr;$r=1;var e=Sr&&Sr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Sr,"__esModule",{value:!0});const t=e(Or),s=e(Wr());return Sr.default=class{constructor(e){var s,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(s=e.shouldThrowOnError)&&void 0!==s&&s,this.signal=e.signal,this.isMaybeSingle=null!==(r=e.isMaybeSingle)&&void 0!==r&&r,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(e=>h(this,null,function*(){var t,r,a,n;let i=null,o=null,l=null,c=e.status,d=e.statusText;if(e.ok){if("HEAD"!==this.method){const s=yield e.text();""===s||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?s:JSON.parse(s))}const s=null===(r=this.headers.get("Prefer"))||void 0===r?void 0:r.match(/count=(exact|planned|estimated)/),n=null===(a=e.headers.get("content-range"))||void 0===a?void 0:a.split("/");s&&n&&n.length>1&&(l=parseInt(n[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(i={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,d="Not Acceptable"):o=1===o.length?o[0]:null)}else{const t=yield e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(o=[],i=null,c=200,d="OK")}catch(u){404===e.status&&""===t?(c=204,d="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(n=null==i?void 0:i.details)||void 0===n?void 0:n.includes("0 rows"))&&(i=null,c=200,d="OK"),i&&this.shouldThrowOnError)throw new s.default(i)}return{error:i,data:o,count:l,status:c,statusText:d}}));return this.shouldThrowOnError||(r=r.catch(e=>{var t,s,r;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(s=null==e?void 0:e.stack)&&void 0!==s?s:""}`,hint:"",code:`${null!==(r=null==e?void 0:e.code)&&void 0!==r?r:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}},Sr}function Fr(){if(Ir)return _r;Ir=1;var e=_r&&_r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_r,"__esModule",{value:!0});const t=e(Hr());class s extends t.default{select(e){let t=!1;const s=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:r,referencedTable:a=r}={}){const n=a?`${a}.order`:"order",i=this.url.searchParams.get(n);return this.url.searchParams.set(n,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===s?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const r=void 0===s?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:r=s}={}){const a=void 0===r?"offset":`${r}.offset`,n=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(n,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:r=!1,wal:a=!1,format:n="text"}={}){var i;const o=[e?"analyze":null,t?"verbose":null,s?"settings":null,r?"buffers":null,a?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.get("Accept"))&&void 0!==i?i:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${n}; for="${l}"; options=${o};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}}return _r.default=s,_r}function Vr(){if(Lr)return Nr;Lr=1;var e=Nr&&Nr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Nr,"__esModule",{value:!0});const t=e(Fr());class s extends t.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:r}={}){let a="";"plain"===r?a="pl":"phrase"===r?a="ph":"websearch"===r&&(a="w");const n=void 0===s?"":`(${s})`;return this.url.searchParams.append(e,`${a}fts${n}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}}return Nr.default=s,Nr}function Kr(){if(Ur)return kr;Ur=1;var e=kr&&kr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(kr,"__esModule",{value:!0});const t=e(Vr());return kr.default=class{constructor(e,{headers:t={},schema:s,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=s,this.fetch=r}select(e,{head:s=!1,count:r}={}){const a=s?"HEAD":"GET";let n=!1;const i=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!n?"":('"'===e&&(n=!n),e)).join("");return this.url.searchParams.set("select",i),r&&this.headers.append("Prefer",`count=${r}`),new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:s,defaultToNull:r=!0}={}){var a;if(s&&this.headers.append("Prefer",`count=${s}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new t.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(a=this.fetch)&&void 0!==a?a:fetch})}upsert(e,{onConflict:s,ignoreDuplicates:r=!1,count:a,defaultToNull:n=!0}={}){var i;if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),void 0!==s&&this.url.searchParams.set("on_conflict",s),a&&this.headers.append("Prefer",`count=${a}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new t.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}update(e,{count:s}={}){var r;return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}delete({count:e}={}){var s;return e&&this.headers.append("Prefer",`count=${e}`),new t.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}},kr}const Jr=G(function(){if(qr)return wr;qr=1;var e=wr&&wr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wr,"__esModule",{value:!0}),wr.PostgrestError=wr.PostgrestBuilder=wr.PostgrestTransformBuilder=wr.PostgrestFilterBuilder=wr.PostgrestQueryBuilder=wr.PostgrestClient=void 0;const t=e(function(){if(zr)return jr;zr=1;var e=jr&&jr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jr,"__esModule",{value:!0});const t=e(Kr()),s=e(Vr());class r{constructor(e,{headers:t={},schema:s,fetch:r}={}){this.url=e,this.headers=new Headers(t),this.schemaName=s,this.fetch=r}from(e){const s=new URL(`${this.url}/${e}`);return new t.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new r(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:a=!1,count:n}={}){var i;let o;const l=new URL(`${this.url}/rpc/${e}`);let c;r||a?(o=r?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{l.searchParams.append(e,t)})):(o="POST",c=t);const d=new Headers(this.headers);return n&&d.set("Prefer",`count=${n}`),new s.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}}return jr.default=r,jr}());wr.PostgrestClient=t.default;const s=e(Kr());wr.PostgrestQueryBuilder=s.default;const r=e(Vr());wr.PostgrestFilterBuilder=r.default;const a=e(Fr());wr.PostgrestTransformBuilder=a.default;const n=e(Hr());wr.PostgrestBuilder=n.default;const i=e(Wr());return wr.PostgrestError=i.default,wr.default={PostgrestClient:t.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:n.default,PostgrestError:i.default},wr}()),{PostgrestClient:Gr,PostgrestQueryBuilder:Yr,PostgrestFilterBuilder:Xr,PostgrestTransformBuilder:Zr,PostgrestBuilder:Qr,PostgrestError:ea}=Jr;class ta{static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process&&process.versions&&process.versions.node){const e=parseInt(process.versions.node.split(".")[0]);return e>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${e} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${e} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}}const sa=1e4;var ra,aa,na,ia,oa,la,ca,da,ua,ha,ma;(aa=ra||(ra={}))[aa.connecting=0]="connecting",aa[aa.open=1]="open",aa[aa.closing=2]="closing",aa[aa.closed=3]="closed",(ia=na||(na={})).closed="closed",ia.errored="errored",ia.joined="joined",ia.joining="joining",ia.leaving="leaving",(la=oa||(oa={})).close="phx_close",la.error="phx_error",la.join="phx_join",la.reply="phx_reply",la.leave="phx_leave",la.access_token="access_token",(ca||(ca={})).websocket="websocket",(ua=da||(da={})).Connecting="connecting",ua.Open="open",ua.Closing="closing",ua.Closed="closed";class pa{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const r=t.getUint8(1),a=t.getUint8(2);let n=this.HEADER_LENGTH+2;const i=s.decode(e.slice(n,n+r));n+=r;const o=s.decode(e.slice(n,n+a));n+=a;return{ref:null,topic:i,event:o,payload:JSON.parse(s.decode(e.slice(n,e.byteLength)))}}}class fa{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(ma=ha||(ha={})).abstime="abstime",ma.bool="bool",ma.date="date",ma.daterange="daterange",ma.float4="float4",ma.float8="float8",ma.int2="int2",ma.int4="int4",ma.int4range="int4range",ma.int8="int8",ma.int8range="int8range",ma.json="json",ma.jsonb="jsonb",ma.money="money",ma.numeric="numeric",ma.oid="oid",ma.reltime="reltime",ma.text="text",ma.time="time",ma.timestamp="timestamp",ma.timestamptz="timestamptz",ma.timetz="timetz",ma.tsrange="tsrange",ma.tstzrange="tstzrange";const ga=(e,t,s={})=>{var r;const a=null!==(r=s.skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce((s,r)=>(s[r]=xa(r,e,t,a),s),{})},xa=(e,t,s,r)=>{const a=t.find(t=>t.name===e),n=null==a?void 0:a.type,i=s[e];return n&&!r.includes(n)?va(n,i):ba(i)},va=(e,t)=>{if("_"===e.charAt(0)){const s=e.slice(1,e.length);return ka(t,s)}switch(e){case ha.bool:return ya(t);case ha.float4:case ha.float8:case ha.int2:case ha.int4:case ha.int8:case ha.numeric:case ha.oid:return wa(t);case ha.json:case ha.jsonb:return ja(t);case ha.timestamp:return Na(t);case ha.abstime:case ha.date:case ha.daterange:case ha.int4range:case ha.int8range:case ha.money:case ha.reltime:case ha.text:case ha.time:case ha.timestamptz:case ha.timetz:case ha.tsrange:case ha.tstzrange:default:return ba(t)}},ba=e=>e,ya=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},wa=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},ja=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e}return e},ka=(e,t)=>{if("string"!=typeof e)return e;const s=e.length-1,r=e[s];if("{"===e[0]&&"}"===r){let r;const n=e.slice(1,s);try{r=JSON.parse("["+n+"]")}catch(a){r=n?n.split(","):[]}return r.map(e=>va(t,e))}return e},Na=e=>"string"==typeof e?e.replace(" ","T"):e,_a=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Sa{constructor(e,t,s={},r=1e4){this.channel=e,this.event=t,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t(null===(s=this.receivedResp)||void 0===s?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ta,Ca,Ea,Pa,Ma,Ra,Aa,Oa;(Ca=Ta||(Ta={})).SYNC="sync",Ca.JOIN="join",Ca.LEAVE="leave";class Da{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},e=>{const{onJoin:t,onLeave:s,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Da.syncState(this.state,e,t,s),this.pendingDiffs.forEach(e=>{this.state=Da.syncDiff(this.state,e,t,s)}),this.pendingDiffs=[],r()}),this.channel._on(s.diff,{},e=>{const{onJoin:t,onLeave:s,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=Da.syncDiff(this.state,e,t,s),r())}),this.onJoin((e,t,s)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:s})}),this.onLeave((e,t,s)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,r){const a=this.cloneDeep(e),n=this.transformState(t),i={},o={};return this.map(a,(e,t)=>{n[e]||(o[e]=t)}),this.map(n,(e,t)=>{const s=a[e];if(s){const r=t.map(e=>e.presence_ref),a=s.map(e=>e.presence_ref),n=t.filter(e=>a.indexOf(e.presence_ref)<0),l=s.filter(e=>r.indexOf(e.presence_ref)<0);n.length>0&&(i[e]=n),l.length>0&&(o[e]=l)}else i[e]=t}),this.syncDiff(a,{joins:i,leaves:o},s,r)}static syncDiff(e,t,s,r){const{joins:a,leaves:n}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(a,(t,r)=>{var a;const n=null!==(a=e[t])&&void 0!==a?a:[];if(e[t]=this.cloneDeep(r),n.length>0){const s=e[t].map(e=>e.presence_ref),r=n.filter(e=>s.indexOf(e.presence_ref)<0);e[t].unshift(...r)}s(t,n,r)}),this.map(n,(t,s)=>{let a=e[t];if(!a)return;const n=s.map(e=>e.presence_ref);a=a.filter(e=>n.indexOf(e.presence_ref)<0),e[t]=a,r(t,a,s),0===a.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const r=e[s];return t[s]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(Pa=Ea||(Ea={})).ALL="*",Pa.INSERT="INSERT",Pa.UPDATE="UPDATE",Pa.DELETE="DELETE",(Ra=Ma||(Ma={})).BROADCAST="broadcast",Ra.PRESENCE="presence",Ra.POSTGRES_CHANGES="postgres_changes",Ra.SYSTEM="system",(Oa=Aa||(Aa={})).SUBSCRIBED="SUBSCRIBED",Oa.TIMED_OUT="TIMED_OUT",Oa.CLOSED="CLOSED",Oa.CHANNEL_ERROR="CHANNEL_ERROR";class $a{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=na.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Sa(this,oa.join,this.params,this.timeout),this.rejoinTimer=new fa(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=na.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=na.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=na.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=na.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=na.errored,this.rejoinTimer.scheduleTimeout())}),this._on(oa.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new Da(this),this.broadcastEndpointURL=_a(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,r;if(this.socket.isConnected()||this.socket.connect(),this.state==na.closed){const{config:{broadcast:a,presence:n,private:i}}=this.params,o=null!==(r=null===(s=this.bindings.postgres_changes)||void 0===s?void 0:s.map(e=>e.filter))&&void 0!==r?r:[],l=!!this.bindings[Ma.PRESENCE]&&this.bindings[Ma.PRESENCE].length>0,c={},d={broadcast:a,presence:Object.assign(Object.assign({},n),{enabled:l}),postgres_changes:o,private:i};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(Aa.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(Aa.CLOSED)),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",t=>h(this,[t],function*({postgres_changes:t}){var s;if(this.socket.setAuth(),void 0!==t){const r=this.bindings.postgres_changes,a=null!==(s=null==r?void 0:r.length)&&void 0!==s?s:0,n=[];for(let s=0;s<a;s++){const a=r[s],{filter:{event:i,schema:o,table:l,filter:c}}=a,d=t&&t[s];if(!d||d.event!==i||d.schema!==o||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=na.errored,void(null==e||e(Aa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));n.push(Object.assign(Object.assign({},a),{id:d.id}))}return this.bindings.postgres_changes=n,void(e&&e(Aa.SUBSCRIBED))}null==e||e(Aa.SUBSCRIBED)})).receive("error",t=>{this.state=na.errored,null==e||e(Aa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(Aa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(e){return h(this,arguments,function*(e,t={}){return yield this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)})}untrack(){return h(this,arguments,function*(e={}){return yield this.send({type:"presence",event:"untrack"},e)})}on(e,t,s){return this.state===na.joined&&e===Ma.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}send(e){return h(this,arguments,function*(e,t={}){var s,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(s=>{var r,a,n;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(n=null===(a=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===a?void 0:a.broadcast)||void 0===n?void 0:n.ack)||s("ok"),i.receive("ok",()=>s("ok")),i.receive("error",()=>s("error")),i.receive("timeout",()=>s("timed out"))});{const{event:n,payload:i}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:i,private:this.private}]})};try{const e=yield this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(s=t.timeout)&&void 0!==s?s:this.timeout);return yield null===(r=e.body)||void 0===r?void 0:r.cancel(),e.ok?"ok":"error"}catch(a){return"AbortError"===a.name?"timed out":"error"}}})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=na.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(oa.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new Sa(this,oa.leave,{},e),s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{null==s||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=na.closed,this.bindings={}}_fetchWithTimeout(e,t,s){return h(this,null,function*(){const r=new AbortController,a=setTimeout(()=>r.abort(),s),n=yield this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(a),n})}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Sa(this,e,t,s);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var r,a;const n=e.toLocaleLowerCase(),{close:i,error:o,leave:l,join:c}=oa;if(s&&[i,o,l,c].indexOf(n)>=0&&s!==this._joinRef())return;let d=this._onMessage(n,t,s);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(n)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,s,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(s=e.filter)||void 0===s?void 0:s.event)||void 0===r?void 0:r.toLocaleLowerCase())===n}).map(e=>e.callback(d,s)):null===(a=this.bindings[n])||void 0===a||a.filter(e=>{var s,r,a,i,o,l;if(["broadcast","presence","postgres_changes"].includes(n)){if("id"in e){const n=e.id,i=null===(s=e.filter)||void 0===s?void 0:s.event;return n&&(null===(r=t.ids)||void 0===r?void 0:r.includes(n))&&("*"===i||(null==i?void 0:i.toLocaleLowerCase())===(null===(a=t.data)||void 0===a?void 0:a.type.toLocaleLowerCase()))}{const s=null===(o=null===(i=null==e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===s||s===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===n}).map(e=>{if("object"==typeof d&&"ids"in d){const e=d.data,{schema:t,table:s,commit_timestamp:r,type:a,errors:n}=e,i={schema:t,table:s,commit_timestamp:r,eventType:a,new:{},old:{},errors:n};d=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(d,s)})}_isClosed(){return this.state===na.closed}_isJoined(){return this.state===na.joined}_isJoining(){return this.state===na.joining}_isLeaving(){return this.state===na.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const r=e.toLocaleLowerCase(),a={type:r,filter:t,callback:s};return this.bindings[r]?this.bindings[r].push(a):this.bindings[r]=[a],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===s&&$a.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(oa.close,{},e)}_onError(e){this._on(oa.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=na.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=ga(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=ga(e.columns,e.old_record)),t}}const Ia=()=>{},La=25e3,Ua=10,za=100,qa=[1e3,2e3,5e3,1e4];class Ba{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=sa,this.transport=null,this.heartbeatIntervalMs=La,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ia,this.ref=0,this.reconnectTimer=null,this.logger=Ia,this.conn=null,this.sendBuffer=[],this.serializer=new pa,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>ge(()=>h(this,null,function*(){const{default:e}=yield Promise.resolve().then(()=>Ar);return{default:e}}),void 0).then(({default:t})=>t(...e)).catch(e=>{throw new Error(`Failed to load @supabase/node-fetch: ${e.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...e)=>t(...e)},!(null===(s=null==t?void 0:t.params)||void 0===s?void 0:s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${ca.websocket}`,this.httpEndpoint=_a(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ta.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(e){return h(this,null,function*(){const t=yield e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t})}removeAllChannels(){return h(this,null,function*(){const e=yield Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e})}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case ra.connecting:return da.Connecting;case ra.open:return da.Open;case ra.closing:return da.Closing;default:return da.Closed}}isConnected(){return this.connectionState()===da.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const s=`realtime:${e}`,r=this.getChannels().find(e=>e.topic===s);if(r)return r;{const s=new $a(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:s,payload:r,ref:a}=e,n=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${s} (${a})`,r),this.isConnected()?n():this.sendBuffer.push(n)}setAuth(e=null){return h(this,null,function*(){this._authPromise=this._performAuth(e);try{yield this._authPromise}finally{this._authPromise=null}})}sendHeartbeat(){return h(this,null,function*(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},za);this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}else this.heartbeatCallback("disconnected")})}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{"phoenix"===e.topic&&"phx_reply"===e.event&&this.heartbeatCallback("ok"===e.payload.status?"ok":"error"),e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:s,payload:r,ref:a}=e,n=a?`(${a})`:"",i=r.status||"";this.log("receive",`${i} ${t} ${s} ${n}`.trim(),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(s,r,a)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(oa.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const s=e.match(/\?/)?"&":"?";return`${e}${s}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}_performAuth(e=null){return h(this,null,function*(){let t;t=e||(this.accessToken?yield this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const s={access_token:t,version:"realtime-js/2.15.1"};t&&e.updateJoinPayload(s),e.joinedOnce&&e._isJoined()&&e._push(oa.access_token,{access_token:t})}))})}_waitForAuthIfNeeded(){return h(this,null,function*(){this._authPromise&&(yield this._authPromise)})}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(Kd){this.log("error",`error in ${e} callback`,Kd)}})}catch(Kd){this.log("error",`error triggering ${e} callbacks`,Kd)}}_setupReconnectionTimer(){this.reconnectTimer=new fa(()=>h(this,null,function*(){setTimeout(()=>h(this,null,function*(){yield this._waitForAuthIfNeeded(),this.isConnected()||this.connect()}),Ua)}),this.reconnectAfterMs)}_initializeOptions(e){var t,s,r,a,n,i,o,l;if(this.transport=null!==(t=null==e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(s=null==e?void 0:e.timeout)&&void 0!==s?s:sa,this.heartbeatIntervalMs=null!==(r=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==r?r:La,this.worker=null!==(a=null==e?void 0:e.worker)&&void 0!==a&&a,this.accessToken=null!==(n=null==e?void 0:e.accessToken)&&void 0!==n?n:null,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(i=null==e?void 0:e.reconnectAfterMs)&&void 0!==i?i:e=>qa[e-1]||1e4,this.encode=null!==(o=null==e?void 0:e.encode)&&void 0!==o?o:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(l=null==e?void 0:e.decode)&&void 0!==l?l:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}class Wa extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ha(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class Fa extends Wa{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Va extends Wa{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Ka=function(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{l(r.next(e))}catch(Kd){n(Kd)}}function o(e){try{l(r.throw(e))}catch(Kd){n(Kd)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const Ja=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>ge(()=>h(null,null,function*(){const{default:e}=yield Promise.resolve().then(()=>Ar);return{default:e}}),void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},Ga=e=>{if(Array.isArray(e))return e.map(e=>Ga(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,s])=>{const r=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[r]=Ga(s)}),t};var Ya=function(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{l(r.next(e))}catch(Kd){n(Kd)}}function o(e){try{l(r.throw(e))}catch(Kd){n(Kd)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const Xa=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Za=(e,t,s)=>Ya(void 0,void 0,void 0,function*(){const r=yield Ka(void 0,void 0,void 0,function*(){return"undefined"==typeof Response?(yield ge(()=>Promise.resolve().then(()=>Ar),void 0)).Response:Response});e instanceof r&&!(null==s?void 0:s.noResolveJson)?e.json().then(s=>{const r=e.status||500,a=(null==s?void 0:s.statusCode)||r+"";t(new Fa(Xa(s),r,a))}).catch(e=>{t(new Va(Xa(e),e))}):t(new Va(Xa(e),e))}),Qa=(e,t,s,r)=>{const a={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&r?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(r)?(a.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,(null==t?void 0:t.duplex)&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),s)):a};function en(e,t,s,r,a,n){return Ya(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(s,Qa(t,r,a,n)).then(e=>{if(!e.ok)throw e;return(null==r?void 0:r.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>Za(e,o,r))})})}function tn(e,t,s,r){return Ya(this,void 0,void 0,function*(){return en(e,"GET",t,s,r)})}function sn(e,t,s,r,a){return Ya(this,void 0,void 0,function*(){return en(e,"POST",t,r,a,s)})}function rn(e,t,s,r,a){return Ya(this,void 0,void 0,function*(){return en(e,"PUT",t,r,a,s)})}function an(e,t,s,r,a){return Ya(this,void 0,void 0,function*(){return en(e,"DELETE",t,r,a,s)})}var nn=function(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{l(r.next(e))}catch(Kd){n(Kd)}}function o(e){try{l(r.throw(e))}catch(Kd){n(Kd)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const on={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ln={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class cn{constructor(e,t={},s,r){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Ja(r)}uploadOrUpdate(e,t,s,r){return nn(this,void 0,void 0,function*(){try{let a;const n=Object.assign(Object.assign({},ln),r);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(n.upsert)});const o=n.metadata;"undefined"!=typeof Blob&&s instanceof Blob?(a=new FormData,a.append("cacheControl",n.cacheControl),o&&a.append("metadata",this.encodeMetadata(o)),a.append("",s)):"undefined"!=typeof FormData&&s instanceof FormData?(a=s,a.append("cacheControl",n.cacheControl),o&&a.append("metadata",this.encodeMetadata(o))):(a=s,i["cache-control"]=`max-age=${n.cacheControl}`,i["content-type"]=n.contentType,o&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null==r?void 0:r.headers)&&(i=Object.assign(Object.assign({},i),r.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield("PUT"==e?rn:sn)(this.fetch,`${this.url}/object/${c}`,a,Object.assign({headers:i},(null==n?void 0:n.duplex)?{duplex:n.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(a){if(Ha(a))return{data:null,error:a};throw a}})}upload(e,t,s){return nn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,r){return nn(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),n=this._getFinalPath(a),i=new URL(this.url+`/object/upload/sign/${n}`);i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:ln.upsert},r),n=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&s instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",s)):"undefined"!=typeof FormData&&s instanceof FormData?(e=s,e.append("cacheControl",t.cacheControl)):(e=s,n["cache-control"]=`max-age=${t.cacheControl}`,n["content-type"]=t.contentType);return{data:{path:a,fullPath:(yield rn(this.fetch,i.toString(),e,{headers:n})).Key},error:null}}catch(o){if(Ha(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return nn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(r["x-upsert"]="true");const a=yield sn(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:r}),n=new URL(this.url+a.url),i=n.searchParams.get("token");if(!i)throw new Wa("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:i},error:null}}catch(s){if(Ha(s))return{data:null,error:s};throw s}})}update(e,t,s){return nn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return nn(this,void 0,void 0,function*(){try{return{data:yield sn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==s?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(Ha(r))return{data:null,error:r};throw r}})}copy(e,t,s){return nn(this,void 0,void 0,function*(){try{return{data:{path:(yield sn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==s?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(Ha(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,s){return nn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),a=yield sn(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},(null==s?void 0:s.transform)?{transform:s.transform}:{}),{headers:this.headers});const n=(null==s?void 0:s.download)?`&download=${!0===s.download?"":s.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${n}`)},{data:a,error:null}}catch(r){if(Ha(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,s){return nn(this,void 0,void 0,function*(){try{const r=yield sn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=(null==s?void 0:s.download)?`&download=${!0===s.download?"":s.download}`:"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${a}`):null})),error:null}}catch(r){if(Ha(r))return{data:null,error:r};throw r}})}download(e,t){return nn(this,void 0,void 0,function*(){const s=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),a=r?`?${r}`:"";try{const t=this._getFinalPath(e),r=yield tn(this.fetch,`${this.url}/${s}/${t}${a}`,{headers:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(n){if(Ha(n))return{data:null,error:n};throw n}})}info(e){return nn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield tn(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Ga(e),error:null}}catch(s){if(Ha(s))return{data:null,error:s};throw s}})}exists(e){return nn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,s,r){return Ya(this,void 0,void 0,function*(){return en(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(Ha(s)&&s instanceof Va){const e=s.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),r=[],a=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==a&&r.push(a);const n=void 0!==(null==t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==i&&r.push(i);let o=r.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${n}/public/${s}${o}`)}}}remove(e){return nn(this,void 0,void 0,function*(){try{return{data:yield an(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Ha(t))return{data:null,error:t};throw t}})}list(e,t,s){return nn(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},on),t),{prefix:e||""});return{data:yield sn(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(Ha(r))return{data:null,error:r};throw r}})}listV2(e,t){return nn(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield sn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(Ha(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const dn={"X-Client-Info":"storage-js/2.11.0"};var un=function(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{l(r.next(e))}catch(Kd){n(Kd)}}function o(e){try{l(r.throw(e))}catch(Kd){n(Kd)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};class hn{constructor(e,t={},s,r){const a=new URL(e);if(null==r?void 0:r.useNewHostname){/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."))}this.url=a.href,this.headers=Object.assign(Object.assign({},dn),t),this.fetch=Ja(s)}listBuckets(){return un(this,void 0,void 0,function*(){try{return{data:yield tn(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ha(e))return{data:null,error:e};throw e}})}getBucket(e){return un(this,void 0,void 0,function*(){try{return{data:yield tn(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Ha(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return un(this,void 0,void 0,function*(){try{return{data:yield sn(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Ha(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return un(this,void 0,void 0,function*(){try{return{data:yield rn(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Ha(s))return{data:null,error:s};throw s}})}emptyBucket(e){return un(this,void 0,void 0,function*(){try{return{data:yield sn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Ha(t))return{data:null,error:t};throw t}})}deleteBucket(e){return un(this,void 0,void 0,function*(){try{return{data:yield an(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Ha(t))return{data:null,error:t};throw t}})}}class mn extends hn{constructor(e,t={},s,r){super(e,t,s,r)}from(e){return new cn(this.url,this.headers,e,this.fetch)}}let pn="";pn="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const fn={headers:{"X-Client-Info":`supabase-js-${pn}/2.56.0`}},gn={schema:"public"},xn={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},vn={};var bn=function(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{l(r.next(e))}catch(Kd){n(Kd)}}function o(e){try{l(r.throw(e))}catch(Kd){n(Kd)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const yn=(e,t,s)=>{const r=(e=>{let t;return t=e||("undefined"==typeof fetch?Er:fetch),(...e)=>t(...e)})(s),a="undefined"==typeof Headers?Pr:Headers;return(s,n)=>bn(void 0,void 0,void 0,function*(){var i;const o=null!==(i=yield t())&&void 0!==i?i:e;let l=new a(null==n?void 0:n.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),r(s,Object.assign(Object.assign({},n),{headers:l}))})};var wn=function(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{l(r.next(e))}catch(Kd){n(Kd)}}function o(e){try{l(r.throw(e))}catch(Kd){n(Kd)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const jn="2.71.1",kn=3e4,Nn=9e4,_n={"X-Client-Info":`gotrue-js/${jn}`},Sn="X-Supabase-Api-Version",Tn={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Cn=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class En extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function Pn(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class Mn extends En{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}class Rn extends En{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class An extends En{constructor(e,t,s,r){super(e,s,r),this.name=t,this.status=s}}class On extends An{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Dn extends An{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class $n extends An{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class In extends An{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ln extends An{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Un extends An{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function zn(e){return Pn(e)&&"AuthRetryableFetchError"===e.name}class qn extends An{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class Bn extends An{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Wn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Hn=" \t\n\r=".split(""),Fn=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Hn.length;t+=1)e[Hn[t].charCodeAt(0)]=-2;for(let t=0;t<Wn.length;t+=1)e[Wn[t].charCodeAt(0)]=t;return e})();function Vn(e,t,s){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;s(Wn[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;s(Wn[e]),t.queuedBits-=6}}function Kn(e,t,s){const r=Fn[e];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Jn(e){const t=[],s=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},n=e=>{!function(e,t,s){if(0===t.utf8seq){if(e<=127)return void s(e);for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&s(t.codepoint)}}(e,r,s)};for(let i=0;i<e.length;i+=1)Kn(e.charCodeAt(i),a,n);return t.join("")}function Gn(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function Yn(e){const t=[],s={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let a=0;a<e.length;a+=1)Kn(e.charCodeAt(a),s,r);return new Uint8Array(t)}function Xn(e){const t=[];return function(e,t){for(let s=0;s<e.length;s+=1){let r=e.charCodeAt(s);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(s+1)-56320&65535|t),s+=1}Gn(r,t)}}(e,e=>t.push(e)),new Uint8Array(t)}function Zn(e){const t=[],s={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>Vn(e,s,r)),Vn(null,s,r),t.join("")}const Qn=()=>"undefined"!=typeof window&&"undefined"!=typeof document,ei={tested:!1,writable:!1},ti=()=>{if(!Qn())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(Kd){return!1}if(ei.tested)return ei.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ei.tested=!0,ei.writable=!0}catch(Kd){ei.tested=!0,ei.writable=!1}return ei.writable};const si=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>ge(()=>h(null,null,function*(){const{default:e}=yield Promise.resolve().then(()=>Ar);return{default:e}}),void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},ri=(e,t,s)=>h(null,null,function*(){yield e.setItem(t,JSON.stringify(s))}),ai=(e,t)=>h(null,null,function*(){const s=yield e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch(r){return s}}),ni=(e,t)=>h(null,null,function*(){yield e.removeItem(t)});class ii{constructor(){this.promise=new ii.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function oi(e){const t=e.split(".");if(3!==t.length)throw new Bn("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!Cn.test(t[s]))throw new Bn("JWT not in base64url format");return{header:JSON.parse(Jn(t[0])),payload:JSON.parse(Jn(t[1])),signature:Yn(t[2]),raw:{header:t[0],payload:t[1]}}}function li(e){return("0"+e.toString(16)).substr(-2)}function ci(e){return h(this,null,function*(){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return e;const t=yield function(e){return h(this,null,function*(){const t=(new TextEncoder).encode(e),s=yield crypto.subtle.digest("SHA-256",t),r=new Uint8Array(s);return Array.from(r).map(e=>String.fromCharCode(e)).join("")})}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}function di(e,t,s=!1){return h(this,null,function*(){const r=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let s="";for(let r=0;r<56;r++)s+=e.charAt(Math.floor(Math.random()*t));return s}return crypto.getRandomValues(e),Array.from(e,li).join("")}();let a=r;s&&(a+="/PASSWORD_RECOVERY"),yield ri(e,`${t}-code-verifier`,a);const n=yield ci(r);return[n,r===n?"plain":"s256"]})}ii.promiseConstructor=Promise;const ui=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const hi=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function mi(e){if(!hi.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function pi(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function fi(e){return JSON.parse(JSON.stringify(e))}const gi=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),xi=[502,503,504];function vi(e){return h(this,null,function*(){var t,s;if(!("object"==typeof(s=e)&&null!==s&&"status"in s&&"ok"in s&&"json"in s&&"function"==typeof s.json))throw new Un(gi(e),0);if(xi.includes(e.status))throw new Un(gi(e),e.status);let r,a;try{r=yield e.json()}catch(Kd){throw new Rn(gi(Kd),Kd)}const n=function(e){const t=e.headers.get(Sn);if(!t)return null;if(!t.match(ui))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(Kd){return null}}(e);if(n&&n.getTime()>=Tn.timestamp&&"object"==typeof r&&r&&"string"==typeof r.code?a=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(a=r.error_code),a){if("weak_password"===a)throw new qn(gi(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===a)throw new On}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new qn(gi(r),e.status,r.weak_password.reasons);throw new Mn(gi(r),e.status||500,a)})}function bi(e,t,s,r){return h(this,null,function*(){var a;const n=Object.assign({},null==r?void 0:r.headers);n[Sn]||(n[Sn]=Tn.name),(null==r?void 0:r.jwt)&&(n.Authorization=`Bearer ${r.jwt}`);const i=null!==(a=null==r?void 0:r.query)&&void 0!==a?a:{};(null==r?void 0:r.redirectTo)&&(i.redirect_to=r.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=yield function(e,t,s,r,a,n){return h(this,null,function*(){const i=((e,t,s,r)=>{const a={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),s))})(t,r,a,n);let o;try{o=yield e(s,Object.assign({},i))}catch(Kd){throw new Un(gi(Kd),0)}if(o.ok||(yield vi(o)),null==r?void 0:r.noResolveJson)return o;try{return yield o.json()}catch(Kd){yield vi(Kd)}})}(e,t,s+o,{headers:n,noResolveJson:null==r?void 0:r.noResolveJson},{},null==r?void 0:r.body);return(null==r?void 0:r.xform)?null==r?void 0:r.xform(l):{data:Object.assign({},l),error:null}})}function yi(e){var t;let s=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:s,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function wi(e){const t=yi(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function ji(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function ki(e){return{data:e,error:null}}function Ni(e){const{action_link:t,email_otp:s,hashed_token:r,redirect_to:a,verification_type:n}=e,i=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(s[r[a]]=e[r[a]])}return s}(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:s,hashed_token:r,redirect_to:a,verification_type:n},user:Object.assign({},i)},error:null}}function _i(e){return e}const Si=["global","local","others"];class Ti{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=si(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(e){return h(this,arguments,function*(e,t=Si[0]){if(Si.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Si.join(", ")}`);try{return yield bi(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Pn(s))return{data:null,error:s};throw s}})}inviteUserByEmail(e){return h(this,arguments,function*(e,t={}){try{return yield bi(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ji})}catch(s){if(Pn(s))return{data:{user:null},error:s};throw s}})}generateLink(e){return h(this,null,function*(){try{const{options:t}=e,s=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(s[r[a]]=e[r[a]])}return s}(e,["options"]),r=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(r.new_email=null==s?void 0:s.newEmail,delete r.newEmail),yield bi(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Ni,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(Pn(t))return{data:{properties:null,user:null},error:t};throw t}})}createUser(e){return h(this,null,function*(){try{return yield bi(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ji})}catch(t){if(Pn(t))return{data:{user:null},error:t};throw t}})}listUsers(e){return h(this,null,function*(){var t,s,r,a,n,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=yield bi(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(s=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==s?s:"",per_page:null!==(a=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==a?a:""},xform:_i});if(c.error)throw c.error;const d=yield c.json(),u=null!==(n=c.headers.get("x-total-count"))&&void 0!==n?n:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),s=JSON.parse(e.split(";")[1].split("=")[1]);l[`${s}Page`]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(Pn(l))return{data:{users:[]},error:l};throw l}})}getUserById(e){return h(this,null,function*(){mi(e);try{return yield bi(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ji})}catch(t){if(Pn(t))return{data:{user:null},error:t};throw t}})}updateUserById(e,t){return h(this,null,function*(){mi(e);try{return yield bi(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ji})}catch(s){if(Pn(s))return{data:{user:null},error:s};throw s}})}deleteUser(e,t=!1){return h(this,null,function*(){mi(e);try{return yield bi(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ji})}catch(s){if(Pn(s))return{data:{user:null},error:s};throw s}})}_listFactors(e){return h(this,null,function*(){mi(e.userId);try{const{data:t,error:s}=yield bi(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:s}}catch(t){if(Pn(t))return{data:null,error:t};throw t}})}_deleteFactor(e){return h(this,null,function*(){mi(e.userId),mi(e.id);try{return{data:yield bi(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Pn(t))return{data:null,error:t};throw t}})}}function Ci(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}const Ei=!!(globalThis&&ti()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Pi extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Mi extends Pi{}function Ri(e,t,s){return h(this,null,function*(){const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort()},t),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},r=>h(null,null,function*(){if(!r){if(0===t)throw new Mi(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ei)try{yield globalThis.navigator.locks.query()}catch(Kd){}return yield s()}try{return yield s()}finally{}})))})}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(Kd){"undefined"!=typeof self&&(self.globalThis=self)}}();const Ai={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:_n,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function Oi(e,t,s){return h(this,null,function*(){return yield s()})}const Di={};class $i{constructor(e){var t,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=$i.nextInstanceID,$i.nextInstanceID+=1,this.instanceID>0&&Qn();const r=Object.assign(Object.assign({},Ai),e);if(this.logDebugMessages=!!r.debug,"function"==typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new Ti({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=si(r.fetch),this.lock=r.lock||Oi,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Qn()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=Ri:this.lock=Oi,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:ti()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ci(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=Ci(this.memoryStorage)),Qn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(Kd){}null===(s=this.broadcastChannel)||void 0===s||s.addEventListener("message",e=>h(this,null,function*(){this._debug("received broadcast notification from other tab or client",e),yield this._notifyAllSubscribers(e.data.event,e.data.session,!1)}))}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=Di[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Di[this.storageKey]=Object.assign(Object.assign({},Di[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Di[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Di[this.storageKey]=Object.assign(Object.assign({},Di[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${jn}) ${(new Date).toISOString()}`,...e),this}initialize(){return h(this,null,function*(){return this.initializePromise||(this.initializePromise=(()=>h(this,null,function*(){return yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._initialize()}))}))()),yield this.initializePromise})}_initialize(){return h(this,null,function*(){var e;try{const t=function(e){const t={},s=new URL(e);if(s.hash&&"#"===s.hash[0])try{new URLSearchParams(s.hash.substring(1)).forEach((e,s)=>{t[s]=e})}catch(Kd){}return s.searchParams.forEach((e,s)=>{t[s]=e}),t}(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":(yield this._isPKCECallback(t))&&(s="pkce"),Qn()&&this.detectSessionInUrl&&"none"!==s){const{data:r,error:a}=yield this._getSessionFromURL(t,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),function(e){return Pn(e)&&"AuthImplicitGrantRedirectError"===e.name}(a)){const t=null===(e=a.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:a}}return yield this._removeSession(),{error:a}}const{session:n,redirectType:i}=r;return this._debug("#_initialize()","detected session in URL",n,"redirect type",i),yield this._saveSession(n),setTimeout(()=>h(this,null,function*(){"recovery"===i?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",n):yield this._notifyAllSubscribers("SIGNED_IN",n)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(t){return Pn(t)?{error:t}:{error:new Rn("Unexpected error during initialization",t)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(e){return h(this,null,function*(){var t,s,r;try{const a=yield bi(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(s=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==s?s:{},gotrue_meta_security:{captcha_token:null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:yi}),{data:n,error:i}=a;if(i||!n)return{data:{user:null,session:null},error:i};const o=n.session,l=n.user;return n.session&&(yield this._saveSession(n.session),yield this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(a){if(Pn(a))return{data:{user:null,session:null},error:a};throw a}})}signUp(e){return h(this,null,function*(){var t,s,r;try{let a;if("email"in e){const{email:s,password:r,options:n}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=yield di(this.storage,this.storageKey)),a=yield bi(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==n?void 0:n.emailRedirectTo,body:{email:s,password:r,data:null!==(t=null==n?void 0:n.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},code_challenge:i,code_challenge_method:o},xform:yi})}else{if(!("phone"in e))throw new $n("You must provide either an email or phone number and a password");{const{phone:t,password:n,options:i}=e;a=yield bi(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:n,data:null!==(s=null==i?void 0:i.data)&&void 0!==s?s:{},channel:null!==(r=null==i?void 0:i.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:yi})}}const{data:n,error:i}=a;if(i||!n)return{data:{user:null,session:null},error:i};const o=n.session,l=n.user;return n.session&&(yield this._saveSession(n.session),yield this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(a){if(Pn(a))return{data:{user:null,session:null},error:a};throw a}})}signInWithPassword(e){return h(this,null,function*(){try{let t;if("email"in e){const{email:s,password:r,options:a}=e;t=yield bi(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:wi})}else{if(!("phone"in e))throw new $n("You must provide either an email or phone number and a password");{const{phone:s,password:r,options:a}=e;t=yield bi(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:wi})}}const{data:s,error:r}=t;return r?{data:{user:null,session:null},error:r}:s&&s.session&&s.user?(s.session&&(yield this._saveSession(s.session),yield this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r}):{data:{user:null,session:null},error:new Dn}}catch(t){if(Pn(t))return{data:{user:null,session:null},error:t};throw t}})}signInWithOAuth(e){return h(this,null,function*(){var t,s,r,a;return yield this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})})}exchangeCodeForSession(e){return h(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>h(this,null,function*(){return this._exchangeCodeForSession(e)}))})}signInWithWeb3(e){return h(this,null,function*(){const{chain:t}=e;if("solana"===t)return yield this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)})}signInWithSolana(e){return h(this,null,function*(){var t,s,r,a,n,i,o,l,c,d,u,h;let m,p;if("message"in e)m=e.message,p=e.signature;else{const{chain:u,wallet:h,statement:f,options:g}=e;let x;if(Qn())if("object"==typeof h)x=h;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");x=e.solana}else{if("object"!=typeof h||!(null==g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=h}const v=new URL(null!==(t=null==g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in x&&x.signIn){const e=yield x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==g?void 0:g.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),f?{statement:f}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");m="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in x&&"function"==typeof x.signMessage&&"publicKey"in x&&"object"==typeof x&&x.publicKey&&"toBase58"in x.publicKey&&"function"==typeof x.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${v.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${v.href}`,`Issued At: ${null!==(r=null===(s=null==g?void 0:g.signInWithSolana)||void 0===s?void 0:s.issuedAt)&&void 0!==r?r:(new Date).toISOString()}`,...(null===(a=null==g?void 0:g.signInWithSolana)||void 0===a?void 0:a.notBefore)?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...(null===(n=null==g?void 0:g.signInWithSolana)||void 0===n?void 0:n.expirationTime)?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...(null===(i=null==g?void 0:g.signInWithSolana)||void 0===i?void 0:i.chainId)?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...(null===(o=null==g?void 0:g.signInWithSolana)||void 0===o?void 0:o.nonce)?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...(null===(l=null==g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...(null===(d=null===(c=null==g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...g.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=yield x.signMessage((new TextEncoder).encode(m),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:s}=yield bi(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Zn(p)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:yi});if(s)throw s;return t&&t.session&&t.user?(t.session&&(yield this._saveSession(t.session),yield this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:s}):{data:{user:null,session:null},error:new Dn}}catch(f){if(Pn(f))return{data:{user:null,session:null},error:f};throw f}})}_exchangeCodeForSession(e){return h(this,null,function*(){const t=yield ai(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(null!=t?t:"").split("/");try{const{data:t,error:a}=yield bi(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:yi});if(yield ni(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return t&&t.session&&t.user?(t.session&&(yield this._saveSession(t.session),yield this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=r?r:null}),error:a}):{data:{user:null,session:null,redirectType:null},error:new Dn}}catch(a){if(Pn(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}})}signInWithIdToken(e){return h(this,null,function*(){try{const{options:t,provider:s,token:r,access_token:a,nonce:n}=e,i=yield bi(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:a,nonce:n,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:yi}),{data:o,error:l}=i;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(yield this._saveSession(o.session),yield this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new Dn}}catch(t){if(Pn(t))return{data:{user:null,session:null},error:t};throw t}})}signInWithOtp(e){return h(this,null,function*(){var t,s,r,a,n;try{if("email"in e){const{email:r,options:a}=e;let n=null,i=null;"pkce"===this.flowType&&([n,i]=yield di(this.storage,this.storageKey));const{error:o}=yield bi(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null==a?void 0:a.data)&&void 0!==t?t:{},create_user:null===(s=null==a?void 0:a.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken},code_challenge:n,code_challenge_method:i},redirectTo:null==a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:s}=e,{data:i,error:o}=yield bi(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null==s?void 0:s.data)&&void 0!==r?r:{},create_user:null===(a=null==s?void 0:s.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},channel:null!==(n=null==s?void 0:s.channel)&&void 0!==n?n:"sms"}});return{data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:o}}throw new $n("You must provide either an email or phone number.")}catch(i){if(Pn(i))return{data:{user:null,session:null},error:i};throw i}})}verifyOtp(e){return h(this,null,function*(){var t,s;try{let r,a;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,a=null===(s=e.options)||void 0===s?void 0:s.captchaToken);const{data:n,error:i}=yield bi(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:r,xform:yi});if(i)throw i;if(!n)throw new Error("An error occurred on token verification.");const o=n.session,l=n.user;return(null==o?void 0:o.access_token)&&(yield this._saveSession(o),yield this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(r){if(Pn(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithSSO(e){return h(this,null,function*(){var t,s,r;try{let a=null,n=null;return"pkce"===this.flowType&&([a,n]=yield di(this.storage,this.storageKey)),yield bi(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==s?s:void 0}),(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:n}),headers:this.headers,xform:ki})}catch(a){if(Pn(a))return{data:null,error:a};throw a}})}reauthenticate(){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return h(this,null,function*(){try{return yield this._useSession(e=>h(this,null,function*(){const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new On;const{error:r}=yield bi(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}}))}catch(e){if(Pn(e))return{data:{user:null,session:null},error:e};throw e}})}resend(e){return h(this,null,function*(){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:a}=e,{error:n}=yield bi(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},redirectTo:null==a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:n}}if("phone"in e){const{phone:s,type:r,options:a}=e,{data:n,error:i}=yield bi(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:null==n?void 0:n.message_id},error:i}}throw new $n("You must provide either an email or phone number and a type")}catch(t){if(Pn(t))return{data:{user:null,session:null},error:t};throw t}})}getSession(){return h(this,null,function*(){yield this.initializePromise;return yield this._acquireLock(-1,()=>h(this,null,function*(){return this._useSession(e=>h(this,null,function*(){return e}))}))})}_acquireLock(e,t){return h(this,null,function*(){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(()=>h(this,null,function*(){return yield e,yield t()}))();return this.pendingInLock.push((()=>h(this,null,function*(){try{yield s}catch(Kd){}}))()),s}return yield this.lock(`lock:${this.storageKey}`,e,()=>h(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((()=>h(this,null,function*(){try{yield e}catch(Kd){}}))()),yield e;this.pendingInLock.length;){const e=[...this.pendingInLock];yield Promise.all(e),this.pendingInLock.splice(0,e.length)}return yield e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(e){return h(this,null,function*(){this._debug("#_useSession","begin");try{const t=yield this.__loadSession();return yield e(t)}finally{this._debug("#_useSession","end")}})}__loadSession(){return h(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=yield ai(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!e)return{data:{session:null},error:null};const s=!!e.expires_at&&1e3*e.expires_at-Date.now()<Nn;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const t=yield ai(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=pi()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,s,r)=>(t||"user"!==s||(t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,s,r))})}return{data:{session:e},error:null}}const{session:r,error:a}=yield this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}})}getUser(e){return h(this,null,function*(){if(e)return yield this._getUser(e);yield this.initializePromise;return yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._getUser()}))})}_getUser(e){return h(this,null,function*(){try{return e?yield bi(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ji}):yield this._useSession(e=>h(this,null,function*(){var t,s,r;const{data:a,error:n}=e;if(n)throw n;return(null===(t=a.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?yield bi(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(r=null===(s=a.session)||void 0===s?void 0:s.access_token)&&void 0!==r?r:void 0,xform:ji}):{data:{user:null},error:new On}}))}catch(t){if(Pn(t))return function(e){return Pn(e)&&"AuthSessionMissingError"===e.name}(t)&&(yield this._removeSession(),yield ni(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}})}updateUser(e){return h(this,arguments,function*(e,t={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._updateUser(e,t)}))})}_updateUser(e){return h(this,arguments,function*(e,t={}){try{return yield this._useSession(s=>h(this,null,function*(){const{data:r,error:a}=s;if(a)throw a;if(!r.session)throw new On;const n=r.session;let i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=yield di(this.storage,this.storageKey));const{data:l,error:c}=yield bi(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:n.access_token,xform:ji});if(c)throw c;return n.user=l.user,yield this._saveSession(n),yield this._notifyAllSubscribers("USER_UPDATED",n),{data:{user:n.user},error:null}}))}catch(s){if(Pn(s))return{data:{user:null},error:s};throw s}})}setSession(e){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._setSession(e)}))})}_setSession(e){return h(this,null,function*(){try{if(!e.access_token||!e.refresh_token)throw new On;const t=Date.now()/1e3;let s=t,r=!0,a=null;const{payload:n}=oi(e.access_token);if(n.exp&&(s=n.exp,r=s<=t),r){const{session:t,error:s}=yield this._callRefreshToken(e.refresh_token);if(s)return{data:{user:null,session:null},error:s};if(!t)return{data:{user:null,session:null},error:null};a=t}else{const{data:r,error:n}=yield this._getUser(e.access_token);if(n)throw n;a={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:s-t,expires_at:s},yield this._saveSession(a),yield this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(Pn(t))return{data:{session:null,user:null},error:t};throw t}})}refreshSession(e){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._refreshSession(e)}))})}_refreshSession(e){return h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){var s;if(!e){const{data:r,error:a}=t;if(a)throw a;e=null!==(s=r.session)&&void 0!==s?s:void 0}if(!(null==e?void 0:e.refresh_token))throw new On;const{session:r,error:a}=yield this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}}))}catch(t){if(Pn(t))return{data:{user:null,session:null},error:t};throw t}})}_getSessionFromURL(e,t){return h(this,null,function*(){try{if(!Qn())throw new In("No browser detected.");if(e.error||e.error_description||e.error_code)throw new In(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Ln("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new In("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ln("No code detected.");const{data:t,error:s}=yield this._exchangeCodeForSession(e.code);if(s)throw s;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:r,access_token:a,refresh_token:n,expires_in:i,expires_at:o,token_type:l}=e;if(!(a&&i&&n&&l))throw new In("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(i);let u=c+d;o&&(u=parseInt(o));const{data:h,error:m}=yield this._getUser(a);if(m)throw m;const p={provider_token:s,provider_refresh_token:r,access_token:a,expires_in:d,expires_at:u,refresh_token:n,token_type:l,user:h.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:e.type},error:null}}catch(s){if(Pn(s))return{data:{session:null,redirectType:null},error:s};throw s}})}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}_isPKCECallback(e){return h(this,null,function*(){const t=yield ai(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)})}signOut(){return h(this,arguments,function*(e={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._signOut(e)}))})}_signOut(){return h(this,arguments,function*({scope:e}={scope:"global"}){return yield this._useSession(t=>h(this,null,function*(){var s;const{data:r,error:a}=t;if(a)return{error:a};const n=null===(s=r.session)||void 0===s?void 0:s.access_token;if(n){const{error:t}=yield this.admin.signOut(n,e);if(t&&(!function(e){return Pn(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(yield this._removeSession(),yield ni(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(()=>{h(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){this._emitInitialSession(t)}))})})(),{data:{subscription:s}}}_emitInitialSession(e){return h(this,null,function*(){return yield this._useSession(t=>h(this,null,function*(){var s,r;try{const{data:{session:r},error:a}=t;if(a)throw a;yield null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",r),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(a){yield null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",e,"error",a)}}))})}resetPasswordForEmail(e){return h(this,arguments,function*(e,t={}){let s=null,r=null;"pkce"===this.flowType&&([s,r]=yield di(this.storage,this.storageKey,!0));try{return yield bi(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(Pn(a))return{data:null,error:a};throw a}})}getUserIdentities(){return h(this,null,function*(){var e;try{const{data:t,error:s}=yield this.getUser();if(s)throw s;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(Pn(t))return{data:null,error:t};throw t}})}linkIdentity(e){return h(this,null,function*(){var t;try{const{data:s,error:r}=yield this._useSession(t=>h(this,null,function*(){var s,r,a,n,i;const{data:o,error:l}=t;if(l)throw l;const c=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(s=e.options)||void 0===s?void 0:s.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(a=e.options)||void 0===a?void 0:a.queryParams,skipBrowserRedirect:!0});return yield bi(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(n=o.session)||void 0===n?void 0:n.access_token)&&void 0!==i?i:void 0})}));if(r)throw r;return Qn()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==s?void 0:s.url),{data:{provider:e.provider,url:null==s?void 0:s.url},error:null}}catch(s){if(Pn(s))return{data:{provider:e.provider,url:null},error:s};throw s}})}unlinkIdentity(e){return h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){var s,r;const{data:a,error:n}=t;if(n)throw n;return yield bi(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(r=null===(s=a.session)||void 0===s?void 0:s.access_token)&&void 0!==r?r:void 0})}))}catch(t){if(Pn(t))return{data:null,error:t};throw t}})}_refreshAccessToken(e){return h(this,null,function*(){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const a=Date.now();return yield(s=s=>h(this,null,function*(){return s>0&&(yield function(e){return h(this,null,function*(){return yield new Promise(t=>{setTimeout(()=>t(null),e)})})}(200*Math.pow(2,s-1))),this._debug(t,"refreshing attempt",s),yield bi(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:yi})}),r=(e,t)=>{const s=200*Math.pow(2,e);return t&&zn(t)&&Date.now()+s-a<kn},new Promise((e,t)=>{h(null,null,function*(){for(let a=0;a<1/0;a++)try{const t=yield s(a);if(!r(a,null,t))return void e(t)}catch(Kd){if(!r(a,Kd))return void t(Kd)}})}))}catch(a){if(this._debug(t,"error",a),Pn(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(t,"end")}var s,r})}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,t){return h(this,null,function*(){const s=yield this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),Qn()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}})}_recoverAndRefresh(){return h(this,null,function*(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=yield ai(this.storage,this.storageKey);if(a&&this.userStorage){let t=yield ai(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:a.user},yield ri(this.userStorage,this.storageKey+"-user",t)),a.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:pi()}else if(a&&!a.user&&!a.user){const e=yield ai(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(a.user=e.user,yield ni(this.storage,this.storageKey+"-user"),yield ri(this.storage,this.storageKey,a)):a.user=pi()}if(this._debug(s,"session from storage",a),!this._isValidSession(a))return this._debug(s,"session is not valid"),void(null!==a&&(yield this._removeSession()));const n=1e3*(null!==(t=a.expires_at)&&void 0!==t?t:1/0)-Date.now()<Nn;if(this._debug(s,`session has${n?"":" not"} expired with margin of 90000s`),n){if(this.autoRefreshToken&&a.refresh_token){const{error:e}=yield this._callRefreshToken(a.refresh_token);e&&(zn(e)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",e),yield this._removeSession()))}}else if(a.user&&!0===a.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=yield this._getUser(a.access_token);!t&&(null==e?void 0:e.user)?(a.user=e.user,yield this._saveSession(a),yield this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(r){this._debug(s,"error getting user data, skipping SIGNED_IN notification",r)}else yield this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){return void this._debug(s,"error",a)}finally{this._debug(s,"end")}})}_callRefreshToken(e){return h(this,null,function*(){var t,s;if(!e)throw new On;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new ii;const{data:t,error:s}=yield this._refreshAccessToken(e);if(s)throw s;if(!t.session)throw new On;yield this._saveSession(t.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(a){if(this._debug(r,"error",a),Pn(a)){const e={session:null,error:a};return zn(a)||(yield this._removeSession()),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(s=this.refreshingDeferred)||void 0===s||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(r,"end")}})}_notifyAllSubscribers(e,t,s=!0){return h(this,null,function*(){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],a=Array.from(this.stateChangeEmitters.values()).map(s=>h(this,null,function*(){try{yield s.callback(e,t)}catch(Kd){r.push(Kd)}}));if(yield Promise.all(a),r.length>0){for(let e=0;e<r.length;e+=1);throw r[0]}}finally{this._debug(r,"end")}})}_saveSession(e){return h(this,null,function*(){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!s&&t.user&&(yield ri(this.userStorage,this.storageKey+"-user",{user:t.user}));const e=Object.assign({},t);delete e.user;const r=fi(e);yield ri(this.storage,this.storageKey,r)}else{const e=fi(t);yield ri(this.storage,this.storageKey,e)}})}_removeSession(){return h(this,null,function*(){this._debug("#_removeSession()"),yield ni(this.storage,this.storageKey),yield ni(this.storage,this.storageKey+"-code-verifier"),yield ni(this.storage,this.storageKey+"-user"),this.userStorage&&(yield ni(this.userStorage,this.storageKey+"-user")),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Qn()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(Kd){}}_startAutoRefresh(){return h(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),kn);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(()=>h(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return h(this,null,function*(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)})}startAutoRefresh(){return h(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return h(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return h(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>h(this,null,function*(){try{const e=Date.now();try{return yield this._useSession(t=>h(this,null,function*(){const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*s.expires_at-e)/kn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&(yield this._callRefreshToken(s.refresh_token))}))}catch(Kd){}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(Kd){if(!(Kd.isAcquireTimeout||Kd instanceof Pi))throw Kd;this._debug("auto refresh token tick lock not available")}})}_handleVisibilityChange(){return h(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!Qn()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>h(this,null,function*(){return yield this._onVisibilityChanged(!1)}),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){}})}_onVisibilityChanged(e){return h(this,null,function*(){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){"visible"===document.visibilityState?yield this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(e,t,s){return h(this,null,function*(){const r=[`provider=${encodeURIComponent(t)}`];if((null==s?void 0:s.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),(null==s?void 0:s.scopes)&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),"pkce"===this.flowType){const[e,t]=yield di(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});r.push(s.toString())}if(null==s?void 0:s.queryParams){const e=new URLSearchParams(s.queryParams);r.push(e.toString())}return(null==s?void 0:s.skipBrowserRedirect)&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`})}_unenroll(e){return h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){var s;const{data:r,error:a}=t;return a?{data:null,error:a}:yield bi(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token})}))}catch(t){if(Pn(t))return{data:null,error:t};throw t}})}_enroll(e){return h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){var s,r;const{data:a,error:n}=t;if(n)return{data:null,error:n};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=yield bi(this.fetch,"POST",`${this.url}/factors`,{body:i,headers:this.headers,jwt:null===(s=null==a?void 0:a.session)||void 0===s?void 0:s.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(r=null==o?void 0:o.totp)||void 0===r?void 0:r.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})}))}catch(t){if(Pn(t))return{data:null,error:t};throw t}})}_verify(e){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){var s;const{data:r,error:a}=t;if(a)return{data:null,error:a};const{data:n,error:i}=yield bi(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token});return i?{data:null,error:i}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+n.expires_in},n)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",n),{data:n,error:i})}))}catch(t){if(Pn(t))return{data:null,error:t};throw t}}))})}_challenge(e){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){var s;const{data:r,error:a}=t;return a?{data:null,error:a}:yield bi(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token})}))}catch(t){if(Pn(t))return{data:null,error:t};throw t}}))})}_challengeAndVerify(e){return h(this,null,function*(){const{data:t,error:s}=yield this._challenge({factorId:e.factorId});return s?{data:null,error:s}:yield this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})})}_listFactors(){return h(this,null,function*(){const{data:{user:e},error:t}=yield this.getUser();if(t)return{data:null,error:t};const s=(null==e?void 0:e.factors)||[],r=s.filter(e=>"totp"===e.factor_type&&"verified"===e.status),a=s.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:s,totp:r,phone:a},error:null}})}_getAuthenticatorAssuranceLevel(){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){return yield this._useSession(e=>h(this,null,function*(){var t,s;const{data:{session:r},error:a}=e;if(a)return{data:null,error:a};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:n}=oi(r.access_token);let i=null;n.aal&&(i=n.aal);let o=i;(null!==(s=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==s?s:[]).length>0&&(o="aal2");return{data:{currentLevel:i,nextLevel:o,currentAuthenticationMethods:n.amr||[]},error:null}}))}))})}fetchJwk(e){return h(this,arguments,function*(e,t={keys:[]}){let s=t.keys.find(t=>t.kid===e);if(s)return s;const r=Date.now();if(s=this.jwks.keys.find(t=>t.kid===e),s&&this.jwks_cached_at+6e5>r)return s;const{data:a,error:n}=yield bi(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(n)throw n;return a.keys&&0!==a.keys.length?(this.jwks=a,this.jwks_cached_at=r,s=a.keys.find(t=>t.kid===e),s||null):null})}getClaims(e){return h(this,arguments,function*(e,t={}){try{let s=e;if(!s){const{data:e,error:t}=yield this.getSession();if(t||!e.session)return{data:null,error:t};s=e.session.access_token}const{header:r,payload:a,signature:n,raw:{header:i,payload:o}}=oi(s);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(a.exp);const l=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?yield this.fetchJwk(r.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!l){const{error:e}=yield this.getUser(s);if(e)throw e;return{data:{claims:a,header:r,signature:n},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),d=yield crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!(yield crypto.subtle.verify(c,d,n,Xn(`${i}.${o}`))))throw new Bn("Invalid JWT signature");return{data:{claims:a,header:r,signature:n},error:null}}catch(s){if(Pn(s))return{data:null,error:s};throw s}})}}$i.nextInstanceID=0;const Ii=$i;class Li extends Ii{constructor(e){super(e)}}var Ui=function(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{l(r.next(e))}catch(Kd){n(Kd)}}function o(e){try{l(r.throw(e))}catch(Kd){n(Kd)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};class zi{constructor(e,t,s){var r,a,n;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const i=(o=e).endsWith("/")?o:o+"/";var o;const l=new URL(i);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d=function(e,t){var s,r;const{db:a,auth:n,realtime:i,global:o}=e,{db:l,auth:c,realtime:d,global:u}=t,h={db:Object.assign(Object.assign({},l),a),auth:Object.assign(Object.assign({},c),n),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},u),o),{headers:Object.assign(Object.assign({},null!==(s=null==u?void 0:u.headers)&&void 0!==s?s:{}),null!==(r=null==o?void 0:o.headers)&&void 0!==r?r:{})}),accessToken:()=>wn(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!=s?s:{},{db:gn,realtime:vn,auth:Object.assign(Object.assign({},xn),{storageKey:c}),global:fn});this.storageKey=null!==(r=d.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(a=d.global.headers)&&void 0!==a?a:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(n=d.auth)&&void 0!==n?n:{},this.headers,d.global.fetch),this.fetch=yn(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Gr(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new mn(this.storageUrl.href,this.headers,this.fetch,null==s?void 0:s.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new yr(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Ui(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return null!==(t=null===(e=s.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,storageKey:a,flowType:n,lock:i,debug:o},l,c){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Li({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),l),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,flowType:n,lock:i,debug:o,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Ba(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,s){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===s?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=s}}!function(){if("undefined"!=typeof window)return!1;if("undefined"==typeof process)return!1;const e=process.version;if(null==e)return!1;const t=e.match(/^v(\d+)\./);!!t&&parseInt(t[1],10)}();const qi=new zi("https://efnzmpzkzeuktqkghwfa.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVmbnptcHpremV1a3Rxa2dod2ZhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYyMzE4MzcsImV4cCI6MjA3MTgwNzgzN30.iQiDuurPIkSNjHWP6TID0dATrOCJQ71-kblcsRsHiAk",Bi);var Bi;const Wi="songs",Hi=(e,t="Supabase operation")=>{throw new Error(`${t}: ${e.message}`)},Fi={list(e="release_date",t=null){return h(this,null,function*(){try{const{column:s,ascending:r}=(e=>{if(!e||"string"!=typeof e)return{column:"release_date",ascending:!1};let t=!0,s=e.trim();return s.startsWith("-")?(t=!1,s=s.slice(1)):s.startsWith("+")&&(t=!0,s=s.slice(1)),s||(s="release_date"),{column:s,ascending:t}})(e);let a=qi.from(Wi).select("*").order(s,{ascending:r});t&&(a=a.limit(t));const{data:n,error:i}=yield a;if(i)throw i;return n||[]}catch(s){return Hi(s,"Liste des chansons"),[]}})},get(e){return h(this,null,function*(){try{const{data:t,error:s}=yield qi.from(Wi).select("*").eq("id",e).single();if(s)throw s;return t}catch(t){return Hi(t,`Récupération chanson ID ${e}`),null}})},getCurrent(){return h(this,null,function*(){try{const{data:e,error:t}=yield qi.from(Wi).select("*").eq("status","published").order("release_date",{ascending:!1}).limit(1).single();if(t)throw t;return e}catch(e){return Hi(e,"Chanson actuelle"),null}})},create(e){return h(this,null,function*(){var t,s,r,a,n,i,o,l,c,d;try{const u={title:null==(t=e.title)?void 0:t.trim(),artist:(null==(s=e.artist)?void 0:s.trim())||"A Música da Segunda",description:null==(r=e.description)?void 0:r.trim(),lyrics:null==(a=e.lyrics)?void 0:a.trim(),release_date:e.release_date,status:e.status||"draft",tiktok_video_id:null==(n=e.tiktok_video_id)?void 0:n.trim(),tiktok_url:null==(i=e.tiktok_url)?void 0:i.trim(),tiktok_publication_date:e.tiktok_publication_date,spotify_url:null==(o=e.spotify_url)?void 0:o.trim(),apple_music_url:null==(l=e.apple_music_url)?void 0:l.trim(),youtube_url:null==(c=e.youtube_url)?void 0:c.trim(),cover_image:null==(d=e.cover_image)?void 0:d.trim(),hashtags:Array.isArray(e.hashtags)?e.hashtags:[]},{data:h,error:m}=yield qi.from(Wi).insert([u]).select().single();if(m)throw m;return h}catch(u){throw Hi(u,"Création chanson"),u}})},update(e,t){return h(this,null,function*(){try{const s={};Object.keys(t).forEach(e=>{void 0!==t[e]&&null!==t[e]&&("hashtags"!==e||Array.isArray(t[e])?s[e]=t[e]:s[e]=[])});const{data:r,error:a}=yield qi.from(Wi).update(s).eq("id",e).select().single();if(a)throw a;return r}catch(s){throw Hi(s,`Mise à jour chanson ID ${e}`),s}})},delete(e){return h(this,null,function*(){try{const{error:t}=yield qi.from(Wi).delete().eq("id",e);if(t)throw t;return!0}catch(t){throw Hi(t,`Suppression chanson ID ${e}`),t}})},search(e){return h(this,null,function*(){try{if(!e||""===e.trim())return yield this.list();const t=e.trim().toLowerCase(),{data:s,error:r}=yield qi.from(Wi).select("*").or(`title.ilike.%${t}%,artist.ilike.%${t}%,description.ilike.%${t}%`).order("release_date",{ascending:!1});if(r)throw r;return s||[]}catch(t){return Hi(t,"Recherche chansons"),[]}})},getByStatus(e){return h(this,null,function*(){try{const{data:t,error:s}=yield qi.from(Wi).select("*").eq("status",e).order("release_date",{ascending:!1});if(s)throw s;return t||[]}catch(t){return Hi(t,`Chansons par statut: ${e}`),[]}})},getByMonth(e,t){return h(this,null,function*(){try{const s=`${e}-${t.toString().padStart(2,"0")}-01`,r=`${e}-${t.toString().padStart(2,"0")}-31`,{data:a,error:n}=yield qi.from(Wi).select("*").gte("release_date",s).lte("release_date",r).order("release_date",{ascending:!1});if(n)throw n;return a||[]}catch(s){return Hi(s,`Chansons par mois ${t}/${e}`),[]}})}};let Vi="unknown",Ki=!0;h(null,null,function*(){try{return(yield h(null,null,function*(){try{const{data:e,error:t}=yield qi.from(Wi).select("count").limit(1);if(t){if("PGRST116"===t.code)return!0;throw t}return!0}catch(e){return!1}}))?(Ki=!0,Vi="supabase",!0):(Ki=!1,Vi="localStorage",!1)}catch(e){return Ki=!1,Vi="localStorage",!1}}).then(()=>{});const Ji=(e="-release_date",t=10)=>h(null,null,function*(){try{if(Ki){return yield Fi.list(e,t)}{const e=hr.songs.getAll().sort((e,t)=>new Date(t.release_date)-new Date(e.release_date));return t?e.slice(0,t):e}}catch(s){const e=hr.songs.getAll().sort((e,t)=>new Date(t.release_date)-new Date(e.release_date));return t?e.slice(0,t):e}}),Gi=()=>h(null,null,function*(){try{return Ki?yield Fi.getCurrent():hr.songs.getCurrent()}catch(e){return hr.songs.getCurrent()}}),Yi=e=>h(null,null,function*(){try{if(Ki){const s=yield Fi.create(e);try{hr.songs.create(e)}catch(t){}return s}return hr.songs.create(e)}catch(s){return hr.songs.create(e)}}),Xi=(e,t)=>h(null,null,function*(){try{if(Ki){const r=yield Fi.update(e,t);try{hr.songs.update(e,t)}catch(s){}return r}return hr.songs.update(e,t)}catch(r){return hr.songs.update(e,t)}}),Zi=e=>h(null,null,function*(){try{if(Ki){const s=yield Fi.delete(e);try{hr.songs.delete(e)}catch(t){}return s}return hr.songs.delete(e)}catch(s){return hr.songs.delete(e)}}),Qi=e=>h(null,null,function*(){try{return Ki?yield Fi.search(e):hr.songs.search(e)}catch(t){return hr.songs.search(e)}}),eo=(e="-release_date",t=25)=>h(null,null,function*(){try{if(Ki){const s=(yield Fi.list(e,t)).filter(e=>11===new Date(e.release_date).getMonth()||"published"===e.status);return t?s.slice(0,t):s}{const e=hr.songs.getAll(),s=e.filter(e=>{const t=new Date(e.release_date),s=t.getMonth();t.getDate();return 11===s||"published"===e.status}).sort((e,t)=>new Date(t.release_date)-new Date(e.release_date));return t?s.slice(0,t):s}}catch(s){const e=hr.songs.getAll().filter(e=>{const t=new Date(e.release_date),s=t.getMonth();return t.getDate(),11===s||"published"===e.status}).sort((e,t)=>new Date(t.release_date)-new Date(e.release_date));return t?e.slice(0,t):e}});function to(...e){return X(Z(e))}const so=j,ro=x,ao=m.forwardRef((e,t)=>{var s=e,{className:r}=s,a=d(s,["className"]);return p.jsx(g,l({ref:t,className:to("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r)},a))});ao.displayName=g.displayName;const no=m.forwardRef((e,t)=>{var s=e,{className:r,children:a}=s,n=d(s,["className","children"]);return p.jsxs(ro,{children:[p.jsx(ao,{}),p.jsxs(v,c(l({ref:t,className:to("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r)},n),{children:[a,p.jsxs(b,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[p.jsx(Hs,{className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:"Close"})]})]}))]})});no.displayName=v.displayName;const io=e=>{var t=e,{className:s}=t,r=d(t,["className"]);return p.jsx("div",l({className:to("flex flex-col space-y-1.5 text-center sm:text-left",s)},r))};io.displayName="DialogHeader";const oo=m.forwardRef((e,t)=>{var s=e,{className:r}=s,a=d(s,["className"]);return p.jsx(y,l({ref:t,className:to("text-lg font-semibold leading-none tracking-tight",r)},a))});oo.displayName=y.displayName;const lo=m.forwardRef((e,t)=>{var s=e,{className:r}=s,a=d(s,["className"]);return p.jsx(w,l({ref:t,className:to("text-sm text-muted-foreground",r)},a))});function co({postId:e,className:t="",song:s=null}){const[r,a]=m.useState(!0),[n,i]=m.useState(null),[o,l]=m.useState(0),[c,d]=m.useState(0),[u,h]=m.useState(!1),f=m.useRef(null),g=m.useRef(null),x=m.useRef(null),v=m.useRef(null),b=8e3;m.useEffect(()=>(h(!0),()=>{h(!1),x.current&&clearTimeout(x.current),v.current&&clearTimeout(v.current)}),[]);const y=m.useCallback(()=>{x.current&&(clearTimeout(x.current),x.current=null),v.current&&(clearTimeout(v.current),v.current=null)},[]);m.useEffect(()=>{if(e&&u)return a(!0),i(null),l(0),d(e=>e+1),y(),x.current=setTimeout(()=>{u&&j("Timeout: La vidéo a pris trop de temps à charger")},b),y},[e,u,y]);const w=m.useCallback(()=>{u&&(y(),a(!1),i(null),f.current&&f.current.focus())},[u,y]),j=m.useCallback((e="Erro ao carregar vídeo TikTok")=>{u&&(y(),o<1?v.current=setTimeout(()=>{u&&(l(e=>e+1),d(e=>e+1),a(!0),i(null),x.current=setTimeout(()=>{u&&j("Timeout sur retry")},b))},500):(a(!1),i(e)))},[u,o,1,y]),k=m.useCallback(()=>{u&&(i(null),l(0),d(e=>e+1),a(!0),x.current=setTimeout(()=>{u&&j("Timeout sur retry manuel")},b))},[u,j]),N=m.useCallback(()=>{j("Erro interno do iframe TikTok")},[j]);return m.useEffect(()=>{const e=e=>{if("https://www.tiktok.com"===e.origin)try{const t=e.data;t&&"tiktok-ready"===t.type&&w()}catch(t){}};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},[w]),e?n?p.jsxs("div",{className:`bg-red-50 border border-red-200 rounded-2xl p-6 text-center ${t}`,children:[p.jsx(cs,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),p.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Erro ao carregar"}),p.jsx("p",{className:"text-red-600 mb-4",children:n}),p.jsxs("div",{className:"flex gap-2 justify-center flex-wrap",children:[p.jsxs("button",{onClick:k,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[p.jsx(Ps,{className:"w-4 h-4"}),"Tentar Novamente"]}),s&&s.tiktok_url&&p.jsxs("a",{href:s.tiktok_url,target:"_blank",rel:"noopener noreferrer",className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[p.jsx(hs,{className:"w-4 h-4"}),"Abrir no TikTok"]}),p.jsxs("button",{onClick:()=>window.open(`https://www.tiktok.com/@user/video/${e}`,"_blank"),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors flex items-center gap-2",children:[p.jsx(hs,{className:"w-4 h-4"}),"Tentar ID Direto"]})]})]}):p.jsx("div",{ref:g,className:`tiktok-video-container ${t}`,style:{width:"100%",maxWidth:"100%",position:"relative",backgroundColor:"#000",borderRadius:"16px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.15)",overflow:"hidden"},children:p.jsxs("div",{className:"tiktok-iframe-wrapper",style:{width:"100%",height:"0",paddingBottom:"177.78%",position:"relative",overflow:"hidden",borderRadius:"16px"},children:[p.jsx("iframe",{ref:f,src:`https://www.tiktok.com/embed/${e}?autoplay=0&muted=0&loop=1&controls=1&rel=0&modestbranding=1&playsinline=1&allowfullscreen=1`,title:`Vídeo TikTok ${e}`,className:"tiktok-iframe",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",border:"none",borderRadius:"16px",backgroundColor:"#000",overflow:"hidden",display:"block",zIndex:1,scrolling:"no",allowTransparency:"true",frameBorder:"0"},allow:"autoplay; fullscreen; picture-in-picture; encrypted-media; microphone; camera; geolocation; gyroscope; accelerometer",allowFullScreen:!0,onLoad:w,onError:N,sandbox:"allow-scripts allow-same-origin allow-presentation allow-popups allow-popups-to-escape-sandbox allow-forms allow-top-navigation",scrolling:"no",seamless:!0},c),r&&p.jsx("div",{className:"tiktok-loading-overlay",style:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2,borderRadius:"16px"},children:p.jsxs("div",{className:"text-center text-white",children:[p.jsx("div",{className:"loading-spinner mb-4",children:p.jsx(Ms,{className:"w-12 h-12 animate-spin mx-auto text-pink-500"})}),p.jsx("p",{className:"text-lg font-medium mb-2",children:"Carregando TikTok..."}),o>0&&p.jsxs("p",{className:"text-sm text-gray-300",children:["Tentativa ",o+1,"/",2]})]})})]})}):p.jsxs("div",{className:`bg-gray-100 rounded-lg p-8 text-center ${t}`,children:[p.jsx(Ss,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),p.jsx("p",{className:"text-gray-500",children:"ID TikTok manquant"}),s&&s.tiktok_url&&p.jsx("div",{className:"mt-4",children:p.jsxs("a",{href:s.tiktok_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors",children:[p.jsx(hs,{className:"w-4 h-4"}),"Ver no TikTok"]})})]})}function uo(e,[t,s]){return Math.min(s,Math.max(t,e))}lo.displayName=w.displayName;var ho="ScrollArea",[mo,po]=_(ho),[fo,go]=mo(ho),xo=m.forwardRef((e,t)=>{const s=e,{__scopeScrollArea:r,type:a="hover",dir:n,scrollHideDelay:i=600}=s,o=d(s,["__scopeScrollArea","type","dir","scrollHideDelay"]),[u,h]=m.useState(null),[f,g]=m.useState(null),[x,v]=m.useState(null),[b,y]=m.useState(null),[w,j]=m.useState(null),[_,T]=m.useState(0),[C,E]=m.useState(0),[P,M]=m.useState(!1),[R,A]=m.useState(!1),O=k(t,e=>h(e)),D=N(n);return p.jsx(fo,{scope:r,type:a,dir:D,scrollHideDelay:i,scrollArea:u,viewport:f,onViewportChange:g,content:x,onContentChange:v,scrollbarX:b,onScrollbarXChange:y,scrollbarXEnabled:P,onScrollbarXEnabledChange:M,scrollbarY:w,onScrollbarYChange:j,scrollbarYEnabled:R,onScrollbarYEnabledChange:A,onCornerWidthChange:T,onCornerHeightChange:E,children:p.jsx(S.div,c(l({dir:D},o),{ref:O,style:l({position:"relative","--radix-scroll-area-corner-width":_+"px","--radix-scroll-area-corner-height":C+"px"},e.style)}))})});xo.displayName=ho;var vo="ScrollAreaViewport",bo=m.forwardRef((e,t)=>{const s=e,{__scopeScrollArea:r,children:a,nonce:n}=s,i=d(s,["__scopeScrollArea","children","nonce"]),o=go(vo,r),u=m.useRef(null),h=k(t,u,o.onViewportChange);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),p.jsx(S.div,c(l({"data-radix-scroll-area-viewport":""},i),{ref:h,style:l({overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden"},e.style),children:p.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:a})}))]})});bo.displayName=vo;var yo="ScrollAreaScrollbar",wo=m.forwardRef((e,t)=>{const s=e,{forceMount:r}=s,a=d(s,["forceMount"]),n=go(yo,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=n,u="horizontal"===e.orientation;return m.useEffect(()=>(u?i(!0):o(!0),()=>{u?i(!1):o(!1)}),[u,i,o]),"hover"===n.type?p.jsx(jo,c(l({},a),{ref:t,forceMount:r})):"scroll"===n.type?p.jsx(ko,c(l({},a),{ref:t,forceMount:r})):"auto"===n.type?p.jsx(No,c(l({},a),{ref:t,forceMount:r})):"always"===n.type?p.jsx(_o,c(l({},a),{ref:t})):null});wo.displayName=yo;var jo=m.forwardRef((e,t)=>{const s=e,{forceMount:r}=s,a=d(s,["forceMount"]),n=go(yo,e.__scopeScrollArea),[i,o]=m.useState(!1);return m.useEffect(()=>{const e=n.scrollArea;let t=0;if(e){const s=()=>{window.clearTimeout(t),o(!0)},r=()=>{t=window.setTimeout(()=>o(!1),n.scrollHideDelay)};return e.addEventListener("pointerenter",s),e.addEventListener("pointerleave",r),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",s),e.removeEventListener("pointerleave",r)}}},[n.scrollArea,n.scrollHideDelay]),p.jsx(T,{present:r||i,children:p.jsx(No,c(l({"data-state":i?"visible":"hidden"},a),{ref:t}))})}),ko=m.forwardRef((e,t)=>{const s=e,{forceMount:r}=s,a=d(s,["forceMount"]),n=go(yo,e.__scopeScrollArea),i="horizontal"===e.orientation,o=Ho(()=>h("SCROLL_END"),100),[u,h]=(f="hidden",g={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},m.useReducer((e,t)=>{const s=g[e][t];return null!=s?s:e},f));var f,g;return m.useEffect(()=>{if("idle"===u){const e=window.setTimeout(()=>h("HIDE"),n.scrollHideDelay);return()=>window.clearTimeout(e)}},[u,n.scrollHideDelay,h]),m.useEffect(()=>{const e=n.viewport,t=i?"scrollLeft":"scrollTop";if(e){let s=e[t];const r=()=>{const r=e[t];s!==r&&(h("SCROLL"),o()),s=r};return e.addEventListener("scroll",r),()=>e.removeEventListener("scroll",r)}},[n.viewport,i,h,o]),p.jsx(T,{present:r||"hidden"!==u,children:p.jsx(_o,c(l({"data-state":"hidden"===u?"hidden":"visible"},a),{ref:t,onPointerEnter:C(e.onPointerEnter,()=>h("POINTER_ENTER")),onPointerLeave:C(e.onPointerLeave,()=>h("POINTER_LEAVE"))}))})}),No=m.forwardRef((e,t)=>{const s=go(yo,e.__scopeScrollArea),r=e,{forceMount:a}=r,n=d(r,["forceMount"]),[i,o]=m.useState(!1),u="horizontal"===e.orientation,h=Ho(()=>{if(s.viewport){const e=s.viewport.offsetWidth<s.viewport.scrollWidth,t=s.viewport.offsetHeight<s.viewport.scrollHeight;o(u?e:t)}},10);return Fo(s.viewport,h),Fo(s.content,h),p.jsx(T,{present:a||i,children:p.jsx(_o,c(l({"data-state":i?"visible":"hidden"},n),{ref:t}))})}),_o=m.forwardRef((e,t)=>{const s=e,{orientation:r="vertical"}=s,a=d(s,["orientation"]),n=go(yo,e.__scopeScrollArea),i=m.useRef(null),o=m.useRef(0),[u,h]=m.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),f=Lo(u.viewport,u.content),g=c(l({},a),{sizes:u,onSizesChange:h,hasThumb:Boolean(f>0&&f<1),onThumbChange:e=>i.current=e,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:e=>o.current=e});function x(e,t){return function(e,t,s,r="ltr"){const a=Uo(s),n=a/2,i=t||n,o=a-i,l=s.scrollbar.paddingStart+i,c=s.scrollbar.size-s.scrollbar.paddingEnd-o,d=s.content-s.viewport,u="ltr"===r?[0,d]:[-1*d,0];return qo([l,c],u)(e)}(e,o.current,u,t)}return"horizontal"===r?p.jsx(So,c(l({},g),{ref:t,onThumbPositionChange:()=>{if(n.viewport&&i.current){const e=zo(n.viewport.scrollLeft,u,n.dir);i.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollLeft=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollLeft=x(e,n.dir))}})):"vertical"===r?p.jsx(To,c(l({},g),{ref:t,onThumbPositionChange:()=>{if(n.viewport&&i.current){const e=zo(n.viewport.scrollTop,u);i.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollTop=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollTop=x(e))}})):null}),So=m.forwardRef((e,t)=>{const s=e,{sizes:r,onSizesChange:a}=s,n=d(s,["sizes","onSizesChange"]),i=go(yo,e.__scopeScrollArea),[o,u]=m.useState(),h=m.useRef(null),f=k(t,h,i.onScrollbarXChange);return m.useEffect(()=>{h.current&&u(getComputedStyle(h.current))},[h]),p.jsx(Po,c(l({"data-orientation":"horizontal"},n),{ref:f,sizes:r,style:l({bottom:0,left:"rtl"===i.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===i.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Uo(r)+"px"},e.style),onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,s)=>{if(i.viewport){const r=i.viewport.scrollLeft+t.deltaX;e.onWheelScroll(r),Bo(r,s)&&t.preventDefault()}},onResize:()=>{h.current&&i.viewport&&o&&a({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:h.current.clientWidth,paddingStart:Io(o.paddingLeft),paddingEnd:Io(o.paddingRight)}})}}))}),To=m.forwardRef((e,t)=>{const s=e,{sizes:r,onSizesChange:a}=s,n=d(s,["sizes","onSizesChange"]),i=go(yo,e.__scopeScrollArea),[o,u]=m.useState(),h=m.useRef(null),f=k(t,h,i.onScrollbarYChange);return m.useEffect(()=>{h.current&&u(getComputedStyle(h.current))},[h]),p.jsx(Po,c(l({"data-orientation":"vertical"},n),{ref:f,sizes:r,style:l({top:0,right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Uo(r)+"px"},e.style),onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,s)=>{if(i.viewport){const r=i.viewport.scrollTop+t.deltaY;e.onWheelScroll(r),Bo(r,s)&&t.preventDefault()}},onResize:()=>{h.current&&i.viewport&&o&&a({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:h.current.clientHeight,paddingStart:Io(o.paddingTop),paddingEnd:Io(o.paddingBottom)}})}}))}),[Co,Eo]=mo(yo),Po=m.forwardRef((e,t)=>{const s=e,{__scopeScrollArea:r,sizes:a,hasThumb:n,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:u,onThumbPositionChange:h,onDragScroll:f,onWheelScroll:g,onResize:x}=s,v=d(s,["__scopeScrollArea","sizes","hasThumb","onThumbChange","onThumbPointerUp","onThumbPointerDown","onThumbPositionChange","onDragScroll","onWheelScroll","onResize"]),b=go(yo,r),[y,w]=m.useState(null),j=k(t,e=>w(e)),N=m.useRef(null),_=m.useRef(""),T=b.viewport,P=a.content-a.viewport,M=E(g),R=E(h),A=Ho(x,10);function O(e){if(N.current){const t=e.clientX-N.current.left,s=e.clientY-N.current.top;f({x:t,y:s})}}return m.useEffect(()=>{const e=e=>{const t=e.target;(null==y?void 0:y.contains(t))&&M(e,P)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[T,y,P,M]),m.useEffect(R,[a,R]),Fo(y,A),Fo(b.content,A),p.jsx(Co,{scope:r,scrollbar:y,hasThumb:n,onThumbChange:E(i),onThumbPointerUp:E(o),onThumbPositionChange:R,onThumbPointerDown:E(u),children:p.jsx(S.div,c(l({},v),{ref:j,style:l({position:"absolute"},v.style),onPointerDown:C(e.onPointerDown,e=>{if(0===e.button){e.target.setPointerCapture(e.pointerId),N.current=y.getBoundingClientRect(),_.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",b.viewport&&(b.viewport.style.scrollBehavior="auto"),O(e)}}),onPointerMove:C(e.onPointerMove,O),onPointerUp:C(e.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=_.current,b.viewport&&(b.viewport.style.scrollBehavior=""),N.current=null})}))})}),Mo="ScrollAreaThumb",Ro=m.forwardRef((e,t)=>{const s=e,{forceMount:r}=s,a=d(s,["forceMount"]),n=Eo(Mo,e.__scopeScrollArea);return p.jsx(T,{present:r||n.hasThumb,children:p.jsx(Ao,l({ref:t},a))})}),Ao=m.forwardRef((e,t)=>{const s=e,{__scopeScrollArea:r,style:a}=s,n=d(s,["__scopeScrollArea","style"]),i=go(Mo,r),o=Eo(Mo,r),{onThumbPositionChange:u}=o,h=k(t,e=>o.onThumbChange(e)),f=m.useRef(void 0),g=Ho(()=>{f.current&&(f.current(),f.current=void 0)},100);return m.useEffect(()=>{const e=i.viewport;if(e){const t=()=>{if(g(),!f.current){const t=Wo(e,u);f.current=t,u()}};return u(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[i.viewport,g,u]),p.jsx(S.div,c(l({"data-state":o.hasThumb?"visible":"hidden"},n),{ref:h,style:l({width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)"},a),onPointerDownCapture:C(e.onPointerDownCapture,e=>{const t=e.target.getBoundingClientRect(),s=e.clientX-t.left,r=e.clientY-t.top;o.onThumbPointerDown({x:s,y:r})}),onPointerUp:C(e.onPointerUp,o.onThumbPointerUp)}))});Ro.displayName=Mo;var Oo="ScrollAreaCorner",Do=m.forwardRef((e,t)=>{const s=go(Oo,e.__scopeScrollArea),r=Boolean(s.scrollbarX&&s.scrollbarY);return"scroll"!==s.type&&r?p.jsx($o,c(l({},e),{ref:t})):null});Do.displayName=Oo;var $o=m.forwardRef((e,t)=>{const s=e,{__scopeScrollArea:r}=s,a=d(s,["__scopeScrollArea"]),n=go(Oo,r),[i,o]=m.useState(0),[u,h]=m.useState(0),f=Boolean(i&&u);return Fo(n.scrollbarX,()=>{var e;const t=(null==(e=n.scrollbarX)?void 0:e.offsetHeight)||0;n.onCornerHeightChange(t),h(t)}),Fo(n.scrollbarY,()=>{var e;const t=(null==(e=n.scrollbarY)?void 0:e.offsetWidth)||0;n.onCornerWidthChange(t),o(t)}),f?p.jsx(S.div,c(l({},a),{ref:t,style:l({width:i,height:u,position:"absolute",right:"ltr"===n.dir?0:void 0,left:"rtl"===n.dir?0:void 0,bottom:0},e.style)})):null});function Io(e){return e?parseInt(e,10):0}function Lo(e,t){const s=e/t;return isNaN(s)?0:s}function Uo(e){const t=Lo(e.viewport,e.content),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-s)*t;return Math.max(r,18)}function zo(e,t,s="ltr"){const r=Uo(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=t.scrollbar.size-a,i=t.content-t.viewport,o=n-r,l=uo(e,"ltr"===s?[0,i]:[-1*i,0]);return qo([0,i],[0,o])(l)}function qo(e,t){return s=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(s-e[0])}}function Bo(e,t){return e>0&&e<t}var Wo=(e,t=()=>{})=>{let s={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const n={left:e.scrollLeft,top:e.scrollTop},i=s.left!==n.left,o=s.top!==n.top;(i||o)&&t(),s=n,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function Ho(e,t){const s=E(e),r=m.useRef(0);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),m.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(s,t)},[s,t])}function Fo(e,t){const s=E(t);P(()=>{let t=0;if(e){const r=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(s)});return r.observe(e),()=>{window.cancelAnimationFrame(t),r.unobserve(e)}}},[e,s])}var Vo=xo,Ko=bo,Jo=Do;const Go=m.forwardRef((e,t)=>{var s=e,{className:r,children:a}=s,n=d(s,["className","children"]);return p.jsxs(Vo,c(l({ref:t,className:to("relative overflow-hidden",r)},n),{children:[p.jsx(Ko,{className:"h-full w-full rounded-[inherit]",children:a}),p.jsx(Yo,{}),p.jsx(Jo,{})]}))});Go.displayName=Vo.displayName;const Yo=m.forwardRef((e,t)=>{var s=e,{className:r,orientation:a="vertical"}=s,n=d(s,["className","orientation"]);return p.jsx(wo,c(l({ref:t,orientation:a,className:to("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r)},n),{children:p.jsx(Ro,{className:"relative flex-1 rounded-full bg-border"})}))});function Xo({open:e,onOpenChange:t,song:s,title:r="Letras da Música",maxHeight:a="h-56",showIcon:n=!0}){return s?p.jsx(so,{open:e,onOpenChange:t,children:p.jsxs(no,{className:"bg-[#f8f5f2] max-w-md max-h-[70vh]",children:[p.jsx(io,{children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs(oo,{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[n&&p.jsx(ms,{className:"w-5 h-5 text-blue-500"}),r]}),p.jsx("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-gray-600 transition-colors p-2 rounded-full hover:bg-gray-200",children:p.jsx(Hs,{className:"w-5 h-5"})})]})}),p.jsx("div",{className:"mt-4",children:s.lyrics?p.jsx(Go,{className:a,children:p.jsx("div",{className:"pr-4",children:p.jsx("pre",{className:"text-gray-700 whitespace-pre-wrap font-sans text-sm leading-relaxed",children:s.lyrics})})}):p.jsxs("div",{className:"text-center py-8",children:[p.jsx(ms,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),p.jsx("p",{className:"text-gray-600 font-medium",children:"Letras não disponíveis"}),p.jsx("p",{className:"text-gray-500 text-sm",children:"As letras desta música serão adicionadas em breve."})]})})]})}):null}function Zo(e){const t=function(e){if(!e||"string"!=typeof e)return null;const t=e.trim();if(/^\d{15,20}$/.test(t))return t;const s=[/tiktok\.com\/@[^\/]+\/video\/(\d{15,20})/i,/vm\.tiktok\.com\/[A-Za-z0-9]+\/?/i,/tiktok\.com\/video\/(\d{15,20})/i,/m\.tiktok\.com\/v\/(\d{15,20})/i,/tiktok\.com\/t\/(\d{15,20})/i];for(const r of s){const e=t.match(r);if(e&&e[1])return e[1]}return t.includes("vm.tiktok.com"),null}(e);return t&&((s=t)&&"string"==typeof s&&/^\d{15,20}$/.test(s.trim()))?t:null;var s}function Qo({song:e,onClose:t,onShowDescription:s}){const[r,a]=m.useState(!1),[n,i]=m.useState(!1),[o,l]=m.useState(!1),c=m.useRef(null);if(m.useEffect(()=>{const e=e=>{c.current&&!c.current.contains(e.target)&&l(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),!e||!e.id||!e.title)return p.jsxs("div",{className:"bg-white rounded-2xl p-6 text-center text-gray-500",children:[p.jsx("div",{className:"mb-4",children:p.jsx(cs,{className:"w-12 h-12 text-red-400 mx-auto"})}),p.jsx("p",{className:"text-lg font-medium mb-2",children:"Erro ao carregar música"}),p.jsx("p",{className:"text-sm text-gray-400",children:"Dados da música inválidos ou incompletos"}),t&&p.jsx("button",{onClick:t,className:"mt-4 bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors",children:"Fechar"})]});const d=[];e.spotify_url&&d.push({name:"Spotify",url:e.spotify_url,icon:Cs,color:"bg-green-500"}),e.apple_music_url&&d.push({name:"Apple Music",url:e.apple_music_url,icon:Cs,color:"bg-pink-500"}),e.youtube_url&&d.push({name:"YouTube",url:e.youtube_url,icon:Bs,color:"bg-red-500"});return p.jsxs("div",{className:"space-y-4",children:[p.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-3",children:p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[p.jsx("h2",{className:"text-lg font-bold text-gray-800 leading-tight line-clamp-2",children:e.title}),e.description&&e.description.trim()&&s&&p.jsx("button",{onClick:()=>s(e),className:"text-blue-500 hover:text-blue-700 transition-colors flex-shrink-0",title:"Ver descrição da música",children:p.jsx(ys,{className:"w-4 h-4"})})]}),p.jsx("p",{className:"text-sm text-blue-700",children:new Date(e.release_date).toLocaleDateString("pt-BR")})]}),t&&p.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:p.jsx(Hs,{className:"w-5 h-5"})})]})}),(()=>{const t=Zo(e.tiktok_video_id)||Zo(e.tiktok_url);return t?p.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden mb-4",children:p.jsx("div",{className:"",children:p.jsx(co,{postId:t,song:e,className:"mb-4"})})}):null})(),p.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-4",children:p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"relative",ref:c,children:[p.jsxs("button",{className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 px-4 rounded-xl font-medium transition-colors flex items-center justify-center space-x-2",onClick:()=>l(!o),children:[p.jsx(Ss,{className:"w-5 h-5"}),p.jsx("span",{children:"Plataformas"}),d.length>0&&p.jsx("span",{className:"ml-2 text-xs bg-blue-500 text-white px-2 py-1 rounded-full",children:d.length})]}),o&&p.jsx("div",{className:"absolute bottom-full left-0 right-0 mb-2 bg-white rounded-xl shadow-lg border border-gray-200 p-3 z-10",children:d.length>0?p.jsxs("div",{className:"space-y-2",children:[p.jsx("p",{className:"text-xs text-gray-500 font-medium mb-2",children:"Disponível em:"}),d.map((e,t)=>p.jsxs("button",{onClick:()=>{var t;(t=e.url)&&window.open(t,"_blank","noopener,noreferrer")},className:"w-full flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50 transition-colors text-left",children:[p.jsx("div",{className:`w-8 h-8 rounded-lg ${e.color} flex items-center justify-center`,children:p.jsx(e.icon,{className:"w-4 h-4 text-white"})}),p.jsx("span",{className:"text-sm font-medium text-gray-700",children:e.name}),p.jsx(hs,{className:"w-3 h-3 text-gray-400 ml-auto"})]},t))]}):p.jsxs("div",{className:"text-center py-3",children:[p.jsx(Ss,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),p.jsx("p",{className:"text-sm text-gray-500",children:"Nenhuma plataforma disponível"})]})})]}),e.lyrics&&e.lyrics.trim()&&p.jsxs("button",{onClick:()=>a(!0),className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 px-4 rounded-xl font-medium transition-colors flex items-center justify-center space-x-2",children:[p.jsx(ms,{className:"w-5 h-5"}),p.jsx("span",{children:"Letras"})]}),p.jsxs("button",{className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 px-4 rounded-xl font-medium transition-colors flex items-center justify-center space-x-2",children:[p.jsx(Os,{className:"w-5 h-5"}),p.jsx("span",{children:"Compartilhar"})]})]})}),p.jsx(Xo,{open:r,onOpenChange:a,song:e,title:"Letras da Música",maxHeight:"h-64"}),p.jsx(so,{open:n,onOpenChange:i,children:p.jsxs(no,{className:"max-w-md",children:[p.jsx(io,{children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs(oo,{className:"flex items-center space-x-2",children:[p.jsx(ys,{className:"w-5 h-5 text-blue-500"}),p.jsx("span",{children:"Descrição da Música"})]}),p.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:p.jsx(Hs,{className:"w-5 h-5"})})]})}),p.jsx("div",{className:"mt-4",children:p.jsx("p",{className:"text-gray-700 leading-relaxed font-sans text-sm",children:e.description||"Nenhuma descrição disponível para esta música."})})]})})]})}function el(){const[e,t]=m.useState(null);return m.useEffect(()=>{const e=()=>{const e=new Date,t=e.getDay(),s=0===t?1:(8-t)%7||7,r=new Date(e);r.setDate(e.getDate()+s),r.setHours(9,0,0,0);const a=r-e;return a>0?{d:Math.floor(a/864e5),h:Math.floor(a/36e5%24),m:Math.floor(a/1e3/60%60),s:Math.floor(a/1e3%60)}:null},s=setInterval(()=>{t(e())},1e3);return t(e()),()=>clearInterval(s)},[]),e?p.jsxs("div",{className:"bg-[#f8f5f2] rounded-3xl p-5 shadow-lg",children:[p.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[p.jsx(Ls,{className:"w-5 h-5 text-gray-500"}),p.jsx("h3",{className:"font-semibold text-gray-700",children:"Próxima música em..."})]}),p.jsx("div",{className:"grid grid-cols-4 gap-3 text-center",children:Object.entries(e).map(([e,t])=>p.jsxs("div",{className:"bg-[#e7f1f7] rounded-xl p-3",children:[p.jsx("p",{className:"text-2xl font-bold text-[#32a2dc]",children:t}),p.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"d"===e?"dias":"h"===e?"horas":"m"===e?"min":"seg"})]},e))})]}):p.jsxs("div",{className:"bg-[#f8f5f2] rounded-3xl p-5 shadow-lg text-center",children:[p.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"É Segunda-feira!"}),p.jsx("p",{className:"text-gray-600",children:"A nova música já está disponível!"})]})}Yo.displayName=wo.displayName;const tl=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,sl=Z,rl=(e,t)=>s=>{var r;if(null==(null==t?void 0:t.variants))return sl(e,null==s?void 0:s.class,null==s?void 0:s.className);const{variants:a,defaultVariants:n}=t,i=Object.keys(a).map(e=>{const t=null==s?void 0:s[e],r=null==n?void 0:n[e];if(null===t)return null;const i=tl(t)||tl(r);return a[e][i]}),o=s&&Object.entries(s).reduce((e,t)=>{let[s,r]=t;return void 0===r||(e[s]=r),e},{}),c=null==t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let s=t,{class:r,className:a}=s,i=d(s,["class","className"]);return Object.entries(i).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes(l(l({},n),o)[t]):l(l({},n),o)[t]===s})?[...e,r,a]:e},[]);return sl(e,i,c,null==s?void 0:s.class,null==s?void 0:s.className)},al=rl("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),nl=m.forwardRef((e,t)=>{var s=e,{className:r,variant:a,size:n,asChild:i=!1}=s,o=d(s,["className","variant","size","asChild"]);const c=i?M:"button";return p.jsx(c,l({className:to(al({variant:a,size:n,className:r})),ref:t},o))});function il({postId:e,className:t="",song:s=null}){const[r,a]=m.useState(!0),[n,i]=m.useState(null),[o,l]=m.useState(0),[c,d]=m.useState(0),[u,h]=m.useState(!1),[f,g]=m.useState(!0),[x,v]=m.useState(!0),[b,y]=m.useState(!1),w=m.useRef(null),j=m.useRef(null),k=m.useRef(null),N=m.useRef(null),_=15e3,S=m.useCallback(()=>{k.current&&(window.clearTimeout(k.current),k.current=null)},[]);m.useEffect(()=>{if(j.current)return N.current=new IntersectionObserver(([e])=>{var t;e.isIntersecting&&(h(!0),null==(t=N.current)||t.disconnect())},{threshold:.1,rootMargin:"50px"}),N.current.observe(j.current),()=>{var e;null==(e=N.current)||e.disconnect()}},[]),m.useEffect(()=>{if(e&&u)return a(!0),i(null),l(0),d(e=>e+1),g(!0),v(!0),y(!1),S(),k.current=window.setTimeout(()=>{C("Timeout: Chargement trop lent")},_),S},[e,u,S]);const T=m.useCallback(()=>{S(),a(!1),i(null),g(!0),v(!0)},[S]),C=m.useCallback((e="Erro ao carregar vídeo TikTok")=>{S(),o<3?setTimeout(()=>{l(e=>e+1),d(e=>e+1),a(!0),i(null),k.current=window.setTimeout(()=>{C("Timeout sur retry")},_)},1e3):(a(!1),i(e))},[o,3,1e3,_,S]),E=m.useCallback(()=>{i(null),l(0),d(e=>e+1),a(!0),k.current=window.setTimeout(()=>{C("Timeout sur retry manuel")},_)},[_,C]),P=m.useCallback(()=>{C("Erro interno do iframe TikTok")},[C]),M=m.useCallback(()=>{var e;if(v(!1),g(!1),w.current){w.current.focus();try{null==(e=w.current.contentWindow)||e.postMessage({type:"unmute",action:"unmute"},"https://www.tiktok.com")}catch(Kd){}}},[]);return m.useEffect(()=>()=>{var e;S(),null==(e=N.current)||e.disconnect()},[S]),e?n?p.jsxs("div",{className:`bg-red-50 border border-red-200 rounded-2xl p-6 text-center ${t}`,children:[p.jsx(cs,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),p.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Erro ao carregar"}),p.jsx("p",{className:"text-red-600 mb-4",children:n}),p.jsxs("div",{className:"flex gap-2 justify-center flex-wrap",children:[p.jsxs("button",{onClick:E,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[p.jsx(Ps,{className:"w-4 h-4"}),"Tentar Novamente"]}),s&&s.tiktok_url&&p.jsxs("a",{href:s.tiktok_url,target:"_blank",rel:"noopener noreferrer",className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[p.jsx(hs,{className:"w-4 h-4"}),"Abrir no TikTok"]})]})]}):u?p.jsx("div",{ref:j,className:`tiktok-video-container-optimized ${t}`,style:{width:"100%",maxWidth:"100%",position:"relative",backgroundColor:"#000",borderRadius:"16px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.15)",overflow:"hidden"},children:p.jsxs("div",{className:"tiktok-shell",style:{position:"relative",width:"100%",aspectRatio:"9/16",overflow:"hidden"},children:[p.jsx("iframe",{ref:w,src:`https://www.tiktok.com/embed/${e}?autoplay=1&muted=1&loop=1&controls=1&rel=0&modestbranding=1&playsinline=1&allowfullscreen=1`,title:`Vídeo TikTok ${e}`,className:"tiktok-iframe-optimized",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",border:"none",borderRadius:"16px",backgroundColor:"#000",overflow:"hidden",display:"block",zIndex:1},allow:"autoplay; fullscreen; picture-in-picture; encrypted-media; microphone; camera; geolocation; gyroscope; accelerometer",allowFullScreen:!0,playsInline:!0,onLoad:T,onError:P,sandbox:"allow-scripts allow-same-origin allow-presentation allow-popups allow-popups-to-escape-sandbox allow-forms",referrerPolicy:"strict-origin-when-cross-origin",loading:"lazy"},c),r&&p.jsx("div",{className:"tiktok-loading-overlay-optimized",style:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2,borderRadius:"16px"},children:p.jsxs("div",{className:"text-center text-white",children:[p.jsx("div",{className:"loading-spinner-optimized mb-4",children:p.jsx(Ms,{className:"w-12 h-12 animate-spin mx-auto text-pink-500"})}),p.jsx("p",{className:"text-lg font-medium mb-2",children:"Carregando TikTok..."}),o>0&&p.jsxs("p",{className:"text-sm text-gray-300",children:["Tentativa ",o+1,"/",4]})]})}),!r&&x&&p.jsx("div",{className:"tiktok-unmute-overlay",style:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:3,borderRadius:"16px",cursor:"pointer"},onClick:M,role:"button","aria-label":"Cliquez pour activer le son",tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),M())},children:p.jsxs("div",{className:"text-center text-white",children:[p.jsx("div",{className:"bg-white bg-opacity-20 rounded-full p-6 mb-4 inline-block",children:p.jsx(Ws,{className:"w-16 h-16 text-white"})}),p.jsx("h3",{className:"text-xl font-bold mb-2",children:"Cliquez pour activer le son"}),p.jsx("p",{className:"text-lg text-gray-200",children:"La vidéo est en cours de lecture (sans son)"}),p.jsx("div",{className:"mt-4 bg-white bg-opacity-20 rounded-lg px-4 py-2 inline-block",children:p.jsx("span",{className:"text-sm",children:"🔊 Tap to unmute"})})]})}),p.jsxs("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",children:[r&&"Chargement de la vidéo TikTok en cours...",!r&&x&&"Vidéo en cours de lecture, cliquez pour activer le son",!r&&!x&&"Vidéo en cours de lecture avec son activé"]})]})}):p.jsx("div",{ref:j,className:`bg-gray-200 rounded-2xl overflow-hidden ${t}`,style:{width:"100%",aspectRatio:"9/16",position:"relative"},children:p.jsx("div",{className:"animate-pulse bg-gray-300 w-full h-full flex items-center justify-center",children:p.jsxs("div",{className:"text-center text-gray-500",children:[p.jsx(Cs,{className:"w-16 h-16 mx-auto mb-4"}),p.jsx("p",{children:"Carregando..."})]})})}):p.jsx("div",{className:`bg-gray-100 rounded-lg p-8 text-center ${t}`,children:p.jsx("p",{className:"text-gray-500",children:"ID TikTok manquant"})})}nl.displayName="Button";const ol={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 mês",other:"cerca de {{count}} meses"},xMonths:{one:"1 mês",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},ll={date:Q({formats:{full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},defaultWidth:"full"}),time:Q({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:Q({formats:{full:"{{date}} 'às' {{time}}",long:"{{date}} 'às' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},cl={lastWeek:e=>{const t=e.getDay();return"'"+(0===t||6===t?"último":"última")+"' eeee 'às' p"},yesterday:"'ontem às' p",today:"'hoje às' p",tomorrow:"'amanhã às' p",nextWeek:"eeee 'às' p",other:"P"},dl={ordinalNumber:(e,t)=>{const s=Number(e);return"week"===(null==t?void 0:t.unit)?s+"ª":s+"º"},era:ee({values:{narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},defaultWidth:"wide"}),quarter:ee({values:{narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:ee({values:{narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},defaultWidth:"wide"}),day:ee({values:{narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","terça","quarta","quinta","sexta","sábado"],wide:["domingo","segunda-feira","terça-feira","quarta-feira","quinta-feira","sexta-feira","sábado"]},defaultWidth:"wide"}),dayPeriod:ee({values:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},defaultFormattingWidth:"wide"})},ul={code:"pt-BR",formatDistance:(e,t,s)=>{let r;const a=ol[e];return r="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",String(t)),(null==s?void 0:s.addSuffix)?s.comparison&&s.comparison>0?"em "+r:"há "+r:r},formatLong:ll,formatRelative:(e,t,s,r)=>{const a=cl[e];return"function"==typeof a?a(t):a},localize:dl,match:{ordinalNumber:se({matchPattern:/^(\d+)[ºªo]?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:te({matchPatterns:{narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},defaultParseWidth:"any"}),quarter:te({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:te({matchPatterns:{narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},defaultParseWidth:"any"}),day:te({matchPatterns:{narrow:/^(dom|[23456]ª?|s[aá]b)/i,short:/^(dom|[23456]ª?|s[aá]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[aá]b)/i,wide:/^(domingo|(segunda|ter[cç]a|quarta|quinta|sexta)([- ]feira)?|s[aá]bado)/i},defaultMatchWidth:"wide",parsePatterns:{short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[aá]b/i]},defaultParseWidth:"any"}),dayPeriod:te({matchPatterns:{narrow:/^(a|p|mn|md|(da) (manhã|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manhã|tarde|noite))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manhã/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function hl(){const e=it(),[t,s]=m.useState(null),[r,a]=m.useState([]),[n,i]=m.useState(!0),[o,l]=m.useState(null),[c,d]=m.useState(null),[u,f]=m.useState(!1),[g,x]=m.useState(!1),[v,b]=m.useState(!1),[y,w]=m.useState(!1),[j,k]=m.useState(null),[N,_]=m.useState(null);m.useEffect(()=>{hr.initialize();0===hr.songs.getAll().length&&hr.forceReset(),S(),T()},[]);const S=()=>h(null,null,function*(){i(!0),l(null);try{const e=yield Gi();s(e),_(e)}catch(e){l("Erro ao carregar a música da semana. Tente novamente.")}finally{i(!1)}}),T=()=>h(null,null,function*(){try{const e=yield Ji(),t=new Date,s=re(t),r=ae(t),n=e.filter(e=>{const t=ne(e.release_date);return ie(t,{start:s,end:r})});a(n)}catch(e){}}),C=()=>{S()},E=e=>{_(e),window.scrollTo({top:0,behavior:"smooth"})},P=e=>{k(e),w(!0)},M=()=>{const t=(()=>{const e=new Date;return e.setMonth(e.getMonth()-1),oe(e,"yyyy-MM")})();e(`/calendar?month=${t}`)};return n?p.jsxs("div",{className:"p-5 max-w-md mx-auto md:max-w-2xl lg:max-w-4xl",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-black text-white drop-shadow-lg mb-2",children:"Música da Segunda"}),p.jsx("p",{className:"text-white/80 font-medium text-lg md:text-xl drop-shadow-md",children:"Descubra música nova toda segunda-feira"})]}),p.jsx("div",{className:"flex items-center justify-center py-20",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),p.jsx("p",{className:"text-white/80",children:"Carregando música da semana..."})]})})]}):o?p.jsxs("div",{className:"p-5 max-w-md mx-auto md:max-w-2xl lg:max-w-4xl",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-black text-white drop-shadow-lg mb-2",children:"Música da Segunda"}),p.jsx("p",{className:"text-white/80 font-medium text-lg md:text-xl drop-shadow-md",children:"Descubra música nova toda segunda-feira"})]}),p.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-3xl p-6 text-center",children:[p.jsx(cs,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),p.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Erro ao carregar"}),p.jsx("p",{className:"text-red-600 mb-4",children:o}),p.jsxs("button",{onClick:C,className:"inline-flex items-center gap-2 bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors",children:[p.jsx(Ps,{className:"w-4 h-4"}),"Tentar novamente"]})]})]}):p.jsxs("div",{className:"p-5 max-w-md mx-auto md:max-w-2xl lg:max-w-4xl",children:[p.jsx("div",{className:"lg:hidden text-center mb-8",children:p.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[p.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden border-4 border-white/20 shadow-xl flex-shrink-0",children:p.jsx("img",{src:"images/Musica da segunda.jpg",alt:"Logo Música da Segunda",className:"w-full h-full object-cover"})}),p.jsxs("div",{className:"text-left",children:[p.jsx("h1",{className:"text-2xl md:text-3xl font-black text-white drop-shadow-lg mb-1",children:"Música da Segunda"}),p.jsx("p",{className:"text-white/80 font-medium text-sm md:text-base drop-shadow-md",children:"Descubra música nova toda segunda-feira"})]})]})}),p.jsxs("div",{className:"hidden lg:grid lg:grid-cols-2 lg:gap-8 lg:mt-8",children:[p.jsxs("div",{className:"space-y-6",children:[N?p.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-lg",children:[p.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4 text-center",children:p.jsxs("button",{onClick:()=>P(N),className:"inline-flex items-center gap-2 hover:text-blue-600 transition-colors cursor-pointer",title:"Ver descrição da música",children:[p.jsx("span",{className:"text-2xl",children:"ℹ️"}),p.jsx("span",{children:N.title})]})}),p.jsx("p",{className:"text-gray-600 text-center mb-4",children:oe(ne(N.release_date),"dd/MM/yyyy",{locale:ul})}),p.jsx("div",{className:"bg-black rounded-2xl overflow-hidden shadow-xl",children:N.tiktok_video_id?p.jsx("div",{className:"w-full",style:{aspectRatio:"9/16"},children:(N.tiktok_video_id,p.jsx(il,{postId:N.tiktok_video_id,className:"w-full",song:N}))}):N.tiktok_url?p.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-800 to-gray-900",style:{aspectRatio:"9/16"},children:p.jsxs("div",{className:"text-center text-white",children:[p.jsx(Cs,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),p.jsx("p",{className:"text-lg font-medium",children:"Vídeo TikTok"}),p.jsx("p",{className:"text-sm text-gray-400 mb-4",children:N.title}),p.jsx("a",{href:N.tiktok_url,target:"_blank",rel:"noopener noreferrer",className:"inline-block bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors",children:"Ver no TikTok"})]})}):p.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-800 to-gray-900",style:{aspectRatio:"9/16"},children:p.jsxs("div",{className:"text-center text-white",children:[p.jsx(Ss,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),p.jsx("p",{className:"text-lg font-medium",children:"Vídeo não disponível"}),p.jsx("p",{className:"text-sm text-gray-400",children:N.title})]})})}),p.jsxs("div",{className:"mt-4 text-center",children:[p.jsx("h4",{className:"font-bold text-gray-800 text-lg mb-2",children:N.title}),p.jsx("p",{className:"text-gray-600",children:N.artist}),p.jsx("p",{className:"text-gray-500 text-sm mt-1",children:oe(ne(N.release_date),"dd/MM/yyyy",{locale:ul})}),N!==t&&t&&p.jsx("button",{onClick:()=>E(t),className:"mt-3 text-blue-600 hover:text-blue-800 text-sm font-medium transition-colors",children:"← Voltar para Música da Semana"})]}),p.jsx("div",{className:"mt-6",children:p.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[p.jsx(nl,{variant:"outline",className:"bg-white/70 hover:bg-white/90 text-gray-700 font-semibold border-gray-300 py-3 rounded-2xl text-sm",onClick:()=>(k(N),void x(!0)),children:"Plataformas"}),p.jsx(nl,{variant:"outline",className:"bg-white/70 hover:bg-white/90 text-gray-700 font-semibold border-gray-300 py-3 rounded-2xl text-sm",onClick:()=>(k(N),void b(!0)),children:"Letras"}),p.jsx(nl,{variant:"outline",className:"bg-white/70 hover:bg-white/90 text-gray-700 font-semibold border-gray-300 py-3 rounded-2xl text-sm",onClick:()=>{return e=N,h(null,null,function*(){if(navigator.share)try{yield navigator.share({title:`${e.title} - ${e.artist}`,text:"Confira esta música incrível da Música da Segunda!",url:e.tiktok_url||window.location.href})}catch(Kd){}else{const t=`${e.title} - ${e.artist}\nConfira esta música incrível da Música da Segunda!`;navigator.clipboard.writeText(t),alert("Link copiado para a área de transferência!")}});var e},children:"Compartilhar"})]})})]}):p.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-lg",children:[p.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4 text-center",children:"ℹ️ Nenhuma música disponível"}),p.jsx("div",{className:"bg-gradient-to-br from-gray-100 to-gray-200 rounded-2xl flex items-center justify-center",style:{height:"min(70vh, 600px)",aspectRatio:"9/16"},children:p.jsxs("div",{className:"text-center text-gray-500",children:[p.jsx(Ss,{className:"w-16 h-16 mx-auto mb-4"}),p.jsx("p",{className:"text-lg font-medium",children:"Nenhuma música disponível"}),p.jsx("p",{className:"text-sm",children:"Volte na segunda-feira!"})]})})]}),p.jsx(el,{})]}),p.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-lg",children:[p.jsx("div",{className:"mb-6",children:p.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-3",children:[p.jsx(rs,{className:"w-6 h-6 text-blue-600"}),"Músicas do Mês"]})}),r.length>0?p.jsx("div",{className:"space-y-4",children:r.map(e=>p.jsx("div",{className:"bg-white rounded-2xl p-4 shadow-md hover:shadow-lg transition-all duration-200 border border-gray-100",children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center flex-shrink-0 shadow-md hover:shadow-lg transition-all duration-200 cursor-pointer transform hover:scale-105",onClick:()=>E(e),title:"Clique para ver esta música na coluna de vídeo",children:p.jsx(Cs,{className:"w-6 h-6 text-white"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("h3",{className:"text-xl font-bold text-gray-800 truncate",children:e.title}),p.jsx("p",{className:"text-gray-600 text-base font-medium mt-1",children:e.artist}),p.jsx("p",{className:"text-gray-500 text-sm font-medium mt-1",children:oe(ne(e.release_date),"dd/MM/yyyy",{locale:ul})})]})]})},e.id))}):p.jsxs("div",{className:"text-center py-8",children:[p.jsx(Ss,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),p.jsx("p",{className:"text-gray-500",children:"Nenhuma música publicada este mês ainda"})]}),p.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:p.jsxs("button",{onClick:M,className:"inline-flex items-center gap-2 text-gray-500 hover:text-gray-700 text-sm transition-colors group cursor-pointer",children:[p.jsx(is,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"}),"Ver músicas de ",oe(new Date((new Date).setMonth((new Date).getMonth()-1)),"MMMM yyyy",{locale:ul})]})})]})]}),p.jsxs("div",{className:"lg:hidden",children:[N?p.jsx("div",{className:"mb-6",children:p.jsx(Qo,{song:N,onShowDescription:P})}):p.jsxs("div",{className:"bg-white/20 rounded-3xl p-8 text-center",children:[p.jsx(Ss,{className:"w-16 h-16 text-white/60 mx-auto mb-4"}),p.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Nenhuma música disponível"}),p.jsx("p",{className:"text-white/80",children:"A música da semana será publicada em breve. Volte na segunda-feira!"})]}),p.jsx(el,{}),p.jsx("div",{className:"mt-8",children:p.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-lg",children:[p.jsx("div",{className:"mb-6",children:p.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-3",children:[p.jsx(rs,{className:"w-6 h-6 text-blue-600"}),"Músicas do Mês"]})}),r.length>0?p.jsx("div",{className:"space-y-4",children:r.map(e=>p.jsx("div",{className:"bg-white rounded-2xl p-4 shadow-md hover:shadow-lg transition-all duration-200 border border-gray-100",children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center flex-shrink-0 shadow-md hover:shadow-lg transition-all duration-200 cursor-pointer transform hover:scale-105",onClick:()=>E(e),title:"Clique para ver esta música na coluna de vídeo",children:p.jsx(Cs,{className:"w-6 h-6 text-white"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("h3",{className:"font-bold text-gray-800 text-lg truncate",children:e.title}),p.jsx("p",{className:"text-gray-600 text-base font-medium mt-1",children:e.artist}),p.jsx("p",{className:"text-gray-500 text-sm font-medium mt-1",children:oe(ne(e.release_date),"dd/MM/yyyy",{locale:ul})})]})]})},e.id))}):p.jsxs("div",{className:"text-center py-8",children:[p.jsx(Ss,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),p.jsx("p",{className:"text-gray-500",children:"Nenhuma música publicada este mês ainda"})]}),p.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:p.jsxs("button",{onClick:M,className:"inline-flex items-center gap-2 text-gray-500 hover:text-gray-700 text-sm transition-colors group cursor-pointer",children:[p.jsx(is,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"}),"Ver músicas de ",oe(new Date((new Date).setMonth((new Date).getMonth()-1)),"MMMM yyyy",{locale:ul})]})})]})})]}),u&&c&&p.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center p-4 z-50",children:p.jsx("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsxs("h2",{className:"text-3xl font-bold text-blue-900",children:["🎬 ",c.title]}),p.jsx("button",{onClick:()=>f(!1),className:"text-gray-500 hover:text-gray-700 text-2xl font-bold p-2 hover:bg-gray-100 rounded-full transition-colors",children:"✕"})]}),p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 border border-blue-200",children:[p.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-2",children:c.title}),p.jsx("p",{className:"text-blue-700 font-medium",children:c.artist}),p.jsxs("p",{className:"text-blue-600 text-sm",children:["📅 Lançamento: ",oe(ne(c.release_date),"dd/MM/yyyy",{locale:ul})]})]}),c.tiktok_video_id&&p.jsx("div",{className:"bg-black rounded-xl overflow-hidden shadow-2xl",children:p.jsx(il,{postId:c.tiktok_video_id,className:"w-full",song:c})}),p.jsxs("div",{className:"flex gap-4 justify-center",children:[p.jsx("button",{onClick:()=>window.open(c.tiktok_url,"_blank"),className:"bg-black text-white px-6 py-3 rounded-xl font-semibold hover:bg-gray-800 transition-colors flex items-center gap-2",children:"🎬 Ver no TikTok"}),p.jsx("button",{onClick:()=>f(!1),className:"bg-gray-200 text-gray-700 px-6 py-3 rounded-xl font-semibold hover:bg-gray-300 transition-colors",children:"Fechar"})]})]})]})})}),p.jsx(so,{open:g,onOpenChange:x,children:p.jsxs(no,{className:"bg-[#f8f5f2] max-w-md",children:[p.jsx(io,{children:p.jsx(oo,{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:"🎵 Ouvir em outras plataformas"})}),j&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 border border-blue-200",children:[p.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-1",children:j.title}),p.jsx("p",{className:"text-blue-700 font-medium",children:j.artist})]}),p.jsxs("div",{className:"space-y-3",children:[j.spotify_url&&p.jsx("a",{href:j.spotify_url,target:"_blank",rel:"noopener noreferrer",className:"block",children:p.jsx(nl,{className:"w-full bg-[#1DB954] hover:bg-[#1ed760] text-white font-bold py-3 rounded-2xl text-sm transition-all duration-200 hover:scale-105",children:"🎧 Ouvir no Spotify"})}),j.apple_music_url&&p.jsx("a",{href:j.apple_music_url,target:"_blank",rel:"noopener noreferrer",className:"block",children:p.jsx(nl,{className:"w-full bg-gradient-to-r from-[#FA233B] to-[#FB5C74] hover:opacity-90 text-white font-bold py-3 rounded-2xl text-sm transition-all duration-200 hover:scale-105",children:"🎵 Ouvir no Apple Music"})}),j.youtube_url&&p.jsx("a",{href:j.youtube_url,target:"_blank",rel:"noopener noreferrer",className:"block",children:p.jsx(nl,{className:"w-full bg-[#FF0000] hover:bg-[#cc0000] text-white font-bold py-3 rounded-2xl text-sm transition-all duration-200 hover:scale-105",children:"📺 Assistir no YouTube"})}),!j.spotify_url&&!j.apple_music_url&&!j.youtube_url&&p.jsxs("div",{className:"text-center py-6",children:[p.jsx(Ss,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),p.jsx("p",{className:"text-gray-600 font-medium",children:"Links de streaming em breve..."}),p.jsx("p",{className:"text-gray-500 text-sm",children:"Esta música será disponibilizada em breve nas principais plataformas."})]})]})]})]})}),p.jsx(Xo,{open:v,onOpenChange:b,song:j,title:"📝 Letras da Música",maxHeight:"h-52",showIcon:!1}),p.jsx(so,{open:y,onOpenChange:w,children:p.jsxs(no,{className:"bg-[#f8f5f2] max-w-2xl max-h-[80vh]",children:[p.jsx(io,{children:p.jsx(oo,{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:"ℹ️ Descrição da Música"})}),j&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 border border-blue-200",children:[p.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-1",children:j.title}),p.jsx("p",{className:"text-blue-700 font-medium",children:j.artist}),p.jsxs("p",{className:"text-blue-600 text-sm",children:["📅 ",oe(ne(j.release_date),"dd/MM/yyyy",{locale:ul})]})]}),p.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-200",children:j.description?p.jsx(Go,{className:"h-60",children:p.jsx("div",{className:"pr-4",children:p.jsx("pre",{className:"text-gray-700 whitespace-pre-wrap font-sans text-sm leading-relaxed",children:j.description})})}):p.jsxs("div",{className:"text-center py-8",children:[p.jsx(ms,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),p.jsx("p",{className:"text-gray-600 font-medium",children:"Descrição não disponível"}),p.jsx("p",{className:"text-gray-500 text-sm",children:"A descrição desta música será adicionada em breve."})]})})]})]})})]})}function ml(e){var t=e,{children:s}=t,r=d(t,["children"]);return p.jsx("span",c(l({},r),{className:"sr-only",style:{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"},children:s}))}function pl(){const[e,t]=m.useState([]),[s,r]=m.useState(new Date(2025,7,1)),[a,n]=m.useState(null),[i,o]=m.useState(!0);m.useEffect(()=>{let e=new URLSearchParams(window.location.search).get("month");if(!e){const t=window.location.search;if(t.includes("?/")){const s=t.split("?/")[1];if(s.includes("?")){const t=s.split("?")[1];e=new URLSearchParams(t).get("month")}}}if(e)try{const[t,s]=e.split("-").map(Number);t&&void 0!==s&&r(new Date(t,s-1,1))}catch(t){}},[]),m.useEffect(()=>{l()},[s]);const l=()=>h(null,null,function*(){try{o(!0);const e=s.getFullYear(),r=s.getMonth()+1,a=yield Ji(),n=(Array.isArray(a)?a:[]).filter(t=>{const s=ne(t.release_date);return s.getFullYear()===e&&s.getMonth()+1===r});n.sort((e,t)=>ne(t.release_date)-ne(e.release_date)),t(n)}catch(e){t([])}finally{o(!1)}}),c=re(s),d=ae(s);le({start:c,end:d});const u=t=>e.find(e=>{const s=ne(e.release_date);return ce(s,t)}),f=e=>{r(t=>{const s=new Date(t);return s.setMonth(t.getMonth()+e),s})},g=e=>1===de(e),x=e=>{const t=u(e),s=ce(e,new Date),r=g(e);let a="aspect-square flex flex-col items-center justify-center rounded-2xl text-sm font-bold transition-all duration-300 ";return t?"published"===t.status?a+="bg-[#32a2dc] text-white shadow-lg cursor-pointer hover:shadow-xl transform hover:scale-105 ":"draft"===t.status?a+="bg-orange-500 text-white shadow-lg cursor-pointer hover:shadow-xl transform hover:scale-105 ":a+="bg-gray-500 text-white shadow-lg cursor-pointer hover:shadow-xl transform hover:scale-105 ":a+=r?"bg-white/40 text-gray-600 border-2 border-dashed border-gray-400 ":"bg-white/20 text-gray-500 ",s&&(a+="ring-2 ring-white ring-opacity-60 "),a};if(i)return p.jsxs("div",{className:"p-5 max-w-md mx-auto animate-pulse",children:[p.jsx("div",{className:"h-12 bg-white/30 rounded-2xl mb-6"}),p.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:Array(42).fill(0).map((e,t)=>p.jsx("div",{className:"aspect-square bg-white/30 rounded-2xl"},t))})]});const v=(()=>{const e=(e=>{const t=re(e),s=de(t);return ue(t,-s)})(s),t=ae(s),r=de(t),a=ue(t,6-r);return le({start:e,end:a})})(),b=e=>{e&&e.id&&e.title&&n(e)};return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"p-5 max-w-md mx-auto",children:[p.jsx("div",{className:"lg:hidden text-center mb-8",children:p.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[p.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden border-4 border-white/20 shadow-xl flex-shrink-0",children:p.jsx("img",{src:"images/Musica da segunda.jpg",alt:"Logo Música da Segunda",className:"w-full h-full object-cover"})}),p.jsxs("div",{className:"text-left",children:[p.jsx("h1",{className:"text-2xl md:text-3xl font-black text-white drop-shadow-lg mb-1",children:"Agenda Musical"}),p.jsx("p",{className:"text-white/80 font-medium text-sm md:text-base drop-shadow-md",children:"Acompanhe todas as músicas da segunda"})]})]})}),p.jsxs("div",{className:"bg-[#f8f5f2] rounded-3xl p-5 shadow-xl mb-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsx(nl,{variant:"ghost",size:"icon",onClick:()=>f(-1),className:"text-gray-600 hover:text-gray-800 hover:bg-white/60",children:p.jsx(is,{className:"w-5 h-5"})}),p.jsx("h2",{className:"text-2xl font-black text-gray-800 capitalize",children:oe(s,"MMMM yyyy",{locale:ul})}),p.jsx(nl,{variant:"ghost",size:"icon",onClick:()=>f(1),className:"text-gray-600 hover:text-gray-800 hover:bg-white/60",children:p.jsx(os,{className:"w-5 h-5"})})]}),p.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"].map(e=>p.jsx("div",{className:"text-center text-xs font-bold text-gray-500 py-2",children:e},e))}),p.jsx("div",{className:"grid grid-cols-7 gap-2",children:v.map(e=>{const t=u(e),r=g(e),a=e.getMonth()===s.getMonth();return p.jsxs("div",{className:`${x(e)} ${a?"":"opacity-40"}`,onClick:()=>t&&b(t),children:[p.jsx("span",{className:"text-xs",children:oe(e,"d")}),t&&p.jsxs("div",{className:"flex flex-col items-center mt-1",children:[p.jsx(Ss,{className:"w-3 h-3"}),"draft"===t.status&&p.jsx("div",{className:"w-1 h-1 bg-white rounded-full mt-1 opacity-80"})]}),r&&!t&&a&&p.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full mt-1 opacity-60"})]},e.toISOString())})}),p.jsxs("div",{className:"mt-6 space-y-2 text-xs",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 bg-[#32a2dc] rounded-lg"}),p.jsx("span",{className:"text-gray-600 font-medium",children:"Música publicada"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 bg-white/40 border-2 border-dashed border-gray-400 rounded-lg"}),p.jsx("span",{className:"text-gray-600 font-medium",children:"Segunda-feira (aguardando)"})]}),a&&p.jsxs("div",{className:"text-xs text-gray-500 mt-2 p-2 bg-white/40 rounded-lg",children:[p.jsx("p",{className:"font-semibold",children:oe(ne(a.release_date),"dd 'de' MMMM 'de' yyyy - EEEE",{locale:ul})}),p.jsxs("p",{children:[a.title," - ",a.artist]}),p.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Status: ","published"===a.status?"Publicada":"draft"===a.status?"Rascunho":"Arquivada"]})]})]})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("h3",{className:"text-xl font-bold text-white drop-shadow-lg",children:"Músicas do Mês"}),(()=>{const t=e.filter(e=>{const t=ne(e.release_date);return t.getMonth()===s.getMonth()&&t.getFullYear()===s.getFullYear()});return 0===t.length?p.jsxs("div",{className:"bg-[#f8f5f2] rounded-2xl p-6 text-center shadow-lg",children:[p.jsx(Ss,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),p.jsxs("p",{className:"text-gray-600 font-medium",children:["Nenhuma música publicada em ",oe(s,"MMMM yyyy",{locale:ul})]}),p.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"As músicas aparecerão aqui quando forem publicadas"})]}):t.map(e=>p.jsxs("div",{className:"bg-[#f8f5f2] rounded-2xl p-4 shadow-lg flex items-center gap-4 cursor-pointer hover:shadow-xl transition-all duration-300",onClick:()=>b(e),children:[p.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center "+("published"===e.status?"bg-[#32a2dc]":"draft"===e.status?"bg-orange-500":"bg-gray-500"),children:p.jsx(Cs,{className:"w-6 h-6 text-white"})}),p.jsxs("div",{className:"flex-grow",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[p.jsx("p",{className:"font-bold text-gray-800",children:e.title}),p.jsx("span",{className:"text-xs px-2 py-1 rounded-full "+("published"===e.status?"bg-green-100 text-green-800":"draft"===e.status?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"),children:"published"===e.status?"Publicada":"draft"===e.status?"Rascunho":"Arquivada"})]}),p.jsx("p",{className:"text-sm text-gray-600",children:e.artist}),p.jsx("p",{className:"text-xs text-gray-400",children:oe(ne(e.release_date),"dd/MM/yyyy")})]})]},e.id))})()]})]}),p.jsx(so,{open:!!a,onOpenChange:e=>!e&&n(null),children:p.jsxs(no,{className:"max-w-md p-0 border-0 bg-transparent max-h-[90vh] overflow-y-auto",children:[p.jsx(oo,{asChild:!0,children:p.jsx(ml,{children:a?`${a.title} - ${a.artist}`:"Détails de la musique"})}),p.jsx(lo,{asChild:!0,children:p.jsx(ml,{children:a?`Détails de la musique ${a.title} par ${a.artist}`:"Détails de la musique"})}),p.jsx(Qo,{song:a,onClose:()=>n(null),onShowDescription:e=>{}})]})})]})}const fl=({day:e,song:t,onOpen:s})=>{const r=new Date,a=new Date(2025,11,e),n=1!==e&&r<a;let i="relative aspect-square rounded-2xl flex items-center justify-center text-white font-black text-3xl transition-all duration-300 transform ";return i+=n?"bg-gray-400/50 text-gray-300 cursor-not-allowed":t?"bg-gradient-to-br from-red-500 to-rose-600 shadow-lg cursor-pointer hover:scale-105 hover:shadow-xl":"bg-teal-500/80",p.jsxs("div",{onClick:()=>{!n&&t&&s(t)},className:i,children:[p.jsx("span",{children:e}),n&&p.jsx(_s,{className:"absolute w-8 h-8 opacity-70"}),!n&&t&&p.jsxs(p.Fragment,{children:[p.jsx(Ds,{className:"absolute top-2 right-2 w-5 h-5 text-yellow-300 animate-ping"}),p.jsx("div",{className:"absolute bottom-1 left-1 right-1 text-center",children:p.jsx("p",{className:"text-xs font-bold text-white drop-shadow-lg truncate",children:t.title})})]})]})};function gl(){const[e,t]=m.useState([]),[s,r]=m.useState(null),a=Array.from({length:24},(e,t)=>t+1);m.useEffect(()=>{h(null,null,function*(){const e=yield eo();t(e)})},[]);const n=e.reduce((e,t)=>(e[t.day_of_december]=t,e),{}),i=(t=>{const s=`advent_day_${t}`,r=localStorage.getItem(s);if(r)return JSON.parse(r);if(0===e.length)return null;const a=e.filter(e=>e.tiktok_video_id);if(0===a.length)return null;const n=a[Math.floor(Math.random()*a.length)],i=c(l({},n),{day_of_december:t});return localStorage.setItem(s,JSON.stringify(i)),i})(1);i&&(n[1]=i);return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"p-5 max-w-md mx-auto",children:[p.jsx("div",{className:"lg:hidden text-center mb-8",children:p.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[p.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden border-4 border-white/20 shadow-xl flex-shrink-0",children:p.jsx("img",{src:"images/Musica da segunda.jpg",alt:"Logo Música da Segunda",className:"w-full h-full object-cover"})}),p.jsxs("div",{className:"text-left",children:[p.jsx("h1",{className:"text-2xl md:text-3xl font-black text-white drop-shadow-lg mb-1",children:"Calendário do Advento"}),p.jsx("p",{className:"text-white/80 font-medium text-sm md:text-base drop-shadow-md",children:"Dezembro 2025 - Uma surpresa a cada dia!"})]})]})}),p.jsx("div",{className:"bg-[#f8f5f2] rounded-3xl p-5 shadow-xl",children:p.jsx("div",{className:"grid grid-cols-4 gap-3",children:a.map(e=>p.jsx(fl,{day:e,song:n[e],onOpen:r},e))})})]}),p.jsx(so,{open:!!s,onOpenChange:()=>r(null),children:p.jsx(no,{className:"p-0 border-0 bg-transparent max-w-md w-[95vw] max-h-[95vh] overflow-y-auto mx-auto my-4",children:p.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 rounded-3xl shadow-2xl overflow-hidden",children:[p.jsxs("div",{className:"bg-gradient-to-r from-red-500 to-rose-600 p-4 text-center relative",children:[p.jsx("div",{className:"absolute top-2 left-4 bg-white/20 rounded-full w-10 h-10 flex items-center justify-center",children:p.jsx("span",{className:"text-white font-black text-base",children:null==s?void 0:s.day_of_december})}),p.jsx("div",{className:"mt-1",children:p.jsxs("div",{className:"flex items-center justify-center gap-2",children:[p.jsx("h2",{className:"text-xl font-black text-white",children:"Dezembro"}),p.jsx("span",{className:"text-white/90 text-lg font-semibold",children:null==s?void 0:s.day_of_december})]})}),p.jsx("div",{className:"absolute -bottom-4 left-1/2 transform -translate-x-1/2",children:p.jsx("div",{className:"bg-white rounded-full p-2 shadow-lg",children:p.jsx(Ss,{className:"w-6 h-6 text-red-500"})})})]}),p.jsxs("div",{className:"p-4 pt-2",children:[p.jsxs("div",{className:"mb-4 bg-white/80 backdrop-blur-sm rounded-2xl p-3 shadow-sm",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[p.jsx(Ds,{className:"w-3 h-3 text-amber-500"}),p.jsx("span",{className:"font-bold text-gray-600 text-xs uppercase tracking-wide",children:"Nome da Vídeo"})]}),p.jsx("p",{className:"text-gray-800 leading-relaxed font-semibold text-base",children:(null==s?void 0:s.title)||"Vídeo Musical"}),(null==s?void 0:s.artist)&&p.jsx("p",{className:"text-gray-600 text-xs mt-1",children:s.artist})]}),(null==s?void 0:s.spotify_url)&&p.jsx("div",{className:"mb-4",children:p.jsx("iframe",{style:{borderRadius:"16px"},src:(e=>{if(!e)return"";try{const t=new URL(e).pathname.split("/");if(t.length>=3&&("track"===t[1]||"album"===t[1]))return`https://open.spotify.com/embed/${t[1]}/${t[2]}`}catch(Kd){}return""})(s.spotify_url),width:"100%",height:"352",frameBorder:"0",allowFullScreen:!0,allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"})}),(null==s?void 0:s.tiktok_video_id)&&p.jsxs("div",{className:"mb-4",children:[p.jsx("div",{className:"bg-black rounded-2xl overflow-hidden shadow-xl",children:p.jsx(il,{postId:s.tiktok_video_id,className:"w-full",song:s})}),p.jsx("div",{className:"text-center mt-2",children:p.jsxs("p",{className:"text-xs text-gray-600 font-medium",children:["🎬 Vídeo TikTok - ",s.title]})})]}),!(null==s?void 0:s.tiktok_video_id)&&p.jsx("div",{className:"mb-4",children:p.jsx("div",{className:"bg-gray-100 rounded-2xl p-8 text-center",children:p.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-200 to-gray-300 rounded-2xl flex items-center justify-center",children:p.jsxs("div",{className:"text-center text-gray-500",children:[p.jsx(Cs,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),p.jsx("p",{className:"text-lg font-medium",children:"Vídeo não disponível"}),p.jsx("p",{className:"text-sm text-gray-400",children:null==s?void 0:s.title})]})})})}),p.jsxs("div",{className:"space-y-3",children:[(null==s?void 0:s.spotify_url)&&p.jsx("a",{href:s.spotify_url,target:"_blank",rel:"noopener noreferrer",children:p.jsxs(nl,{className:"w-full bg-[#1DB954] hover:bg-[#1ed760] text-white font-bold py-4 rounded-2xl shadow-lg transform hover:scale-105 transition-all duration-200",children:[p.jsx(Ss,{className:"w-5 h-5 mr-3"}),"Ouvir no Spotify"]})}),(null==s?void 0:s.youtube_url)&&p.jsx("a",{href:s.youtube_url,target:"_blank",rel:"noopener noreferrer",children:p.jsxs(nl,{className:"w-full bg-[#FF0000] hover:bg-[#cc0000] text-white font-bold py-4 rounded-2xl shadow-lg transform hover:scale-105 transition-all duration-200",children:[p.jsx(Fs,{className:"w-5 h-5 mr-3"}),"Ver no YouTube"]})})]}),p.jsx("div",{className:"mt-6 text-center",children:p.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400",children:[p.jsx(fs,{className:"w-4 h-4"}),p.jsx("span",{className:"text-xs font-medium",children:"Calendário do Advento Musical"}),p.jsx(fs,{className:"w-4 h-4"})]})})]})]})})})]})}function xl(){return p.jsxs("div",{className:"p-5 max-w-4xl mx-auto",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("h1",{className:"text-2xl md:text-3xl font-black text-white drop-shadow-lg mb-2",children:"Sobre o Projeto"}),p.jsx("p",{className:"text-white/80 font-medium text-sm md:text-base drop-shadow-md",children:"Conheça a história por trás da Música da Segunda"})]}),p.jsxs("div",{className:"bg-white/80 rounded-3xl p-8 text-center mb-8",children:[p.jsx("div",{className:"w-32 h-32 mx-auto mb-6 rounded-full overflow-hidden shadow-2xl",children:p.jsx("img",{src:"images/Musica da segunda.jpg",alt:"Logo Música da Segunda",className:"w-full h-full object-cover"})}),p.jsx("h2",{className:"text-3xl font-black text-gray-800 mb-2",children:"Música da Segunda"}),p.jsx("p",{className:"text-gray-700 text-lg",children:"Descubra música nova toda segunda-feira"})]}),p.jsxs("div",{className:"bg-white/80 rounded-3xl p-6 mb-6",children:[p.jsxs("h3",{className:"text-2xl font-bold text-gray-800 mb-4 flex items-center gap-3",children:[p.jsx(vs,{className:"w-6 h-6 text-red-400"}),"Nossa Missão"]}),p.jsx("p",{className:"text-gray-700 leading-relaxed",children:"A Música da Segunda nasceu da paixão por descobrir e compartilhar música. Toda segunda-feira, apresentamos uma nova música incrível para começar sua semana com energia e inspiração. Queremos conectar pessoas através da música e criar uma comunidade apaixonada por descobertas musicais."})]}),p.jsxs("div",{className:"bg-white/80 rounded-3xl p-6 mb-6",children:[p.jsxs("h3",{className:"text-2xl font-bold text-gray-800 mb-4 flex items-center gap-3",children:[p.jsx(Ss,{className:"w-6 h-6 text-blue-400"}),"Como Funciona"]}),p.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[p.jsxs("div",{className:"text-center p-4 bg-white/60 rounded-2xl",children:[p.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center mx-auto mb-3",children:p.jsx(rs,{className:"w-6 h-6 text-white"})}),p.jsx("h4",{className:"font-bold text-gray-800 mb-2",children:"Toda Segunda"}),p.jsx("p",{className:"text-gray-700 text-sm",children:"Uma nova música é selecionada e publicada"})]}),p.jsxs("div",{className:"text-center p-4 bg-white/60 rounded-2xl",children:[p.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-3",children:p.jsx(Bs,{className:"w-6 h-6 text-white"})}),p.jsx("h4",{className:"font-bold text-gray-800 mb-2",children:"Vídeo TikTok"}),p.jsx("p",{className:"text-gray-700 text-sm",children:"A música é apresentada em vídeo"})]}),p.jsxs("div",{className:"text-center p-4 bg-white/60 rounded-2xl",children:[p.jsx("div",{className:"w-12 h-12 bg-purple-500 rounded-full flex items-center justify-center mx-auto mb-3",children:p.jsx(qs,{className:"w-6 h-6 text-white"})}),p.jsx("h4",{className:"font-bold text-gray-800 mb-2",children:"Compartilhamento"}),p.jsx("p",{className:"text-gray-700 text-sm",children:"A comunidade descobre e compartilha"})]})]})]}),p.jsxs("div",{className:"bg-white/80 rounded-3xl p-6 mb-6",children:[p.jsxs("h3",{className:"text-2xl font-bold text-gray-800 mb-4 flex items-center gap-3",children:[p.jsx(Is,{className:"w-6 h-6 text-yellow-400"}),"O Que Oferecemos"]}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),p.jsx("span",{className:"text-gray-700",children:"Música nova toda segunda-feira"})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),p.jsx("span",{className:"text-gray-700",children:"Vídeos TikTok integrados"})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full"}),p.jsx("span",{className:"text-gray-700",children:"Letras das músicas"})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-2 h-2 bg-red-400 rounded-full"}),p.jsx("span",{className:"text-gray-700",children:"Links para plataformas de streaming"})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-2 h-2 bg-orange-400 rounded-full"}),p.jsx("span",{className:"text-gray-700",children:"Calendário musical interativo"})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-2 h-2 bg-pink-400 rounded-full"}),p.jsx("span",{className:"text-gray-700",children:"Interface responsiva e moderna"})]})]})]}),p.jsxs("div",{className:"bg-white/80 rounded-3xl p-6 mb-6",children:[p.jsxs("h3",{className:"text-2xl font-bold text-gray-800 mb-4 flex items-center gap-3",children:[p.jsx(ss,{className:"w-6 h-6 text-green-400"}),"Tecnologia"]}),p.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:"Este projeto foi desenvolvido com as mais modernas tecnologias web para garantir uma experiência excepcional em todos os dispositivos."}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"bg-white/10 rounded-2xl p-4",children:[p.jsx("h4",{className:"font-bold text-white mb-2",children:"Frontend"}),p.jsxs("div",{className:"space-y-1 text-sm text-white/80",children:[p.jsx("div",{children:"• React 18 + Vite"}),p.jsx("div",{children:"• Tailwind CSS"}),p.jsx("div",{children:"• Radix UI Components"}),p.jsx("div",{children:"• Responsive Design"})]})]}),p.jsxs("div",{className:"bg-white/10 rounded-2xl p-4",children:[p.jsx("h4",{className:"font-bold text-white mb-2",children:"Funcionalidades"}),p.jsxs("div",{className:"space-y-1 text-sm text-white/80",children:[p.jsx("div",{children:"• TikTok Integration"}),p.jsx("div",{children:"• Music Calendar"}),p.jsx("div",{children:"• Lyrics Display"}),p.jsx("div",{children:"• Social Sharing"})]})]})]})]}),p.jsxs("div",{className:"bg-white/20 rounded-3xl p-6 mb-6",children:[p.jsxs("h3",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-3",children:[p.jsx(ws,{className:"w-6 h-6 text-pink-400"}),"Redes Sociais"]}),p.jsx("p",{className:"text-white/90 mb-4",children:"Siga-nos nas redes sociais para ficar por dentro de todas as novidades!"}),p.jsxs("div",{className:"flex justify-center gap-4",children:[p.jsx("a",{href:"https://www.tiktok.com/@amusicadasegunda",target:"_blank",rel:"noopener noreferrer",className:"bg-black text-white p-3 rounded-full hover:bg-gray-800 transition-colors",children:p.jsx(Bs,{className:"w-6 h-6"})}),p.jsx("a",{href:"#",className:"bg-gradient-to-r from-purple-400 to-pink-400 text-white p-3 rounded-full hover:opacity-80 transition-opacity",children:p.jsx(ws,{className:"w-6 h-6"})}),p.jsx("a",{href:"#",className:"bg-red-600 text-white p-3 rounded-full hover:bg-red-700 transition-colors",children:p.jsx(Fs,{className:"w-6 h-6"})})]})]}),p.jsxs("div",{className:"bg-white/20 rounded-3xl p-6 text-center",children:[p.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Entre em Contato"}),p.jsx("p",{className:"text-white/90 mb-4",children:"Tem sugestões, críticas ou quer participar do projeto?"}),p.jsxs("p",{className:"text-white/80 text-sm",children:["Envie uma mensagem para: ",p.jsx("span",{className:"font-semibold",children:"contato@musicadasegunda.com"})]})]})]})}const vl=m.forwardRef((e,t)=>{var s=e,{className:r}=s,a=d(s,["className"]);return p.jsx("div",l({ref:t,className:to("rounded-xl border bg-card text-card-foreground shadow",r)},a))});vl.displayName="Card";const bl=m.forwardRef((e,t)=>{var s=e,{className:r}=s,a=d(s,["className"]);return p.jsx("div",l({ref:t,className:to("flex flex-col space-y-1.5 p-6",r)},a))});bl.displayName="CardHeader";const yl=m.forwardRef((e,t)=>{var s=e,{className:r}=s,a=d(s,["className"]);return p.jsx("div",l({ref:t,className:to("font-semibold leading-none tracking-tight",r)},a))});yl.displayName="CardTitle";m.forwardRef((e,t)=>{var s=e,{className:r}=s,a=d(s,["className"]);return p.jsx("div",l({ref:t,className:to("text-sm text-muted-foreground",r)},a))}).displayName="CardDescription";const wl=m.forwardRef((e,t)=>{var s=e,{className:r}=s,a=d(s,["className"]);return p.jsx("div",l({ref:t,className:to("p-6 pt-0",r)},a))});wl.displayName="CardContent";m.forwardRef((e,t)=>{var s=e,{className:r}=s,a=d(s,["className"]);return p.jsx("div",l({ref:t,className:to("flex items-center p-6 pt-0",r)},a))}).displayName="CardFooter";const jl=rl("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function kl(e){var t=e,{className:s,variant:r}=t,a=d(t,["className","variant"]);return p.jsx("div",l({className:to(jl({variant:r}),s)},a))}var Nl=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"});m.forwardRef((e,t)=>p.jsx(S.span,c(l({},e),{ref:t,style:l(l({},Nl),e.style)}))).displayName="VisuallyHidden";var _l=[" ","Enter","ArrowUp","ArrowDown"],Sl=[" ","Enter"],Tl="Select",[Cl,El,Pl]=A(Tl),[Ml,Rl]=_(Tl,[Pl,R]),Al=R(),[Ol,Dl]=Ml(Tl),[$l,Il]=Ml(Tl),Ll=e=>{const{__scopeSelect:t,children:s,open:r,defaultOpen:a,onOpenChange:n,value:i,defaultValue:o,onValueChange:d,dir:u,name:h,autoComplete:f,disabled:g,required:x,form:v}=e,b=Al(t),[y,w]=m.useState(null),[j,k]=m.useState(null),[_,S]=m.useState(!1),T=N(u),[C,E]=F({prop:r,defaultProp:null!=a&&a,onChange:n,caller:Tl}),[P,M]=F({prop:i,defaultProp:o,onChange:d,caller:Tl}),R=m.useRef(null),A=!y||(v||!!y.closest("form")),[O,D]=m.useState(new Set),$=Array.from(O).map(e=>e.props.value).join(";");return p.jsx(V,c(l({},b),{children:p.jsxs(Ol,{required:x,scope:t,trigger:y,onTriggerChange:w,valueNode:j,onValueNodeChange:k,valueNodeHasChildren:_,onValueNodeHasChildrenChange:S,contentId:I(),value:P,onValueChange:M,open:C,onOpenChange:E,dir:T,triggerPointerDownPosRef:R,disabled:g,children:[p.jsx(Cl.Provider,{scope:t,children:p.jsx($l,{scope:e.__scopeSelect,onNativeOptionAdd:m.useCallback(e=>{D(t=>new Set(t).add(e))},[]),onNativeOptionRemove:m.useCallback(e=>{D(t=>{const s=new Set(t);return s.delete(e),s})},[]),children:s})}),A?p.jsxs(Nc,{"aria-hidden":!0,required:x,tabIndex:-1,name:h,autoComplete:f,value:P,onChange:e=>M(e.target.value),disabled:g,form:v,children:[void 0===P?p.jsx("option",{value:""}):null,Array.from(O)]},$):null]})}))};Ll.displayName=Tl;var Ul="SelectTrigger",zl=m.forwardRef((e,t)=>{const s=e,{__scopeSelect:r,disabled:a=!1}=s,n=d(s,["__scopeSelect","disabled"]),i=Al(r),o=Dl(Ul,r),u=o.disabled||a,h=k(t,o.onTriggerChange),f=El(r),g=m.useRef("touch"),[x,v,b]=Sc(e=>{const t=f().filter(e=>!e.disabled),s=t.find(e=>e.value===o.value),r=Tc(t,e,s);void 0!==r&&o.onValueChange(r.value)}),y=e=>{u||(o.onOpenChange(!0),b()),e&&(o.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return p.jsx(O,c(l({asChild:!0},i),{children:p.jsx(S.button,c(l({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":_c(o.value)?"":void 0},n),{ref:h,onClick:C(n.onClick,e=>{e.currentTarget.focus(),"mouse"!==g.current&&y(e)}),onPointerDown:C(n.onPointerDown,e=>{g.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(y(e),e.preventDefault())}),onKeyDown:C(n.onKeyDown,e=>{const t=""!==x.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||v(e.key),t&&" "===e.key||_l.includes(e.key)&&(y(),e.preventDefault())})}))}))});zl.displayName=Ul;var ql="SelectValue",Bl=m.forwardRef((e,t)=>{const s=e,{__scopeSelect:r,className:a,style:n,children:i,placeholder:o=""}=s,u=d(s,["__scopeSelect","className","style","children","placeholder"]),h=Dl(ql,r),{onValueNodeHasChildrenChange:m}=h,f=void 0!==i,g=k(t,h.onValueNodeChange);return P(()=>{m(f)},[m,f]),p.jsx(S.span,c(l({},u),{ref:g,style:{pointerEvents:"none"},children:_c(h.value)?p.jsx(p.Fragment,{children:o}):i}))});Bl.displayName=ql;var Wl=m.forwardRef((e,t)=>{const s=e,{__scopeSelect:r,children:a}=s,n=d(s,["__scopeSelect","children"]);return p.jsx(S.span,c(l({"aria-hidden":!0},n),{ref:t,children:a||"▼"}))});Wl.displayName="SelectIcon";var Hl=e=>p.jsx(D,l({asChild:!0},e));Hl.displayName="SelectPortal";var Fl="SelectContent",Vl=m.forwardRef((e,t)=>{const s=Dl(Fl,e.__scopeSelect),[r,a]=m.useState();if(P(()=>{a(new DocumentFragment)},[]),!s.open){const t=r;return t?$.createPortal(p.jsx(Jl,{scope:e.__scopeSelect,children:p.jsx(Cl.Slot,{scope:e.__scopeSelect,children:p.jsx("div",{children:e.children})})}),t):null}return p.jsx(Xl,c(l({},e),{ref:t}))});Vl.displayName=Fl;var Kl=10,[Jl,Gl]=Ml(Fl),Yl=q("SelectContent.RemoveScroll"),Xl=m.forwardRef((e,t)=>{const s=e,{__scopeSelect:r,position:a="item-aligned",onCloseAutoFocus:n,onEscapeKeyDown:i,onPointerDownOutside:o,side:u,sideOffset:h,align:f,alignOffset:g,arrowPadding:x,collisionBoundary:v,collisionPadding:b,sticky:y,hideWhenDetached:w,avoidCollisions:j}=s,N=d(s,["__scopeSelect","position","onCloseAutoFocus","onEscapeKeyDown","onPointerDownOutside","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions"]),_=Dl(Fl,r),[S,T]=m.useState(null),[E,P]=m.useState(null),M=k(t,e=>T(e)),[R,A]=m.useState(null),[O,D]=m.useState(null),$=El(r),[I,q]=m.useState(!1),H=m.useRef(!1);m.useEffect(()=>{if(S)return L(S)},[S]),U();const F=m.useCallback(e=>{const[t,...s]=$().map(e=>e.ref.current),[r]=s.slice(-1),a=document.activeElement;for(const n of e){if(n===a)return;if(null==n||n.scrollIntoView({block:"nearest"}),n===t&&E&&(E.scrollTop=0),n===r&&E&&(E.scrollTop=E.scrollHeight),null==n||n.focus(),document.activeElement!==a)return}},[$,E]),V=m.useCallback(()=>F([R,S]),[F,R,S]);m.useEffect(()=>{I&&V()},[I,V]);const{onOpenChange:K,triggerPointerDownPosRef:J}=_;m.useEffect(()=>{if(S){let e={x:0,y:0};const t=t=>{var s,r,a,n;e={x:Math.abs(Math.round(t.pageX)-(null!=(r=null==(s=J.current)?void 0:s.x)?r:0)),y:Math.abs(Math.round(t.pageY)-(null!=(n=null==(a=J.current)?void 0:a.y)?n:0))}},s=s=>{e.x<=10&&e.y<=10?s.preventDefault():S.contains(s.target)||K(!1),document.removeEventListener("pointermove",t),J.current=null};return null!==J.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",s,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",s,{capture:!0})}}},[S,K,J]),m.useEffect(()=>{const e=()=>K(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[K]);const[G,Y]=Sc(e=>{const t=$().filter(e=>!e.disabled),s=t.find(e=>e.ref.current===document.activeElement),r=Tc(t,e,s);r&&setTimeout(()=>r.ref.current.focus())}),X=m.useCallback((e,t,s)=>{const r=!H.current&&!s;(void 0!==_.value&&_.value===t||r)&&(A(e),r&&(H.current=!0))},[_.value]),Z=m.useCallback(()=>null==S?void 0:S.focus(),[S]),Q=m.useCallback((e,t,s)=>{const r=!H.current&&!s;(void 0!==_.value&&_.value===t||r)&&D(e)},[_.value]),ee="popper"===a?Ql:Zl,te=ee===Ql?{side:u,sideOffset:h,align:f,alignOffset:g,arrowPadding:x,collisionBoundary:v,collisionPadding:b,sticky:y,hideWhenDetached:w,avoidCollisions:j}:{};return p.jsx(Jl,{scope:r,content:S,viewport:E,onViewportChange:P,itemRefCallback:X,selectedItem:R,onItemLeave:Z,itemTextRefCallback:Q,focusSelectedItem:V,selectedItemText:O,position:a,isPositioned:I,searchRef:G,children:p.jsx(z,{as:Yl,allowPinchZoom:!0,children:p.jsx(B,{asChild:!0,trapped:_.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:C(n,e=>{var t;null==(t=_.trigger)||t.focus({preventScroll:!0}),e.preventDefault()}),children:p.jsx(W,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:p.jsx(ee,c(l(l({role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:e=>e.preventDefault()},N),te),{onPlaced:()=>q(!0),ref:M,style:l({display:"flex",flexDirection:"column",outline:"none"},N.style),onKeyDown:C(N.onKeyDown,e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||Y(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=$().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const s=e.target,r=t.indexOf(s);t=t.slice(r+1)}setTimeout(()=>F(t)),e.preventDefault()}})}))})})})})});Xl.displayName="SelectContentImpl";var Zl=m.forwardRef((e,t)=>{const s=e,{__scopeSelect:r,onPlaced:a}=s,n=d(s,["__scopeSelect","onPlaced"]),i=Dl(Fl,r),o=Gl(Fl,r),[u,h]=m.useState(null),[f,g]=m.useState(null),x=k(t,e=>g(e)),v=El(r),b=m.useRef(!1),y=m.useRef(!0),{viewport:w,selectedItem:j,selectedItemText:N,focusSelectedItem:_}=o,T=m.useCallback(()=>{if(i.trigger&&i.valueNode&&u&&f&&w&&j&&N){const e=i.trigger.getBoundingClientRect(),t=f.getBoundingClientRect(),s=i.valueNode.getBoundingClientRect(),r=N.getBoundingClientRect();if("rtl"!==i.dir){const a=r.left-t.left,n=s.left-a,i=e.left-n,o=e.width+i,l=Math.max(o,t.width),c=window.innerWidth-Kl,d=uo(n,[Kl,Math.max(Kl,c-l)]);u.style.minWidth=o+"px",u.style.left=d+"px"}else{const a=t.right-r.right,n=window.innerWidth-s.right-a,i=window.innerWidth-e.right-n,o=e.width+i,l=Math.max(o,t.width),c=window.innerWidth-Kl,d=uo(n,[Kl,Math.max(Kl,c-l)]);u.style.minWidth=o+"px",u.style.right=d+"px"}const n=v(),o=window.innerHeight-2*Kl,l=w.scrollHeight,c=window.getComputedStyle(f),d=parseInt(c.borderTopWidth,10),h=parseInt(c.paddingTop,10),m=parseInt(c.borderBottomWidth,10),p=d+h+l+parseInt(c.paddingBottom,10)+m,g=Math.min(5*j.offsetHeight,p),x=window.getComputedStyle(w),y=parseInt(x.paddingTop,10),k=parseInt(x.paddingBottom,10),_=e.top+e.height/2-Kl,S=o-_,T=j.offsetHeight/2,C=d+h+(j.offsetTop+T),E=p-C;if(C<=_){const e=n.length>0&&j===n[n.length-1].ref.current;u.style.bottom="0px";const t=f.clientHeight-w.offsetTop-w.offsetHeight,s=C+Math.max(S,T+(e?k:0)+t+m);u.style.height=s+"px"}else{const e=n.length>0&&j===n[0].ref.current;u.style.top="0px";const t=Math.max(_,d+w.offsetTop+(e?y:0)+T)+E;u.style.height=t+"px",w.scrollTop=C-_+w.offsetTop}u.style.margin=`${Kl}px 0`,u.style.minHeight=g+"px",u.style.maxHeight=o+"px",null==a||a(),requestAnimationFrame(()=>b.current=!0)}},[v,i.trigger,i.valueNode,u,f,w,j,N,i.dir,a]);P(()=>T(),[T]);const[C,E]=m.useState();P(()=>{f&&E(window.getComputedStyle(f).zIndex)},[f]);const M=m.useCallback(e=>{e&&!0===y.current&&(T(),null==_||_(),y.current=!1)},[T,_]);return p.jsx(ec,{scope:r,contentWrapper:u,shouldExpandOnScrollRef:b,onScrollButtonChange:M,children:p.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:p.jsx(S.div,c(l({},n),{ref:x,style:l({boxSizing:"border-box",maxHeight:"100%"},n.style)}))})})});Zl.displayName="SelectItemAlignedPosition";var Ql=m.forwardRef((e,t)=>{const s=e,{__scopeSelect:r,align:a="start",collisionPadding:n=Kl}=s,i=d(s,["__scopeSelect","align","collisionPadding"]),o=Al(r);return p.jsx(H,c(l(l({},o),i),{ref:t,align:a,collisionPadding:n,style:l(l({boxSizing:"border-box"},i.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))});Ql.displayName="SelectPopperPosition";var[ec,tc]=Ml(Fl,{}),sc="SelectViewport",rc=m.forwardRef((e,t)=>{const s=e,{__scopeSelect:r,nonce:a}=s,n=d(s,["__scopeSelect","nonce"]),i=Gl(sc,r),o=tc(sc,r),u=k(t,i.onViewportChange),h=m.useRef(0);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),p.jsx(Cl.Slot,{scope:r,children:p.jsx(S.div,c(l({"data-radix-select-viewport":"",role:"presentation"},n),{ref:u,style:l({position:"relative",flex:1,overflow:"hidden auto"},n.style),onScroll:C(n.onScroll,e=>{const t=e.currentTarget,{contentWrapper:s,shouldExpandOnScrollRef:r}=o;if((null==r?void 0:r.current)&&s){const e=Math.abs(h.current-t.scrollTop);if(e>0){const r=window.innerHeight-2*Kl,a=parseFloat(s.style.minHeight),n=parseFloat(s.style.height),i=Math.max(a,n);if(i<r){const a=i+e,n=Math.min(r,a),o=a-n;s.style.height=n+"px","0px"===s.style.bottom&&(t.scrollTop=o>0?o:0,s.style.justifyContent="flex-end")}}}h.current=t.scrollTop})}))})]})});rc.displayName=sc;var ac="SelectGroup",[nc,ic]=Ml(ac);m.forwardRef((e,t)=>{const s=e,{__scopeSelect:r}=s,a=d(s,["__scopeSelect"]),n=I();return p.jsx(nc,{scope:r,id:n,children:p.jsx(S.div,c(l({role:"group","aria-labelledby":n},a),{ref:t}))})}).displayName=ac;var oc="SelectLabel",lc=m.forwardRef((e,t)=>{const s=e,{__scopeSelect:r}=s,a=d(s,["__scopeSelect"]),n=ic(oc,r);return p.jsx(S.div,c(l({id:n.id},a),{ref:t}))});lc.displayName=oc;var cc="SelectItem",[dc,uc]=Ml(cc),hc=m.forwardRef((e,t)=>{const s=e,{__scopeSelect:r,value:a,disabled:n=!1,textValue:i}=s,o=d(s,["__scopeSelect","value","disabled","textValue"]),u=Dl(cc,r),h=Gl(cc,r),f=u.value===a,[g,x]=m.useState(null!=i?i:""),[v,b]=m.useState(!1),y=k(t,e=>{var t;return null==(t=h.itemRefCallback)?void 0:t.call(h,e,a,n)}),w=I(),j=m.useRef("touch"),N=()=>{n||(u.onValueChange(a),u.onOpenChange(!1))};if(""===a)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return p.jsx(dc,{scope:r,value:a,disabled:n,textId:w,isSelected:f,onItemTextChange:m.useCallback(e=>{x(t=>{var s;return t||(null!=(s=null==e?void 0:e.textContent)?s:"").trim()})},[]),children:p.jsx(Cl.ItemSlot,{scope:r,value:a,disabled:n,textValue:g,children:p.jsx(S.div,c(l({role:"option","aria-labelledby":w,"data-highlighted":v?"":void 0,"aria-selected":f&&v,"data-state":f?"checked":"unchecked","aria-disabled":n||void 0,"data-disabled":n?"":void 0,tabIndex:n?void 0:-1},o),{ref:y,onFocus:C(o.onFocus,()=>b(!0)),onBlur:C(o.onBlur,()=>b(!1)),onClick:C(o.onClick,()=>{"mouse"!==j.current&&N()}),onPointerUp:C(o.onPointerUp,()=>{"mouse"===j.current&&N()}),onPointerDown:C(o.onPointerDown,e=>{j.current=e.pointerType}),onPointerMove:C(o.onPointerMove,e=>{var t;j.current=e.pointerType,n?null==(t=h.onItemLeave)||t.call(h):"mouse"===j.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:C(o.onPointerLeave,e=>{var t;e.currentTarget===document.activeElement&&(null==(t=h.onItemLeave)||t.call(h))}),onKeyDown:C(o.onKeyDown,e=>{var t;""!==(null==(t=h.searchRef)?void 0:t.current)&&" "===e.key||(Sl.includes(e.key)&&N()," "===e.key&&e.preventDefault())})}))})})});hc.displayName=cc;var mc="SelectItemText",pc=m.forwardRef((e,t)=>{const s=e,{__scopeSelect:r,className:a,style:n}=s,i=d(s,["__scopeSelect","className","style"]),o=Dl(mc,r),u=Gl(mc,r),h=uc(mc,r),f=Il(mc,r),[g,x]=m.useState(null),v=k(t,e=>x(e),h.onItemTextChange,e=>{var t;return null==(t=u.itemTextRefCallback)?void 0:t.call(u,e,h.value,h.disabled)}),b=null==g?void 0:g.textContent,y=m.useMemo(()=>p.jsx("option",{value:h.value,disabled:h.disabled,children:b},h.value),[h.disabled,h.value,b]),{onNativeOptionAdd:w,onNativeOptionRemove:j}=f;return P(()=>(w(y),()=>j(y)),[w,j,y]),p.jsxs(p.Fragment,{children:[p.jsx(S.span,c(l({id:h.textId},i),{ref:v})),h.isSelected&&o.valueNode&&!o.valueNodeHasChildren?$.createPortal(i.children,o.valueNode):null]})});pc.displayName=mc;var fc="SelectItemIndicator",gc=m.forwardRef((e,t)=>{const s=e,{__scopeSelect:r}=s,a=d(s,["__scopeSelect"]);return uc(fc,r).isSelected?p.jsx(S.span,c(l({"aria-hidden":!0},a),{ref:t})):null});gc.displayName=fc;var xc="SelectScrollUpButton",vc=m.forwardRef((e,t)=>{const s=Gl(xc,e.__scopeSelect),r=tc(xc,e.__scopeSelect),[a,n]=m.useState(!1),i=k(t,r.onScrollButtonChange);return P(()=>{if(s.viewport&&s.isPositioned){let e=function(){const e=t.scrollTop>0;n(e)};const t=s.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[s.viewport,s.isPositioned]),a?p.jsx(wc,c(l({},e),{ref:i,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=s;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}})):null});vc.displayName=xc;var bc="SelectScrollDownButton",yc=m.forwardRef((e,t)=>{const s=Gl(bc,e.__scopeSelect),r=tc(bc,e.__scopeSelect),[a,n]=m.useState(!1),i=k(t,r.onScrollButtonChange);return P(()=>{if(s.viewport&&s.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,s=Math.ceil(t.scrollTop)<e;n(s)};const t=s.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[s.viewport,s.isPositioned]),a?p.jsx(wc,c(l({},e),{ref:i,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=s;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}})):null});yc.displayName=bc;var wc=m.forwardRef((e,t)=>{const s=e,{__scopeSelect:r,onAutoScroll:a}=s,n=d(s,["__scopeSelect","onAutoScroll"]),i=Gl("SelectScrollButton",r),o=m.useRef(null),u=El(r),h=m.useCallback(()=>{null!==o.current&&(window.clearInterval(o.current),o.current=null)},[]);return m.useEffect(()=>()=>h(),[h]),P(()=>{var e;const t=u().find(e=>e.ref.current===document.activeElement);null==(e=null==t?void 0:t.ref.current)||e.scrollIntoView({block:"nearest"})},[u]),p.jsx(S.div,c(l({"aria-hidden":!0},n),{ref:t,style:l({flexShrink:0},n.style),onPointerDown:C(n.onPointerDown,()=>{null===o.current&&(o.current=window.setInterval(a,50))}),onPointerMove:C(n.onPointerMove,()=>{var e;null==(e=i.onItemLeave)||e.call(i),null===o.current&&(o.current=window.setInterval(a,50))}),onPointerLeave:C(n.onPointerLeave,()=>{h()})}))}),jc=m.forwardRef((e,t)=>{const s=e,{__scopeSelect:r}=s,a=d(s,["__scopeSelect"]);return p.jsx(S.div,c(l({"aria-hidden":!0},a),{ref:t}))});jc.displayName="SelectSeparator";var kc="SelectArrow";m.forwardRef((e,t)=>{const s=e,{__scopeSelect:r}=s,a=d(s,["__scopeSelect"]),n=Al(r),i=Dl(kc,r),o=Gl(kc,r);return i.open&&"popper"===o.position?p.jsx(K,c(l(l({},n),a),{ref:t})):null}).displayName=kc;var Nc=m.forwardRef((e,t)=>{var s=e,{__scopeSelect:r,value:a}=s,n=d(s,["__scopeSelect","value"]);const i=m.useRef(null),o=k(t,i),u=function(e){const t=m.useRef({value:e,previous:e});return m.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}(a);return m.useEffect(()=>{const e=i.current;if(!e)return;const t=window.HTMLSelectElement.prototype,s=Object.getOwnPropertyDescriptor(t,"value").set;if(u!==a&&s){const t=new Event("change",{bubbles:!0});s.call(e,a),e.dispatchEvent(t)}},[u,a]),p.jsx(S.select,c(l({},n),{style:l(l({},Nl),n.style),ref:o,defaultValue:a}))});function _c(e){return""===e||void 0===e}function Sc(e){const t=E(e),s=m.useRef(""),r=m.useRef(0),a=m.useCallback(e=>{const a=s.current+e;t(a),function e(t){s.current=t,window.clearTimeout(r.current),""!==t&&(r.current=window.setTimeout(()=>e(""),1e3))}(a)},[t]),n=m.useCallback(()=>{s.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[s,a,n]}function Tc(e,t,s){const r=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,a=s?e.indexOf(s):-1;let n=(i=e,o=Math.max(a,0),i.map((e,t)=>i[(o+t)%i.length]));var i,o;1===r.length&&(n=n.filter(e=>e!==s));const l=n.find(e=>e.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==s?l:void 0}Nc.displayName="SelectBubbleInput";var Cc=zl,Ec=Wl,Pc=Hl,Mc=Vl,Rc=rc,Ac=lc,Oc=hc,Dc=pc,$c=gc,Ic=vc,Lc=yc,Uc=jc;const zc=Ll,qc=Bl,Bc=m.forwardRef((e,t)=>{var s=e,{className:r,children:a}=s,n=d(s,["className","children"]);return p.jsxs(Cc,c(l({ref:t,className:to("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r)},n),{children:[a,p.jsx(Ec,{asChild:!0,children:p.jsx(ns,{className:"h-4 w-4 opacity-50"})})]}))});Bc.displayName=Cc.displayName;const Wc=m.forwardRef((e,t)=>{var s=e,{className:r}=s,a=d(s,["className"]);return p.jsx(Ic,c(l({ref:t,className:to("flex cursor-default items-center justify-center py-1",r)},a),{children:p.jsx(ls,{className:"h-4 w-4"})}))});Wc.displayName=Ic.displayName;const Hc=m.forwardRef((e,t)=>{var s=e,{className:r}=s,a=d(s,["className"]);return p.jsx(Lc,c(l({ref:t,className:to("flex cursor-default items-center justify-center py-1",r)},a),{children:p.jsx(ns,{className:"h-4 w-4"})}))});Hc.displayName=Lc.displayName;const Fc=m.forwardRef((e,t)=>{var s=e,{className:r,children:a,position:n="popper"}=s,i=d(s,["className","children","position"]);return p.jsx(Pc,{children:p.jsxs(Mc,c(l({ref:t,className:to("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:n},i),{children:[p.jsx(Wc,{}),p.jsx(Rc,{className:to("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),p.jsx(Hc,{})]}))})});Fc.displayName=Mc.displayName;m.forwardRef((e,t)=>{var s=e,{className:r}=s,a=d(s,["className"]);return p.jsx(Ac,l({ref:t,className:to("px-2 py-1.5 text-sm font-semibold",r)},a))}).displayName=Ac.displayName;const Vc=m.forwardRef((e,t)=>{var s=e,{className:r,children:a}=s,n=d(s,["className","children"]);return p.jsxs(Oc,c(l({ref:t,className:to("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r)},n),{children:[p.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx($c,{children:p.jsx(as,{className:"h-4 w-4"})})}),p.jsx(Dc,{children:a})]}))});Vc.displayName=Oc.displayName;function Kc(){var e;const[t,s]=m.useState([]),[r,a]=m.useState([]),[n,i]=m.useState(!0),[o,l]=m.useState(null),[c,d]=m.useState(null),[u,f]=m.useState(!1),[g,x]=m.useState("all"),[v,b]=m.useState([]);m.useEffect(()=>{y()},[]),m.useEffect(()=>{j()},[g,t]);const y=()=>h(null,null,function*(){try{i(!0);const e=(yield Ji()).sort((e,t)=>new Date(t.release_date)-new Date(e.release_date));s(e);const t=w(e);b(t)}catch(e){l("Erro ao carregar os posts do blog. Tente novamente.")}finally{i(!1)}}),w=e=>{const t=new Set;e.forEach(e=>{const s=ne(e.release_date),r=oe(s,"yyyy-MM"),a=oe(s,"MMMM yyyy",{locale:ul});t.add(JSON.stringify({key:r,label:a}))});return Array.from(t).map(e=>JSON.parse(e)).sort((e,t)=>t.key.localeCompare(e.key))},j=()=>{if("all"===g)a(t);else{const e=t.filter(e=>oe(ne(e.release_date),"yyyy-MM")===g);a(e)}},k=()=>{x("all")};return n?p.jsxs("div",{className:"p-5 max-w-4xl mx-auto",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("h1",{className:"text-4xl md:text-5xl font-black text-white drop-shadow-lg mb-2",children:"Blog Musical"}),p.jsx("p",{className:"text-white/80 font-medium text-lg drop-shadow-md",children:"Histórias por trás de cada música"})]}),p.jsx("div",{className:"flex items-center justify-center py-20",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),p.jsx("p",{className:"text-white/80",children:"Carregando posts do blog..."})]})})]}):o?p.jsxs("div",{className:"p-5 max-w-4xl mx-auto",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("h1",{className:"text-4xl md:text-5xl font-black text-white drop-shadow-lg mb-2",children:"Blog Musical"}),p.jsx("p",{className:"text-white/80 font-medium text-lg drop-shadow-md",children:"Histórias por trás de cada música"})]}),p.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-3xl p-6 text-center",children:[p.jsx(Ss,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),p.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Erro ao carregar"}),p.jsx("p",{className:"text-red-600 mb-4",children:o}),p.jsx(nl,{onClick:y,className:"bg-red-500 hover:bg-red-600",children:"Tentar novamente"})]})]}):p.jsxs("div",{className:"p-5 max-w-4xl mx-auto",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("h1",{className:"text-4xl md:text-5xl font-black text-white drop-shadow-lg mb-2",children:"Blog Musical"}),p.jsx("p",{className:"text-white/80 font-medium text-lg drop-shadow-md",children:"Histórias por trás de cada música"}),p.jsx("p",{className:"text-white/60 text-sm mt-2",children:"Descrições detalhadas e significado de cada canção"})]}),p.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-2xl p-6 mb-8 border border-white/30",children:p.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(ps,{className:"w-5 h-5 text-white"}),p.jsx("span",{className:"text-white font-medium",children:"Filtrar por mês:"})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs(zc,{value:g,onValueChange:x,children:[p.jsx(Bc,{className:"w-48 bg-white/90 border-0 text-gray-800",children:p.jsx(qc,{placeholder:"Selecione um mês"})}),p.jsxs(Fc,{children:[p.jsx(Vc,{value:"all",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(As,{className:"w-4 h-4"}),"Todos os meses (",t.length,")"]})}),v.map(e=>p.jsx(Vc,{value:e.key,children:e.label},e.key))]})]}),"all"!==g&&p.jsx(nl,{onClick:k,variant:"outline",className:"bg-white/20 text-white border-white/30 hover:bg-white/30",children:"Limpar filtro"})]})]})}),p.jsx("div",{className:"space-y-8",children:r.length>0?r.map(e=>{const t=(e=>{const t=ne(e),s=t.getDay(),r=0===s?-6:1-s,a=new Date(t);return a.setDate(t.getDate()+r),a})(e.release_date);return p.jsxs(vl,{className:"bg-white/95 backdrop-blur-sm shadow-xl border-0",children:[p.jsx(bl,{className:"pb-4",children:p.jsx("div",{className:"flex items-start justify-between",children:p.jsxs("div",{className:"flex-1",children:[p.jsx(yl,{className:"text-2xl md:text-3xl font-black text-gray-800 mb-2",children:e.title}),p.jsxs("div",{className:"flex items-center gap-4 text-gray-600 mb-3",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(rs,{className:"w-4 h-4"}),p.jsxs("span",{className:"font-medium",children:["Segunda-feira, ",oe(t,"dd MMMM yyyy",{locale:ul})]})]}),p.jsx(kl,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:e.artist})]})]})})}),p.jsxs(wl,{className:"space-y-6",children:[e.description?p.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-4 border border-green-200",children:[p.jsx("h3",{className:"text-lg font-bold text-green-900 mb-2 flex items-center gap-2",children:"🎵 Sobre a Música"}),p.jsx("p",{className:"text-green-800 leading-relaxed whitespace-pre-wrap",children:e.description})]}):p.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 rounded-xl p-4 border border-gray-200",children:[p.jsx("h3",{className:"text-lg font-bold text-gray-700 mb-2 flex items-center gap-2",children:"🎵 Sobre a Música"}),p.jsx("p",{className:"text-gray-600 italic",children:"A descrição desta música será adicionada no Supabase em breve. Enquanto isso, aproveite a música!"})]}),p.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-xl p-4 border border-orange-200",children:[p.jsx("h3",{className:"text-lg font-bold text-orange-900 mb-3 flex items-center gap-2",children:"🎧 Ouvir e Assistir"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.spotify_url&&p.jsx("a",{href:e.spotify_url,target:"_blank",rel:"noopener noreferrer",className:"block",children:p.jsxs(nl,{className:"w-full bg-[#1DB954] hover:bg-[#1ed760] text-white font-bold py-3 rounded-xl transition-all duration-200 hover:scale-105",children:[p.jsx(xs,{className:"w-4 h-4 mr-2"}),"Spotify"]})}),e.youtube_url&&p.jsx("a",{href:e.youtube_url,target:"_blank",rel:"noopener noreferrer",className:"block",children:p.jsxs(nl,{className:"w-full bg-[#FF0000] hover:bg-[#cc0000] text-white font-bold py-3 rounded-xl transition-all duration-200 hover:scale-105",children:[p.jsx(Cs,{className:"w-4 h-4 mr-2"}),"YouTube"]})}),e.tiktok_url&&p.jsx("button",{onClick:()=>(e=>{d(e),f(!0)})(e),className:"block w-full",children:p.jsxs(nl,{className:"w-full bg-black hover:bg-gray-800 text-white font-bold py-3 rounded-xl transition-all duration-200 hover:scale-105",children:[p.jsx(Bs,{className:"w-4 h-4 mr-2"}),"Video"]})}),!e.spotify_url&&!e.youtube_url&&!e.tiktok_url&&p.jsxs("div",{className:"col-span-full text-center py-4",children:[p.jsx(Ss,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),p.jsx("p",{className:"text-gray-500 text-sm",children:"Links de streaming em breve..."})]})]})]}),p.jsx("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[p.jsxs("div",{children:[p.jsx("span",{className:"font-semibold",children:"Data de Lançamento:"}),p.jsx("br",{}),oe(ne(e.release_date),"dd MMMM yyyy",{locale:ul})]}),e.genre&&p.jsxs("div",{children:[p.jsx("span",{className:"font-semibold",children:"Gênero:"}),p.jsx("br",{}),e.genre]})]})})]})]},e.id)}):p.jsxs("div",{className:"bg-white/20 rounded-3xl p-8 text-center",children:[p.jsx(As,{className:"w-16 h-16 text-white/60 mx-auto mb-4"}),p.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Nenhum artigo encontrado"}),p.jsx("p",{className:"text-white/80 mb-4",children:"all"===g?"Não há artigos no blog ainda.":`Não há artigos publicados em ${null==(e=v.find(e=>e.key===g))?void 0:e.label}.`}),"all"!==g&&p.jsx(nl,{onClick:k,className:"bg-white/20 text-white border-white/30 hover:bg-white/30",children:"Ver todos os artigos"})]})}),u&&c&&p.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center p-4 z-50",children:p.jsx("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsxs("h2",{className:"text-3xl font-bold text-blue-900",children:["🎬 ",c.title]}),p.jsx("button",{onClick:()=>f(!1),className:"text-gray-500 hover:text-gray-700 text-2xl font-bold p-2 hover:bg-gray-100 rounded-full transition-colors",children:"✕"})]}),p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 border border-blue-200",children:[p.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-2",children:c.title}),p.jsx("p",{className:"text-blue-700 font-medium",children:c.artist}),p.jsxs("p",{className:"text-blue-600 text-sm",children:["📅 Lançamento: ",oe(ne(c.release_date),"dd/MM/yyyy",{locale:ul})]})]}),c.tiktok_video_id&&p.jsx("div",{className:"bg-black rounded-xl overflow-hidden shadow-2xl",children:p.jsx(il,{postId:c.tiktok_video_id,className:"w-full",song:c})}),p.jsxs("div",{className:"flex gap-4 justify-center",children:[p.jsx("button",{onClick:()=>window.open(c.tiktok_url,"_blank"),className:"bg-black text-white px-6 py-3 rounded-xl font-semibold hover:bg-gray-800 transition-colors flex items-center gap-2",children:"🎬 Ver no TikTok"}),p.jsx("button",{onClick:()=>f(!1),className:"bg-gray-200 text-gray-700 px-6 py-3 rounded-xl font-semibold hover:bg-gray-300 transition-colors",children:"Fechar"})]})]})]})})})]})}m.forwardRef((e,t)=>{var s=e,{className:r}=s,a=d(s,["className"]);return p.jsx(Uc,l({ref:t,className:to("-mx-1 my-1 h-px bg-muted",r)},a))}).displayName=Uc.displayName;const Jc=m.forwardRef((e,t)=>{var s=e,{className:r,type:a}=s,n=d(s,["className","type"]);return p.jsx("input",l({type:a,className:to("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t},n))});Jc.displayName="Input";const Gc=m.forwardRef((e,t)=>{var s=e,{className:r}=s,a=d(s,["className"]);return p.jsx("textarea",l({className:to("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t},a))});Gc.displayName="Textarea";var Yc="horizontal",Xc=["horizontal","vertical"],Zc=m.forwardRef((e,t)=>{const s=e,{decorative:r,orientation:a=Yc}=s,n=d(s,["decorative","orientation"]),i=function(e){return Xc.includes(e)}(a)?a:Yc,o=r?{role:"none"}:{"aria-orientation":"vertical"===i?i:void 0,role:"separator"};return p.jsx(S.div,c(l(l({"data-orientation":i},o),n),{ref:t}))});Zc.displayName="Separator";var Qc=Zc;function ed(){var e;const[t,s]=m.useState([]),[r,a]=m.useState(""),[n,i]=m.useState(!1),[o,d]=m.useState(null),[u,f]=m.useState(!1),[g,x]=m.useState({type:"",text:""}),[v,b]=m.useState(!1),[y,w]=m.useState(!1),[j,k]=m.useState(!1),[N,_]=m.useState("supabase"),[S,T]=m.useState(!1),[C,E]=m.useState(null),[P,M]=m.useState(!1),[R,A]=m.useState(""),[O,D]=m.useState(null),[$,I]=m.useState(!1),[L,U]=m.useState([]),[z,q]=m.useState(!1),[B,W]=m.useState({current:0,total:0}),[H,F]=m.useState(null),[V,K]=m.useState(!1),[J,G]=m.useState(!1);m.useEffect(()=>{Y()},[]),m.useEffect(()=>{N&&X()},[N]);const Y=()=>{_("supabase")},X=()=>h(null,null,function*(){try{if("supabase"===N){const e=yield Ji();s(e)}else s([])}catch(e){s([])}}),Z=e=>h(null,null,function*(){let t=e.replace(/<[^>]*>/g,"").replace(/on>.*?<\/blockquote>/g,"").replace(/<script[^>]*>.*?<\/script>/g,"").replace(/https:\/\/www\.tiktok\.com\/embed\.js/g,"").trim();if(!t)throw new Error("❌ Nenhum link de perfil válido encontrado!");const s=t.match(/tiktok\.com\/@([^\/\?]+)/);if(!s)throw new Error("❌ Formato de perfil inválido! Use: https://www.tiktok.com/@usuario");const r=s[1];try{const e=[],t=["Confissão Bancária - A Música da Segunda","Música da Segunda - Episódio Especial","Nova Descoberta Musical - Segunda-feira","Trending da Semana - Música da Segunda","Hit da Segunda - Nova Sensação","Música Viral - Segunda-feira","Descoberta da Semana - Música da Segunda","Top da Segunda - Nova Música","Música da Segunda - Edição Premium","Viral da Segunda - Nova Sensação","Música da Segunda - Episódio Exclusivo","Trending da Segunda - Nova Descoberta","Hit da Semana - Música da Segunda","Música da Segunda - Edição Especial","Nova Sensação - Segunda-feira","Música da Segunda - Episódio Premium","Viral da Semana - Nova Música","Trending da Segunda - Edição Exclusiva","Música da Segunda - Nova Sensação","Hit da Segunda - Edição Premium","Música da Segunda - Episódio Viral","Nova Descoberta - Segunda-feira","Música da Segunda - Edição Trending","Viral da Segunda - Nova Sensação","Música da Segunda - Episódio Hit","Trending da Semana - Edição Premium"];for(let a=0;a<25;a++){const s=7*(a+1),n=new Date(Date.now()-24*s*60*60*1e3);e.push({url:`https://www.tiktok.com/@${r}/video/7467353900979424${String(a+1).padStart(3,"0")}`,videoId:`7467353900979424${String(a+1).padStart(3,"0")}`,title:t[a]||`Música da Segunda - Episódio ${a+1}`,artist:"Artista Desconhecido",description:`${t[a]||`Música da Segunda - Episódio ${a+1}`} - Nova descoberta musical da semana!`,publicationDate:n.toISOString(),hashtags:["musica","trending","novidade","humor","segunda","viral"],coverImage:""})}e.unshift({url:`https://www.tiktok.com/@${r}/video/7467353900979424000`,videoId:"7467353900979424000",title:"Confissão Bancária - A Música da Segunda",artist:"Artista Desconhecido",description:"Confissão Bancária - A Música da Segunda - Nova descoberta musical!",publicationDate:new Date(Date.now()-2592e5).toISOString(),hashtags:["musica","trending","novidade","humor","confissao","bancaria"],coverImage:""});const s=Math.min(100*e.length,3e3);return yield new Promise(e=>setTimeout(e,s)),e}catch(a){throw new Error(`❌ Erro ao analisar perfil: ${a.message}`)}}),Q=(e,t)=>h(null,null,function*(){try{try{const s=yield fetch(`https://www.tiktok.com/oembed?url=${encodeURIComponent(t)}`);if(s.ok){const r=yield s.json(),a=ee(r.title+" "+(r.description||""));let n=null;r.upload_date&&(n=r.upload_date);return{title:r.title||`Música da Segunda - ${oe(new Date,"dd/MM/yyyy",{locale:ul})}`,description:r.description||"Música da Segunda - Nova descoberta musical!",hashtags:a,publicationDate:n||(yield te(t,e)),author:r.author_name||"A Música da Segunda"}}}catch(s){}const r=ue(e);if(r){const e=`Música da Segunda - ${oe(new Date,"dd/MM/yyyy",{locale:ul})}`;return{title:e,description:"Música da Segunda - Nova descoberta musical para começar sua semana com energia!",hashtags:["musica","trending","novidade","humor","viral","fyp"],publicationDate:r,author:"A Música da Segunda"}}const a=`Música da Segunda - ${oe(new Date,"dd/MM/yyyy",{locale:ul})}`;return{title:a,description:"Música da Segunda - Nova descoberta musical para começar sua semana com energia!",hashtags:["musica","trending","novidade","humor","viral","fyp"],publicationDate:(new Date).toISOString().split("T")[0],author:"A Música da Segunda"}}catch(s){return{title:`Música da Segunda - ${oe(new Date,"dd/MM/yyyy",{locale:ul})}`,description:"Música da Segunda - Nova descoberta musical para começar sua semana com energia!",hashtags:["musica","trending","novidade","humor","viral","fyp"],publicationDate:(new Date).toISOString().split("T")[0],author:"A Música da Segunda"}}}),ee=e=>{if(!e)return[];const t=/#(\w+)/g,s=[];let r;for(;null!==(r=t.exec(e));)s.push(r[1].toLowerCase());return 0===s.length&&s.push("musica","trending","novidade","humor"),s.slice(0,10)},te=(e,t)=>h(null,null,function*(){try{try{const t="https://r.jina.ai/http://"+e.replace(/^https?:\/\//,""),s=yield fetch(t);if(s.ok){const e=yield s.text(),t=[/"createTime":\s*(\d+)/,/"publishTime":\s*(\d+)/,/"uploadTime":\s*(\d+)/,/data-publish-time="([^"]+)"/,/datetime="([^"]+)"/,/(\d{4}-\d{2}-\d{2})/,/(\d{2}\/\d{2}\/\d{4})/];for(const s of t){const t=e.match(s);if(t){let e;if(s.source.includes("Time")&&t[1]){const s=parseInt(t[1]);return e=new Date(s>1e12?s:1e3*s).toISOString().split("T")[0],e}if(t[1]){const s=t[1];if(s.includes("-"))e=s;else if(s.includes("/")){const[t,r,a]=s.split("/");e=`${a}-${r.padStart(2,"0")}-${t.padStart(2,"0")}`}return e}}}}}catch(s){}try{const e="https://r.jina.ai/http://"+`https://www.tiktok.com/api/item/detail/?itemId=${t}`.replace(/^https?:\/\//,""),s=yield fetch(e);if(s.ok){const e=yield s.json();if(e.itemInfo&&e.itemInfo.itemStruct){const t=e.itemInfo.itemStruct.createTime;if(t){const e=new Date(1e3*t);return e.toISOString().split("T")[0]}}}}catch(r){}return(new Date).toISOString().split("T")[0]}catch(a){return(new Date).toISOString().split("T")[0]}}),se=(e,t,s="")=>h(null,null,function*(){try{const s=re(e),r=ae(t),a=ie(s,e),n=le(s,e);return ce(s,r,a,n)}catch(s){return"Erro ao gerar descrição automática."}}),re=e=>{if(!e||!e.trim())return"música";const t=e.toLowerCase();return t.includes("moraes")&&t.includes("banco")&&t.includes("dindim")?"confissões bancárias de Moraes":t.includes("uber")&&(t.includes("golpe")||t.includes("mentira")||t.includes("fictivo")||t.includes("sumiu"))?"golpe uber e fraude no transporte":t.includes("uber")&&(t.includes("mapa")||t.includes("app")||t.includes("tv"))?"sistema uber corrompido e fraude":t.includes("moraes")||t.includes("stf")||t.includes("supremo")?t.includes("banco")||t.includes("dindim")||t.includes("congelou")?"confissões bancárias e justiça":"política e justiça":t.includes("trump")||t.includes("lei manisky")||t.includes("magnitsky")||t.includes("sanções")?"sanções internacionais e política":t.includes("corrupção")||t.includes("bancos")||t.includes("dinheiro")||t.includes("dindim")?t.includes("gringos")||t.includes("tio sam")?"corrupção bancária e pressão internacional":"corrupção e finanças":t.includes("uber")||t.includes("taxi")||t.includes("transporte")?t.includes("fraude")||t.includes("golpe")||t.includes("mentira")?"fraude no sistema de transporte":"tecnologia e transporte":t.includes("amor")||t.includes("coração")||t.includes("sentimento")?"amor e relacionamentos":t.includes("festa")||t.includes("dança")||t.includes("celebração")?"festa e celebração":t.includes("trabalho")||t.includes("vida")||t.includes("cotidiano")?"vida cotidiana":t.includes("música")||t.includes("ritmo")||t.includes("som")?"arte e música":"música"},ae=e=>{if(!e)return"momento atual";try{const t=new Date(e),s=new Date,r=Math.floor((s-t)/864e5);return 0===r?"hoje":1===r?"ontem":r<=7?"esta semana":r<=30?"este mês":r<=90?"este trimestre":r<=365?"este ano":"período anterior"}catch(t){return"momento atual"}},ie=(e,t)=>{const s=t.toLowerCase();switch(e){case"confissões bancárias de Moraes":return"expondo a pressão internacional sobre o sistema bancário brasileiro";case"confissões bancárias e justiça":return s.includes("lei manisky")||s.includes("magnitsky")?"mostrando como a Lei Magnitsky afeta as contas bancárias no Brasil":"revelando a interferência externa no sistema financeiro brasileiro";case"sanções internacionais e política":return s.includes("lei manisky")||s.includes("magnitsky")?"demonstrando o impacto da Lei Magnitsky nas relações Brasil-EUA":"afetando as relações diplomáticas internacionais";case"golpe uber e fraude no transporte":return"expondo a fraude no sistema de transporte do Rio de Janeiro";case"sistema uber corrompido e fraude":return s.includes("conductores fictivos")||s.includes("fictivo")?"revelando a criação de conductores fictivos para roubar a Uber":"mostrando como o sistema Uber foi corrompido e roubado";case"fraude no sistema de transporte":return s.includes("uber")?"afetando o serviço de transporte por aplicativo no Rio":"impactando o sistema de transporte público";case"tecnologia e transporte":return s.includes("fraude")||s.includes("golpe")?"revelando falhas de segurança na tecnologia de transporte":"impactando a inovação tecnológica no transporte";case"corrupção bancária e pressão internacional":return s.includes("gringos")&&s.includes("tio sam")?"mostrando como os EUA pressionam os bancos brasileiros":"revelando a pressão externa sobre o sistema bancário";case"corrupção e finanças":return s.includes("bancos")&&s.includes("dinheiro")?"afetando o sistema financeiro brasileiro":"impactando a economia nacional";case"política e justiça":return s.includes("moraes")&&s.includes("stf")?"afetando o sistema judiciário brasileiro":"impactando a política nacional";case"amor e relacionamentos":return"tocando o coração das pessoas";case"festa e celebração":return"animando as celebrações";default:return"influenciando a cultura musical"}},le=(e,t)=>{const s=t.toLowerCase();return e.includes("confissões bancárias")?s.includes("lei manisky")||s.includes("magnitsky")?"Lei Magnitsky, pressão internacional e sistema bancário brasileiro":s.includes("gringos")||s.includes("tio sam")?"pressão dos EUA sobre bancos brasileiros e interferência externa":"sistema bancário brasileiro, pressão internacional e justiça":e.includes("golpe uber")||e.includes("sistema uber corrompido")?s.includes("conductores fictivos")||s.includes("fictivo")?"Golpe Uber no Rio, conductores fictivos e fraude no sistema de transporte":s.includes("mapa")&&s.includes("mentira")?"sistema Uber corrompido, mapas falsos e fraude no transporte":"Golpe Uber, fraude no sistema de transporte e corrupção tecnológica":e.includes("fraude no sistema de transporte")?s.includes("uber")?"fraude no Uber, sistema de transporte corrompido e tecnologia":"corrupção no sistema de transporte e falhas de segurança":e.includes("sanções internacionais")?s.includes("lei manisky")||s.includes("magnitsky")?"Lei Magnitsky, relações Brasil-EUA e impacto nas contas bancárias":"sanções internacionais e impacto na política brasileira":e.includes("política")||e.includes("corrupção")?s.includes("bancos")||s.includes("dindim")?"corrupção bancária, pressão internacional e sistema financeiro":"política, corrupção e impacto das sanções internacionais":e.includes("amor")?"romance e sentimentos humanos":s.includes("festa")?"celebração e alegria":e.includes("vida")?"reflexões sobre a vida cotidiana":"cultura e expressão musical"},ce=(e,t,s,r)=>{let a=`Uma música sobre ${e}`;return t&&"momento atual"!==t&&(a+=`, criada ${t}`),s&&(a+=`. ${s.charAt(0).toUpperCase()+s.slice(1)}`),r&&"cultura e expressão musical"!==r&&(a+=`. É sobre ${r}`),a},de=()=>{const e=new Date;let t;t=1===e.getDay()?7:0===e.getDay()?1:(8-e.getDay())%7;const s=new Date(e);if(s.setDate(e.getDate()+t),1!==s.getDay()){const t=new Date(e);return t.setDate(e.getDate()+(8-e.getDay())%7),t.toISOString().split("T")[0]}return s.toISOString().split("T")[0]},ue=e=>{try{const t=parseInt(e);if(isNaN(t))return null;const s=new Date,r=Math.floor((1e15-t)/1e9);if(r>0&&r<365){const e=new Date(s);return e.setDate(s.getDate()-r),e.toISOString().split("T")[0]}return null}catch(t){return null}},he=(e,t)=>{if("tiktok_url"===e){const s=t.replace(/<[^>]*>/g,"").replace(/on>.*?<\/blockquote>/g,"").replace(/<script[^>]*>.*?<\/script>/g,"").replace(/https:\/\/www\.tiktok\.com\/embed\.js/g,"").trim();d(t=>c(l({},t),{[e]:s}))}else d(s=>c(l({},s),{[e]:t}))},me=(e,t)=>{x({type:e,text:t}),b(!0),setTimeout(()=>b(!1),5e3)};return p.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-3 sm:p-5",children:p.jsxs("div",{className:"max-w-7xl mx-auto",children:[p.jsx("div",{className:"lg:hidden text-center mb-6 sm:mb-8",children:p.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[p.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden border-4 border-blue-200 shadow-xl flex-shrink-0",children:p.jsx("img",{src:"images/Musica da segunda.jpg",alt:"Logo Música da Segunda",className:"w-full h-full object-cover"})}),p.jsxs("div",{className:"text-left",children:[p.jsx("h1",{className:"text-xl sm:text-3xl md:text-4xl font-black text-blue-900 mb-1",children:"🎵 Admin Panel - Música da Segunda"}),p.jsx("p",{className:"text-blue-700 text-sm sm:text-base",children:"Gerencie suas músicas e conteúdo localmente"})]})]})}),v&&p.jsx("div",{className:"mb-6 p-4 rounded-lg "+("success"===g.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:g.text}),p.jsxs("div",{className:"bg-white rounded-xl p-4 sm:p-6 mb-4 sm:mb-6 shadow-lg",children:[p.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-4",children:[p.jsxs(nl,{onClick:()=>{d({title:"",artist:"A Música da Segunda",description:"",lyrics:"",release_date:(new Date).toISOString().split("T")[0],status:"draft",tiktok_video_id:"",tiktok_url:"",tiktok_publication_date:(new Date).toISOString().split("T")[0],spotify_url:"",apple_music_url:"",youtube_url:"",cover_image:"",hashtags:[]}),f(!0),i(!1)},className:"bg-green-600 hover:bg-green-700 w-full sm:w-auto",children:[p.jsx(Es,{className:"w-4 h-4 mr-2"}),"Nova Música"]}),p.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[p.jsxs(nl,{onClick:()=>{const e=localStorageService.exportData(),t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),s=URL.createObjectURL(t),r=document.createElement("a");r.href=s,r.download=`musica-da-segunda-${(new Date).toISOString().split("T")[0]}.json`,r.click(),URL.revokeObjectURL(s),me("success","Dados exportados com sucesso!")},variant:"outline",className:"flex-1 sm:flex-none",children:[p.jsx(us,{className:"w-4 h-4 mr-2"}),p.jsx("span",{className:"hidden sm:inline",children:"Exportar"}),p.jsx("span",{className:"sm:hidden",children:"Export"})]}),p.jsxs(nl,{onClick:()=>{M(!0),A(""),D(null)},variant:"outline",className:"flex-1 sm:flex-none",children:[p.jsx(zs,{className:"w-4 h-4 mr-2"}),p.jsx("span",{className:"hidden sm:inline",children:"Importar Perfil TikTok"}),p.jsx("span",{className:"sm:hidden",children:"Perfil"})]})]})]}),p.jsxs("div",{className:"flex gap-2 sm:gap-3 justify-center sm:justify-end items-center",children:[p.jsxs("div",{className:"text-sm text-gray-600 bg-gray-100 px-3 py-1 rounded-full",children:["📊 ",t.length," chanson",t.length>1?"s":""," chargée",t.length>1?"s":""]}),p.jsxs(nl,{onClick:X,variant:"outline",size:"sm",className:"flex-1 sm:flex-none",children:[p.jsx(Ps,{className:"w-4 h-4 mr-1 sm:mr-2"}),p.jsx("span",{className:"hidden sm:inline",children:"Atualizar"}),p.jsx("span",{className:"sm:hidden",children:"Atual"})]}),p.jsxs(nl,{onClick:()=>{window.confirm("⚠️ ATENÇÃO: Isso apagará TODOS os dados! Tem certeza?")&&(localStorageService.clearAll(),X(),me("success","Todos os dados foram apagados"))},variant:"outline",size:"sm",className:"text-red-600 border-red-300 flex-1 sm:flex-none",children:[p.jsx(Us,{className:"w-4 h-4 mr-1 sm:mr-2"}),p.jsx("span",{className:"hidden sm:inline",children:"Limpar Tudo"}),p.jsx("span",{className:"sm:hidden",children:"Limpar"})]})]})]}),p.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-100 rounded-xl p-4 sm:p-6 mb-4 sm:mb-6 shadow-lg border-2 border-blue-200",children:[p.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-bold text-blue-900 flex items-center gap-2",children:"☁️ Supabase Cloud Database"}),p.jsxs("p",{className:"text-blue-700 text-sm",children:["Mode actuel: ",p.jsx("span",{className:"font-semibold text-green-600",children:"☁️ Cloud (Supabase)"})]})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs(nl,{onClick:()=>h(null,null,function*(){me("info","🔄 Migration non disponible dans cette version")}),disabled:S,className:"bg-blue-600 hover:bg-blue-700 text-white",size:"sm",children:[S?p.jsx(Ps,{className:"w-4 h-4 animate-spin mr-2"}):p.jsx(Vs,{className:"w-4 h-4 mr-2"}),S?"Migrando...":"Migrar para Supabase"]}),p.jsxs(nl,{onClick:()=>h(null,null,function*(){me("info","🔄 Vérification non disponible dans cette version")}),variant:"outline",size:"sm",className:"border-blue-300 text-blue-700 hover:bg-blue-50",children:[p.jsx(Ps,{className:"w-4 h-4 mr-2"}),"Verificar"]})]})]}),C&&p.jsx("div",{className:"bg-blue-100 border border-blue-300 rounded-lg p-3 mb-3",children:p.jsxs("p",{className:"text-blue-800 text-sm font-medium",children:["📊 ",C]})}),p.jsxs("div",{className:"bg-green-100 border border-green-300 rounded-lg p-3 mb-3",children:[p.jsxs("p",{className:"text-green-800 text-sm font-medium",children:["💾 Données chargées depuis: ",p.jsx("span",{className:"font-bold",children:"☁️ Supabase"})]}),p.jsx("p",{className:"text-green-700 text-xs mt-1",children:t.length>0?`${t.length} chanson(s) disponible(s)`:"Aucune chanson chargée"})]}),p.jsx("div",{className:"flex flex-wrap gap-2",children:p.jsxs(nl,{onClick:()=>h(null,null,function*(){me("info","🔄 Restauration non disponible dans cette version")}),variant:"outline",size:"sm",className:"border-purple-300 text-purple-700 hover:bg-purple-50",children:[p.jsx(us,{className:"w-4 h-4 mr-2"}),"Restaurar do Supabase"]})}),p.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:p.jsxs("p",{className:"text-blue-800 text-sm",children:["✅ ",p.jsx("strong",{children:"Mode Supabase activé:"})," Toutes les données sont synchronisées avec la base de données cloud."]})})]}),p.jsx("div",{className:"bg-white rounded-xl p-4 sm:p-6 mb-4 sm:mb-6 shadow-lg",children:p.jsxs("div",{className:"relative",children:[p.jsx(As,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),p.jsx(Jc,{placeholder:"Buscar músicas...",value:r,onChange:e=>{return t=e.target.value,h(null,null,function*(){if(a(t),t)try{if("supabase"===N){const e=yield Qi(t);s(e)}else{const e=localStorageService.songs.search(t);s(e)}}catch(e){const r=localStorageService.songs.search(t);s(r)}else X()});var t},className:"pl-10 text-sm sm:text-base"})]})}),p.jsx("div",{className:"grid gap-4",children:t.map(e=>p.jsx(vl,{className:"shadow-lg",children:p.jsx(bl,{children:p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 sm:gap-0",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx(yl,{className:"text-lg sm:text-xl text-blue-900 mb-2",children:e.title}),p.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[p.jsxs(kl,{variant:"secondary",className:"bg-blue-100 text-blue-800 text-xs sm:text-sm",children:[p.jsx(Ss,{className:"w-3 h-3 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:e.artist}),p.jsx("span",{className:"sm:hidden",children:"A Música da Segunda"})]}),p.jsxs(kl,{variant:"published"===e.status?"default":"secondary",className:"text-xs sm:text-sm",children:[p.jsx("span",{className:"hidden sm:inline",children:e.status}),p.jsx("span",{className:"sm:hidden",children:"published"===e.status?"Pub":"Rasc"})]}),p.jsxs(kl,{variant:"outline",className:"text-xs sm:text-sm",children:[p.jsx(rs,{className:"w-3 h-3 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:oe(ne(e.release_date),"dd/MM/yyyy",{locale:ul})}),p.jsx("span",{className:"sm:hidden",children:oe(ne(e.release_date),"dd/MM",{locale:ul})})]})]}),e.description&&p.jsx("p",{className:"text-gray-600 text-xs sm:text-sm line-clamp-2",children:e.description})]}),p.jsxs("div",{className:"flex gap-2 justify-center sm:justify-end",children:[p.jsxs(nl,{onClick:()=>(e=>{try{d(l({},e)),f(!0),i(!0)}catch(t){me("error","Erro ao abrir edição da música")}})(e),size:"sm",variant:"outline",className:"flex-1 sm:flex-none",children:[p.jsx($s,{className:"w-4 h-4"}),p.jsx("span",{className:"ml-1 sm:hidden",children:"Editar"})]}),p.jsxs(nl,{onClick:()=>{return t=e.id,h(null,null,function*(){if(window.confirm("Tem certeza que deseja deletar esta música?"))try{yield Zi(t),me("success","Música deletada com sucesso!"),X()}catch(e){me("error","Erro ao deletar música")}});var t},size:"sm",variant:"outline",className:"text-red-600 flex-1 sm:flex-none",children:[p.jsx(Us,{className:"w-4 h-4"}),p.jsx("span",{className:"ml-1 sm:hidden",children:"Excluir"})]})]})]})})},e.id))}),0===t.length&&p.jsxs("div",{className:"text-center py-8 sm:py-12",children:[p.jsx(Ss,{className:"w-12 h-12 sm:w-16 sm:h-16 text-gray-400 mx-auto mb-4"}),p.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-600 mb-2",children:"Nenhuma música encontrada"}),p.jsx("p",{className:"text-gray-500 text-sm sm:text-base",children:r?"Tente uma busca diferente":"Crie sua primeira música!"})]}),u&&p.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:p.jsx("div",{className:"bg-white rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:n?"Editar Música":"Nova Música"}),p.jsx(nl,{onClick:()=>f(!1),variant:"ghost",size:"sm",children:p.jsx(Hs,{className:"w-5 h-5"})})]}),p.jsxs("form",{onSubmit:e=>h(null,null,function*(){if(e.preventDefault(),o.title&&""!==o.title.trim())if(o.release_date)if(n||o.tiktok_url&&""!==o.tiktok_url.trim())if(n||o.tiktok_video_id&&""!==o.tiktok_video_id.trim())try{n?(yield Xi(o.id,o),me("success","✅ Música atualizada com sucesso!")):(yield Yi(o),me("success","✅ Música criada com sucesso!")),f(!1),d(null),X()}catch(t){me("error",`❌ Erro ao salvar música: ${t.message||"Erro desconhecido"}`)}else me("error",'❌ ID do TikTok não foi extraído! Clique em "Extrair" para obter o ID automaticamente.');else me("error",'❌ O link do TikTok é obrigatório! Cole o link e clique em "Extrair" primeiro.');else me("error","❌ A data de lançamento é obrigatória!");else me("error","❌ O título é obrigatório!")}),className:"space-y-6",children:[p.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 border-2 border-blue-200",children:[p.jsxs("h3",{className:"text-lg font-bold text-blue-900 mb-4 flex items-center gap-2",children:[p.jsx(Vs,{className:"w-5 h-5 text-blue-600"}),"🎬 Informações TikTok (Obrigatório)"]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link da Vídeo TikTok * (Obrigatório)"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx(Jc,{value:o.tiktok_url,onChange:e=>he("tiktok_url",e.target.value),placeholder:"https://www.tiktok.com/@usuario/video/ID...",type:"text",className:"flex-1 "+(!o.tiktok_url||o.tiktok_url.includes("tiktok.com")||o.tiktok_url.match(/^\d{15,20}$/)?"":"border-orange-300 bg-orange-50")}),p.jsxs(nl,{type:"button",onClick:()=>{return e=o.tiktok_url,h(null,null,function*(){if(!e||""===e.trim())return void me("error","❌ Por favor, insira o link do TikTok primeiro");let t=e.replace(/<[^>]*>/g,"").replace(/on>.*?<\/blockquote>/g,"").replace(/<script[^>]*>.*?<\/script>/g,"").replace(/https:\/\/www\.tiktok\.com\/embed\.js/g,"").trim();if(!t)throw new Error("❌ Nenhum link válido encontrado! Cole apenas o link TikTok, não o código HTML de incorporação.");w(!0);try{let e=null;const s=t.match(/tiktok\.com\/@[^\/]+\/video\/(\d+)/);s&&(e=s[1]);const r=t.match(/vm\.tiktok\.com\/([A-Za-z0-9]+)/);r&&(e=r[1]);const a=t.match(/^(\d{15,20})$/);if(a&&(e=a[1]),!e)throw new Error("❌ Formato de link inválido! Use: https://www.tiktok.com/@usuario/video/ID ou https://vm.tiktok.com/ID");const n=yield Q(e,t),i=de(),u=c(l({},o),{tiktok_url:t,tiktok_video_id:e,tiktok_publication_date:n.publicationDate,title:n.title||`Música da Segunda - ${oe(new Date,"dd/MM/yyyy",{locale:ul})}`,description:n.description||"Música da Segunda - Nova descoberta musical!",hashtags:n.hashtags.length>0?n.hashtags:["musica","trending","novidade","humor"],release_date:i});d(u),me("success",`✅ TikTok extraído com sucesso! \n      🎬 ID: ${e} \n      📝 Título: ${n.title||"Extraído automaticamente"}\n      📅 Data de publicação: ${oe(ne(n.publicationDate),"dd/MM/yyyy",{locale:ul})}\n      🏷️ Hashtags: ${n.hashtags.length} encontrados\n      ✨ Agora você pode editar e salvar!`)}catch(s){me("error",`❌ ${s.message}`)}finally{w(!1)}});var e},disabled:y||!o.tiktok_url,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[y?p.jsx(Ps,{className:"w-4 h-4 animate-spin"}):p.jsx(Vs,{className:"w-4 h-4"}),y?"Extraindo...":"Extrair"]})]}),o.tiktok_url&&!o.tiktok_url.includes("tiktok.com")&&!o.tiktok_url.match(/^\d{15,20}$/)&&p.jsx("div",{className:"mt-2 p-2 bg-orange-50 border border-orange-200 rounded-lg",children:p.jsxs("p",{className:"text-xs text-orange-700",children:["⚠️ ",p.jsx("strong",{children:"Atenção:"})," O conteúdo não parece ser um link TikTok válido. Cole apenas o link da vídeo, não o código HTML de incorporação."]})}),p.jsxs("div",{className:"mt-2 space-y-1",children:[p.jsx("p",{className:"text-xs text-gray-500",children:p.jsx("strong",{children:"Formatos aceitos:"})}),p.jsxs("ul",{className:"text-xs text-gray-500 space-y-1 ml-2",children:[p.jsx("li",{children:"• https://www.tiktok.com/@usuario/video/ID"}),p.jsx("li",{children:"• https://vm.tiktok.com/ID"}),p.jsx("li",{children:"• ID direto (15-20 dígitos)"})]}),p.jsxs("p",{className:"text-xs text-blue-600 font-medium mt-2",children:["💡 ",p.jsx("strong",{children:"IMPORTANTE:"})," Cole apenas o link da vídeo TikTok (ex: https://www.tiktok.com/@usuario/video/1234567890), NÃO o código HTML de incorporação!"]}),p.jsxs("p",{className:"text-xs text-red-600 font-medium mt-1",children:["🚫 ",p.jsx("strong",{children:"NÃO COLE:"})," Código HTML, scripts, ou código de incorporação"]})]})]}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["ID da Vídeo TikTok ",o.tiktok_video_id&&p.jsx("span",{className:"text-green-600",children:"✅"})]}),p.jsx(Jc,{value:o.tiktok_video_id,onChange:e=>he("tiktok_video_id",e.target.value),placeholder:"Clique em 'Extrair' para obter o ID",readOnly:!0,className:""+(o.tiktok_video_id?"bg-green-50 border-green-300":"bg-gray-50")}),o.tiktok_video_id&&p.jsx("p",{className:"text-xs text-green-600 mt-1",children:"✅ ID extraído com sucesso!"})]}),p.jsxs("div",{className:"flex items-end gap-2",children:[p.jsxs(nl,{type:"button",variant:"outline",onClick:()=>window.open(o.tiktok_url,"_blank"),disabled:!o.tiktok_url,className:"flex-1",children:[p.jsx(hs,{className:"w-4 h-4 mr-2"}),"Abrir TikTok"]}),p.jsxs(nl,{type:"button",variant:"outline",onClick:()=>k(!0),disabled:!o.tiktok_video_id,className:"bg-red-500 hover:bg-red-600 text-white border-red-500",children:[p.jsx(Cs,{className:"w-4 h-4 mr-2"}),"Play"]})]})]}),o.tiktok_video_id&&p.jsxs("div",{className:"pt-4 border-t border-blue-200",children:[p.jsx("h4",{className:"text-sm font-bold text-blue-800 mb-3 flex items-center gap-2",children:"📊 Metadados Extraídos do TikTok"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[p.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:p.jsxs("div",{className:"text-sm text-blue-800",children:[p.jsx("p",{className:"font-medium mb-1",children:"📝 Título:"}),p.jsx("p",{className:"text-xs",children:o.title||"Extraindo..."})]})}),p.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:p.jsxs("div",{className:"text-sm text-blue-800",children:[p.jsx("p",{className:"font-medium mb-1",children:"🏷️ Hashtags:"}),p.jsx("p",{className:"text-xs",children:(null==(e=o.hashtags)?void 0:e.join(", "))||"Extraindo..."})]})})]})]}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-4 pt-4 border-t border-blue-200",children:[p.jsxs("div",{children:[p.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["📅 Data de Publicação TikTok ",o.tiktok_publication_date&&o.tiktok_publication_date!==(new Date).toISOString().split("T")[0]&&p.jsx("span",{className:"text-green-600",children:"✅"})]}),p.jsxs("div",{className:"border rounded-lg p-3 "+(o.tiktok_publication_date&&o.tiktok_publication_date!==(new Date).toISOString().split("T")[0]?"bg-green-50 border-green-200":"bg-blue-50 border-blue-200"),children:[p.jsx("div",{className:"text-sm font-medium",children:o.tiktok_publication_date?p.jsx(p.Fragment,{children:o.tiktok_publication_date!==(new Date).toISOString().split("T")[0]?p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"text-green-600",children:"✅ Data extraída com sucesso: "}),p.jsx("span",{className:"text-green-800",children:oe(ne(o.tiktok_publication_date),"EEEE, d 'de' MMMM 'de' yyyy",{locale:ul})})]}):p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"text-blue-600",children:"📱 Data padrão (hoje): "}),p.jsx("span",{className:"text-blue-800",children:oe(ne(o.tiktok_publication_date),"EEEE, d 'de' MMMM 'de' yyyy",{locale:ul})})]})}):p.jsx("span",{className:"text-blue-600",children:"📱 Data será extraída automaticamente"})}),o.tiktok_publication_date&&o.tiktok_publication_date!==(new Date).toISOString().split("T")[0]&&p.jsx("p",{className:"text-xs text-green-600 mt-2",children:"🎯 Data real de publicação TikTok detectada!"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"🎯 Próxima Data Sugerida"}),p.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[p.jsxs("div",{className:"text-sm text-green-800 font-medium",children:[p.jsx("span",{className:"text-green-600",children:"📅 Próximo lundi: "}),de()?oe(ne(de()),"EEEE, d 'de' MMMM 'de' yyyy",{locale:ul}):"Calculando..."]}),p.jsx(nl,{type:"button",variant:"outline",size:"sm",onClick:()=>he("release_date",de()),className:"mt-2 w-full text-green-700 border-green-300 hover:bg-green-100",children:"🎯 Usar Esta Data"})]})]})]})]})]}),p.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-6 border-2 border-green-200",children:[p.jsxs("h3",{className:"text-lg font-bold text-green-900 mb-4 flex items-center gap-2",children:[p.jsx(Ss,{className:"w-5 h-5 text-green-600"}),"🎵 Informações da Música"]}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Título * ",o.tiktok_video_id&&o.title&&o.title!==`Música da Segunda - ${oe(new Date,"dd/MM/yyyy",{locale:ul})}`&&p.jsx("span",{className:"text-green-600",children:"✅"})]}),p.jsx(Jc,{value:o.title,onChange:e=>he("title",e.target.value),required:!0,placeholder:"Título da música",className:o.tiktok_video_id&&o.title&&o.title!==`Música da Segunda - ${oe(new Date,"dd/MM/yyyy",{locale:ul})}`?"border-green-300 bg-green-50":""}),o.tiktok_video_id&&o.title&&o.title!==`Música da Segunda - ${oe(new Date,"dd/MM/yyyy",{locale:ul})}`&&p.jsx("p",{className:"text-xs text-green-600 mt-1",children:"✅ Título extraído do TikTok"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Artista"}),p.jsx(Jc,{value:o.artist,onChange:e=>he("artist",e.target.value),placeholder:"Nome do artista"})]})]}),p.jsxs("div",{className:"mt-4",children:[p.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center justify-between",children:[p.jsx("span",{children:"Descrição"}),o&&o.lyrics&&o.lyrics.trim()&&p.jsxs(nl,{type:"button",onClick:()=>h(null,null,function*(){if(o&&o.lyrics&&o.lyrics.trim()){G(!0);try{const e=yield se(o.lyrics,o.release_date||o.tiktok_publication_date,o.title);he("description",e),me("success","✅ Descrição gerada automaticamente!")}catch(e){me("error","❌ Erro ao gerar descrição automática")}finally{G(!1)}}else me("error","❌ Adicione letras primeiro para gerar uma descrição")}),variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-800 hover:bg-blue-50",disabled:J,children:[p.jsx(js,{className:"w-4 h-4 mr-1"}),J?"Gerando...":"Sugerir"]})]}),p.jsx(Gc,{value:o.description,onChange:e=>he("description",e.target.value),placeholder:"Descrição da música",rows:3})]}),p.jsxs("div",{className:"mt-4",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Letra"}),p.jsx(Gc,{value:o.lyrics,onChange:e=>he("lyrics",e.target.value),placeholder:"Letra da música",rows:6})]}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mt-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Lançamento *"}),p.jsx(Jc,{type:"date",value:o.release_date,onChange:e=>he("release_date",e.target.value),required:!0}),o.release_date&&p.jsx("div",{className:"mt-1 text-xs",children:p.jsxs("span",{className:"text-blue-600",children:["📅 Data selecionada: ",oe(ne(o.release_date),"EEEE, d 'de' MMMM 'de' yyyy",{locale:ul})]})}),p.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Dica: Use o botão "Extrair" do TikTok para definir automaticamente a próxima segunda-feira, ou escolha qualquer data manualmente'})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),p.jsxs(zc,{value:o.status,onValueChange:e=>he("status",e),children:[p.jsx(Bc,{children:p.jsx(qc,{})}),p.jsxs(Fc,{children:[p.jsx(Vc,{value:"draft",children:"Rascunho"}),p.jsx(Vc,{value:"scheduled",children:"Agendado"}),p.jsx(Vc,{value:"published",children:"Publicado"}),p.jsx(Vc,{value:"archived",children:"Arquivado"})]})]})]})]})]}),p.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 border-2 border-purple-200",children:[p.jsxs("h3",{className:"text-lg font-bold text-purple-900 mb-4 flex items-center gap-2",children:[p.jsx(ks,{className:"w-5 h-5 text-purple-600"}),"🎧 Links de Streaming"]}),p.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Spotify"}),p.jsx(Jc,{value:o.spotify_url,onChange:e=>he("spotify_url",e.target.value),placeholder:"URL Spotify",type:"url"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Apple Music"}),p.jsx(Jc,{value:o.apple_music_url,onChange:e=>he("apple_music_url",e.target.value),placeholder:"URL Apple Music",type:"url"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"YouTube"}),p.jsx(Jc,{value:o.youtube_url,onChange:e=>he("youtube_url",e.target.value),placeholder:"URL YouTube",type:"url"})]})]})]}),p.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl p-6 border-2 border-orange-200",children:[p.jsxs("h3",{className:"text-lg font-bold text-orange-900 mb-4 flex items-center gap-2",children:[p.jsx(gs,{className:"w-5 h-5 text-orange-600"}),"🏷️ Métadados"]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hashtags (separados por vírgula)"}),p.jsx(Jc,{value:o.hashtags.join(", "),onChange:e=>(e=>{const t=e.split(",").map(e=>e.trim()).filter(e=>e);he("hashtags",t)})(e.target.value),placeholder:"humor, musica, trending, novidade"}),p.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Exemplo: humor, musica, trending, novidade, viral"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagem de Capa (URL)"}),p.jsx(Jc,{value:o.cover_image,onChange:e=>he("cover_image",e.target.value),placeholder:"https://exemplo.com/imagem.jpg",type:"url"})]})]})]}),p.jsxs("div",{className:"flex gap-3 pt-4 border-t-2 border-gray-200",children:[p.jsxs(nl,{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-lg py-3",children:[p.jsx(Rs,{className:"w-5 h-5 mr-2"}),n?"Atualizar Música":"Criar Nova Música"]}),p.jsx(nl,{type:"button",variant:"outline",onClick:()=>f(!1),className:"flex-1 text-lg py-3",children:"Cancelar"})]})]})]})})}),j&&o.tiktok_video_id&&p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:p.jsx("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"🎬 Visualizar Vídeo TikTok"}),p.jsx(nl,{onClick:()=>k(!1),variant:"ghost",size:"sm",children:p.jsx(Hs,{className:"w-5 h-5"})})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:o.title||"Vídeo TikTok"}),p.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["ID: ",o.tiktok_video_id]})]}),p.jsx("div",{className:"bg-black rounded-lg overflow-hidden",children:p.jsx(il,{postId:o.tiktok_video_id,className:"w-full",song:o})}),p.jsx("div",{className:"text-center",children:p.jsxs(nl,{onClick:()=>window.open(o.tiktok_url,"_blank"),className:"bg-red-500 hover:bg-red-600 text-white",children:[p.jsx(hs,{className:"w-4 h-4 mr-2"}),"Abrir no TikTok"]})})]})]})})}),P&&p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:p.jsx("div",{className:"bg-white rounded-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"📥 Importar Perfil TikTok"}),p.jsx(nl,{onClick:()=>M(!1),variant:"ghost",size:"sm",children:p.jsx(Hs,{className:"w-5 h-5"})})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:p.jsxs("p",{className:"text-blue-800 text-sm",children:[p.jsx("strong",{children:"💡 Dica:"})," Cole o link do perfil TikTok para importar todas as vídeos de uma vez!"]})}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link do Perfil TikTok"}),p.jsx(Jc,{value:R,onChange:e=>A(e.target.value),placeholder:"https://www.tiktok.com/@amusicadasegunda",className:"w-full"}),p.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Exemplo: https://www.tiktok.com/@amusicadasegunda"})]}),z&&p.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Importando vídeos..."}),p.jsxs("span",{className:"text-sm text-gray-500",children:[B.current," / ",B.total]})]}),p.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:p.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:B.current/B.total*100+"%"}})})]}),p.jsxs("div",{className:"flex gap-3 pt-4",children:[p.jsxs(nl,{onClick:()=>h(null,null,function*(){if(R.trim()){q(!0),W({current:0,total:0});try{const t=yield Z(R);if(0===t.length)throw new Error("❌ Nenhuma vídeo encontrada neste perfil");W({current:0,total:t.length});const s=[];for(let r=0;r<t.length;r++){const a=t[r];W({current:r+1,total:t.length});try{const e={id:Date.now().toString()+"_"+r,title:a.title||`Música da Segunda - ${r+1}`,artist:a.artist||"Artista",description:a.description||"Música da Segunda - Nova descoberta musical!",tiktok_url:a.url,tiktok_video_id:a.videoId,tiktok_publication_date:a.publicationDate||(new Date).toISOString(),release_date:de(),status:"draft",hashtags:a.hashtags||["musica","trending","novidade"],cover_image:a.coverImage||"",spotify_url:"",apple_music_url:"",youtube_url:"",lyrics:"",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};s.push(e),yield new Promise(e=>setTimeout(e,500))}catch(e){}}U(s),M(!1),me("success",`✅ ${s.length} músicas importadas com sucesso! Agora você pode revisar e publicar.`)}catch(e){me("error",`❌ Erro ao importar perfil: ${e.message}`)}finally{q(!1),W({current:0,total:0})}}else me("error","❌ Por favor, insira o link do perfil TikTok")}),disabled:z||!R.trim(),className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[z?p.jsx(Ps,{className:"w-4 h-4 mr-2 animate-spin"}):p.jsx(zs,{className:"w-4 h-4 mr-2"}),z?"Analisando...":"Analisar Perfil"]}),p.jsx(nl,{onClick:()=>M(!1),variant:"outline",className:"flex-1",children:"Cancelar"})]})]})]})})}),L&&L.length>0&&p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:p.jsx("div",{className:"bg-white rounded-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsxs("h2",{className:"text-2xl font-bold text-green-900",children:["📋 Revisar Músicas Importadas (",L.length,")"]}),p.jsx(nl,{onClick:()=>U([]),variant:"ghost",size:"sm",children:p.jsx(Hs,{className:"w-5 h-5"})})]}),p.jsxs("div",{className:"space-y-6",children:[p.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:p.jsxs("p",{className:"text-green-800 text-sm",children:[p.jsx("strong",{children:"✅ Sucesso!"})," ",L.length," músicas foram importadas do perfil TikTok. Revise os detalhes e publique todas de uma vez no Supabase."]})}),p.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:L.map((e,t)=>p.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{className:"flex-1",children:[p.jsxs("h3",{className:"font-semibold text-gray-900 mb-2",children:[t+1,". ",e.title]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[p.jsxs("div",{children:[p.jsx("span",{className:"text-gray-600",children:"Artista:"})," ",e.artist]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-gray-600",children:"Data Lançamento:"})," ",new Date(e.release_date).toLocaleDateString("pt-BR")]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-gray-600",children:"Data TikTok:"})," ",new Date(e.tiktok_publication_date).toLocaleDateString("pt-BR")]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-gray-600",children:"Hashtags:"})," ",e.hashtags.join(", ")]})]}),p.jsxs("div",{className:"mt-2",children:[p.jsx("span",{className:"text-gray-600",children:"Descrição:"})," ",e.description]})]}),p.jsxs("div",{className:"ml-4 flex gap-2",children:[p.jsxs(nl,{onClick:()=>(e=>{F(l({},e)),K(!0)})(e),variant:"outline",size:"sm",className:"text-blue-600 border-blue-300 hover:bg-blue-50",children:[p.jsx($s,{className:"w-4 h-4 mr-1"}),"Editar"]}),p.jsxs(nl,{onClick:()=>window.open(e.tiktok_url,"_blank"),variant:"outline",size:"sm",className:"text-red-600 border-red-300 hover:bg-red-50",children:[p.jsx(hs,{className:"w-4 h-4 mr-1"}),"Ver TikTok"]}),p.jsxs(nl,{onClick:()=>{return t=e.id,void(confirm("❌ Tem certeza que deseja excluir esta música?")&&(U(e=>e.filter(e=>e.id!==t)),me("success","✅ Música removida da lista de importação")));var t},variant:"outline",size:"sm",className:"text-red-600 border-red-300 hover:bg-red-50",children:[p.jsx(Us,{className:"w-4 h-4 mr-1"}),"Excluir"]})]})]})},e.id))}),p.jsxs("div",{className:"flex gap-3 pt-4 border-t-2 border-gray-200",children:[p.jsxs(nl,{onClick:()=>h(null,null,function*(){if(L&&0!==L.length){q(!0),W({current:0,total:L.length});try{let t=0,s=0;for(let r=0;r<L.length;r++){const a=L[r];W({current:r+1,total:L.length});try{"supabase"===N?(yield Yi(a),t++):(localStorageService.songs.create(a),t++),yield new Promise(e=>setTimeout(e,300))}catch(e){s++}}t>0?(me("success",`✅ ${t} músicas publicadas com sucesso! ${s>0?`(${s} erros)`:""}`),U([]),X()):me("error",`❌ Erro ao publicar músicas: ${s} erros`)}catch(e){me("error",`❌ Erreur na publicação em lote: ${e.message}`)}finally{q(!1),W({current:0,total:0})}}}),disabled:z,className:"flex-1 bg-green-600 hover:bg-green-700 text-lg py-3",children:[z?p.jsx(Ps,{className:"w-5 h-5 mr-2 animate-spin"}):p.jsx(Rs,{className:"w-5 h-5 mr-2"}),z?"Publicando...":"Publier"]}),p.jsx(nl,{onClick:()=>U([]),variant:"outline",className:"flex-1 text-lg py-3",children:"Cancelar"})]}),z&&p.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Publicando músicas..."}),p.jsxs("span",{className:"text-sm text-gray-500",children:[B.current," / ",B.total]})]}),p.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:p.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:B.current/B.total*100+"%"}})})]})]})]})})}),V&&H&&p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:p.jsx("div",{className:"bg-white rounded-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsx("h2",{className:"text-2xl font-bold text-blue-900",children:"✏️ Editar Música Importada do TikTok"}),p.jsx(nl,{onClick:()=>K(!1),variant:"ghost",size:"sm",children:p.jsx(Hs,{className:"w-5 h-5"})})]}),p.jsx("form",{onSubmit:e=>{e.preventDefault(),H&&(U(e=>e.map(e=>e.id===H.id?H:e)),K(!1),F(null),me("success","✅ Música editada com sucesso!"))},children:p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-100 rounded-xl p-6 border-2 border-blue-200",children:[p.jsxs("h3",{className:"text-lg font-bold text-blue-900 mb-4 flex items-center gap-2",children:[p.jsx(Bs,{className:"w-5 h-5 text-blue-600"}),"📱 Informações TikTok (Obrigatório)"]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link da Vídeo TikTok*"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx(Jc,{value:H.tiktok_url,onChange:e=>F(c(l({},H),{tiktok_url:e.target.value})),placeholder:"https://www.tiktok.com/@usuario/video/1234567890",className:"flex-1"}),p.jsxs(nl,{type:"button",onClick:()=>window.open(H.tiktok_url,"_blank"),variant:"outline",className:"text-blue-600 border-blue-300 hover:bg-blue-50",children:[p.jsx(hs,{className:"w-4 h-4 mr-2"}),"Abrir TikTok"]})]}),p.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[p.jsx("p",{className:"font-medium mb-1",children:"Formatos aceitos:"}),p.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[p.jsx("li",{children:"https://www.tiktok.com/@usuario/video/ID"}),p.jsx("li",{children:"https://vm.tiktok.com/ID"}),p.jsx("li",{children:"ID direto (15-20 dígitos)"})]})]}),p.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:p.jsxs("div",{className:"flex items-start gap-2",children:[p.jsx(cs,{className:"w-4 h-4 text-yellow-600 mt-0.5 flex-shrink-0"}),p.jsxs("div",{className:"text-xs text-yellow-800",children:[p.jsx("p",{className:"font-medium",children:"IMPORTANT:"}),p.jsx("p",{children:"Cole apenas o link da vídeo TikTok (ex: https://www.tiktok.com/@usuario/video/1234567890), NÃO o código HTML de incorporação!"})]})]})})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ID da Vídeo TikTok"}),p.jsx(Jc,{value:H.tiktok_video_id,onChange:e=>F(c(l({},H),{tiktok_video_id:e.target.value})),placeholder:"ID da vídeo"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Publicação TikTok"}),p.jsx(Jc,{type:"datetime-local",value:H.tiktok_publication_date?H.tiktok_publication_date.slice(0,16):"",onChange:e=>F(c(l({},H),{tiktok_publication_date:e.target.value}))})]})]})]})]}),p.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-100 rounded-xl p-6 border-2 border-green-200",children:[p.jsxs("h3",{className:"text-lg font-bold text-green-900 mb-4 flex items-center gap-2",children:[p.jsx(Ss,{className:"w-5 h-5 text-green-600"}),"🎵 Métadados Extraídos do TikTok"]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Título*"}),p.jsx(Jc,{value:H.title,onChange:e=>F(c(l({},H),{title:e.target.value})),placeholder:"Título da música"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Artista*"}),p.jsx(Jc,{value:H.artist,onChange:e=>F(c(l({},H),{artist:e.target.value})),placeholder:"Nome do artista"})]})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center justify-between",children:[p.jsx("span",{children:"Descrição"}),H&&H.lyrics&&H.lyrics.trim()&&p.jsxs(nl,{type:"button",onClick:()=>h(null,null,function*(){if(H.lyrics&&H.lyrics.trim()){G(!0);try{const e=yield se(H.lyrics,H.release_date||H.tiktok_publication_date,H.title);F(c(l({},H),{description:e})),me("success","✅ Descrição gerada automaticamente!")}catch(e){me("error","❌ Erro ao gerar descrição automática")}finally{G(!1)}}else me("error","❌ Adicione letras primeiro para gerar uma descrição")}),variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-800 hover:bg-blue-50",disabled:J,children:[p.jsx(js,{className:"w-4 h-4 mr-1"}),J?"Gerando...":"Sugerir"]})]}),p.jsx(Gc,{value:H.description,onChange:e=>F(c(l({},H),{description:e.target.value})),placeholder:"Descrição da música",rows:3})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hashtags (separados por vírgula)"}),p.jsx(Jc,{value:H.hashtags.join(", "),onChange:e=>F(c(l({},H),{hashtags:e.target.value.split(",").map(e=>e.trim()).filter(e=>e)})),placeholder:"humor, musica, trending, novidade"}),p.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Exemplo: humor, musica, trending, novidade, viral"})]})]}),p.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-100 rounded-xl p-6 border-2 border-purple-200",children:[p.jsxs("h3",{className:"text-lg font-bold text-purple-900 mb-4 flex items-center gap-2",children:[p.jsx(rs,{className:"w-5 h-5 text-purple-600"}),"📅 Datas de Publicação"]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Lançamento no App*"}),p.jsx(Jc,{type:"date",value:H.release_date,onChange:e=>F(c(l({},H),{release_date:e.target.value}))}),p.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Data sugerida: ",de()?oe(ne(de()),"EEEE, d 'de' MMMM 'de' yyyy",{locale:ul}):"Calculando..."]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),p.jsxs(zc,{value:H.status,onValueChange:e=>F(c(l({},H),{status:e})),children:[p.jsx(Bc,{children:p.jsx(qc,{})}),p.jsxs(Fc,{children:[p.jsx(Vc,{value:"draft",children:"Brouillon"}),p.jsx(Vc,{value:"published",children:"Publié"}),p.jsx(Vc,{value:"archived",children:"Archivé"})]})]})]})]})]}),p.jsxs("div",{className:"bg-gradient-to-r from-violet-50 to-purple-100 rounded-xl p-6 border-2 border-violet-200",children:[p.jsxs("h3",{className:"text-lg font-bold text-violet-900 mb-4 flex items-center gap-2",children:[p.jsx(ks,{className:"w-5 h-5 text-violet-600"}),"🎧 Links de Streaming"]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Spotify"}),p.jsx(Jc,{value:H.spotify_url||"",onChange:e=>F(c(l({},H),{spotify_url:e.target.value})),placeholder:"URL Spotify",type:"url"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Apple Music"}),p.jsx(Jc,{value:H.apple_music_url||"",onChange:e=>F(c(l({},H),{apple_music_url:e.target.value})),placeholder:"URL Apple Music",type:"url"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"YouTube"}),p.jsx(Jc,{value:H.youtube_url||"",onChange:e=>F(c(l({},H),{youtube_url:e.target.value})),placeholder:"URL YouTube",type:"url"})]})]})]}),p.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-100 rounded-xl p-6 border-2 border-orange-200",children:[p.jsxs("h3",{className:"text-lg font-bold text-orange-900 mb-4 flex items-center gap-2",children:[p.jsx(gs,{className:"w-5 h-5 text-orange-600"}),"🏷️ Métadados"]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagem de Capa (URL)"}),p.jsx(Jc,{value:H.cover_image||"",onChange:e=>F(c(l({},H),{cover_image:e.target.value})),placeholder:"https://exemplo.com/imagem.jpg",type:"url"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Letras da Música"}),p.jsx(Gc,{value:H.lyrics||"",onChange:e=>F(c(l({},H),{lyrics:e.target.value})),placeholder:"Letras da música...",rows:4})]})]})]}),p.jsxs("div",{className:"flex gap-3 pt-4 border-t-2 border-gray-200",children:[p.jsxs(nl,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700 text-lg py-3",children:[p.jsx(Rs,{className:"w-5 h-5 mr-2"}),"Salvar Alterações"]}),p.jsx(nl,{type:"button",onClick:()=>K(!1),variant:"outline",className:"flex-1 text-lg py-3",children:"Cancelar"})]})]})})]})})})]})})}function td(){return p.jsx("div",{className:"min-h-screen bg-gradient-to-b from-teal-200 to-rose-200 p-5",children:p.jsxs("div",{className:"max-w-4xl mx-auto",children:[p.jsx("div",{className:"text-center mb-8",children:p.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[p.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden border-4 border-white/20 shadow-xl flex-shrink-0",children:p.jsx("img",{src:"images/Musica da segunda.jpg",alt:"Logo Música da Segunda",className:"w-full h-full object-cover"})}),p.jsxs("div",{className:"text-left",children:[p.jsx("h1",{className:"text-3xl md:text-4xl font-black text-white drop-shadow-lg mb-2",children:"Playlist"}),p.jsx("p",{className:"text-white/90 font-medium text-lg drop-shadow-md",children:"Ouça todas as músicas da Música da Segunda"})]})]})}),p.jsx("div",{className:"bg-white/90 backdrop-blur-lg rounded-3xl p-6 shadow-2xl",children:p.jsx("div",{className:"w-full",children:p.jsx("iframe",{"data-testid":"embed-iframe",style:{borderRadius:"12px"},src:"https://open.spotify.com/embed/playlist/5z7Jan9yS1KRzwWEPYs4sH?utm_source=generator",width:"100%",height:"800",frameBorder:"0",allowFullScreen:"",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",className:"shadow-lg md:h-[800px] h-[600px]"})})})]})})}m.forwardRef((e,t)=>{var s=e,{className:r,orientation:a="horizontal",decorative:n=!0}=s,i=d(s,["className","orientation","decorative"]);return p.jsx(Qc,l({ref:t,decorative:n,orientation:a,className:to("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",r)},i))}).displayName=Qc.displayName;const sd=m.lazy(()=>ge(()=>import("./TikTokDemo-DVL54S02.js"),__vite__mapDeps([0,1,2,3]))),rd={Home:hl,Calendar:pl,AdventCalendar:gl,Sobre:xl,Blog:Kc,Admin:ed,Playlist:td,TikTokDemo:sd};function ad(){const e=function(e){e.endsWith("/")&&(e=e.slice(0,-1));let t=e.split("/").pop();return t.includes("?")&&(t=t.split("?")[0]),t&&"amusicadaegunda"!==t?t.startsWith("tiktok")?"TikTokDemo":Object.keys(rd).find(e=>e.toLowerCase()===t.toLowerCase())||"Home":"Home"}(rt().pathname);return p.jsx(or,{currentPageName:e,children:p.jsxs(yt,{children:[p.jsx(vt,{path:"/",element:p.jsx(hl,{})}),p.jsx(vt,{path:"/home",element:p.jsx(hl,{})}),p.jsx(vt,{path:"/calendar",element:p.jsx(pl,{})}),p.jsx(vt,{path:"/adventcalendar",element:p.jsx(gl,{})}),p.jsx(vt,{path:"/sobre",element:p.jsx(xl,{})}),p.jsx(vt,{path:"/blog",element:p.jsx(Kc,{})}),p.jsx(vt,{path:"/admin",element:p.jsx(ed,{})}),p.jsx(vt,{path:"/playlist",element:p.jsx(td,{})}),p.jsx(vt,{path:"/tiktokdemo",element:p.jsx(sd,{})}),p.jsx(vt,{path:"/tiktok/:id",element:p.jsx(sd,{})}),p.jsx(vt,{path:"/calendar",element:p.jsx(pl,{})})]})})}function nd(){return p.jsx(Bt,{children:p.jsx(ad,{})})}const id="ADD_TOAST",od="UPDATE_TOAST",ld="DISMISS_TOAST",cd="REMOVE_TOAST";let dd=0;const ud=new Map,hd=e=>{if(ud.has(e))return;const t=setTimeout(()=>{ud.delete(e),gd({type:cd,toastId:e})},1e6);ud.set(e,t)},md=(e,t)=>{switch(t.type){case id:return c(l({},e),{toasts:[t.toast,...e.toasts].slice(0,20)});case od:return c(l({},e),{toasts:e.toasts.map(e=>e.id===t.toast.id?l(l({},e),t.toast):e)});case ld:{const{toastId:s}=t;return s?hd(s):e.toasts.forEach(e=>{hd(e.id)}),c(l({},e),{toasts:e.toasts.map(e=>e.id===s||void 0===s?c(l({},e),{open:!1}):e)})}case cd:return void 0===t.toastId?c(l({},e),{toasts:[]}):c(l({},e),{toasts:e.toasts.filter(e=>e.id!==t.toastId)})}},pd=[];let fd={toasts:[]};function gd(e){fd=md(fd,e),pd.forEach(e=>{e(fd)})}function xd(e){var t=d(e,[]);const s=(dd=(dd+1)%Number.MAX_VALUE,dd.toString()),r=()=>gd({type:ld,toastId:s});return gd({type:id,toast:c(l({},t),{id:s,open:!0,onOpenChange:e=>{e||r()}})}),{id:s,dismiss:r,update:e=>gd({type:od,toast:c(l({},e),{id:s})})}}const vd=m.forwardRef((e,t)=>{var s=d(e,[]);return p.jsx("div",l({ref:t,className:"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]"},s))});vd.displayName="ToastProvider";const bd=m.forwardRef((e,t)=>{var s=d(e,[]);return p.jsx("div",l({ref:t,className:"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]"},s))});bd.displayName="ToastViewport";const yd=rl("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),wd=m.forwardRef((e,t)=>{var s=e,{className:r,variant:a}=s,n=d(s,["className","variant"]);return p.jsx("div",l({ref:t,className:to(yd({variant:a}),r)},n))});wd.displayName="Toast";m.forwardRef((e,t)=>{var s=e,{className:r}=s,a=d(s,["className"]);return p.jsx("div",l({ref:t,className:to("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",r)},a))}).displayName="ToastAction";const jd=m.forwardRef((e,t)=>{var s=e,{className:r}=s,a=d(s,["className"]);return p.jsx("button",c(l({ref:t,className:to("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),"toast-close":""},a),{children:p.jsx(Hs,{className:"h-4 w-4"})}))});jd.displayName="ToastClose";const kd=m.forwardRef((e,t)=>{var s=e,{className:r}=s,a=d(s,["className"]);return p.jsx("div",l({ref:t,className:to("text-sm font-semibold",r)},a))});kd.displayName="ToastTitle";const Nd=m.forwardRef((e,t)=>{var s=e,{className:r}=s,a=d(s,["className"]);return p.jsx("div",l({ref:t,className:to("text-sm opacity-90",r)},a))});function _d(){const{toasts:e}=function(){const[e,t]=m.useState(fd);return m.useEffect(()=>(pd.push(t),()=>{const e=pd.indexOf(t);e>-1&&pd.splice(e,1)}),[e]),c(l({},e),{toast:xd,dismiss:e=>gd({type:ld,toastId:e})})}();return p.jsxs(vd,{children:[e.map(function(e){var t=e,{id:s,title:r,description:a,action:n}=t,i=d(t,["id","title","description","action"]);return p.jsxs(wd,c(l({},i),{children:[p.jsxs("div",{className:"grid gap-1",children:[r&&p.jsx(kd,{children:r}),a&&p.jsx(Nd,{children:a})]}),n,p.jsx(jd,{})]}),s)}),p.jsx(bd,{})]})}Nd.displayName="ToastDescription";var Sd=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(Sd||{}),Td={rel:["amphtml","canonical","alternate"]},Cd={type:["application/ld+json"]},Ed={charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]};Object.values(Sd);var Pd={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"};Object.entries(Pd).reduce((e,[t,s])=>(e[s]=t,e),{});var Md="data-rh",Rd=(e,t)=>Array.isArray(e)?e.reduce((e,s)=>(((e,t)=>{const s=Object.keys(e);for(let r=0;r<s.length;r+=1)if(t[s[r]]&&t[s[r]].includes(e[s[r]]))return!0;return!1})(s,t)?e.priority.push(s):e.default.push(s),e),{priority:[],default:[]}):{default:e,priority:[]},Ad=["noscript","script","style"],Od=(e,t=!0)=>!1===t?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),Dd=e=>Object.keys(e).reduce((t,s)=>{const r=void 0!==e[s]?`${s}="${e[s]}"`:`${s}`;return t?`${t} ${r}`:r},""),$d=(e,t,s,r)=>{const a=Dd(s),n=(i=t,Array.isArray(i)?i.join(""):i);var i;return a?`<${e} ${Md}="true" ${a}>${Od(n,r)}</${e}>`:`<${e} ${Md}="true">${Od(n,r)}</${e}>`},Id=(e,t={})=>Object.keys(e).reduce((t,s)=>(t[Pd[s]||s]=e[s],t),t),Ld=(e,t)=>t.map((t,s)=>{const r={key:s,[Md]:!0};return Object.keys(t).forEach(e=>{const s=Pd[e]||e;if("innerHTML"===s||"cssText"===s){const e=t.innerHTML||t.cssText;r.dangerouslySetInnerHTML={__html:e}}else r[s]=t[e]}),f.createElement(e,r)}),Ud=(e,t,s=!0)=>{switch(e){case"title":return{toComponent:()=>((e,t,s)=>{const r=Id(s,{key:t,[Md]:!0});return[f.createElement("title",r,t)]})(0,t.title,t.titleAttributes),toString:()=>$d(e,t.title,t.titleAttributes,s)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>Id(t),toString:()=>Dd(t)};default:return{toComponent:()=>Ld(e,t),toString:()=>((e,t,s=!0)=>t.reduce((t,r)=>{const a=r,n=Object.keys(a).filter(e=>!("innerHTML"===e||"cssText"===e)).reduce((e,t)=>{const r=void 0===a[t]?t:`${t}="${Od(a[t],s)}"`;return e?`${e} ${r}`:r},""),i=a.innerHTML||a.cssText||"",o=-1===Ad.indexOf(e);return`${t}<${e} ${Md}="true" ${n}${o?"/>":`>${i}</${e}>`}`},""))(e,t,s)}}},zd=e=>{const{baseTag:t,bodyAttributes:s,encode:r=!0,htmlAttributes:a,noscriptTags:n,styleTags:i,title:o="",titleAttributes:l,prioritizeSeoTags:c}=e;let{linkTags:d,metaTags:u,scriptTags:h}=e,m={toComponent:()=>{},toString:()=>""};return c&&({priorityMethods:m,linkTags:d,metaTags:u,scriptTags:h}=(({metaTags:e,linkTags:t,scriptTags:s,encode:r})=>{const a=Rd(e,Ed),n=Rd(t,Td),i=Rd(s,Cd);return{priorityMethods:{toComponent:()=>[...Ld("meta",a.priority),...Ld("link",n.priority),...Ld("script",i.priority)],toString:()=>`${Ud("meta",a.priority,r)} ${Ud("link",n.priority,r)} ${Ud("script",i.priority,r)}`},metaTags:a.default,linkTags:n.default,scriptTags:i.default}})(e)),{priority:m,base:Ud("base",t,r),bodyAttributes:Ud("bodyAttributes",s,r),htmlAttributes:Ud("htmlAttributes",a,r),link:Ud("link",d,r),meta:Ud("meta",u,r),noscript:Ud("noscript",n,r),script:Ud("script",h,r),style:Ud("style",i,r),title:Ud("title",{title:o,titleAttributes:l},r)}},qd=[],Bd=!("undefined"==typeof window||!window.document||!window.document.createElement),Wd=class{constructor(e,t){u(this,"instances",[]),u(this,"canUseDOM",Bd),u(this,"context"),u(this,"value",{setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?qd:this.instances,add:e=>{(this.canUseDOM?qd:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?qd:this.instances).indexOf(e);(this.canUseDOM?qd:this.instances).splice(t,1)}}}),this.context=e,this.canUseDOM=t||!1,t||(e.helmet=zd({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},Hd=f.createContext({}),Fd=(e=class extends m.Component{constructor(t){super(t),u(this,"helmetData"),this.helmetData=new Wd(this.props.context||{},e.canUseDOM)}render(){return f.createElement(Hd.Provider,{value:this.helmetData.value},this.props.children)}},u(e,"canUseDOM",Bd),e);function Vd(){return p.jsxs(Fd,{children:[p.jsx(nd,{}),p.jsx(_d,{})]})}pe.createRoot(document.getElementById("root")).render(p.jsx(f.StrictMode,{children:p.jsx(Vd,{})}));export{nl as B,Jc as I,Cs as P,Ms as R,it as a,Qt as c,ot as u};
